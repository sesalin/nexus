{"version":3,"file":"climate.js","sources":["../../../../../src/Cards/EntitiesCard/action-types/climate.tsx"],"sourcesContent":["import styled from \"@emotion/styled\";\nimport { localize, isUnavailableState, OFF, useHass } from \"@hakit/core\";\nimport { CLIMATE_PRESET_NONE } from \"../../../Shared/Entity/Climate/ClimateControls/data\";\nimport { StateProps } from \"./types\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  white-space: nowrap;\n\n  .target,\n  .current {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    gap: 0.25rem;\n    justify-content: flex-end;\n  }\n\n  .target {\n    color: var(--ha-S50-contrast);\n  }\n\n  .current {\n    color: var(--ha-S500-contrast);\n  }\n\n  .state-label {\n    font-weight: bold;\n  }\n\n  .unit {\n  }\n`;\n\nexport default function ClimateState({ entity, className, ...rest }: StateProps) {\n  const isUnavailable = isUnavailableState(entity.state);\n  const formatter = useHass((store) => store.formatter);\n  const _computeCurrentStatus = (): string | undefined => {\n    if (entity.attributes.current_temperature != null && entity.attributes.current_humidity != null) {\n      return `${formatter.attributeValue(entity, \"current_temperature\")}/\n      ${formatter.attributeValue(entity, \"current_humidity\")}`;\n    }\n\n    if (entity.attributes.current_temperature != null) {\n      return formatter.attributeValue(entity, \"current_temperature\");\n    }\n\n    if (entity.attributes.current_humidity != null) {\n      return formatter.attributeValue(entity, \"current_humidity\");\n    }\n\n    return undefined;\n  };\n\n  const _localizeState = (): string => {\n    if (isUnavailable) {\n      return localize(\"unavailable\");\n    }\n\n    const stateString = formatter.stateValue(entity);\n\n    if (entity.attributes.hvac_action && entity.state !== OFF) {\n      const actionString = formatter.attributeValue(entity, \"hvac_action\");\n      return `${actionString} (${stateString})`;\n    }\n\n    return stateString;\n  };\n\n  const _computeTarget = (): string => {\n    if (entity.attributes.target_temp_low != null && entity.attributes.target_temp_high != null) {\n      return `${formatter.attributeValue(entity, \"target_temp_low\")}-${formatter.attributeValue(entity, \"target_temp_high\")}`;\n    }\n\n    if (entity.attributes.temperature != null) {\n      return formatter.attributeValue(entity, \"temperature\");\n    }\n    if (entity.attributes.target_humidity_low != null && entity.attributes.target_humidity_high != null) {\n      return `${formatter.attributeValue(entity, \"target_humidity_low\")}-${formatter.attributeValue(entity, \"target_humidity_high\")}`;\n    }\n\n    if (entity.attributes.humidity != null) {\n      return formatter.attributeValue(entity, \"humidity\");\n    }\n\n    return \"\";\n  };\n\n  const currentStatus = _computeCurrentStatus();\n\n  return (\n    <Wrapper className={`action-type-climate ${className}`} {...rest}>\n      <div className=\"target\">\n        {!isUnavailable ? (\n          <>\n            <span className=\"state-label\">\n              {_localizeState()}\n              {entity.attributes.preset_mode && entity.attributes.preset_mode !== CLIMATE_PRESET_NONE ? (\n                <>- {formatter.attributeValue(entity, \"preset_mode\")}</>\n              ) : null}\n            </span>\n            <div className=\"unit\">{_computeTarget()}</div>\n          </>\n        ) : (\n          _localizeState()\n        )}\n      </div>\n      {currentStatus && !isUnavailable ? (\n        <div className=\"current\">\n          {localize(\"currently\")}:<div className=\"unit\">{currentStatus}</div>\n        </div>\n      ) : null}\n    </Wrapper>\n  );\n}\n"],"names":["Wrapper","_styled","process","env","NODE_ENV","target","label","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","ClimateState","entity","className","rest","isUnavailable","isUnavailableState","state","formatter","useHass","store","_computeCurrentStatus","attributes","current_temperature","current_humidity","attributeValue","_localizeState","localize","stateString","stateValue","hvac_action","OFF","_computeTarget","target_temp_low","target_temp_high","temperature","target_humidity_low","target_humidity_high","humidity","currentStatus","jsx","jsxs","Fragment","preset_mode","CLIMATE_PRESET_NONE"],"mappings":"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"}