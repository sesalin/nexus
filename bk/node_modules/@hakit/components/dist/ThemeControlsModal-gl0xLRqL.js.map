{"version":3,"file":"ThemeControlsModal-gl0xLRqL.js","sources":["../src/hooks/useBreakpoint.ts","../../../node_modules/@emotion/weak-memoize/dist/emotion-weak-memoize.esm.js","../src/Cards/CardBase/index.tsx","../src/Cards/CardBase/RelatedEntity/index.tsx","../src/Cards/CardBase/FeatureEntity/index.tsx","../src/Shared/Tooltip/index.tsx","../src/Shared/ErrorBoundary/index.tsx","../src/Cards/ButtonCard/index.tsx","../src/Shared/RangeSlider/index.tsx","../src/Shared/Ripples/index.tsx","../src/Cards/TriggerCard/index.tsx","../src/Group/index.tsx","../src/Cards/WeatherCard/index.tsx","../src/Cards/WeatherCard/WeatherCardDetail.tsx","../src/Cards/GarbageCollectionCard/garbage-bin.svg?react","../src/Cards/GarbageCollectionCard/index.tsx","../src/Cards/TimeCard/index.tsx","../src/Cards/AreaCard/index.tsx","../src/Cards/VacuumCard/index.tsx","../src/Cards/PictureCard/index.tsx","../src/Cards/FabCard/index.tsx","../src/Cards/FamilyCard/index.tsx","../src/Cards/FamilyCard/PersonCard/index.tsx","../src/Cards/SidebarCard/index.tsx","../src/Shared/Entity/Climate/ClimateControls/ClimateControlSlider.tsx","../src/Shared/Entity/Climate/ClimateControls/ClimateHumiditySlider.tsx","../src/Shared/Entity/Climate/ClimateControls/index.tsx","../src/Shared/Entity/Light/LightControls/color_wheel.png","../src/Shared/Entity/Light/LightControls/index.tsx","../src/Shared/Entity/Alarm/AlarmControls/index.tsx","../src/Shared/Entity/Cover/CoverControls/index.tsx","../src/Cards/MediaPlayerCard/Fab.tsx","../src/Shared/Entity/MediaPlayer/MediaPlayerControls/index.tsx","../src/Shared/Entity/Person/PersonControls/index.tsx","../src/Cards/ClimateCard/index.tsx","../src/Cards/EntitiesCard/index.tsx","../src/Cards/EntitiesCard/EntitiesCardRow.tsx","../src/Cards/MediaPlayerCard/VolumeControls/index.tsx","../src/Cards/MediaPlayerCard/PlaybackControls/index.tsx","../src/Cards/MediaPlayerCard/AlternateControls.tsx","../src/Cards/MediaPlayerCard/index.tsx","../../../node_modules/zustand/esm/vanilla/shallow.mjs","../../../node_modules/zustand/esm/react/shallow.mjs","../src/Cards/CalendarCard/index.tsx","../src/Shared/Entity/Miscellaneous/ButtonBar/index.tsx","../src/Shared/Entity/Miscellaneous/ButtonBar/ButtonBarButton/index.tsx","../src/Shared/Entity/Miscellaneous/ButtonGroup/index.tsx","../src/Shared/Entity/Miscellaneous/ButtonGroup/ButtonGroupButton/index.tsx","../src/Cards/CameraCard/players/hls.tsx","../src/Cards/CameraCard/players/webrtc.tsx","../src/Cards/CameraCard/stream/index.tsx","../src/Cards/CameraCard/index.tsx","../src/Shared/Entity/Miscellaneous/LogBookRenderer/index.tsx","../src/Shared/Modal/index.tsx","../../core/src/utils/computeDomain.ts","../src/Shared/Modal/ModalByEntityDomain/index.tsx","../src/Shared/Entity/Vacuum/VacuumControls/index.tsx","../src/Shared/ControlSlider/index.tsx","../src/Shared/ControlToggle/index.tsx","../src/Shared/ControlSliderCircular/index.tsx","../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../../../node_modules/@floating-ui/react/dist/floating-ui.react.utils.mjs","../../../node_modules/@floating-ui/core/dist/floating-ui.core.mjs","../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../../../node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs","../../../node_modules/@floating-ui/react/dist/floating-ui.react.mjs","../src/Shared/Menu/index.tsx","../src/Shared/Entity/Light/ColorTempPicker/index.tsx","../src/Shared/Entity/Light/ColorPicker/index.tsx","../src/Shared/Entity/Miscellaneous/EntityAttributes/index.tsx","../src/ThemeProvider/index.tsx","../src/ThemeProvider/ThemeControls.tsx","../src/ThemeProvider/ThemeControlsModal.tsx"],"sourcesContent":["import { useEffect, useState, useMemo } from \"react\";\nimport { getBreakpoints, allBreakpoints, type BreakPoint, useThemeStore } from \"@components\";\nimport { useHass } from \"@hakit/core\";\n\n/**\n * @description This hook can be used to programmatically change the layout/content or functionality based on the current breakpoint.\n * This will return an object with all breakpoint key names and their active state.\n *\n * NOTE: If you're running hakit within an iframe, you'll need to update the window context in the HassConnect.options.windowContext property\n *\n * @example\n * ```tsx\n * import { useBreakpoint } from \"@hakit/components\";\n * function SomeComponent() {\n *  const bp = useBreakpoint();\n * return (\n *   <div>\n *     {bp.xxs && <p>Extra small</p>}\n *     {bp.xs && <p>Small</p>}\n *     {bp.sm && <p>Medium</p>}\n *     {bp.md && <p>Large</p>}\n *     {bp.lg && <p>Extra large</p>}\n *   </div>\n *   );\n * }\n *\n * @returns { [key in BreakPoint]: boolean } - Object containing the breakpoint keys and if they're active or not.\n */\nexport function useBreakpoint(): { [key in BreakPoint]: boolean } {\n  const breakpoints = useThemeStore((store) => store.breakpoints);\n  const windowContext = useHass((store) => store.windowContext);\n  const win = windowContext ?? window;\n  const queries = useMemo(() => getBreakpoints(breakpoints), [breakpoints]);\n  const [matches, setMatches] = useState(() => Object.fromEntries(allBreakpoints.map((bp) => [bp, false])) as Record<BreakPoint, boolean>);\n\n  useEffect(() => {\n    const context = win || window;\n    const mqlMap = new Map<BreakPoint, MediaQueryList>();\n\n    const updateMatches = () => {\n      const newMatches = Object.fromEntries(allBreakpoints.map((bp) => [bp, false])) as Record<BreakPoint, boolean>;\n\n      for (const bp of allBreakpoints) {\n        const query = queries[bp];\n        if (typeof query === \"string\") {\n          const mql = mqlMap.get(bp);\n          if (mql?.matches) {\n            newMatches[bp] = true;\n            // Only one should be active at a time, so we can break here\n            break;\n          }\n        }\n      }\n\n      setMatches(newMatches);\n    };\n\n    for (const bp of allBreakpoints) {\n      const query = queries[bp];\n      if (typeof query === \"string\") {\n        const mql = context.matchMedia(query);\n        // when dynamically switch context (windows) the mql will be null\n        // let the next iteration handle the mql\n        if (!mql) continue;\n        mqlMap.set(bp, mql);\n        mql.addEventListener(\"change\", updateMatches);\n      }\n    }\n\n    // Set initial matches\n    updateMatches();\n\n    return () => {\n      for (const mql of mqlMap.values()) {\n        if (!mql) continue;\n        mql.removeEventListener(\"change\", updateMatches);\n      }\n    };\n  }, [queries, win]);\n\n  return matches;\n}\n","var weakMemoize = function weakMemoize(func) {\n  var cache = new WeakMap();\n  return function (arg) {\n    if (cache.has(arg)) {\n      // Use non-null assertion because we just checked that the cache `has` it\n      // This allows us to remove `undefined` from the return value\n      return cache.get(arg);\n    }\n\n    var ret = func(arg);\n    cache.set(arg, ret);\n    return ret;\n  };\n};\n\nexport { weakMemoize as default };\n","import { css } from \"@emotion/react\";\nimport { useLongPress, type LongPressReactEvents } from \"use-long-press\";\nimport { lowerCase, startCase } from \"lodash\";\nimport {\n  memo,\n  useMemo,\n  useId,\n  useState,\n  useCallback,\n  Children,\n  isValidElement,\n  cloneElement,\n  type ReactElement,\n  type ReactNode,\n  CSSProperties,\n  useRef,\n} from \"react\";\nimport {\n  type EntityName,\n  type DomainService,\n  type ExtractDomain,\n  type ServiceData,\n  type HassEntityWithService,\n  type HistoryOptions,\n  computeDomain,\n  isUnavailableState,\n  useEntity,\n  useHass,\n  localize,\n} from \"@hakit/core\";\nimport { CSSInterpolation } from \"@emotion/serialize\";\nimport {\n  ModalByEntityDomain,\n  Ripples,\n  fallback,\n  type RipplesProps,\n  type AvailableQueries,\n  type ModalByEntityDomainProps,\n  type BreakPoint,\n  Alert,\n  SvgGraph,\n  ButtonBar,\n  ButtonBarButton,\n  ButtonBarProps,\n  SvgGraphProps,\n  type RelatedEntity,\n  type RelatedEntityProps,\n} from \"@components\";\nimport { type FeatureEntity, type FeatureEntityProps } from \"./FeatureEntity\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { isValidProp } from \"../../utils/isValidProp\";\nimport styled from \"@emotion/styled\";\nimport { useResizeDetector } from \"react-resize-detector\";\nimport { useResizeDetectorProps } from \"react-resize-detector\";\nimport { SVG_HEIGHT, SVG_WIDTH } from \"../../Shared/SvgGraph/constants\";\n\nconst getBaseElement = <C extends keyof React.JSX.IntrinsicElements = \"div\">(as: C, onlyFunctionality?: boolean) => {\n  if (onlyFunctionality) {\n    return styled(as)``;\n  }\n  return styled(as, {\n    shouldForwardProp: (prop) => isValidProp(prop),\n  })<{\n    disableActiveState: boolean;\n    disabled?: boolean;\n  }>`\n    outline: none;\n    border: 0;\n    box-sizing: border-box;\n    padding: 0;\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    width: 100%;\n    cursor: pointer;\n    background-color: var(--ha-S300);\n    box-shadow: 0px 0px 0px rgba(0, 0, 0, 0);\n    transform: scale(1) translate3d(0, 0, 0);\n    transition: var(--ha-transition-duration) var(--ha-easing);\n    transition-property: transform, background-color, background-image;\n    color: var(--ha-S200-contrast);\n    flex-shrink: 1;\n    user-select: none;\n    svg {\n      color: var(--ha-S200-contrast);\n      transition: color var(--ha-transition-duration) var(--ha-easing);\n    }\n    .graph-element {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    &:not(.disabled):not(:disabled):not(:focus):hover {\n      background-color: var(--ha-S400);\n      color: var(--ha-500-contrast);\n      svg {\n        color: var(--ha-S400-contrast);\n      }\n    }\n    &:disabled,\n    &.disabled {\n      cursor: not-allowed;\n      opacity: 0.8;\n    }\n    &.card-base-active:active:not(.disable-scale-effect):not(.disabled):not(.unavailable) {\n      transform: scale(0.9) translate3d(0, 0, 0);\n    }\n    ${(props) =>\n      !props.disableActiveState &&\n      `\n      &.active, &:active {\n        background-color: var(--ha-A400);\n        color: var(--ha-900-contrast);\n        svg {\n          color: var(--ha-900-contrast);\n        }\n        &:not(:disabled):not(.disabled):hover {\n          background-color: var(--ha-A700);\n          color: var(--ha-900-contrast);\n        }\n      }\n    `}\n  `;\n};\n\nconst StyledRipples = styled((props: RipplesProps) => <Ripples {...props} />)`\n  flex-shrink: 1;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Trigger = styled.div`\n  width: 100%;\n  height: 100%;\n  &:has(.features) {\n    display: flex;\n    flex-direction: column;\n  }\n  > .features {\n    padding: 0 1rem 1rem;\n    > .fit-content > .button-group-inner > * {\n      width: auto;\n      flex-grow: 1;\n      > .button-bar-button {\n        width: auto;\n        flex-grow: 1;\n      }\n    }\n  }\n`;\n\ntype Extendable<T extends keyof React.JSX.IntrinsicElements> = Omit<\n  React.ComponentPropsWithRef<T>,\n  \"onClick\" | \"disabled\" | \"title\" | \"children\" | \"active\"\n>;\n\n// Define the allowed children types\ntype AllowedFeaturedEntity = ReactElement<typeof FeatureEntity> | false | null | undefined;\ntype AllowedFeaturedEntities = AllowedFeaturedEntity | AllowedFeaturedEntity[];\n\n// Define the allowed children types\ntype AllowedRelatedEntity = ReactElement<typeof RelatedEntity> | false | null | undefined;\ntype AllowedRelatedEntities = AllowedRelatedEntity | AllowedRelatedEntity[];\n\nexport type CardBaseProps<T extends keyof React.JSX.IntrinsicElements = \"div\", E extends EntityName = EntityName> = Extendable<T> &\n  AvailableQueries & {\n    /** convert the component type to something else @default \"div\" */\n    as?: T;\n    /** children to render alongside the card */\n    children?: ReactNode;\n    /** should the card be disabled, this will disable any click events, service calls and scale effects */\n    disabled?: boolean;\n    /** Optional active param, By default this is updated via home assistant  @default undefined */\n    active?: boolean;\n    /** By default, the title is retrieved from the domain name, or you can specify a manual title @default undefined */\n    title?: ReactNode;\n    /** The name of your entity */\n    entity?: E;\n    /** The service name to call */\n    service?: DomainService<ExtractDomain<E>>;\n    /** The data to pass to the service */\n    serviceData?: ServiceData<ExtractDomain<E>, DomainService<ExtractDomain<E>>>;\n    /** allows you to place a fully functional and interactive element at predefined zones of the card, like displaying an icon in the top left which might be a sensor indicating battery level */\n    relatedEntities?: AllowedRelatedEntities;\n    /** provide a FeatureEntity component as a list or individual components to render a bar at the bottom of the card */\n    features?: AllowedFeaturedEntities;\n    /** props to pass to the feature bar */\n    featureBarProps?: Omit<ButtonBarProps, \"children\">;\n    /** callback to fire after a long press event */\n    longPressCallback?: E extends undefined\n      ? (entity: null, event: LongPressReactEvents) => void\n      : (entity: HassEntityWithService<ExtractDomain<E>>, event: LongPressReactEvents) => void;\n    /** The onClick handler is called when the card is pressed, the first argument will be entity object with api methods if entity is provided  */\n    /** The onClick handler is called when the button is pressed, the first argument will be entity object with api methods if entity is provided  */\n    onClick?: E extends undefined\n      ? (entity: null, event: React.MouseEvent<HTMLElement>) => void\n      : (entity: HassEntityWithService<ExtractDomain<E>>, event: React.MouseEvent<HTMLElement>) => void;\n    /** disable the modal opening functionality @default false */\n    disableModal?: boolean;\n    /** props to pass to the modal */\n    modalProps?: Partial<ModalByEntityDomainProps<E>>;\n    /** include ripples or not */\n    disableRipples?: boolean;\n    /** disable the scale effect on the card when clicked */\n    disableScale?: boolean;\n    /** disable the styles of the card when in the active state */\n    disableActiveState?: boolean;\n    /** This also controls the animated modal border-radius, update the border radius of the card @default \"16px\" */\n    borderRadius?: CSSProperties[\"borderRadius\"];\n    /** completely disable the automated column sizes, this will default to whatever width is provided by the user or the card @default false */\n    disableColumns?: boolean;\n    /** props to pass to the ripple component if enabled */\n    rippleProps?: Omit<RipplesProps, \"children\">;\n    /** className to provide to the trigger element */\n    triggerClass?: string;\n    /** the graph settings containing the entity to display a graph in the background of the card */\n    graph?: {\n      /** the entity to display the graph for */\n      entity: EntityName;\n      /** the props to pass to the svg graph, control the styles and colors of the graph from here */\n      props?: SvgGraphProps;\n      /** the space at the bottom of the card is automatically calculated by the available height, you can adjust this by manipulating the value here @default 0px */\n      adjustGraphSpaceBy?: CSSProperties[\"paddingBottom\"];\n      /** options to pass to the history request */\n      historyOptions?: HistoryOptions;\n    };\n    /**\n     *\n     * A css string to update the card, this is similar to how you'd write scss.\n     *\n     * ```jsx\n     * export const MyComponent = (otherProps) => {\n     *   return <SomeCard cssStyles={`\n     *     color: var(--ha-900-contrast);\n     *    .some-selector {\n     *        &:hover {\n     *            background-color: var(--ha-A400);\n     *        }\n     *    }\n     * `} {...otherProps} />\n     * }\n     * ```\n     */\n    cssStyles?: CSSInterpolation;\n    /** remove all base styles of the card and just use the inbuilt functionality */\n    onlyFunctionality?: boolean;\n    /** props to pass to the resize detector, this is useful if you want to trigger something whenever the card resizes */\n    resizeDetectorProps?: useResizeDetectorProps<HTMLElement>;\n    /** ref callback to get the reference to the card element */\n    refCallback?: (ref: React.RefObject<HTMLElement | null>) => void;\n  };\n\nconst DEFAULT_SIZES: Required<AvailableQueries> = {\n  xxs: 12,\n  xs: 6,\n  sm: 6,\n  md: 4,\n  lg: 4,\n  xlg: 3,\n};\n\nconst CardBaseInternal = function CardBase<T extends keyof React.JSX.IntrinsicElements = \"div\", E extends EntityName = EntityName>({\n  as = \"div\" as T,\n  entity: _entity,\n  title: _title,\n  active,\n  service,\n  serviceData,\n  children,\n  disabled,\n  longPressCallback,\n  onClick,\n  disableModal = false,\n  modalProps,\n  disableRipples = false,\n  disableScale = false,\n  disableActiveState = false,\n  onlyFunctionality = false,\n  id,\n  className,\n  cssStyles,\n  style,\n  borderRadius = \"16px\",\n  rippleProps,\n  disableColumns,\n  refCallback,\n  key,\n  relatedEntities,\n  features,\n  featureBarProps,\n  graph,\n  resizeDetectorProps,\n  triggerClass,\n  ...rest\n}: CardBaseProps<T, E>): ReactElement<T> {\n  const _id = useId();\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const [openModal, setOpenModal] = useState(false);\n  const domain = _entity ? computeDomain(_entity) : null;\n  const entity = useEntity(_entity ?? \"unknown\", {\n    returnNullIfNotFound: true,\n  });\n  const internalRef = useRef<HTMLDivElement | null>(null);\n  // useful so users can subscribe to the resize event\n  const { width = 0 } = useResizeDetector({\n    refreshMode: \"debounce\",\n    refreshRate: 50,\n    handleHeight: false,\n    skipOnMount: false,\n    targetRef: internalRef,\n    ...(resizeDetectorProps ?? {}),\n  });\n  const graphEntity = useEntity(graph?.entity ?? \"unknown\", {\n    returnNullIfNotFound: true,\n    historyOptions: {\n      disable: false,\n      ...graph?.historyOptions,\n    },\n  });\n  const isUnavailable = useMemo(() => (typeof entity?.state === \"string\" ? isUnavailableState(entity.state) : false), [entity?.state]);\n  const _borderRadius = borderRadius;\n  const StyledElement = useMemo(() => getBaseElement(as as \"div\", onlyFunctionality), [as, onlyFunctionality]);\n  const bind = useLongPress<HTMLDivElement>(\n    (e) => {\n      if (typeof longPressCallback === \"function\") {\n        if (entity !== null) {\n          // we don't know the types at this level, but they will be correct at the parent level\n          longPressCallback(entity as never, e);\n        } else {\n          longPressCallback(null as never, e);\n        }\n      }\n      if (typeof _entity === \"string\" && !openModal && !disableModal) {\n        setOpenModal(true);\n      }\n      internalRef.current?.classList.remove(\"card-base-active\");\n    },\n    {\n      threshold: 300,\n      cancelOnMovement: true,\n      cancelOutsideElement: true,\n      filterEvents(e) {\n        return !(\"button\" in e && e.button === 2);\n      },\n    },\n  );\n  const onClickHandler = useCallback(\n    (event: React.MouseEvent<HTMLDivElement>) => {\n      if (disabled) return;\n      // so we can expect it to throw errors however the parent level ts validation will catch invalid params.\n      if (typeof service === \"string\" && entity && !isUnavailable) {\n        // @ts-expect-error - we don't actually know the service at this level\n        const caller = entity.service[service];\n        caller(serviceData);\n      }\n      if (typeof onClick === \"function\") {\n        if (entity !== null) {\n          // we don't know the types at this level, but they will be correct at the parent level\n          onClick(entity as never, event);\n        } else {\n          onClick(null as never, event);\n        }\n      }\n    },\n    [service, disabled, entity, serviceData, onClick, isUnavailable],\n  );\n  // use the input title if provided, else use the domain if available, else null\n  const title = useMemo(\n    () => _title || entity?.attributes?.friendly_name || (domain !== null ? startCase(lowerCase(domain)) : null),\n    [_title, entity, domain],\n  );\n\n  const columnClassNames = useMemo(() => {\n    const mergedGrids = Object.entries(DEFAULT_SIZES).reduce<Required<AvailableQueries>>((acc, [key, value]) => {\n      const inputValue = rest[key as BreakPoint];\n      return {\n        ...acc,\n        [key]: inputValue ?? value,\n      };\n    }, DEFAULT_SIZES);\n    return Object.entries(mergedGrids)\n      .map(([key, value]) => `${key}-${value}`)\n      .join(\" \");\n    // this is okay, we only want this effect to re-run when the breakpoints change not the entire prop object\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [rest.xxs, rest.xs, rest.sm, rest.md, rest.lg, rest.xlg]);\n\n  const filteredRelatedEntities = Children.toArray(relatedEntities).filter((child): child is ReactElement<typeof ButtonBarButton> =>\n    isValidElement(child),\n  );\n  const filteredFeaturedEntities = Children.toArray(features).filter((child): child is ReactElement<typeof ButtonBarButton> =>\n    isValidElement(child),\n  );\n\n  const featuredElements = Children.map(filteredFeaturedEntities, (child, index) => {\n    if (isValidElement<FeatureEntityProps<EntityName>>(child)) {\n      return cloneElement(child, {\n        key: child.key || `${_id}${index}`,\n        ...child.props,\n      });\n    }\n    return child;\n  });\n  const hasFeatures = filteredFeaturedEntities.length > 0;\n  const featureBar = hasFeatures && (\n    <ButtonBar layoutType=\"bubble\" className=\"features\" fullWidth gap=\"0.5rem\" {...featureBarProps}>\n      {featuredElements}\n    </ButtonBar>\n  );\n\n  function calculateSvgHeight(parentWidth: number): CSSProperties[\"paddingBottom\"] {\n    const aspectRatio = SVG_WIDTH / SVG_HEIGHT;\n    return `calc(${parentWidth / aspectRatio}px - ${graph?.adjustGraphSpaceBy ?? \"0px\"});`;\n  }\n\n  const svgHeight = calculateSvgHeight(width);\n\n  const _classes = useMemo(() => {\n    return [\n      \"card-base\",\n      className ?? \"\",\n      disableColumns ? \"\" : columnClassNames,\n      disableScale ? \"disable-scale-effect\" : \"\",\n      active ? \"active\" : \"\",\n      isUnavailable ? \"unavailable\" : \"\",\n      disabled || isUnavailable ? \"disabled\" : \"\",\n      hasFeatures ? \"has-features\" : \"\",\n      graphEntity ? \"has-graph\" : \"\",\n    ]\n      .filter((x) => !!x)\n      .join(\" \");\n  }, [active, className, columnClassNames, disableScale, disableColumns, disabled, graphEntity, hasFeatures, isUnavailable]);\n\n  const handlePointerDown = () => {\n    internalRef.current?.classList.add(\"card-base-active\");\n  };\n\n  const handlePointerUp = () => {\n    internalRef.current?.classList.remove(\"card-base-active\");\n  };\n\n  return (\n    <>\n      <StyledElement\n        key={key}\n        ref={(ref) => {\n          internalRef.current = ref;\n          if (refCallback) {\n            refCallback(internalRef);\n          }\n        }}\n        id={id ?? \"\"}\n        className={_classes}\n        css={css`\n          padding-bottom: ${graphEntity ? svgHeight : \"inherit\"};\n          ${globalComponentStyle.cardBase ?? \"\"}\n          ${cssStyles ?? \"\"}\n        `}\n        style={{\n          ...(style ?? {}),\n          borderRadius: _borderRadius,\n        }}\n        disableActiveState={disableActiveState}\n        disabled={isUnavailable || disabled}\n        {...bind()}\n        {...(rest as unknown as React.HTMLAttributes<HTMLDivElement>)}\n      >\n        {graphEntity && (\n          <div className={\"graph-element history\"}>\n            {graphEntity.history.loading ? (\n              <Alert className={\"loading\"} description={localize(\"loading\")} />\n            ) : graphEntity.history.coordinates.length > 0 ? (\n              <SvgGraph coordinates={graphEntity.history.coordinates} {...graph?.props} />\n            ) : (\n              <Alert className={\"no-state-history\"} description={localize(\"no_state_history_found\")} />\n            )}\n          </div>\n        )}\n        {disableRipples ? (\n          <Trigger\n            className={`contents trigger-element ${triggerClass}`}\n            onClick={onClickHandler}\n            onPointerDown={handlePointerDown}\n            onPointerUp={handlePointerUp}\n          >\n            {children}\n            {featureBar}\n          </Trigger>\n        ) : (\n          <StyledRipples {...rippleProps} key={rippleProps?.key} borderRadius={_borderRadius} disabled={disabled || isUnavailable}>\n            <Trigger\n              className={`contents trigger-element ${triggerClass}`}\n              onClick={onClickHandler}\n              onPointerDown={handlePointerDown}\n              onPointerUp={handlePointerUp}\n            >\n              {children}\n              {featureBar}\n            </Trigger>\n          </StyledRipples>\n        )}\n        {Children.map(filteredRelatedEntities, (child, index) => {\n          if (isValidElement<RelatedEntityProps<EntityName>>(child)) {\n            return cloneElement(child, {\n              key: child.key || `${_id}${index}`,\n              ...child.props,\n            });\n          }\n          return child;\n        })}\n      </StyledElement>\n      {typeof _entity === \"string\" && (\n        <ModalByEntityDomain\n          {...modalProps}\n          entity={_entity as EntityName}\n          title={modalProps?.title ?? title ?? localize(\"unknown\")}\n          onClose={() => {\n            setOpenModal(false);\n            if (modalProps?.onClose) {\n              modalProps.onClose();\n            }\n          }}\n          open={modalProps?.open || openModal}\n          id={_id}\n        />\n      )}\n    </>\n  );\n};\n\n/**\n * This is the base card component that every other card component should extend, it comes with everything we need to be able to replicate functionality\n * like the modal popup, ripples and more.\n *\n * You can use this if you want an empty shell of a component that you can build on top of.\n * */\nexport const CardBase = memo(function CardBase<T extends keyof React.JSX.IntrinsicElements = \"div\", E extends EntityName = EntityName>(\n  props: CardBaseProps<T, E>,\n) {\n  return <ErrorBoundary {...fallback({ prefix: \"CardBase\" })}>{CardBaseInternal<T, E>(props)}</ErrorBoundary>;\n});\n","import styled from \"@emotion/styled\";\nimport { memo, useCallback, useMemo, type ReactNode, type CSSProperties } from \"react\";\nimport {\n  type EntityName,\n  type ExtractDomain,\n  type HassEntityWithService,\n  type DomainService,\n  type ServiceData,\n  isUnavailableState,\n  computeDomain,\n  useEntity,\n  useIconByDomain,\n  useIconByEntity,\n  useIcon,\n} from \"@hakit/core\";\nimport { fallback } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { type IconProps } from \"@iconify/react\";\n\ntype Position =\n  | \"left top\"\n  | \"left center\"\n  | \"left bottom\"\n  | \"center top\"\n  | \"center center\"\n  | \"center bottom\"\n  | \"right top\"\n  | \"right center\"\n  | \"right bottom\";\n\nexport interface RelatedEntityProps<E extends EntityName = EntityName> extends Omit<React.ComponentPropsWithoutRef<\"div\">, \"onClick\"> {\n  /** The name of the entity */\n  entity: E;\n  /** The service name to call */\n  service?: DomainService<ExtractDomain<E>>;\n  /** The data to pass to the service */\n  serviceData?: ServiceData<ExtractDomain<E>, DomainService<ExtractDomain<E>>>;\n  /** overwrite the default for the entity */\n  icon?: string;\n  /** properties for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** the position of the entity element, @default \"top left\" */\n  position?: Position;\n  /** should the element be disabled or not which will block the click events @default false */\n  disabled?: boolean;\n  /** custom render method for the element, this will replace any default children of this component */\n  render?: (entity: HassEntityWithService<ExtractDomain<E>>, icon: ReactNode | null) => ReactNode;\n  /** margin for the custom element @default 1rem */\n  margin?: CSSProperties[\"margin\"];\n  /** padding for the custom element @default 0 */\n  padding?: CSSProperties[\"padding\"];\n  /** The onClick handler is called when the button is pressed, the first argument will be entity object with api methods if entity is provided  */\n  onClick?: (entity: HassEntityWithService<ExtractDomain<E>>, event: React.MouseEvent<HTMLElement>) => void;\n}\n\ntype PartialStyleProps = Pick<RelatedEntityProps<EntityName>, \"position\" | \"padding\" | \"margin\">;\n\nconst RelatedEntityEl = styled.div<PartialStyleProps>`\n  position: absolute;\n  margin: ${(props) => props.margin || \"1rem\"};\n  padding: ${(props) => props.padding || \"0\"};\n  cursor: ${(props) => (props.onClick ? \"pointer\" : \"default\")};\n  ${(props) => {\n    switch (props.position) {\n      case \"left top\":\n        return `top: 0; left: 0;`;\n      case \"left center\":\n        return `top: 50%; left: 0; transform: translateY(-50%);`;\n      case \"left bottom\":\n        return `bottom: 0; left: 0;`;\n      case \"center top\":\n        return `top: 0; left: 50%; transform: translateX(-50%);`;\n      case \"center center\":\n        return `top: 50%; left: 50%; transform: translate(-50%, -50%);`;\n      case \"center bottom\":\n        return `bottom: 0; left: 50%; transform: translateX(-50%);`;\n      case \"right top\":\n        return `top: 0; right: 0;`;\n      case \"right center\":\n        return `top: 50%; right: 0; transform: translateY(-50%);`;\n      case \"right bottom\":\n        return `bottom: 0; right: 0;`;\n      default:\n        return `top: 0; right: 0;`;\n    }\n  }}\n`;\n\nfunction InternalRelatedEntity<E extends EntityName>({\n  entity: _entity,\n  icon: _icon,\n  iconProps,\n  render,\n  position,\n  onClick,\n  disabled,\n  service,\n  serviceData,\n  ...rest\n}: RelatedEntityProps<E>) {\n  const entity = useEntity(_entity);\n  const iconElement = useIcon(_icon ?? null, iconProps);\n  const domain = computeDomain(_entity);\n  const domainIcon = useIconByDomain(domain === null ? \"unknown\" : domain, iconProps);\n  const entityIcon = useIconByEntity(_entity || \"unknown\", iconProps);\n  const icon = iconElement ?? entityIcon ?? domainIcon;\n  const isUnavailable = useMemo(() => (typeof entity?.state === \"string\" ? isUnavailableState(entity.state) : false), [entity?.state]);\n  const onClickHandler = useCallback(\n    (event: React.MouseEvent<HTMLElement>) => {\n      if (disabled) return;\n      // so we can expect it to throw errors however the parent level ts validation will catch invalid params.\n      if (typeof service === \"string\" && entity && !isUnavailable) {\n        // @ts-expect-error - we don't actually know the service at this level\n        const caller = entity.service[service];\n        caller(serviceData);\n      }\n      if (typeof onClick === \"function\") {\n        if (entity !== null) {\n          // we don't know the types at this level, but they will be correct at the parent level\n          onClick(entity as never, event);\n        } else {\n          onClick(null as never, event);\n        }\n      }\n    },\n    [service, disabled, entity, serviceData, onClick, isUnavailable],\n  );\n  return (\n    <RelatedEntityEl position={position} onClick={onClickHandler} {...rest}>\n      {render ? render(entity, icon) : <>{icon}</>}\n    </RelatedEntityEl>\n  );\n}\n\n/**\n * This can be used within the `relatedEntities` prop for any card that extends CardBase where you can place icons/elements in predefined positions across the card with full control over style/positions/rendering capabilities, click actions and more.\n * Each individual related entity can have clickable actions, stylable and more.\n * This would be useful to show an icon for an entity to indicate it's battery level or state.\n * */\nexport const RelatedEntity = memo(function RelatedEntity<E extends EntityName>(props: RelatedEntityProps<E>) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"RelatedEntity\" })}>\n      <InternalRelatedEntity {...props} />\n    </ErrorBoundary>\n  );\n});\n","import { type EntityName } from \"@hakit/core\";\nimport { fallback, ButtonBarButton, type ButtonBarButtonProps } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nexport type FeatureEntityProps<E extends EntityName = EntityName> = ButtonBarButtonProps<E>;\n\nfunction _FeatureEntity<E extends EntityName>({ children, active, ...rest }: ButtonBarButtonProps<E>) {\n  return (\n    <ButtonBarButton\n      // @ts-expect-error - will need to fix this typescript problem later\n      as=\"div\"\n      rippleProps={{\n        preventPropagation: true,\n      }}\n      active={active}\n      cssStyles={`\n        &.button-bar-button {\n          .contents {\n            > div {\n              padding: 0.6rem;\n            }\n          }\n        }\n      `}\n      {...rest}\n    >\n      {children}\n    </ButtonBarButton>\n  );\n}\n\n/**\n * This can be used within the `features` prop for any card that extends CardBase where you can place actions at the bottom of every card allowing you to replace similar functionality of the \"features\" option within home assistant.\n * */\nexport const FeatureEntity = function FeatureEntity<E extends EntityName>(props: ButtonBarButtonProps<E>) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"FeatureEntity\" })}>\n      <_FeatureEntity {...props} />\n    </ErrorBoundary>\n  );\n};\n","import { useRef, useCallback, Children, isValidElement, cloneElement, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled from \"@emotion/styled\";\nimport { fallback } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { useHass } from \"@hakit/core\";\n\nconst TooltipSpan = styled.span<Pick<TooltipProps, \"placement\">>`\n  position: fixed;\n  top: 0;\n  left: 0;\n  background-color: var(--ha-S300);\n  color: var(--ha-S100-contrast);\n  padding: 8px;\n  border-radius: 4px;\n  box-shadow: 0px 2px 4px var(--ha-S100);\n  font-size: 0.9rem;\n  z-index: 1000;\n  visibility: hidden;\n  opacity: 0;\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: opacity, visibility;\n  pointer-events: none;\n  transform: ${(props) => {\n    switch (props.placement) {\n      default:\n      case \"top\":\n        return \"translateY(calc(-100% - 10px)) translateX(-50%)\";\n      case \"right\":\n        return \"translateX(10px) translateY(-50%)\";\n      case \"bottom\":\n        return \"translateY(10px) translateX(-50%)\";\n      case \"left\":\n        return \"translateX(calc(-100% - 10px)) translateY(-50%)\";\n    }\n  }};\n  &::before {\n    content: \"\";\n    position: absolute;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    display: block;\n    ${(props) => {\n      switch (props.placement) {\n        default:\n        case \"top\":\n          return `\n            border-width: 6px 6px 0 6px;\n            border-color: var(--ha-S300) transparent transparent transparent;\n            top: 100%;\n            left: 50%;\n            transform: translateX(-50%);\n          `;\n        case \"right\":\n          return `\n            border-width: 6px 6px 6px 0;\n            border-color: transparent var(--ha-S300) transparent transparent;\n            left: 0;\n            top: 50%;\n            transform: translate(-100%, -50%);\n          `;\n        case \"bottom\":\n          return `\n            border-width: 0 6px 6px 6px;\n            border-color: transparent transparent var(--ha-S300) transparent;\n            bottom: 100%;\n            left: 50%;\n            transform: translateX(-50%);\n          `;\n        case \"left\":\n          return `\n            border-width: 6px 0 6px 6px;\n            border-color: transparent transparent transparent var(--ha-S300);\n            right: 0;\n            top: 50%;\n            transform: translate(100%, -50%);\n          `;\n      }\n    }};\n  }\n`;\n\nexport interface TooltipProps extends Omit<React.ComponentPropsWithRef<\"div\">, \"title\"> {\n  /** the placement of the tooltip @default 'top' */\n  placement?: \"top\" | \"right\" | \"bottom\" | \"left\";\n  /** the title of the tooltip */\n  title?: React.ReactNode | null;\n  /** the children of the tooltip */\n  children: React.ReactNode;\n}\n\nfunction InternalTooltip({ placement = \"top\", title = null, children, ref, ...rest }: TooltipProps) {\n  const tooltipRef = useRef<HTMLSpanElement | null>(null);\n  const childRef = useRef<HTMLDivElement | null>(null);\n  const portalRoot = useHass((store) => store.portalRoot);\n  const windowContext = useHass((store) => store.windowContext);\n  const win = windowContext ?? window;\n  const [show, setShow] = useState(false);\n\n  const calculatePosition = useCallback(\n    (el: HTMLSpanElement) => {\n      const childRect = childRef.current?.getBoundingClientRect();\n      if (typeof childRect === \"undefined\") return;\n      let top = 0;\n      let left = 0;\n      switch (placement) {\n        case \"top\":\n          top = childRect.top;\n          left = childRect.left + childRect.width / 2;\n          break;\n        case \"right\":\n          top = childRect.top + childRect.height / 2;\n          left = childRect.right;\n          break;\n        case \"bottom\":\n          top = childRect.bottom;\n          left = childRect.left + childRect.width / 2;\n          break;\n        case \"left\":\n          top = childRect.top + childRect.height / 2;\n          left = childRect.left;\n          break;\n      }\n      el.style.top = `${top}px`;\n      el.style.left = `${left}px`;\n      // to ensure animations play out, we need to update these values after the next tick\n      setTimeout(() => {\n        el.style.opacity = \"1\";\n        el.style.visibility = \"visible\";\n      }, 0);\n    },\n    [placement],\n  );\n\n  const handleMouseEnter = useCallback(() => {\n    setShow(true);\n  }, []);\n\n  const handleHide = useCallback(() => {\n    const tooltipEl = tooltipRef.current;\n    if (!tooltipEl) return;\n    tooltipEl.style.opacity = \"0\";\n    tooltipEl.style.visibility = \"hidden\";\n    tooltipEl.setAttribute(\"aria-hidden\", \"true\");\n    setTimeout(() => {\n      setShow(false);\n    }, 250);\n  }, []);\n\n  if (title === null || title === \"\") {\n    return children;\n  }\n\n  return (\n    <div\n      ref={childRef}\n      onBlur={handleHide}\n      onTouchEnd={handleHide}\n      onTouchStart={handleMouseEnter}\n      onMouseUp={handleHide}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleHide}\n      {...rest}\n    >\n      {Children.map(children, (child, index) => {\n        if (\n          isValidElement<\n            Omit<React.ComponentPropsWithRef<\"div\">, \"onClick\"> & {\n              onClick: (unknown: null, event: React.MouseEvent<HTMLDivElement>) => void;\n            }\n          >(child)\n        ) {\n          return cloneElement(child, {\n            ...child.props,\n            onClick(_unknown: null, event: React.MouseEvent<HTMLDivElement>) {\n              child.props.onClick?.(_unknown, event);\n              rest?.onClick?.(event);\n            },\n            ref,\n            key: child.key ?? index,\n          });\n        }\n        return child;\n      })}\n      {typeof document !== \"undefined\" &&\n        createPortal(\n          show && (\n            <TooltipSpan\n              className=\"tooltip-inner\"\n              placement={placement}\n              ref={(ref) => {\n                if (ref) {\n                  tooltipRef.current = ref;\n                  calculatePosition(ref);\n                }\n              }}\n              aria-hidden=\"false\"\n            >\n              {title}\n            </TooltipSpan>\n          ),\n          portalRoot ?? win.document.body,\n        )}\n    </div>\n  );\n}\n\n/** Tooltip is a simplified component similar to material ui's Tooltip component, simply wrap any element in the Tooltip and provide a title as either ReactNode or string, and it will render the tooltip on hover, if you want to conditionally render a tooltip, simply set the title to either null or an empty string */\nexport function Tooltip(props: TooltipProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"Tooltip\" })}>\n      <InternalTooltip {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { type ErrorBoundaryProps } from \"react-error-boundary\";\nimport { Alert } from \"@components\";\nimport { localize } from \"@hakit/core\";\n\ninterface Fallback {\n  prefix?: string;\n}\n\nexport const fallback = ({ prefix }: Fallback): ErrorBoundaryProps => ({\n  fallbackRender({ error, resetErrorBoundary }) {\n    return (\n      <Alert\n        className={`error-boundary-alert`}\n        title={`${prefix ? `${prefix} - ` : \"\"}${localize(\"unknown_error\")}`}\n        description={error.message}\n        type=\"error\"\n        onClick={() => resetErrorBoundary()}\n      />\n    );\n  },\n});\n","import { useMemo, Children, isValidElement, ReactNode } from \"react\";\nimport styled from \"@emotion/styled\";\nimport {\n  localize,\n  useEntity,\n  useHass,\n  useIconByDomain,\n  useIcon,\n  useIconByEntity,\n  isUnavailableState,\n  ON,\n  OFF,\n  computeDomain,\n  type HassEntityWithService,\n  type ExtractDomain,\n  type EntityName,\n} from \"@hakit/core\";\nimport { type IconProps } from \"@iconify/react\";\nimport { fallback, Column, CardBase, type CardBaseProps, type AvailableQueries } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst StyledButtonCard = styled(CardBase)`\n  &.slim {\n    justify-content: center;\n    .fab-card-inner {\n      width: 3rem;\n      height: 3rem;\n    }\n    .button-card-trigger {\n      align-items: center;\n      > .contents {\n        width: 100%;\n      }\n    }\n  }\n  .button-card-trigger > .features {\n    width: 100%;\n  }\n  .button-card-trigger > .features > .fit-content {\n    flex-basis: 100%;\n  }\n  .children {\n    width: 100%;\n  }\n  &.slim-vertical {\n    justify-content: center;\n    .fab-card-inner {\n      width: 3rem;\n      height: 3rem;\n    }\n    .button-card-trigger {\n      align-items: center;\n    }\n  }\n  .footer > .title {\n    text-align: left;\n  }\n  &:not(.disabled),\n  &:not(:disabled) {\n    &:not(:focus):hover {\n      .fab-card-inner:not(.custom) {\n        background-color: var(--ha-S500);\n        color: var(--ha-S500-contrast);\n      }\n    }\n  }\n`;\n\nconst Contents = styled.div`\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: stretch;\n  height: 100%;\n`;\n\ninterface ToggleProps {\n  active: boolean;\n}\n\nconst ToggleState = styled.div<ToggleProps>`\n  background-color: var(--ha-100);\n  border-radius: 100%;\n  width: 16px;\n  height: 16px;\n  position: absolute;\n  top: 2px;\n  left: 0;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.5);\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: left, transform;\n  left: ${(props) => (props.active ? \"100%\" : \"0px\")};\n  transform: ${(props) => (props.active ? \"translate3d(calc(-100% - 2px), 0, 0)\" : \"translate3d(calc(0% + 2px), 0, 0)\")};\n`;\n\nconst Toggle = styled.div<ToggleProps>`\n  position: relative;\n  background-color: ${(props) => (props.active ? \"var(--ha-A400)\" : \"var(--ha-S100)\")};\n  border-radius: 10px;\n  width: 40px;\n  height: 20px;\n  flex-grow: 0;\n  flex-shrink: 0;\n  transition: background-color var(--ha-transition-duration) var(--ha-easing);\n  margin-left: 20px;\n`;\n\nconst Fab = styled.div<\n  React.ComponentProps<\"div\"> & {\n    brightness: string;\n  }\n>`\n  border-radius: 100%;\n  padding: 6px;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.2);\n  ${(props) =>\n    props.brightness &&\n    `\n    filter: ${props.brightness};\n  `}\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: background-color, color, filter;\n  svg {\n    transition: var(--ha-transition-duration) var(--ha-easing);\n    transition-property: color;\n  }\n`;\n\nconst LayoutBetween = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: row;\n  gap: 10px;\n  width: 100%;\n  &.vertical {\n    flex-direction: column;\n    height: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  flex-direction: column;\n  margin-top: 20px;\n  width: 100%;\n`;\n\nconst Title = styled.div`\n  color: var(--ha-S100-contrast);\n  font-size: 0.9rem;\n  font-weight: bold;\n  margin-bottom: 0.25rem;\n`;\n\nconst Description = styled.div`\n  color: var(--ha-S300-contrast);\n  font-size: 0.7rem;\n  margin: 2px 0;\n  text-align: left;\n  width: 100%;\n  &.center {\n    text-align: center;\n  }\n  &.secondary {\n    color: var(--ha-S500-contrast);\n  }\n  &.slim-vertical {\n    text-align: center;\n  }\n`;\n\ntype OmitProperties = \"as\" | \"children\" | \"ref\" | \"description\";\n\nexport interface ButtonCardProps<E extends EntityName> extends Omit<CardBaseProps<\"button\", E>, OmitProperties> {\n  /** Optional icon param, this is automatically retrieved by the \"domain\" name if provided, or can be overwritten with a custom value, provide a string with the name of the icon, or a custom icon by providing a react node  */\n  icon?: ReactNode | null;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** the props to provide to the Fab element within the card, useful if you want to re-style it */\n  fabProps?: React.ComponentProps<\"div\">;\n  /** By default, the title is retrieved from the friendly name of the entity, or you can specify a manual title */\n  title?: ReactNode | null;\n  /** The description will naturally fall under the title, by default it will show the information of the entity like the state */\n  description?: ReactNode | null;\n  /** The layout of the button card, mimics the style of HA mushroom cards in slim/slim-vertical @default \"default\" */\n  layoutType?: \"default\" | \"slim\" | \"slim-vertical\";\n  /** custom method to render the state however you choose, this will just change how the \"suffix\" of the title will appear */\n  customRenderState?: (entity: HassEntityWithService<ExtractDomain<E>>) => ReactNode;\n  /** hide the icon shown in the component @default false */\n  hideIcon?: boolean;\n  /** Hide the state value @default false */\n  hideState?: boolean;\n  /** Hide the last updated time @default false */\n  hideLastUpdated?: boolean;\n  /** This forces hideState, hideLastUpdated and will only show the entity name / description prop @default false */\n  hideDetails?: boolean;\n  /** Will hide the \"toggle\" element shown in the default layout @default false */\n  hideToggle?: boolean;\n  /** The children to render at the bottom of the card */\n  children?: React.ReactNode;\n  /** Separator rendered between description and state when both exist. Can be any React node. @default '-' */\n  descriptionSeparator?: React.ReactNode;\n}\nfunction InternalButtonCard<E extends EntityName>({\n  entity: _entity,\n  service,\n  serviceData,\n  iconProps,\n  icon: _icon,\n  fabProps,\n  active,\n  onClick,\n  description,\n  title: _title,\n  layoutType,\n  disabled = false,\n  className,\n  hideIcon = false,\n  hideState = false,\n  hideLastUpdated = false,\n  children,\n  hideDetails = false,\n  cssStyles,\n  key,\n  hideToggle = false,\n  customRenderState,\n  ...rest\n}: ButtonCardProps<E>): React.ReactNode {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const formatter = useHass((state) => state.formatter);\n  const domain = _entity ? computeDomain(_entity) : null;\n  const entity = useEntity(_entity || \"unknown\", {\n    returnNullIfNotFound: true,\n  });\n  const iconNode = typeof _icon !== \"undefined\" && typeof _icon !== \"string\" ? _icon : null;\n  const domainIcon = useIconByDomain(domain === null ? \"unknown\" : domain, {\n    ...(iconProps ?? {}),\n  });\n  const entityIcon = useIconByEntity(_entity || \"unknown\", {\n    ...(iconProps ?? {}),\n  });\n  const isDefaultLayout = layoutType === \"default\" || layoutType === undefined;\n  const isSlimLayout = layoutType === \"slim\" || layoutType === \"slim-vertical\";\n  const isUnavailable = typeof entity?.state === \"string\" ? isUnavailableState(entity.state) : false;\n  const on = entity ? entity.state !== \"off\" && !isUnavailable && !disabled : active || false;\n  const iconElement = useIcon(typeof _icon === \"string\" ? _icon : null, {\n    ...(iconProps ?? {}),\n  });\n  // use the input description if provided, else use the friendly name if available, else entity name, else null\n  const title = useMemo(() => {\n    return _title === null ? null : _title || entity?.attributes.friendly_name || entity?.entity_id || null;\n  }, [_title, entity]);\n\n  function renderState() {\n    if (hideState) return null;\n    if (customRenderState && entity) {\n      // @ts-expect-error - this is correct, no idea why it's complaining\n      return customRenderState(entity);\n    }\n    if (typeof active === \"boolean\") {\n      // static usage without entity\n      return active ? `${localize(ON)}` : `${localize(OFF)}`;\n    }\n    if (entity && entity.state === ON && domain === \"light\") {\n      return formatter.attributeValue(entity, \"brightness\");\n    }\n    if (entity) {\n      return formatter.stateValue(entity);\n    }\n    return null;\n  }\n  const hasFeatures = Children.toArray(rest?.features).filter((child) => isValidElement(child)).length > 0;\n  const stateNode = renderState();\n  const separatorNode = rest.descriptionSeparator ?? \"-\";\n  function buildDescriptionContent(main: React.ReactNode, state: React.ReactNode) {\n    if (!main && !state) return null;\n    if (main && state) {\n      return (\n        <>\n          {main} <span className=\"description-separator\">{separatorNode}</span> {state}\n        </>\n      );\n    }\n    return main || state;\n  }\n  return (\n    <StyledButtonCard\n      key={key}\n      as=\"button\"\n      // @ts-expect-error - don't know the entity name, so we can't know the service type\n      service={service}\n      // @ts-expect-error - don't know the entity name, so we can't know the service data\n      serviceData={serviceData}\n      active={active}\n      entity={_entity as EntityName}\n      title={title ?? undefined}\n      disabled={disabled || isUnavailable}\n      onClick={onClick}\n      className={`${className ?? \"\"} ${layoutType ?? \"default\"} button-card`}\n      triggerClass={`button-card-trigger`}\n      cssStyles={`\n        ${globalComponentStyle.buttonCard ?? \"\"}\n        ${cssStyles ?? \"\"}\n      `}\n      {...rest}\n    >\n      <Contents className={`contents ${hasFeatures ? \"has-features\" : \"\"}`}>\n        <LayoutBetween className={`layout-between ${layoutType === \"slim-vertical\" ? \"vertical\" : \"\"}`}>\n          {!hideIcon && (\n            <Fab\n              brightness={(on && entity?.custom.brightness) || \"brightness(100%)\"}\n              {...fabProps}\n              className={`fab-card-inner icon ${fabProps?.className} ${fabProps?.style ? \"custom\" : \"\"}`}\n              style={{\n                ...fabProps?.style,\n                backgroundColor:\n                  fabProps?.style?.backgroundColor ??\n                  (on ? (domain === \"light\" ? (entity?.custom?.rgbaColor ?? \"var(--ha-A400)\") : \"var(--ha-A400)\") : \"var(--ha-S400)\"),\n                color:\n                  fabProps?.style?.color ??\n                  (entity ? (on ? entity.custom.rgbColor : \"var(--ha-S500-contrast)\") : on ? \"var(--ha-A400)\" : \"var(--ha-S500-contrast)\"),\n              }}\n            >\n              {iconNode ?? iconElement ?? entityIcon ?? domainIcon}\n            </Fab>\n          )}\n          {isDefaultLayout && !hideToggle && (\n            <Toggle active={on} className=\"toggle\">\n              {!isUnavailable && <ToggleState active={on} className=\"toggle-state\" />}\n            </Toggle>\n          )}\n          {isSlimLayout && (\n            <Column fullWidth alignItems={layoutType === \"slim-vertical\" ? \"center\" : \"flex-start\"}>\n              {title && <Title className=\"title\">{title}</Title>}\n              {!hideDetails && (\n                <Description className={`description ${layoutType ?? \"\"}`}>{buildDescriptionContent(description, stateNode)}</Description>\n              )}\n              {entity && !hideLastUpdated && (\n                <Description className={`description secondary ${layoutType === \"slim-vertical\" ? \"center\" : \"\"}`}>\n                  {localize(\"last_updated\")}: {entity.custom.relativeTime}\n                </Description>\n              )}\n            </Column>\n          )}\n        </LayoutBetween>\n        {isDefaultLayout && (\n          <Footer className=\"footer\">\n            {title && <Title className=\"title\">{title}</Title>}\n            {!hideDetails && <Description className=\"description\">{buildDescriptionContent(description, stateNode)}</Description>}\n            {!hideDetails && entity && !hideLastUpdated && (\n              <Description className=\"description secondary\">\n                {localize(\"last_updated\")}: {entity.custom.relativeTime}\n              </Description>\n            )}\n          </Footer>\n        )}\n        {children && <div className=\"children\">{children}</div>}\n      </Contents>\n    </StyledButtonCard>\n  );\n}\n/**\n * The ButtonCard component is an easy way to represent the state and control of an entity with a simple button, eventually I'll provide further options per domain, like being able to set the colours for lights etc...\n * Below are a few examples of layouts that the ButtonCard supports\n * */\nexport function ButtonCard<E extends EntityName>(props: ButtonCardProps<E>) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 4,\n    md: 3,\n    lg: 2,\n    xlg: 2,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ButtonCard\" })}>\n      <InternalButtonCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useState, useEffect, useRef, ReactNode } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/react\";\nimport { useDebouncedCallback, useThrottledCallback } from \"use-debounce\";\nimport { fallback, mq } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst RangeSliderParent = styled.div``;\n\nconst StyledRange = styled.div<{\n  handleSize: number;\n}>`\n  ${(props) => `\n    min-width: 6rem;\n    width: 100%;\n    position: relative;\n    isolation: isolate;\n\n    ${mq(\n      [\"xxs\", \"xs\", \"sm\"],\n      `\n      min-width: 0;\n    `,\n    )}\n\n    z-index: 1;\n\n    .range-slider-range {\n      position: relative;\n      -webkit-appearance: none;\n      width: 100%;\n      height: 0.7rem;\n      border-radius: 5px;\n      background: var(--ha-S400);\n      outline: none;\n      padding: 0;\n      margin: 0;\n      z-index: 1;\n\n      &::-webkit-slider-thumb {\n        appearance: none;\n        width: ${props.handleSize}px;\n        height: ${props.handleSize}px;\n        border-radius: 50%;\n        background: var(--ha-A400);\n        cursor: pointer;\n        transition: background var(--ha-transition-duration) var(--ha-easing);\n        position: relative;\n        z-index: 1;\n\n        &:hover {\n          background: var(--ha-A200);\n        }\n      }\n\n      &:active::-webkit-slider-thumb {\n        background: var(--ha-A400);\n      }\n\n      &::-moz-range-thumb {\n        width: ${props.handleSize}px;\n        height: ${props.handleSize}px;\n        border: 0;\n        border-radius: 50%;\n        background: var(--ha-A400);\n        cursor: pointer;\n        transition: background var(--ha-transition-duration) var(--ha-easing);\n        z-index: 1;\n\n        &:hover {\n          background: var(--ha-A200);\n        }\n      }\n\n      &:active::-moz-range-thumb {\n        background: var(--ha-A400);\n      }\n      \n      &:focus {\n        &::-webkit-slider-thumb {\n          box-shadow: 0 0 0 3px var(--ha-A100);\n        }\n      }\n    }\n\n    // Firefox Overrides\n    ::-moz-range-track {\n        background: var(--ha-S400);\n        border: 0;\n    }\n\n    input::-moz-focus-inner,\n    input::-moz-focus-outer { \n      border: 0; \n    }\n\n    \n    &:hover, &.active {\n      .tooltip-holder {\n        > div {\n          transform: translate(-50%, -1rem) rotate(-45deg) scale(1);\n          opacity: 1;\n        }\n      }\n    }\n  `}\n`;\n\nconst Tooltip = styled.div<{\n  size: number;\n}>`\n  opacity: 0;\n  position: absolute;\n  bottom: 100%;\n  width: ${({ size }) => `${size}rem`};\n  height: ${({ size }) => `${size}rem`};\n  border-radius: 50% 50% 50% 0;\n  left: 0;\n  transform: translate(-50%, 1rem) rotate(-45deg) scale(0);\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: transform, opacity;\n  background-color: var(--ha-A400);\n  white-space: nowrap;\n  pointer-events: none;\n  z-index: 0;\n  &:after {\n    content: attr(data-title);\n    font-size: 0.7rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    transform: rotate(45deg);\n    position: absolute;\n    inset: 0;\n    border-radius: 50%;\n  }\n`;\n\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n  color: var(--ha-S50-contrast);\n`;\n\nconst Description = styled.span`\n  display: block;\n  font-size: 0.8rem;\n  margin-bottom: 0.5rem;\n  color: var(--ha-S500-contrast);\n`;\n\nexport interface RangeSliderProps extends Omit<React.ComponentPropsWithoutRef<\"input\">, \"onInput\" | \"onChange\"> {\n  /** The minimum value for the input @default 0 */\n  min?: number;\n  /** The maximum value for the input @default 100 */\n  max?: number;\n  /** The step value for the input @default 1 */\n  step?: number;\n  /** The value for the input @default 0 */\n  value?: number;\n  /** The handle size in px for the input @default 15 */\n  handleSize?: number;\n  /** The label for the input @default undefined */\n  onChange?: (value: number, event: React.ChangeEvent<HTMLInputElement>) => void;\n  /* The callback function that is called when the user has finished changing the value @default undefined */\n  onChangeComplete?: (value: number, event: React.ChangeEvent<HTMLInputElement>) => void;\n  /** Debounce/throttle value @default 300 */\n  debounceThrottleValue?: number;\n  debounceType?: \"debounce\" | \"throttle\";\n  /** The label for the input @default undefined */\n  label?: ReactNode;\n  /** The description for the input @default undefined */\n  description?: ReactNode;\n  /** should the tooltip value be hidden @default false */\n  hideTooltip?: boolean;\n  /** function to format the value displayed in the tooltip */\n  formatTooltipValue?: (value: number) => string;\n  /** tooltip size, increase/decrease the size of the tooltip, value should be a number representing rems @default 2 */\n  tooltipSize?: number;\n}\n\nfunction InternalRangeSlider({\n  value: _value,\n  onChange,\n  formatTooltipValue,\n  hideTooltip,\n  label,\n  description,\n  className,\n  style,\n  tooltipSize = 2,\n  handleSize = 15,\n  min: _min = 0,\n  max: _max = 100,\n  step: _step = 1,\n  debounceThrottleValue = 300,\n  debounceType = \"debounce\",\n  onChangeComplete,\n  cssStyles,\n  ...rest\n}: RangeSliderProps) {\n  const [value, setValue] = useState(_value ?? 0);\n  const [active, setActive] = useState(false);\n  const rangeRef = useRef<HTMLInputElement>(null);\n  const parentRangeRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (typeof _value === \"number\") {\n      setValue(_value);\n    }\n  }, [_value]);\n\n  useEffect(() => {\n    if (!rangeRef.current || hideTooltip) return;\n    const min = parseFloat(`${_min ?? 0}`);\n    const max = parseFloat(`${_max ?? 100}`);\n    const step = parseFloat(`${_step ?? 1}`);\n    const roundedValue = parseFloat(rangeRef.current.valueAsNumber.toFixed(step < 1 ? Math.abs(Math.log10(step)) : 0));\n    const percentage = ((rangeRef.current.valueAsNumber - min) / (max - min)) * 100;\n\n    if (tooltipRef.current) {\n      tooltipRef.current.style.left = `${percentage}%`;\n      const tooltipValue = typeof formatTooltipValue === \"function\" ? formatTooltipValue(roundedValue) : roundedValue;\n      tooltipRef.current.setAttribute(\"data-title\", `${tooltipValue}`);\n    }\n  }, [value, _min, _max, _step, formatTooltipValue, hideTooltip]);\n\n  const callType = debounceType === \"debounce\" ? useDebouncedCallback : useThrottledCallback;\n\n  const debouncedOnChange = callType(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (typeof onChangeComplete === \"function\") {\n        onChangeComplete(event.target.valueAsNumber, event);\n      }\n      setActive(false);\n    },\n    debounceThrottleValue,\n    {\n      leading: true,\n      trailing: true,\n    },\n  );\n\n  return (\n    <RangeSliderParent\n      className={`${className ?? \"\"} ${active ? \"active\" : \"\"} range-slider`}\n      style={{ position: \"relative\", ...(style ?? {}) }}\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n    >\n      {label && <Label className=\"label\">{label}</Label>}\n      {description && <Description className=\"description\">{description}</Description>}\n      <StyledRange ref={parentRangeRef} handleSize={handleSize} className={`range-slider-inner ${active ? \"active\" : \"\"}`}>\n        <input\n          {...rest}\n          min={_min}\n          max={_max}\n          step={_step}\n          ref={rangeRef}\n          type=\"range\"\n          className=\"range-slider-range\"\n          value={value}\n          onInput={(event: React.ChangeEvent<HTMLInputElement>) => {\n            setValue(event.target.valueAsNumber);\n            if (!active) setActive(true);\n          }}\n          onChange={(event) => {\n            if (typeof onChange === \"function\") {\n              onChange(event.target.valueAsNumber, event);\n            }\n            debouncedOnChange(event);\n          }}\n        />\n        {!hideTooltip && (\n          <div\n            className=\"tooltip-holder\"\n            style={{\n              position: \"absolute\",\n              top: 0,\n              left: handleSize / 2,\n              right: handleSize / 2,\n            }}\n          >\n            <Tooltip size={tooltipSize} ref={tooltipRef} />\n          </div>\n        )}\n      </StyledRange>\n    </RangeSliderParent>\n  );\n}\n\n/** The RangeSlider is a simple component that allows you to provide a slider to extract a value and do something with it */\nexport function RangeSlider(props: RangeSliderProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"RangeSlider\" })}>\n      <InternalRangeSlider {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { CSSProperties, memo, useCallback, useRef, useEffect } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/react\";\nimport { fallback } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { useHass } from \"@hakit/core\";\n\nexport interface RipplesProps extends React.ComponentPropsWithoutRef<\"div\"> {\n  /** the animation duration of the ripple @default 600 */\n  duration?: number;\n  /** the color of the ripple, @default rgba(0, 0, 0, .3) */\n  color?: string;\n  /** click even to bind to the ripple, @default void */\n  onClick?: (ev: React.MouseEvent<HTMLDivElement>) => void;\n  /** the children of the ripple */\n  children: React.ReactNode;\n  /** the css border radius of the ripple, @default none */\n  borderRadius?: CSSProperties[\"borderRadius\"];\n  /** disable the ripple */\n  disabled?: boolean;\n  /** prevent propagation on ripples */\n  preventPropagation?: boolean;\n}\n\nconst boxStyle: CSSProperties = {\n  position: \"relative\",\n  display: \"inline-flex\",\n  overflow: \"hidden\",\n};\n\nconst StyledRipple = styled.div`\n  position: absolute;\n  border-radius: 50%;\n  opacity: 0;\n  width: 35px;\n  height: 35px;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n  flex-shrink: 0;\n`;\n\nconst ParentRipple = styled.div<{\n  borderRadius: RipplesProps[\"borderRadius\"];\n}>`\n  ${(props) =>\n    props.borderRadius &&\n    `\n    border-radius: ${props.borderRadius};\n    overflow: hidden;\n    display: inline-flex;\n  `}\n`;\nconst _Ripples = memo(\n  ({\n    duration = 600,\n    color = \"rgba(0, 0, 0, .3)\",\n    borderRadius = \"none\",\n    onClick,\n    children,\n    disabled,\n    preventPropagation = false,\n    style,\n    className,\n    cssStyles,\n    id,\n    ...rest\n  }: RipplesProps) => {\n    const rippleRef = useRef<HTMLDivElement | null>(null);\n    const timeoutId = useRef<NodeJS.Timeout | null>(null);\n    const windowContext = useHass((store) => store.windowContext);\n    const win = windowContext ?? window;\n    useEffect(() => {\n      return () => {\n        // cleanup\n        if (timeoutId.current) clearTimeout(timeoutId.current);\n      };\n    }, []);\n\n    const onClickHandler = useCallback(\n      (event: React.MouseEvent<HTMLDivElement>) => {\n        event.stopPropagation();\n        if (disabled) return;\n        // clear the timeout if exists\n        if (timeoutId.current !== null) clearTimeout(timeoutId.current);\n\n        const { pageX, pageY, currentTarget } = event;\n\n        const rect = currentTarget.getBoundingClientRect();\n        let xMultiplier = 1;\n        if (typeof win !== \"undefined\") {\n          xMultiplier = win.scrollX;\n        }\n        let yMultiplier = 1;\n        if (typeof win !== \"undefined\") {\n          yMultiplier = win.scrollY;\n        }\n\n        const left = pageX - (rect.left + xMultiplier);\n        const top = pageY - (rect.top + yMultiplier);\n        const size = Math.max(rect.width, rect.height);\n\n        if (rippleRef.current) {\n          const newStyles = {\n            left: isNaN(left) ? \"0px\" : `${left}px`,\n            top: isNaN(top) ? \"0px\" : `${top}px`,\n            opacity: 1,\n            transform: \"translate(-50%, -50%)\",\n            transition: \"initial\",\n            backgroundColor: color,\n          };\n          Object.assign(rippleRef.current.style, newStyles);\n        }\n        // start a timeout to scale the ripple\n        timeoutId.current = setTimeout(() => {\n          if (rippleRef.current) {\n            const newStyles = {\n              opacity: 0,\n              transform: `scale(${size / 9})`,\n              transition: `all ${duration}ms`,\n            };\n            Object.assign(rippleRef.current.style, newStyles);\n          }\n          timeoutId.current = null;\n        }, 50);\n\n        if (typeof onClick === \"function\") onClick(event);\n      },\n      [color, duration, disabled, onClick, win],\n    );\n\n    return (\n      <ParentRipple\n        borderRadius={borderRadius}\n        id={id ?? \"\"}\n        className={`ripple-parent ${className ?? \"\"}`}\n        css={css`\n          ${cssStyles ?? \"\"}\n        `}\n        style={{\n          ...(style ?? {}),\n        }}\n      >\n        <div\n          className=\"ripple-inner\"\n          onPointerDownCapture={(e) => {\n            if (preventPropagation) {\n              e.stopPropagation();\n            }\n          }}\n          {...rest}\n          style={{\n            width: \"100%\",\n            ...boxStyle,\n            borderRadius,\n          }}\n          onClick={onClickHandler}\n        >\n          {children}\n          <StyledRipple ref={rippleRef} />\n        </div>\n      </ParentRipple>\n    );\n  },\n);\n_Ripples.displayName = \"_Ripples\";\n/** Ripples is a component that can easily add an interactive ripple effect when clicked, simply wrap your component in Ripples and you're good to go! If your component has a border radius, simply pass the same value as a prop to ripples to mask the effect */\nexport function Ripples(props: RipplesProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"Ripples\" })}>\n      <_Ripples {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useCallback, useRef, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport type { EntityName } from \"@hakit/core\";\nimport {\n  computeDomainTitle,\n  useEntity,\n  useHass,\n  useIconByDomain,\n  useIcon,\n  useIconByEntity,\n  computeDomain,\n  isUnavailableState,\n  localize,\n} from \"@hakit/core\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { fallback, CardBase, type AvailableQueries, type CardBaseProps } from \"@components\";\nimport { IconProps } from \"@iconify/react\";\n\nconst StyledTriggerCard = styled(CardBase)``;\n\nconst ToggleMessage = styled.span<ToggleProps>`\n  font-size: 0.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  height: 100%;\n  padding: 0 0.4rem 0 0.8rem;\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: justify-content, color;\n  justify-content: ${(props) => (props.active ? `flex-start` : `flex-end`)};\n  color: ${(props) => (!props.active ? \"var(--ha-300)\" : \"var(--ha-300-contrast)\")};\n  ${(props) => props.hideArrow && `padding-right: 0.8rem;`}\n`;\n\nconst ToggleState = styled.div<ToggleProps>`\n  background-color: var(--ha-S200);\n  border-radius: 100%;\n  width: 1.9rem;\n  height: 1.9rem;\n  position: absolute;\n  top: 5px;\n  left: 0px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: left, transform;\n  left: ${(props) => (props.active ? \"100%\" : \"0px\")};\n  transform: ${(props) => (props.active ? \"translate3d(calc(-100% - 5px), 0, 0)\" : \"translate3d(calc(0% + 5px), 0, 0)\")};\n  svg {\n    color: ${(props) => (props.active ? \"var(--ha-A400)\" : \"var(--ha-200)\")};\n    font-size: 40px;\n  }\n`;\n\ninterface ToggleProps {\n  active: boolean;\n  hideArrow?: boolean;\n}\nconst Gap = styled.div`\n  height: 20px;\n`;\nconst Toggle = styled.div<ToggleProps>`\n  position: relative;\n  background-color: ${(props) => (props.active ? \"var(--ha-300)\" : \"var(--ha-S200)\")};\n  border-radius: 3rem;\n  width: 10rem;\n  height: 2.5rem;\n  flex-grow: 0;\n  flex-shrink: 0;\n  transition: background-color var(--ha-transition-duration) var(--ha-easing);\n  margin-left: 1.5rem;\n  overflow: hidden;\n`;\n\nconst Contents = styled.div`\n  padding: 1rem;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst LayoutBetween = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: row;\n`;\n\nconst Description = styled.div`\n  color: var(--ha-S500-contrast);\n  font-size: 0.7rem;\n  text-align: left;\n`;\nconst Title = styled.div<{\n  disabled?: boolean;\n}>`\n  color: var(--ha-S300-contrast);\n  font-size: 0.9rem;\n  font-weight: bold;\n  ${(props) => props.disabled && `color: var(--ha-S50-contrast);`}\n\n  text-align: left;\n  span {\n    display: block;\n    width: 100%;\n    color: var(--ha-S50-contrast);\n    margin-top: 0.3rem;\n    line-height: 1rem;\n    font-size: 0.7rem;\n  }\n`;\n\ntype OmitProperties = \"as\" | \"entity\";\nexport interface TriggerCardProps<E extends EntityName> extends Omit<CardBaseProps<\"button\", E>, OmitProperties> {\n  /** The name of your entity */\n  entity: E;\n  /** an optional description to add to the card */\n  description?: string;\n  /** optional override to replace the icon that appears in the card */\n  icon?: string;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** the props for the icon, which includes styles for the icon */\n  sliderIconProps?: Omit<IconProps, \"icon\">;\n  /** optional override for the slider icon */\n  sliderIcon?: string;\n  /** override for the slider text when the state is active */\n  sliderTextActive?: string;\n  /** override for the slider text when the state is inactive */\n  sliderTextInactive?: string;\n  /** how much time in milliseconds must pass before the active state reverts to it's default state @default 5000 */\n  activeStateDuration?: number;\n  /** display the arrow icon in the slider @default false */\n  hideArrow?: boolean;\n}\n\nfunction InternalTriggerCard<E extends EntityName>({\n  entity: _entity,\n  title,\n  description,\n  onClick,\n  disabled: _disabled,\n  icon: _icon,\n  iconProps,\n  sliderIconProps,\n  sliderIcon: _sliderIcon,\n  sliderTextActive,\n  sliderTextInactive,\n  activeStateDuration = 5000,\n  hideArrow = false,\n  className,\n  service,\n  serviceData,\n  key,\n  cssStyles,\n  ...rest\n}: TriggerCardProps<E>): React.ReactNode {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const domain = computeDomain(_entity);\n  const entity = useEntity(_entity);\n  const entityIcon = useIconByEntity(_entity, iconProps);\n  const domainIcon = useIconByDomain(domain, iconProps);\n  const timeRef = useRef<NodeJS.Timeout | null>(null);\n  const [active, setActive] = useState(false);\n  const icon = useIcon(_icon ?? null, iconProps);\n  const sliderIcon = useIcon(_sliderIcon ?? null, sliderIconProps);\n  const powerIcon = useIcon(\"mdi:power\", iconProps);\n  const arrowIcon = useIcon(\"mingcute:arrows-right-line\", {\n    ...iconProps,\n    style: {\n      fontSize: \"16px\",\n      ...iconProps?.style,\n    },\n  });\n  const isUnavailable = isUnavailableState(entity.state);\n  const disabled = _disabled || isUnavailable;\n  const useApiHandler = useCallback(\n    (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      setActive(true);\n      if (typeof onClick === \"function\" && !isUnavailable) onClick(entity as never, event);\n      if (timeRef.current) clearTimeout(timeRef.current);\n      timeRef.current = setTimeout(() => {\n        setActive(false);\n      }, activeStateDuration);\n    },\n    [entity, onClick, activeStateDuration, isUnavailable],\n  );\n\n  return (\n    <StyledTriggerCard\n      key={key}\n      as=\"button\"\n      className={`${className ?? \"\"} trigger-card`}\n      disabled={disabled}\n      entity={_entity}\n      // @ts-expect-error - don't know the entity name, so we can't know the service type\n      service={service}\n      // @ts-expect-error - don't know the entity name, so we can't know the service data\n      serviceData={serviceData}\n      onClick={useApiHandler}\n      cssStyles={`\n        ${globalComponentStyle?.triggerCard ?? \"\"}\n        ${cssStyles ?? \"\"}\n      `}\n      {...rest}\n    >\n      <Contents>\n        <LayoutBetween className={`layout-between`}>\n          <Title disabled={disabled} className={`description`}>\n            {title || entity.attributes.friendly_name || _entity}\n            {description && <span>{description}</span>}\n          </Title>\n          {icon ?? entityIcon ?? domainIcon}\n        </LayoutBetween>\n        <Gap className={`gap`} />\n        <LayoutBetween className={`layout-between`}>\n          <Description className={`title`}>\n            {entity.custom.relativeTime}\n            {disabled ? ` - ${entity.state}` : \"\"}\n          </Description>\n          <Toggle active={disabled ? false : active} className={`toggle`}>\n            {disabled ? null : (\n              <>\n                <ToggleState active={active} className={`toggle-state`}>\n                  {sliderIcon ?? powerIcon}\n                </ToggleState>\n                <ToggleMessage hideArrow={hideArrow} active={active} className={`toggle-message`}>\n                  {active\n                    ? (sliderTextActive ??\n                      localize(\"triggered_name\", {\n                        search: \" {name}\",\n                        replace: \"\",\n                      }))\n                    : (sliderTextInactive ?? `${localize(\"run\")} ${computeDomainTitle(_entity, entity?.attributes?.device_class)}`)}{\" \"}\n                  {!active && !hideArrow && arrowIcon}\n                </ToggleMessage>\n              </>\n            )}\n          </Toggle>\n        </LayoutBetween>\n      </Contents>\n    </StyledTriggerCard>\n  );\n}\n/** The TriggerCard is a simple to use component to make it easy to trigger and a scene, automation, script or any other entity to trigger. */\nexport function TriggerCard<E extends EntityName>(props: TriggerCardProps<E>) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"TriggerCard\" })}>\n      <InternalTriggerCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useCallback, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Row, Column, fallback, CardBase, CardBaseProps, mq, type AvailableQueries } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { AutoHeight } from \"../Shared/AutoHeight\";\nimport { type EntityName } from \"@hakit/core\";\n\nconst StyledGroup = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", EntityName>>)<{\n  collapsed: boolean;\n  collapsible: boolean;\n}>`\n  background-color: var(--ha-S200);\n  color: var(--ha-S200-contrast);\n  padding: ${({ collapsed }) => (collapsed ? \"0 2rem\" : \"0 2rem 2rem\")};\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: height, padding, background-color;\n  &.expanded {\n    height: calc-size(auto);\n  }\n  width: 100%;\n  > div.contents > .header-title {\n    cursor: pointer;\n    padding: ${({ collapsed }) => (collapsed ? \"1.5rem 0\" : \"2rem 0\")};\n    > h3 {\n      color: var(--ha-S100-contrast);\n      margin: 0;\n      display: flex;\n      align-items: center;\n      transition: padding var(--ha-transition-duration) var(--ha-easing);\n      ${({ collapsible, collapsed }) =>\n        collapsible &&\n        `&:before {\n        content: \"${collapsed ? \"+\" : \"-\"}\";\n        display: inline-block;\n        color: var(--ha-A400);\n        width: 1rem;\n      }`}\n    }\n  }\n  ${({ collapsed }) => `\n    ${mq(\n      [\"xxs\", \"xs\"],\n      `\n      padding: ${collapsed ? \"1rem 0rem\" : \"1.5rem 1rem 1rem\"};\n    `,\n    )}\n  `};\n`;\n\nconst Description = styled.span`\n  color: var(--ha-S300-contrast);\n  font-size: 0.9rem;\n  margin: 0.5rem 0 0;\n  width: 100%;\n  display: block;\n  padding-left: 1rem;\n`;\n\nconst Header = styled.div`\n  transition: padding var(--ha-transition-duration) var(--ha-easing);\n`;\nconst Title = styled.h3``;\n\ntype OmitProperties =\n  | \"title\"\n  | \"as\"\n  | \"layout\"\n  | \"entity\"\n  | \"serviceData\"\n  | \"service\"\n  | \"longPressCallback\"\n  | \"modalProps\"\n  | \"onClick\"\n  | \"disableScale\"\n  | \"onlyFunctionality\"\n  | \"rippleProps\"\n  | \"disableActiveState\"\n  | \"disableRipples\";\nexport interface GroupProps extends Omit<CardBaseProps, OmitProperties> {\n  /** the title of the group */\n  title: React.ReactNode;\n  /** the optional description of the group */\n  description?: React.ReactNode;\n  /** the layout of the group, either column or row, @default row */\n  layout?: \"row\" | \"column\";\n  /** standard flex css properties for align-items, @default center */\n  alignItems?: React.CSSProperties[\"alignItems\"];\n  /** standard flex css properties for justify-content, @default center */\n  justifyContent?: React.CSSProperties[\"justifyContent\"];\n  /** standard css gap property values, @default 0.5rem */\n  gap?: React.CSSProperties[\"gap\"];\n  /** should the group be collapsed by default @default false */\n  collapsed?: boolean;\n  /** Whether the group can be collapsed by the end-user @default true */\n  collapsible?: boolean;\n  /** fired when the group header section is clicked */\n  onClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\nfunction InternalGroup({\n  title,\n  description,\n  children,\n  gap = \"0.5rem\",\n  justifyContent = \"center\",\n  alignItems = \"center\",\n  layout = \"row\",\n  collapsed = false,\n  collapsible = true,\n  className,\n  onClick,\n  ...rest\n}: GroupProps): React.ReactNode {\n  const [_collapsed, setCollapsed] = useState(collapsed);\n  const cssProps = {\n    gap,\n    justifyContent,\n    alignItems,\n  };\n\n  const onCollapseComplete = useCallback(() => {\n    setCollapsed(true);\n  }, []);\n\n  const onHeaderClick = useCallback(\n    (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      if (collapsible) {\n        setCollapsed(!_collapsed);\n      }\n      if (onClick) onClick(event);\n    },\n    [_collapsed, collapsible, onClick],\n  );\n\n  return (\n    <StyledGroup\n      onlyFunctionality\n      disableScale\n      disableActiveState\n      disableRipples\n      borderRadius={\"16px\"}\n      className={`${className ?? \"\"} ${_collapsed ? \"collapsed\" : \"expanded\"} group`}\n      collapsed={_collapsed}\n      collapsible={collapsible}\n      {...rest}\n    >\n      <Header onClick={onHeaderClick} className=\"header-title\">\n        <Title className=\"title\">{title}</Title>\n        {description && <Description>{description}</Description>}\n      </Header>\n      <AutoHeight isOpen={!_collapsed || !collapsible} className=\"content\" onCollapseComplete={onCollapseComplete}>\n        {layout === \"row\" ? (\n          <Row className=\"row\" {...cssProps}>\n            {children}\n          </Row>\n        ) : (\n          <Column className=\"column\" {...cssProps}>\n            {children}\n          </Column>\n        )}\n      </AutoHeight>\n    </StyledGroup>\n  );\n}\n/** The group component will automatically layout the children in a row with a predefined gap between the children. The Group component is handy when you want to be able to collapse sections of cards */\nexport function Group(props: GroupProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 12,\n    sm: 12,\n    md: 12,\n    lg: 12,\n    xlg: 12,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"Group\" })}>\n      <InternalGroup {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { useState, useEffect, useMemo, ReactNode, ReactElement, Children, isValidElement, cloneElement } from \"react\";\nimport { useWeather, useHass, isUnavailableState, getSupportedForecastTypes, getIconByEntity, localize } from \"@hakit/core\";\nimport type { FilterByDomain, ModernForecastType, EntityName } from \"@hakit/core\";\nimport { Icon, type IconProps } from \"@iconify/react\";\nimport {\n  Row,\n  Column,\n  fallback,\n  WeatherCardDetail,\n  ButtonBar,\n  ButtonBarButton,\n  CardBase,\n  type CardBaseProps,\n  type AvailableQueries,\n} from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { getAdditionalWeatherInformation } from \"./helpers\";\n\nconst Card = styled(CardBase)``;\n\nconst Contents = styled.div`\n  padding: 1rem;\n  gap: 1rem;\n  flex-direction: column;\n  display: flex;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Title = styled.h4`\n  all: unset;\n  font-family: var(--ha-font-family);\n  font-size: 0.8rem;\n  color: var(--ha-S100-contrast);\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n`;\n\nconst SubTitle = styled.h4`\n  all: unset;\n  font-family: var(--ha-font-family);\n  font-size: 1rem;\n  color: var(--ha-S500-contrast);\n  margin-top: 0.3rem;\n  margin-left: 1.1rem;\n`;\nconst StyledIcon = styled(Icon)`\n  font-size: 3rem;\n  color: var(--ha-A100) !important;\n`;\n\nconst LocationIcon = styled(Icon)`\n  font-size: 1rem;\n  color: var(--ha-A400) !important;\n  margin-right: 0.2rem;\n`;\n\n// Removed convertDateTime in favor of centralized HA-aware formatter (formatForecastHour)\n\nfunction splitForecastsIntoRows<T>(arr: T[], rowCount: number, maxItemsPerRow: number): T[][] {\n  const maxItems = rowCount * maxItemsPerRow;\n  const limitedArray = arr.slice(0, maxItems); // Ignore items beyond rowCount * maxItemsPerRow\n  const result: T[][] = [];\n  let start = 0;\n\n  for (let i = 0; i < rowCount; i++) {\n    // Determine the maximum size for this group\n    const groupSize = Math.min(\n      Math.ceil((limitedArray.length - start) / (rowCount - i)), // Evenly distribute remaining elements\n      maxItemsPerRow,\n    );\n    result.push(limitedArray.slice(start, start + groupSize));\n    start += groupSize;\n  }\n\n  return result;\n}\n\nconst Forecast = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  height: 100%;\n`;\nconst ForecastIcon = styled(Icon)`\n  font-size: 1.5rem;\n  color: var(--ha-A100) !important;\n`;\n\nconst Day = styled.div`\n  color: var(--ha-S50-contrast);\n`;\nconst Time = styled.div`\n  color: var(--ha-S200-contrast);\n  font-size: 0.8rem;\n`;\nconst Temperature = styled.div`\n  color: var(--ha-S50-contrast);\n  font-size: 0.8rem;\n`;\nconst TemperatureLow = styled.div`\n  color: var(--ha-S500-contrast);\n  font-size: 0.75rem;\n`;\n\ntype OmitProperties = \"as\" | \"entity\";\nexport interface WeatherCardProps extends Omit<CardBaseProps<\"div\", FilterByDomain<EntityName, \"weather\">>, OmitProperties> {\n  /** The name of your entity */\n  entity: FilterByDomain<EntityName, \"weather\">;\n  /** override the icon displayed before the title */\n  icon?: string;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** override the temperature suffix that's pulled from the entity, will retrieve the temperature_unit from entity by default\"  */\n  temperatureSuffix?: ReactNode;\n  /** include a title showing the forecast name @default true */\n  includeTitle?: boolean;\n  /** include the forecast @default true */\n  includeForecast?: boolean;\n  /** include the current forecast row, @default true */\n  includeCurrent?: boolean;\n  /** any related entities/sensors you want to include in the details section @default [] */\n  details?: ReactElement<typeof WeatherCardDetail>[];\n  /** include time value under day name @default true */\n  includeTime?: boolean;\n  /** include day name in forecast @default true */\n  includeDay?: boolean;\n  /** property on the weather entity attributes that returns the \"feels like\" temperature or \"apparent temperature\" @default \"apparent_temperature\" */\n  apparentTemperatureAttribute?: string;\n  /** the forecast type to display @default \"daily\" */\n  forecastType?: ModernForecastType;\n  /** The number of rows to display forecast information, @default 1 */\n  forecastRows?: number;\n  /** Whether to allow the user to toggle the forecast type. @default true */\n  allowForecastToggle?: boolean;\n}\n\nconst FORECAST_ITEM_PROJECTED_WIDTH = 50;\n\nfunction InternalWeatherCard({\n  entity,\n  title,\n  icon: _icon,\n  iconProps,\n  temperatureSuffix,\n  includeTitle = true,\n  includeForecast = true,\n  includeCurrent = true,\n  includeTime = true,\n  includeDay = true,\n  details = [],\n  apparentTemperatureAttribute = \"apparent_temperature\",\n  className,\n  service,\n  serviceData,\n  forecastType = \"daily\",\n  forecastRows = 1,\n  allowForecastToggle = true,\n  cssStyles,\n  key,\n  ...rest\n}: WeatherCardProps): React.ReactNode {\n  const config = useHass((state) => state.config);\n  const [width, setWidth] = useState<number>(0);\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const itemsToRender = Math.floor(width / FORECAST_ITEM_PROJECTED_WIDTH);\n  const [timeZone, setTimeZone] = useState<string>(\"UTC\");\n  const formatter = useHass((s) => s.formatter);\n  const helpers = useHass((s) => s.helpers);\n  // Determine 12/24h preference directly from locale using core helper\n  const shouldAmPm = helpers.dateTime.shouldUseAmPm();\n  const [type, setType] = useState<ModernForecastType>(forecastType);\n  const weather = useWeather(entity, {\n    type,\n  });\n  const isUnavailable = isUnavailableState(weather.state);\n  const icon = getIconByEntity(\"weather\", weather) as string;\n\n  const {\n    attributes: { friendly_name, temperature, temperature_unit },\n  } = weather;\n  useEffect(() => {\n    if (config?.time_zone && timeZone !== config.time_zone) {\n      setTimeZone(config.time_zone);\n    }\n  }, [config, timeZone]);\n\n  const supportedForecasts = useMemo(() => getSupportedForecastTypes(weather), [weather]);\n\n  useEffect(() => {\n    setType(forecastType);\n  }, [forecastType]);\n\n  const weatherDetails = useMemo(() => {\n    const { humidity, temperature, wind_speed, wind_speed_unit, temperature_unit } = weather.attributes;\n    const additional = getAdditionalWeatherInformation(temperature, temperature_unit, wind_speed, wind_speed_unit, humidity);\n    const apparentTemperature = weather.attributes[apparentTemperatureAttribute] as number | null | undefined;\n    return {\n      apparent_temperature: apparentTemperature ?? null,\n      ...weather.attributes,\n      ...(additional ?? {}),\n    };\n  }, [weather.attributes, apparentTemperatureAttribute]);\n\n  const feelsLikeBase = weatherDetails.apparent_temperature ?? weatherDetails.feelsLike;\n  const feelsLike = feelsLikeBase === temperature ? null : feelsLikeBase;\n\n  const forcastRowArrs = splitForecastsIntoRows(weather.forecast?.forecast ?? [], forecastRows, itemsToRender);\n\n  const genForecastRows = () => (\n    <>\n      {forcastRowArrs.map((forecastForRow, rowIdx) => (\n        <Row\n          className=\"row\"\n          fullHeight\n          key={`weather-${rowIdx}`}\n          style={{\n            justifyContent: \"space-between\",\n          }}\n        >\n          {forecastForRow.map((forecast, index) => {\n            const dateObj = new Date(forecast.datetime);\n            // Derive weekday, hour numeric, and optional AM/PM suffix via helpers.\n            const dayDisplay = formatter.formatDateWeekdayShort(dateObj);\n            const hourNumeric = formatter.formatHour(dateObj);\n            const suffix = shouldAmPm ? formatter.formatAmPmSuffix(dateObj) : \"\";\n            const hourDisplay = shouldAmPm ? `${hourNumeric} ${suffix}` : hourNumeric;\n            return (\n              <Forecast key={index} className=\"forecast\">\n                {includeDay && <Day className=\"day\">{dayDisplay}</Day>}\n                {includeTime && <Time className=\"time\">{hourDisplay}</Time>}\n                <ForecastIcon\n                  className=\"icon forecast-icon\"\n                  icon={\n                    getIconByEntity(\"weather\", {\n                      ...weather,\n                      state: forecast.condition as string,\n                    }) as string\n                  }\n                  {...(iconProps ?? {})}\n                />\n                <Temperature className=\"temperature\">\n                  {forecast.temperature}\n                  {temperatureSuffix || temperature_unit}\n                </Temperature>\n                {forecast.templow && (\n                  <TemperatureLow className=\"temperature-low\">\n                    {forecast.templow}\n                    {temperatureSuffix || temperature_unit}\n                  </TemperatureLow>\n                )}\n              </Forecast>\n            );\n          })}\n        </Row>\n      ))}\n    </>\n  );\n\n  return (\n    <Card\n      key={key}\n      title={title}\n      entity={entity}\n      // @ts-expect-error - don't know the entity name, so we can't know the service type\n      service={service}\n      // @ts-expect-error - don't know the entity name, so we can't know the service data\n      serviceData={serviceData}\n      className={`${className ?? \"\"} weather-card`}\n      resizeDetectorProps={{\n        refreshRate: 50,\n        refreshMode: \"throttle\",\n        onResize({ width: _width }) {\n          if (_width) {\n            setWidth(_width);\n          }\n        },\n      }}\n      cssStyles={`\n        ${globalComponentStyle?.weatherCard ?? \"\"}\n        ${cssStyles ?? \"\"}\n      `}\n      {...rest}\n    >\n      <Contents>\n        {includeCurrent && !isUnavailable && (\n          <Row className=\"row\" justifyContent=\"space-between\" fullWidth wrap=\"nowrap\">\n            <Row wrap=\"nowrap\">\n              <StyledIcon icon={icon} className=\"icon\" />\n              <Column className=\"column\" alignItems=\"flex-start\" justifyContent=\"center\">\n                {includeTitle && (\n                  <Title className=\"title\">\n                    <LocationIcon className=\"location-icon icon\" icon={_icon || \"mdi:location\"} />\n                    {title || friendly_name}\n                  </Title>\n                )}\n                <SubTitle className=\"sub-title\">\n                  <Row align-items=\"center\" justifyContent=\"flex-start\">\n                    <span className=\"temperature-value\">{formatter.attributeValue(weather, \"temperature\")}</span>\n                    <span className=\"sub-title-separator\">,&nbsp;</span>\n                    <span className=\"state-value\">{formatter.stateValue(weather)}</span>\n                  </Row>\n                </SubTitle>\n              </Column>\n            </Row>\n            {includeForecast && allowForecastToggle && (\n              <ButtonBar>\n                {supportedForecasts.map((forecastType, index) => {\n                  const icon =\n                    forecastType === \"daily\" ? \"mdi:view-day\" : forecastType === \"twice_daily\" ? \"mdi:hours-12\" : \"mdi:hourglass\";\n                  return (\n                    <ButtonBarButton\n                      key={index}\n                      onClick={() => {\n                        setType(forecastType);\n                      }}\n                      icon={icon}\n                      noIcon={false}\n                      title={forecastType}\n                      active={type === forecastType}\n                      rippleProps={{\n                        preventPropagation: true,\n                      }}\n                    />\n                  );\n                })}\n              </ButtonBar>\n            )}\n          </Row>\n        )}\n\n        {((details && details.length > 0) || typeof feelsLike === \"number\") && (\n          <Row gap=\"0.5rem\" className=\"row\" alignItems=\"flex-start\" justifyContent=\"space-between\" fullWidth>\n            {typeof feelsLike === \"number\" && (\n              <WeatherCardDetail\n                entity={entity}\n                title={localize(\"apparent_temperature\")}\n                render={() => {\n                  return `${localize(\"apparent_temperature\")} - ${Math.round(feelsLike)}${temperatureSuffix || temperature_unit}`;\n                }}\n              />\n            )}\n            {Children.map(details, (child, index) => {\n              if (isValidElement(child)) {\n                return cloneElement(child, {\n                  key: child.key || index,\n                });\n              }\n              return child;\n            })}\n          </Row>\n        )}\n        {includeForecast && !isUnavailable && width > 0 && genForecastRows()}\n        {isUnavailable && localize(\"unavailable\")}\n      </Contents>\n    </Card>\n  );\n}\n/** This will pull information from the weather entity provided to display the forecast provided by home assistant, this card will display exactly what the weather card in lovelace displays.\n *\n * It will render more information depending on the size of the card, the smaller the card, the less \"hourly / daily\" forecast items will be displayed.\n */\nexport function WeatherCard(props: WeatherCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"WeatherCard\" })}>\n      <InternalWeatherCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { ReactNode } from \"react\";\nimport { localize, useEntity } from \"@hakit/core\";\nimport type { EntityName, HassEntityWithService, ExtractDomain } from \"@hakit/core\";\nimport { Icon, type IconProps } from \"@iconify/react\";\nimport { Row, fallback, Tooltip, mq } from \"@components\";\nimport type { RowProps } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst DetailsRow = styled(Row)`\n  width: auto;\n  ${mq(\n    [\"xxs\"],\n    `\n    width: 100%;\n  `,\n  )}\n`;\n\nconst State = styled.div`\n  color: var(--ha-S500-contrast);\n  font-size: 0.8rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport interface WeatherCardDetailProps extends Omit<RowProps, \"title\"> {\n  icon?: string;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  entity: EntityName;\n  title?: ReactNode;\n  suffix?: ReactNode;\n  render?: (value: HassEntityWithService<ExtractDomain<EntityName>>) => ReactNode;\n}\n\nfunction InternalWeatherCardDetail({ icon, iconProps, entity, title, suffix, render, ...rest }: WeatherCardDetailProps) {\n  const _entity = useEntity(entity);\n  const _title = title ?? _entity.attributes.friendly_name ?? \"\";\n  return (\n    <DetailsRow className=\"details\" gap=\"0rem\" justifyContent=\"flex-start\" {...rest}>\n      <Tooltip title={_title ?? localize(\"unknown\")}>\n        <Row className=\"row\" fullWidth gap=\"0.5rem\" justifyContent=\"flex-start\">\n          <Icon className=\"icon\" icon={icon ?? _entity.attributes.icon ?? \"mdi:info\"} {...(iconProps ?? {})} />\n          <State className=\"state\">\n            {typeof render === \"function\"\n              ? render(_entity)\n              : `${_title ? `${_title} - ` : \"\"}${_entity.state ?? \"\"}${\n                  !suffix && _entity.attributes.unit_of_measurement ? `${_entity.attributes.unit_of_measurement}` : (suffix ?? \"\")\n                }`}\n          </State>\n        </Row>\n      </Tooltip>\n    </DetailsRow>\n  );\n}\n\nexport function WeatherCardDetail(props: WeatherCardDetailProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"WeatherCardDetail\" })}>\n      <InternalWeatherCardDetail {...props} />\n    </ErrorBoundary>\n  );\n}\n","import * as React from \"react\";\nconst SvgGarbageBin = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", x: \"0px\", y: \"0px\", xmlSpace: \"preserve\", viewBox: \"0 0 77.41 123.36\", style: {\n  color: \"#444545\"\n}, ...props }, /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"style\", { type: \"text/css\" }, \"\\n      .main-color{fill:currentColor;}\\n      .bin-wheel{fill:#1B1B1B;}\\n      .bin-wheel-inner{fill:#2D2D2D;}\\n      .overlay{\\n        fill:currentColor;\\n        filter: brightness(80%);\\n      }\\n    \")), /* @__PURE__ */ React.createElement(\"path\", { className: \"main-color\", d: \"M67.65,10S55,0,30.19,0C12,0,2.73,5.89,2.73,5.89a.87.87,0,0,0-.36.66v6.92a1.15,1.15,0,0,0,.31.73l.77.74a1.13,1.13,0,0,0,.74.29L67,13.91a.54.54,0,0,0,.51-.43L68,10.59A.64.64,0,0,0,67.65,10Z\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"main-color\", d: \"M62.25,19.9H7.18a.41.41,0,0,0-.42.43L11,117.24a1.16,1.16,0,0,0,.34.72l5.17,4.68a1.29,1.29,0,0,0,.75.29H39.57a1,1,0,0,0,.68-.35l17.87-25a1.88,1.88,0,0,0,.28-.78l4.25-76.45A.4.4,0,0,0,62.25,19.9Z\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"bin-wheel\", d: \"M63.13,110.22A13.14,13.14,0,1,1,50,97.08,13.14,13.14,0,0,1,63.13,110.22Z\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"overlay\", d: \"M54,24.2H14.91a.42.42,0,0,0-.42.43l4.12,93.5c0,.24.07.45.13.46a4.61,4.61,0,0,0,.64,0H33.84a1.82,1.82,0,0,0,.61-.09c.09,0,0-.48-.1-.69a20.13,20.13,0,0,1-1.8-7.62A17.46,17.46,0,0,1,50,92.78h.22a.43.43,0,0,0,.45-.41l3.78-67.74A.41.41,0,0,0,54,24.2Z\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"bin-wheel-inner\", d: \"M45.62,108.53l-5.43-2.8a10.49,10.49,0,0,0-.93,3.48l6.1.29A5.34,5.34,0,0,1,45.62,108.53Zm1.43-2-3.3-5.14A10.83,10.83,0,0,0,41.2,104l5.14,3.3A4.77,4.77,0,0,1,47.05,106.57Zm2.22-1L49,99.49a10.66,10.66,0,0,0-3.48.93l2.8,5.43A4.46,4.46,0,0,1,49.27,105.6Zm5.35,3.9,6.1-.29a10.73,10.73,0,0,0-.93-3.48l-5.43,2.8A5.34,5.34,0,0,1,54.62,109.5Zm-1-2.22,5.14-3.3a10.83,10.83,0,0,0-2.55-2.55l-3.3,5.14A4.77,4.77,0,0,1,53.64,107.28Zm-8.28,3.66-6.1.29a10.66,10.66,0,0,0,.93,3.48l5.43-2.8A5.13,5.13,0,0,1,45.36,110.94ZM45.5,120A10.42,10.42,0,0,0,49,121l.29-6.1a5.13,5.13,0,0,1-1-.26Zm8.86-8.11,5.43,2.8a10.66,10.66,0,0,0,.93-3.48l-6.1-.29A5.13,5.13,0,0,1,54.36,111.91Zm-8,1.25-5.14,3.3A10.65,10.65,0,0,0,43.75,119l3.3-5.14A4.77,4.77,0,0,1,46.34,113.16Zm6.59.71,3.3,5.14a10.65,10.65,0,0,0,2.55-2.55l-5.14-3.3A4.77,4.77,0,0,1,52.93,113.87Zm-2.22,1L51,121a10.49,10.49,0,0,0,3.48-.93l-2.8-5.43A5.13,5.13,0,0,1,50.71,114.85Zm3.77-14.43A10.66,10.66,0,0,0,51,99.49l-.29,6.11a4.46,4.46,0,0,1,1,.25Z\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"overlay\", d: \"M72.37,10.94,69.72,8.06A.5.5,0,0,0,69.08,8l-3.46,2.64a1.48,1.48,0,0,1-.77.26H.43a.43.43,0,0,0-.43.43v8.14a.43.43,0,0,0,.43.43H64.85a1.05,1.05,0,0,0,.71-.33l6.82-8A.51.51,0,0,0,72.37,10.94Z\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"main-color\", d: \"M77.41,8.11a4.69,4.69,0,1,1-4.69-4.69A4.69,4.69,0,0,1,77.41,8.11Z\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"overlay\", d: \"M75.36,8.11a2.64,2.64,0,1,1-2.64-2.64A2.64,2.64,0,0,1,75.36,8.11Z\" }));\nexport default SvgGarbageBin;\n","/* eslint-disable @typescript-eslint/no-namespace */\n/* eslint-disable @typescript-eslint/prefer-namespace-keyword */\nimport { useMemo, useEffect, useCallback, useRef, useState, CSSProperties, Key } from \"react\";\nimport { useEntity, useHass } from \"@hakit/core\";\nimport { Icon } from \"@iconify/react\";\nimport { fallback, Row, Column, CardBase, type CardBaseProps, type AvailableQueries } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport styled from \"@emotion/styled\";\n// @ts-expect-error - this is a custom svg loader\nimport GarbageBin from \"./garbage-bin.svg?react\";\nimport { EntityName } from \"@hakit/core\";\n\nconst ASPECT_RATIO = 77.41 / 123.36;\n\nconst Card = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", EntityName>>)``;\nconst Contents = styled.div`\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: space-between;\n`;\n\nconst Bin = styled.div<{\n  textColor?: CSSProperties[\"color\"];\n  iconColor?: CSSProperties[\"color\"];\n}>`\n  position: relative;\n  .vertical-text {\n    position: absolute;\n    inset: 0;\n    margin-top: 40%;\n    margin-left: 5%;\n    text {\n      transition: opacity var(--ha-transition-duration) var(--ha-easing);\n      opacity: 0;\n    }\n    ${(props) => typeof props.textColor === \"string\" && `color: ${props.textColor};`}\n  }\n  .bin-icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate3d(-65%, -60%, 0);\n    ${(props) => typeof props.iconColor === \"string\" && `color: ${props.iconColor};`}\n  }\n`;\n\nconst BinBox = styled(Column)`\n  background: var(--ha-S500);\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  width: 50%;\n  &:nth-of-type(2n) {\n    margin-left: 1rem;\n  }\n  .collection-time {\n    font-size: 0.8rem;\n    color: var(--ha-S500-contrast);\n  }\n  .collection-title {\n    font-size: 0.8rem;\n    margin-bottom: 0.5rem;\n    color: var(--ha-S300-contrast);\n  }\n`;\n\nconst Title = styled.div`\n  color: var(--ha-S100-contrast);\n  font-size: 0.9rem;\n  font-weight: bold;\n`;\nconst Description = styled.div`\n  font-size: 0.8rem;\n  margin-top: 0.5rem;\n  color: var(--ha-S500-contrast);\n`;\n\ninterface VerticalTextProps {\n  height: number;\n  text: string;\n}\nfunction VerticalText({ height, text }: VerticalTextProps) {\n  const newWidth = height / ASPECT_RATIO / 2;\n  const newHeight = height / 1.3;\n  const textRef = useRef<SVGTextElement>(null);\n  const [fontSize, setFontSize] = useState(newHeight);\n\n  useEffect(() => {\n    const resizeText = () => {\n      if (textRef.current) {\n        const textLength = textRef.current.getComputedTextLength();\n        if (textLength > newHeight) {\n          setFontSize((oldFontSize) => oldFontSize * (newHeight / textLength));\n        }\n        textRef.current.style.opacity = \"1\";\n      }\n    };\n    resizeText();\n  }, [newHeight, text]);\n  return (\n    <svg width={newWidth} height={newHeight} className=\"vertical-text\">\n      <text\n        ref={textRef}\n        x=\"0\"\n        y=\"0\"\n        transform={`translate(${newWidth / 2}, ${newHeight / 2}) rotate(90)`}\n        textAnchor=\"middle\"\n        dominantBaseline=\"middle\"\n        fill=\"currentColor\"\n        fontSize={fontSize}\n      >\n        {text}\n      </text>\n    </svg>\n  );\n}\n\nexport module GarbageCollectionCardTypes {\n  export type Day = \"Sunday\" | \"Monday\" | \"Tuesday\" | \"Wednesday\" | \"Thursday\" | \"Friday\" | \"Saturday\";\n  export type Week = Array<BinProperties | CSSProperties[\"color\"]> | null;\n  export interface SvgProperties {\n    color: CSSProperties[\"color\"];\n    /** If the name is provided, this color will apply to the text of the bin @default rgba(0,0,0,0.6) */\n    textColor?: CSSProperties[\"color\"];\n    /** the color of the icon if provided to any of the bins @default rgba(0,0,0,0.6) */\n    iconColor?: CSSProperties[\"color\"];\n    /** the size of the rendered default svg @default 45 */\n    size?: number;\n  }\n  export interface BinProperties extends SvgProperties {\n    /** the name of the bin @default \"''\" */\n    name?: string;\n    /** the icon name from iconify to display over the bin, if provided as well as name, the display may look odd */\n    icon?: string;\n    /** if provided, the default garbage bin will not be rendered and you can render your own */\n    render?: (bin: BinProperties, key: Key) => React.ReactElement<HTMLElement>;\n  }\n\n  export interface Schedule {\n    /** optional title to appear in each schedule */\n    title?: React.ReactNode;\n    /** on what day does your garbage get collected */\n    day: GarbageCollectionCardTypes.Day;\n    /** as there's (usually) 4 weeks in a month, provide a config for each week, if you only have your garbage collected once a month, on a tuesday, specify null for the weeks that aren't relevant */\n    weeks: [\n      GarbageCollectionCardTypes.Week,\n      GarbageCollectionCardTypes.Week,\n      GarbageCollectionCardTypes.Week,\n      GarbageCollectionCardTypes.Week,\n    ];\n    /** how often is your garbage collected */\n    frequency: \"weekly\" | \"fortnightly\" | \"monthly\";\n    /** hide the next collection time @default false */\n    hideNextCollection?: boolean;\n  }\n}\n\ntype OmitProperties =\n  | \"onClick\"\n  | \"as\"\n  | \"title\"\n  | \"entity\"\n  | \"children\"\n  | \"disabled\"\n  | \"active\"\n  | \"service\"\n  | \"serviceData\"\n  | \"modalProps\"\n  | \"longPressCallback\"\n  | \"disableActiveState\"\n  | \"disableScale\"\n  | \"disableRipples\"\n  | \"rippleProps\";\nexport interface GarbageCollectionCardProps extends Omit<CardBaseProps, OmitProperties> {\n  /** The title of the card @default 'Garbage Collection' */\n  title?: React.ReactNode;\n  /** The description of the card @default undefined */\n  description?: React.ReactNode;\n  /** the schedule(s) for your garbage collection */\n  schedules: GarbageCollectionCardTypes.Schedule[];\n  /** the styles to apply globally to the garbage bin svg, this can be overwritten per week */\n  svg?: GarbageCollectionCardTypes.SvgProperties;\n  /** fired when the card is clicked */\n  onClick?: () => void;\n}\n\nfunction InternalGarbageCollectionCard({\n  schedules,\n  svg,\n  title = \"Garbage Collection\",\n  description,\n  className,\n  cssStyles,\n  key,\n  ...rest\n}: GarbageCollectionCardProps): React.ReactNode {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const dateSensor = useEntity(\"sensor.date\", {\n    returnNullIfNotFound: true,\n  });\n  const defaultSVGProperties = useMemo<Required<GarbageCollectionCardTypes.SvgProperties>>(\n    () => ({\n      size: 45,\n      color: \"#484848\",\n      textColor: \"rgba(0,0,0,0.6)\",\n      iconColor: \"rgba(0,0,0,0.6)\",\n      ...(svg ?? {}),\n    }),\n    [svg],\n  );\n  const today = useMemo(() => {\n    const date = dateSensor === null ? new Date() : new Date(dateSensor.state);\n    // 0 (Sunday) - 6 (Saturday)\n    return date.getDay();\n  }, [dateSensor]);\n  const currentWeek = Math.floor(new Date().getDate() / 7);\n  const dayNames = useMemo(() => [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], []);\n\n  const renderBin = useCallback(\n    (bin: CSSProperties[\"color\"] | GarbageCollectionCardTypes.BinProperties | undefined, key: Key) => {\n      if (typeof bin === \"object\" && typeof bin.render === \"function\") return bin.render(bin, key);\n      const size = typeof bin === \"string\" ? defaultSVGProperties.size : (bin?.size ?? defaultSVGProperties.size);\n      const color = typeof bin === \"string\" ? bin : (bin?.color ?? defaultSVGProperties.color);\n      const textColor = typeof bin === \"string\" ? defaultSVGProperties.textColor : (bin?.textColor ?? defaultSVGProperties.textColor);\n      const iconColor = typeof bin === \"string\" ? defaultSVGProperties.iconColor : (bin?.iconColor ?? defaultSVGProperties.iconColor);\n      const icon = typeof bin === \"string\" ? undefined : bin?.icon;\n      return (\n        <Bin className=\"bin-group\" key={key} textColor={textColor} iconColor={iconColor}>\n          {typeof bin !== \"string\" && typeof bin !== \"undefined\" && typeof bin.name === \"string\" && (\n            <VerticalText height={size} text={bin.name} />\n          )}\n          {typeof icon === \"string\" && (\n            <Icon\n              className=\"icon bin-icon\"\n              icon={icon}\n              style={{\n                fontSize: size / 2.7,\n              }}\n            />\n          )}\n          <GarbageBin\n            className=\"garbage-bin\"\n            style={{\n              color,\n              width: size,\n            }}\n          />\n        </Bin>\n      );\n    },\n    [defaultSVGProperties],\n  );\n\n  const formatTimeDisplay = useCallback((days: number) => {\n    return days === 0 ? \"Today\" : days === 1 ? \"Tomorrow\" : `in ${days} days`;\n  }, []);\n\n  const findNextNonNullWeek = useCallback((weeks: GarbageCollectionCardTypes.Week[], startWeek: number): number => {\n    for (let i = 0; i < weeks.length; i++) {\n      const index = (startWeek + i) % weeks.length;\n      if (weeks[index] !== null) {\n        return index;\n      }\n    }\n    return -1; // return an invalid index if no non-null weeks are found\n  }, []);\n\n  const collections = useMemo(\n    () =>\n      schedules.flatMap((schedule) => {\n        const scheduleDay = dayNames.map((x) => x.toLowerCase()).indexOf(schedule.day.toLowerCase());\n        const daysUntilCollection = (scheduleDay - today + 7) % 7;\n\n        const futureDate = new Date();\n        futureDate.setDate(new Date().getDate() + daysUntilCollection);\n\n        const bins = schedule.weeks[currentWeek];\n        let nextWeekIndex = (currentWeek + 1) % schedule.weeks.length;\n\n        // Find next non-null week for non-weekly frequencies\n        if (schedule.frequency !== \"weekly\") {\n          nextWeekIndex = findNextNonNullWeek(schedule.weeks, currentWeek);\n        }\n\n        const nextBins = schedule.weeks[nextWeekIndex];\n        const timeUntilCollection = formatTimeDisplay(daysUntilCollection);\n        // ignore next week if null (no collection)\n        if (schedule.hideNextCollection || nextBins === null) {\n          return [\n            {\n              schedule,\n              timeUntilCollection,\n              bins,\n            },\n          ];\n        }\n\n        const nextFutureDate = new Date(futureDate);\n        let incrementDays;\n\n        switch (schedule.frequency) {\n          case \"weekly\":\n            incrementDays = 7;\n            break;\n          case \"fortnightly\":\n            incrementDays = 14;\n            break;\n          case \"monthly\":\n            incrementDays = 28; // Closest approximation to average days in a month\n            break;\n          default:\n            incrementDays = 7;\n        }\n\n        nextFutureDate.setDate(futureDate.getDate() + incrementDays);\n\n        const daysUntilNextCollection = daysUntilCollection + incrementDays;\n\n        const nextCollectionTime = formatTimeDisplay(daysUntilNextCollection);\n        return [\n          {\n            schedule,\n            timeUntilCollection,\n            bins,\n          },\n          {\n            schedule,\n            timeUntilCollection: nextCollectionTime,\n            bins: nextBins,\n          },\n        ];\n      }),\n    [currentWeek, dayNames, schedules, today, findNextNonNullWeek, formatTimeDisplay],\n  );\n  return (\n    <Card\n      key={key}\n      cssStyles={`\n      ${globalComponentStyle?.garbageCollectionCard ?? \"\"}\n      ${cssStyles ?? \"\"}\n    `}\n      disableActiveState\n      disableRipples\n      disableScale\n      className={`garbage-collection-card ${className ?? \"\"}`}\n      {...rest}\n    >\n      <Contents>\n        <Column alignItems=\"flex-start\" fullWidth>\n          <Title className=\"title\">{title}</Title>\n          {typeof description !== \"undefined\" && <Description className=\"description\">{description}</Description>}\n        </Column>\n        <Row\n          className=\"row\"\n          fullWidth\n          wrap=\"nowrap\"\n          justifyContent=\"space-between\"\n          style={{\n            marginTop: \"0.5rem\",\n          }}\n        >\n          {collections\n            .filter((collection) => collection.bins !== null)\n            .map((collection, index) => {\n              return (\n                <BinBox className=\"bin-box\" key={index}>\n                  {typeof collection.schedule.title !== \"undefined\" && <div className=\"collection-title\">{collection.schedule.title}</div>}\n                  <Row className=\"row\" wrap=\"nowrap\" gap=\"1rem\">\n                    {collection.bins && collection.bins.map((bin, index) => renderBin(bin, index))}\n                  </Row>\n                  <div className=\"collection-time\">{collection.timeUntilCollection}</div>\n                </BinBox>\n              );\n            })}\n        </Row>\n      </Contents>\n    </Card>\n  );\n}\n/**\n * This card is useful to remind you of schedule of the pickup of our rubbish bins, it's very simple, yet highly customizable.\n *\n * It uses the current date (either provided by home assistant sensor.date or via javascript to determine the current day of the week, and then calculates the next collection date based on the schedule provided.\n *\n * You can change the color of the bin, by simply providing a css color property or providing an object will allow you to change colors, size of the bin, text, textColors, icon or even a custom render function.\n *\n * It will also allow you to create multiple schedules if you need to.\n *\n * You can also hide the \"next\" collection by passing through hideNextCollection on the schedule.\n *\n * WARNING: If the approach I've taken for schedules doesn't work for you, reach out on github an open an new issue with some details on what isn't working for you!\n *\n * Here's an example of some of the customization achievable:\n * */\nexport function GarbageCollectionCard(props: GarbageCollectionCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"GarbageCollectionCard\" })}>\n      <InternalGarbageCollectionCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { useMemo, useRef, useCallback, useEffect, useState } from \"react\";\nimport { type HassEntityWithService, useHass, useEntity, FilterByDomain, EntityName } from \"@hakit/core\";\nimport { Icon, type IconProps } from \"@iconify/react\";\nimport { Row, Column, fallback, CardBase, type CardBaseProps, type AvailableQueries } from \"@components\";\nimport { createDateFormatter, daySuffix } from \"./formatter\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { FormatFunction } from \"./types\";\nimport { Time, AmOrPm } from \"./shared\";\n\nconst Card = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", FilterByDomain<EntityName, \"sensor\">>>)`\n  cursor: default;\n`;\n\nconst Contents = styled.div`\n  padding: 1rem;\n  height: 100%;\n  .primary-icon {\n    color: var(--ha-A200);\n    font-size: 30px;\n  }\n  &:not(:disabled),\n  &:not(.disabled) {\n    &:hover,\n    &:active {\n      .primary-icon {\n        color: var(--ha-A400);\n      }\n    }\n  }\n`;\n\n// We intentionally removed bespoke locale logic in favor of the central formatter exposed via useHass.\n// The only custom logic retained locally is the ordinal day suffix (1st, 2nd, 3rd...) which Home Assistant\n// itself does not currently expose as a dedicated helper; we compose that around the shared formatter parts.\ntype CustomFormatter = (date: Date, formatter: FormatFunction) => React.ReactNode;\ntype OmitProperties = \"title\" | \"as\" | \"active\" | \"entity\" | \"service\" | \"serviceData\" | \"longPressCallback\" | \"modalProps\";\nexport interface TimeCardProps extends Omit<CardBaseProps<\"div\">, OmitProperties> {\n  /** Optional Home Assistant sensor providing time (state string HH:MM). If omitted, component uses internal ticking clock.\n   * Entity value is assumed already localized by HA; we only derive optional AM/PM suffix. */\n  timeEntity?: FilterByDomain<EntityName, \"sensor\">;\n  /** Optional Home Assistant sensor providing date (state string YYYY-MM-DD). If omitted, component uses current date locally but\n   * formats via HA locale/timezone helpers. */\n  dateEntity?: FilterByDomain<EntityName, \"sensor\">;\n  /** Custom time format pattern or function. Providing this always ignores `timeEntity` even if present.\n   * Pattern uses intl-dateformat style tokens; function receives (date, haFormatter). */\n  timeFormat?: string | CustomFormatter;\n  /** Custom date format pattern or function. Providing this always ignores `dateEntity` even if present.\n   * Pattern uses intl-dateformat style tokens; function receives (date, haFormatter). */\n  dateFormat?: string | CustomFormatter;\n  /** Hide the date portion entirely. @default false */\n  hideDate?: boolean;\n  /** Hide the time portion entirely. @default false */\n  hideTime?: boolean;\n  /** Hide the leading icon. @default false */\n  hideIcon?: boolean;\n  /** Milliseconds throttle for internal ticker when NOT entity-driven (custom formats or missing entities). @default 1000 */\n  throttleTime?: number;\n  /** Override icon; falls back to date entity icon or mdi:calendar. */\n  icon?: string;\n  /** Additional icon props/styles. */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** Center align contents instead of left alignment. @default false */\n  center?: boolean;\n  /** Click handler; receives time sensor entity when entity-driven. */\n  onClick?: (entity: HassEntityWithService<\"sensor\">, event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nconst DEFAULT_TIME_FORMAT = \"hh:mm A\";\nconst DEFAULT_DATE_FORMAT = \"dddd, MMMM DD YYYY\";\n\nconst customFormatter = createDateFormatter({});\n// HA-aware wrapper adding locale & timezone when formatting outside entity-driven mode.\n// Ensures non-entity clock/date respects Home Assistant user preferences instead of browser defaults.\n\nfunction InternalTimeCard({\n  timeEntity,\n  dateEntity,\n  timeFormat,\n  dateFormat,\n  throttleTime = 1000,\n  hideDate = false,\n  hideIcon = false,\n  hideTime = false,\n  center = false,\n  icon,\n  iconProps,\n  className,\n  children,\n  disabled,\n  onClick,\n  cssStyles,\n  key,\n  ...rest\n}: TimeCardProps): React.ReactNode {\n  const [currentTime, setCurrentTime] = useState(new Date());\n  // Access the centralized, timezone & locale aware formatter from the store (HA config + user profile driven)\n  const formatter = useHass((s) => s.formatter);\n  const locale = useHass((s) => s.locale);\n  const config = useHass((s) => s.config);\n  const language = locale?.language;\n  const timeZone = config?.time_zone;\n\n  const { formatAmPmSuffix, formatDateWeekday, formatDateMonth, formatDateYear, formatTime } = formatter;\n  const previousTimeRef = useRef<number>(Date.now());\n  const requestRef = useRef<number>(undefined);\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const timeSensor = useEntity(timeEntity ?? \"unknown\", {\n    returnNullIfNotFound: true,\n  });\n  const dateSensor = useEntity(dateEntity ?? \"unknown\", {\n    returnNullIfNotFound: true,\n  });\n  const dateIcon = useMemo(() => icon || dateSensor?.attributes?.icon || \"mdi:calendar\", [icon, dateSensor]);\n  const [formatted, amOrPm] = useMemo(() => {\n    // Entity-driven path: sensor.time already reflects HA timezone & user locale preferences.\n    // Do not re-format the HH:MM portion; only optionally derive AM/PM suffix if user prefers 12h.\n    if (timeSensor && !timeFormat) {\n      const raw = timeSensor.state ?? \"00:00\"; // 24h HH:MM\n      const [h, m] = raw.split(\":\").map(Number);\n      const entityDate = new Date();\n      entityDate.setHours(h, m, 0, 0);\n      // Decide suffix using HA-aware formatter; keep raw string unchanged.\n      return [raw, formatAmPmSuffix(entityDate)];\n    }\n    // Non-entity path: use HA-aware formatter (NOT browser locale/timezone) for both parts.\n    const timeStr = formatTime(currentTime); // includes suffix if AM/PM preference, else 24h.\n    // Split suffix out so UI stays consistent with separate span.\n    const match = timeStr.match(/^(.*?)(?:\\s([AP]M))$/i);\n    if (match) {\n      return [match[1], match[2]];\n    }\n    return [timeStr, undefined];\n  }, [timeSensor, timeFormat, currentTime, formatTime, formatAmPmSuffix]);\n  const hasOnClick = typeof onClick === \"function\";\n\n  // Memoized HA format function (FormatFunction signature) injecting locale/timezone.\n  const haFormatter = useCallback<FormatFunction>(\n    (date, format, opts) => {\n      return customFormatter(date, format, { locale: language, timezone: timeZone, ...opts });\n    },\n    [language, timeZone],\n  );\n\n  const timeValue = useMemo(() => {\n    if (timeSensor && !timeFormat) {\n      return (\n        <>\n          <Time className=\"time\">{formatted}</Time>\n          {amOrPm && <AmOrPm className=\"time-suffix\">{amOrPm}</AmOrPm>}\n        </>\n      );\n    }\n    // Custom formatter path retained for backwards compatibility; note it uses browser timezone.\n    // Prefer built-in HA formatter functions instead; if user supplies pattern we fall back.\n    if (!timeSensor && !timeFormat) {\n      return (\n        <>\n          <Time className=\"time\">{formatted}</Time>\n          {amOrPm && <AmOrPm className=\"time-suffix\">{amOrPm}</AmOrPm>}\n        </>\n      );\n    }\n    try {\n      return (\n        <Time className=\"time\">\n          {typeof timeFormat === \"function\"\n            ? timeFormat(currentTime, haFormatter)\n            : haFormatter(currentTime, timeFormat ?? DEFAULT_TIME_FORMAT)}\n        </Time>\n      );\n    } catch (e) {\n      console.error(\"Time formatting error\", e);\n      return <Time className=\"time\">{formatted}</Time>;\n    }\n  }, [amOrPm, currentTime, formatted, timeFormat, timeSensor, haFormatter]);\n\n  const dateValue = useMemo(() => {\n    if (hideDate) return null;\n    try {\n      // Entity path using HA date entity (YYYY-MM-DD) and HA-aware formatter parts.\n      if (dateSensor && !dateFormat) {\n        const parts = dateSensor.state.split(\"-\").map(Number);\n        if (parts.length === 3) {\n          const d = new Date(parts[0], parts[1] - 1, parts[2]);\n          const day = d.getDate();\n          const suffix = daySuffix(day);\n          // Compose: Weekday, Month <day><suffix> <year>\n          return `${formatDateWeekday(d)}, ${formatDateMonth(d)} ${day}${suffix} ${formatDateYear(d)}`;\n        }\n      }\n      // Non-entity default path: build HA timezone/locale aware date using formatter parts (with ordinal).\n      if (!dateSensor && !dateFormat) {\n        const d = currentTime;\n        const day = d.getDate();\n        const suffix = daySuffix(day);\n        return `${formatDateWeekday(d)}, ${formatDateMonth(d)} ${day}${suffix} ${formatDateYear(d)}`;\n      }\n      // Custom formatting path now injected with HA locale/timezone via haFormatter.\n      return typeof dateFormat === \"function\"\n        ? dateFormat(currentTime, haFormatter)\n        : haFormatter(currentTime, dateFormat ?? DEFAULT_DATE_FORMAT);\n    } catch (e) {\n      console.error(\"Date formatting error\", e);\n      return haFormatter(currentTime, DEFAULT_DATE_FORMAT);\n    }\n  }, [hideDate, dateSensor, dateFormat, currentTime, formatDateWeekday, formatDateMonth, formatDateYear, haFormatter]);\n\n  const updateClock = useCallback(() => {\n    const now = Date.now();\n    const elapsed = now - previousTimeRef.current;\n    if (elapsed >= throttleTime) {\n      setCurrentTime(new Date());\n      previousTimeRef.current = now - (elapsed % throttleTime);\n    }\n    requestRef.current = requestAnimationFrame(updateClock);\n  }, [throttleTime]);\n\n  // Only run a ticker when we are NOT fully entity-driven for both time & date (i.e. custom formats or missing entities)\n  const needTicker = useMemo(() => {\n    const timeEntityDriven = timeSensor && !timeFormat;\n    const dateEntityDriven = dateSensor && !dateFormat;\n    return !(timeEntityDriven && dateEntityDriven);\n  }, [timeSensor, timeFormat, dateSensor, dateFormat]);\n\n  useEffect(() => {\n    if (!needTicker) return; // Entity-driven; rely on websocket updates.\n    requestRef.current = requestAnimationFrame(updateClock);\n    return () => {\n      if (requestRef.current) cancelAnimationFrame(requestRef.current);\n    };\n  }, [needTicker, updateClock]);\n\n  return (\n    <Card\n      key={key}\n      cssStyles={`\n        ${globalComponentStyle?.timeCard ?? \"\"}\n        ${cssStyles ?? \"\"}\n      `}\n      className={`${className ?? \"\"} time-card`}\n      disableScale={disabled || !hasOnClick}\n      disableActiveState={rest.disableActiveState ?? !hasOnClick}\n      disableRipples={rest.disableRipples ?? !hasOnClick}\n      onClick={(_: unknown, event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n        if (hasOnClick && timeSensor) {\n          onClick?.(timeSensor, event);\n        }\n      }}\n      {...rest}\n    >\n      <Contents>\n        <Column className=\"column\" gap=\"0.5rem\" alignItems={center ? \"center\" : \"flex-start\"} fullHeight wrap=\"nowrap\">\n          {(!hideIcon || !hideTime) && (\n            <Row className=\"row\" gap=\"0.5rem\" alignItems=\"center\" wrap=\"nowrap\">\n              {!hideIcon && <Icon className=\"icon primary-icon\" icon={dateIcon} {...(iconProps ?? {})} />}\n              {!hideTime && timeValue}\n            </Row>\n          )}\n          {!hideDate && <Row>{dateValue}</Row>}\n        </Column>\n        {children && <div className=\"children\">{children}</div>}\n      </Contents>\n    </Card>\n  );\n}\n/**\n *\n * Default behavior: Renders current clock time & date using Home Assistant locale, timezone and 12/24h preference.\n * It maintains an internal ticking Date (throttled) unless both a `timeEntity` and `dateEntity` are provided\n * without custom format overridesin which case updates rely on HA websocket events. Entities are optional.\n *\n * Custom formats (timeFormat/dateFormat): Always override entity usage for that portion. The function versions of the formatters will receive a timezone/locale aware formatter from the home assistant instance, so output still respects user settings. Pattern strings use intl-dateformat tokens.\n *\n * Ordinal day suffix (1st, 2nd, 3rd...) is added locally when composing default date output.\n */\nexport function TimeCard(props: TimeCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"TimeCard\" })}>\n      <InternalTimeCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { css, Global } from \"@emotion/react\";\nimport { useEffect, useMemo, useState, useId } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { localize, useHass, type EntityName } from \"@hakit/core\";\nimport { Row, FabCard, fallback, mq, PreloadImage, CardBase } from \"@components\";\nimport type { PictureCardProps, CardBaseProps, AvailableQueries } from \"@components\";\nimport { Icon } from \"@iconify/react\";\nimport { useKeyPress } from \"react-use\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\ntype OmitProperties =\n  | \"as\"\n  | \"active\"\n  | \"title\"\n  | \"entity\"\n  | \"modalProps\"\n  | \"entity\"\n  | \"serviceData\"\n  | \"service\"\n  | \"disableRipples\"\n  | \"disableScale\"\n  | \"disableActiveState\"\n  | \"rippleProps\"\n  | \"service\"\n  | \"serviceData\"\n  | \"longPressCallback\"\n  | \"onClick\"\n  | \"modalProps\";\n\ntype Extendable = PictureCardProps & Omit<CardBaseProps<\"div\", EntityName>, OmitProperties>;\nexport interface AreaCardProps extends Extendable {\n  /** the hash of the area, eg \"office\", \"living-room\", this will set the hash in the url bar and activate the area */\n  hash: string;\n  /** The children to render when the area is activated */\n  children: React.ReactNode;\n  /** called when the card is pressed */\n  onClick?: () => void;\n  /** disable the click events on the card, useful if you want to disable the area card for certain situations like drag or panning @default false */\n  disable?: boolean;\n}\n\nconst StyledAreaCard = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", EntityName>>)<Partial<PictureCardProps>>`\n  aspect-ratio: 16 / 9;\n  background-color: transparent;\n  &:hover,\n  &:active {\n    background-color: transparent !important;\n  }\n  height: var(--stretch,);\n`;\n\nconst PictureCardFooter = styled.div`\n  all: unset;\n  font-family: var(--ha-font-family);\n  padding: 1rem;\n  color: var(--ha-500-contrast);\n  background-color: var(--ha-background-opaque);\n  transition: color var(--ha-transition-duration) var(--ha-easing);\n  position: absolute;\n  inset: auto 0 0 0;\n  font-weight: bold;\n  font-size: 1.2rem;\n`;\n\nconst NavBar = styled(PictureCardFooter)`\n  padding: 0.95rem;\n  color: var(--ha-S100-contrast);\n  background-color: var(--ha-S50);\n  inset: 0 0 auto 0;\n  z-index: calc(var(--ha-device-area-card-z-index) + 1);\n  border-bottom: 1px solid var(--ha-S200);\n`;\n\nconst FullScreen = styled.div`\n  position: fixed;\n  inset: 0;\n  left: var(--ha-area-card-expanded-offset);\n  padding: 0;\n  margin: 0;\n  max-height: 100svh;\n  background: var(--ha-S100);\n  z-index: var(--ha-device-area-card-z-index);\n  display: flex;\n  justify-content: center;\n  align-items: stretch;\n  transition: left var(--ha-transition-duration) var(--ha-easing);\n  color: var(--ha-S50-contrast);\n  ${mq(\n    [\"xxs\", \"xs\"],\n    `\n    left: 0;\n  `,\n  )}\n`;\n\nconst ChildContainer = styled.div`\n  margin-top: 5rem;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  overflow-y: auto;\n  flex-direction: column;\n`;\n\nfunction InternalAreaCard({\n  hash,\n  children,\n  icon,\n  title,\n  image,\n  className,\n  preloadProps,\n  onClick,\n  disable = false,\n  id,\n  cssStyles,\n  key,\n  ...rest\n}: AreaCardProps) {\n  const _id = useId();\n  const idRef = id ?? _id;\n  const { addRoute, getRoute } = useHass.getState().helpers;\n  const dynamicHash = useHass((store) => store.hash);\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const portalRoot = useHass((store) => store.portalRoot);\n  const windowContext = useHass((store) => store.windowContext);\n  const win = windowContext ?? window;\n  const [isPressed] = useKeyPress((event) => event.key === \"Escape\");\n  const [open, setOpen] = useState(false);\n  // we want to retrigger this effect when the actual hash changes\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const route = useMemo(() => getRoute(hash), [hash, getRoute, dynamicHash]);\n\n  useEffect(() => {\n    // if the route is active, and active isn't set, set it\n    if (route?.active && !open) {\n      setOpen(true);\n      // if the route isn't active, and we're open, close it\n    } else if (!route?.active && open) {\n      setOpen(false);\n    }\n  }, [route, open]);\n\n  useEffect(() => {\n    // add the current route by hash, even though this is called multiple times\n    // it will only add it the first time\n    addRoute({\n      hash,\n      icon: icon || \"mdi:info\",\n      name: title,\n    });\n  }, [addRoute, hash, icon, title]);\n\n  // when the escape key is pressed and we're active, close the card\n  useEffect(() => {\n    if (isPressed && open) {\n      // setting the hash change here, will also bubble up to the provider\n      // which will update the routes, which will update the state automatically.\n      location.hash = \"\";\n    }\n  }, [isPressed, open]);\n\n  return (\n    <>\n      {open &&\n        createPortal(\n          open === true && (\n            <FullScreen key={`fullscreen-layout-${idRef}`} className={\"full-screen\"}>\n              <Global\n                styles={css`\n                  :root {\n                    --ha-hide-body-overflow-y: hidden;\n                  }\n                `}\n              />\n              <NavBar className={\"nav-bar\"}>\n                <Row gap=\"0.5rem\" justifyContent=\"space-between\" className={\"row\"}>\n                  <Row gap=\"0.5rem\" className={\"row\"}>\n                    {icon && <Icon className={\"icon\"} icon={icon} />}\n                    {title}\n                  </Row>\n                  <FabCard\n                    title={localize(\"close\")}\n                    tooltipPlacement=\"left\"\n                    icon=\"mdi:close\"\n                    onClick={() => {\n                      location.hash = \"\";\n                    }}\n                  />\n                </Row>\n              </NavBar>\n              <ChildContainer className={\"child-container\"}>{children}</ChildContainer>\n            </FullScreen>\n          ),\n          portalRoot ?? win.document.body,\n          idRef,\n        )}\n      <StyledAreaCard\n        key={key}\n        disableActiveState\n        disableRipples\n        id={`${idRef}-area-card`}\n        className={`area-card ${className ?? \"\"}`}\n        onClick={() => {\n          if (!disable) {\n            location.hash = hash;\n            if (onClick) {\n              onClick();\n            }\n          }\n        }}\n        cssStyles={`\n          ${globalComponentStyle.areaCard ?? \"\"}\n          ${cssStyles ?? \"\"}\n        `}\n        {...rest}\n      >\n        <PreloadImage\n          {...(preloadProps ?? {})}\n          src={image}\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n            position: \"absolute\",\n          }}\n          lazy\n        >\n          <PictureCardFooter className={\"footer\"}>\n            <Row gap={\"0.5rem\"} className={\"row\"}>\n              {icon && (\n                <Icon\n                  className={\"icon\"}\n                  icon={icon}\n                  style={{\n                    color: `var(--ha-500-contrast)`,\n                  }}\n                />\n              )}\n              {title}\n            </Row>\n          </PictureCardFooter>\n        </PreloadImage>\n      </StyledAreaCard>\n    </>\n  );\n}\n/** The AreaCard component is a very simple way of categorizing all your entities into a single \"PictureCard\" which will show all the entities when clicked. */\nexport function AreaCard(props: AreaCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"AreaCard\" })}>\n      <InternalAreaCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useMemo, useState, useCallback } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { type AvailableQueries, fallback } from \"@components\";\nimport type { VacuumControlsProps } from \"@components\";\nimport { useHass, useEntity, localize, type EntityName, type FilterByDomain } from \"@hakit/core\";\nimport { VacuumImage } from \"../../Shared/Entity/Vacuum/VacuumControls/VacuumImage\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { getToolbarActions } from \"../../Shared/Entity/Vacuum/VacuumControls/shared\";\nimport { FeatureEntity } from \"../CardBase/FeatureEntity\";\nimport { ButtonCard, type ButtonCardProps } from \"../ButtonCard\";\n\nconst StyledVacuumCard = styled(ButtonCard)`\n  .footer {\n    margin-top: 0.5rem;\n  }\n`;\n\nconst StyledVacuumImage = styled(VacuumImage)`\n  width: 100%;\n`;\n\ntype OmitProperties = \"title\" | \"features\";\nexport type VacuumCardProps = Omit<ButtonCardProps<FilterByDomain<EntityName, \"vacuum\">>, OmitProperties> & {\n  /** An optional override for the title */\n  title?: string;\n} & VacuumControlsProps;\n\nfunction InternalVacuumCard({\n  entity: _entity,\n  shortcuts,\n  hideCurrentBatteryLevel,\n  hideState = false,\n  hideUpdated = false,\n  hideToolbar = false,\n  className,\n  cssStyles,\n  serviceData,\n  service,\n  modalProps,\n  customImage,\n  locatingNode,\n  ...rest\n}: VacuumCardProps) {\n  const [flash, setFlash] = useState(false);\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const entity = useEntity(_entity);\n\n  const titleValue = useMemo(() => {\n    return flash ? (locatingNode ?? `${localize(\"locate\")}...`) : (entity.attributes.status ?? entity.state);\n  }, [entity.attributes.status, locatingNode, entity.state, flash]);\n\n  const locateFlash = useCallback(() => {\n    setFlash(true);\n    setTimeout(() => {\n      setFlash(false);\n    }, 2000);\n  }, []);\n\n  const features = getToolbarActions({\n    entity,\n    shortcuts,\n    onLocate() {\n      locateFlash();\n    },\n  });\n  return (\n    <StyledVacuumCard\n      className={`${className ?? \"\"} vacuum-card`}\n      modalProps={{\n        stateTitle: titleValue,\n        locatingNode,\n        hideCurrentBatteryLevel,\n        hideState,\n        hideUpdated,\n        hideToolbar,\n        shortcuts,\n        ...modalProps,\n      }}\n      entity={_entity}\n      // @ts-expect-error - don't know the entity name, so we can't know the service type\n      service={service}\n      // @ts-expect-error - don't know the entity name, so we can't know the service data\n      serviceData={serviceData}\n      disableActiveState\n      disableRipples\n      hideToggle\n      cssStyles={`\n        ${globalComponentStyle.vacuumCard ?? \"\"}\n        ${cssStyles ?? \"\"}\n      `}\n      icon={<StyledVacuumImage src={customImage} className={entity.state} />}\n      customRenderState={() => titleValue}\n      fabProps={{\n        style: {\n          padding: 0,\n          backgroundColor: \"none\",\n          width: \"3rem\",\n          height: \"3rem\",\n        },\n      }}\n      features={features.map((feature, index) => (\n        <FeatureEntity\n          key={index}\n          iconProps={{\n            color: feature?.active ? \"var(--ha-300)\" : undefined,\n          }}\n          {...feature}\n        />\n      ))}\n      {...rest}\n    />\n  );\n}\n\n/** The VacuumCard is a card to easily interact with vacuum entities, you should have full control over your vacuum entity and even more controls when you long press on the card.\n */\nexport function VacuumCard(props: VacuumCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"VacuumCard\" })}>\n      <InternalVacuumCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { Icon, type IconProps } from \"@iconify/react\";\nimport { Row, fallback, PreloadImage, CardBase, type CardBaseProps, type PreloadImageProps, type AvailableQueries } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { EntityName } from \"@hakit/core\";\n\ntype OmitProperties =\n  | \"title\"\n  | \"as\"\n  | \"active\"\n  | \"entity\"\n  | \"disabled\"\n  | \"service\"\n  | \"serviceData\"\n  | \"onClick\"\n  | \"active\"\n  | \"longPressCallback\"\n  | \"modalProps\";\n\nexport interface PictureCardProps extends Omit<CardBaseProps<\"button\">, OmitProperties> {\n  /** an image to provide to the card */\n  image: string;\n  /** a title of the card */\n  title: string;\n  /** an optional icon to provide */\n  icon?: string;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** an object containing the props to pass to the preloader */\n  preloadProps?: PreloadImageProps;\n  /** called when the card is pressed */\n  onClick?: () => void;\n}\n\nconst StyledPictureCard = styled(CardBase as React.ComponentType<CardBaseProps<\"button\", EntityName>>)`\n  aspect-ratio: 16 / 9;\n`;\nconst Inner = styled.div`\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: space-between;\n`;\n\nconst PictureCardFooter = styled.h4`\n  all: unset;\n  font-family: var(--ha-font-family);\n  padding: 1rem;\n  color: var(--ha-500-contrast);\n  background-color: var(--ha-background-opaque);\n  position: absolute;\n  inset: auto 0 0 0;\n  font-weight: bold;\n  font-size: 1.2rem;\n`;\n\nfunction _PictureCard({\n  title,\n  key,\n  image,\n  icon,\n  iconProps,\n  className,\n  preloadProps,\n  children,\n  ...rest\n}: PictureCardProps): React.ReactNode {\n  return (\n    <StyledPictureCard\n      key={key}\n      disableActiveState\n      disableScale={rest.disableScale ?? typeof rest.onClick === \"undefined\"}\n      disableRipples={rest.disableRipples ?? typeof rest.onClick === \"undefined\"}\n      className={`picture-card ${className ?? \"\"}`}\n      {...rest}\n    >\n      <Inner>\n        <PreloadImage\n          {...(preloadProps ?? {})}\n          src={image}\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n            position: \"absolute\",\n          }}\n          lazy\n        >\n          <PictureCardFooter className=\"footer\">\n            <Row gap={\"0.5rem\"} className=\"row\">\n              {icon && <Icon icon={icon} className=\"icon\" {...(iconProps ?? {})} />}\n              {title}\n            </Row>\n          </PictureCardFooter>\n        </PreloadImage>\n      </Inner>\n      {children && <div className=\"children\">{children}</div>}\n    </StyledPictureCard>\n  );\n}\n/** A simple component to render an image with a title/icon similar to the lovelace picture card, you can also bind a click event to the card, which will also return the entity if provided\n * @example\n * <PictureCard entity=\"group.some_group_of_lights\" onClick={(entity) => {\n *  entity.service.toggle();\n * }}\n */\nexport function PictureCard(props: PictureCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"PictureCard\" })}>\n      <_PictureCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useMemo } from \"react\";\nimport styled from \"@emotion/styled\";\nimport {\n  useEntity,\n  useIconByDomain,\n  useHass,\n  useIcon,\n  useIconByEntity,\n  isUnavailableState,\n  computeDomainTitle,\n  computeDomain,\n  ON,\n  type EntityName,\n} from \"@hakit/core\";\nimport { CardBase, fallback, Tooltip } from \"@components\";\nimport type { TooltipProps, CardBaseProps } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { type IconProps } from \"@iconify/react\";\n\nconst StyledFabCard = styled(<E extends EntityName>({ service, serviceData, key, ...props }: CardBaseProps<\"button\", E>) => (\n  <CardBase\n    key={key}\n    // @ts-expect-error - don't know entity name\n    service={service}\n    // @ts-expect-error - don't know entity name\n    serviceData={serviceData}\n    {...props}\n  />\n))<\n  CardBaseProps<\"button\", EntityName> & {\n    hasChildren?: boolean;\n    size: number;\n  }\n>`\n  flex-shrink: 0;\n  border-radius: ${(props) => props.borderRadius};\n  color: ${(props) => (props.active ? `var(--ha-A400)` : `var(--ha-S500-contrast)`)};\n  ${(props) =>\n    props.size &&\n    `\n    font-size: ${props.size * 0.37}px;\n    height: ${props.size}px;\n    ${!props.hasChildren ? `width: ${props.size}px;` : ``}\n  `}\n  > .ripple-parent {\n    > .ripple-inner {\n      height: 100%;\n    }\n  }\n`;\n\nconst Contents = styled.div<{\n  size: number;\n  hasChildren: boolean;\n}>`\n  text-align: center;\n  display: flex;\n  flex-grow: 0;\n  flex-shrink: 0;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  svg {\n    ${(props) => (props.hasChildren ? `margin-right: 0.5rem;` : ``)}\n  }\n  ${(props) => `\n    ${\n      props.hasChildren\n        ? `padding: 0 ${props.size * 0.2}px;`\n        : `\n    `\n    }\n  `}\n`;\n\ntype OmitProperties = \"title\" | \"active\";\n\nexport interface FabCardProps<E extends EntityName> extends Omit<CardBaseProps<\"button\", E>, OmitProperties> {\n  /** The size of the Fab, this applies to the width and height @default 48 */\n  size?: number;\n  /** Optional icon param, this is automatically retrieved by the \"domain\" name if provided, or can be overwritten with a custom value  */\n  icon?: string | null;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** will not show any icons */\n  noIcon?: boolean;\n  /** the title used for the tooltip and or modal that will expands, defaults to entity name or domain name  */\n  title?: string;\n  /** the tooltip placement @default \"top\" */\n  tooltipPlacement?: TooltipProps[\"placement\"];\n  /** active flag for the state of the fab, by default this is active if the entity.state value is ON, if you want to control this just pass the prop */\n  active?: boolean;\n}\n\nfunction InternalFabCard<E extends EntityName>({\n  title: _title,\n  tooltipPlacement,\n  icon: _icon,\n  iconProps,\n  noIcon,\n  size = 48,\n  entity: _entity,\n  active: _active,\n  children,\n  disabled = false,\n  borderRadius,\n  className,\n  service,\n  serviceData,\n  cssStyles,\n  key,\n  ...rest\n}: FabCardProps<E>): React.ReactNode {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const entity = useEntity(_entity || \"unknown\", {\n    returnNullIfNotFound: true,\n  });\n  const domain = _entity ? computeDomain(_entity) : null;\n  const icon = typeof _icon === \"string\" ? _icon : null;\n  const domainIcon = useIconByDomain(domain === null ? \"unknown\" : domain, {\n    ...(iconProps ?? {}),\n    fontSize: iconProps?.fontSize ?? `${size / 1.7}px`,\n  });\n  const hasChildren = typeof children !== \"undefined\";\n  const _borderRadius = hasChildren ? (borderRadius ?? \"10px\") : (borderRadius ?? \"50%\");\n  const isUnavailable = typeof entity?.state === \"string\" ? isUnavailableState(entity.state) : false;\n  const entityIcon = useIconByEntity(_entity || \"unknown\", {\n    ...(iconProps ?? {}),\n    fontSize: iconProps?.fontSize ?? `${size / 1.7}px`,\n  });\n  const iconElement = useIcon(icon, {\n    ...(iconProps ?? {}),\n    fontSize: iconProps?.fontSize ?? `${size / 1.7}px`,\n  });\n  const active = typeof _active === \"boolean\" ? _active : entity === null ? false : entity.state === ON && !isUnavailable;\n  const title = useMemo(\n    () => _title || (domain !== null && _entity ? computeDomainTitle(_entity, entity?.attributes?.device_class) : null),\n    [_title, domain, entity, _entity],\n  );\n  return (\n    <>\n      <Tooltip\n        key={key}\n        placement={tooltipPlacement}\n        title={`${_title ?? entity?.attributes?.friendly_name ?? title ?? \"\"}${entity?.state ? ` - ${entity.state}` : \"\"}`}\n      >\n        <StyledFabCard\n          as=\"button\"\n          title={title}\n          // just a dodgey hack to let typescript play nicely here\n          // as we don't know the service/serviceData at this level\n          service={service as undefined}\n          serviceData={serviceData as undefined}\n          entity={_entity}\n          className={`fab-card ${className ?? \"\"}`}\n          disabled={disabled || isUnavailable}\n          active={active}\n          size={size}\n          borderRadius={_borderRadius}\n          hasChildren={hasChildren}\n          disableColumns={true}\n          cssStyles={`\n            ${globalComponentStyle?.fabCard ?? \"\"}\n            ${cssStyles ?? \"\"}\n          `}\n          {...rest}\n        >\n          <Contents size={size} hasChildren={hasChildren}>\n            {noIcon !== true && (iconElement || entityIcon || domainIcon)}\n            {hasChildren ? children : undefined}\n          </Contents>\n        </StyledFabCard>\n      </Tooltip>\n    </>\n  );\n}\n/** The Fab (Floating Action Button) Card is a simple button with an icon to trigger something on press\n *\n * NOTE: This component does NOT have any media queries by default, it will just be the width set by the size prop or the default size.\n */\nexport function FabCard<E extends EntityName>(props: FabCardProps<E>) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"FabCard\" })}>\n      <InternalFabCard {...props} />\n    </ErrorBoundary>\n  );\n}\n","import {\n  AvailableQueries,\n  CardBase,\n  getColumnSizeCSS,\n  mq,\n  CardBaseProps,\n  Column,\n  PersonCard,\n  PersonCardProps,\n  Row,\n  fallback,\n  BreakPoint,\n} from \"@components\";\nimport { EntityName, FilterByDomain, useHass } from \"@hakit/core\";\nimport { Children, ReactElement, cloneElement, isValidElement } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nimport styled from \"@emotion/styled\";\nconst FamilyBaseCard = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", FilterByDomain<EntityName, \"person\">>>)`\n  cursor: default;\n`;\n\nconst FamilyCardContent = styled.div`\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: space-between;\n  .person-card {\n    &.entity-count-2-plus {\n      width: ${getColumnSizeCSS(6)};\n      ${mq(\n        [\"xxs\", \"xs\"],\n        `\n        width: ${getColumnSizeCSS(12)};\n      `,\n      )}\n      ${mq(\n        [\"md\", \"lg\", \"xlg\"],\n        `\n        width: ${getColumnSizeCSS(4)};\n      `,\n      )}\n    }\n\n    &.entity-count-1 {\n      width: ${getColumnSizeCSS(12)};\n    }\n\n    &.entity-count-2 {\n      width: ${getColumnSizeCSS(6)};\n      ${mq(\n        [\"xxs\", \"xs\"],\n        `\n        width: ${getColumnSizeCSS(12)};\n      `,\n      )}\n    }\n  }\n`;\n\nconst Title = styled.div`\n  color: var(--ha-S100-contrast);\n  font-size: 0.9rem;\n  font-weight: bold;\n`;\n\ntype OmitProperties =\n  | \"as\"\n  | \"active\"\n  | \"disabled\"\n  | \"children\"\n  | \"entity\"\n  | \"title\"\n  | \"onClick\"\n  | \"modalProps\"\n  | \"serviceData\"\n  | \"service\"\n  | \"disableRipples\"\n  | \"disableScale\"\n  | \"disableActiveState\"\n  | \"rippleProps\"\n  | \"borderRadius\"\n  | \"disableActiveState\"\n  | \"onlyFunctionality\";\n\nexport interface FamilyCardProps extends Omit<CardBaseProps<\"div\", FilterByDomain<EntityName, \"person\">>, OmitProperties> {\n  /** the children for the FamilyCard, it accepts Person components */\n  children: ReactElement<typeof PersonCard> | ReactElement<typeof PersonCard>[];\n  /** optional title of the card */\n  title?: string;\n}\n\nfunction InternalFamilyCard({ title, key, cssStyles, children, className, ...rest }: FamilyCardProps): React.ReactNode {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const len = Children.count(children);\n  const count = len > 2 ? \"2-plus\" : len === 1 ? \"1\" : \"2\";\n  const childrenWithKeys = Children.map(children, (child, index) => {\n    if (isValidElement<PersonCardProps>(child)) {\n      // if they've defined columns, we don't want to override it\n      const columns: BreakPoint[] = [\"xxs\", \"xs\", \"sm\", \"md\", \"lg\", \"xlg\"];\n      const hasColumnDefinition = columns.some((key) => typeof child.props[key] === \"number\");\n      const disableColumns = hasColumnDefinition ? false : (child.props.disableColumns ?? true);\n      return cloneElement(child, {\n        key: child.key || index,\n        className: disableColumns ? `entity-count-${count}` : \"\",\n        disableColumns,\n      });\n    }\n    return child;\n  });\n\n  return (\n    <FamilyBaseCard\n      key={key}\n      disableRipples\n      disableScale\n      disableActiveState\n      className={`family-card ${className}`}\n      cssStyles={`\n      ${globalComponentStyle?.familyCard ?? \"\"}\n      ${cssStyles ?? \"\"}\n    `}\n      {...rest}\n    >\n      <FamilyCardContent>\n        {title && (\n          <Column alignItems=\"flex-start\" fullWidth>\n            <Title>{title}</Title>\n          </Column>\n        )}\n        <Row\n          className=\"row\"\n          fullWidth\n          wrap=\"wrap\"\n          justifyContent=\"flex-start\"\n          gap=\"0.5rem\"\n          style={{\n            marginTop: \"0.5rem\",\n          }}\n        >\n          {childrenWithKeys}\n        </Row>\n      </FamilyCardContent>\n    </FamilyBaseCard>\n  );\n}\n\n/** The FamilyCard component is an easy way to represent the state of the persons of your family within a simple layout, add each person to a PersonCard and place them as children within this card and you're good to go!\n * By default the layout is automatically adjusted to fit the amount of people you have, but you can override this by setting an BreakPoint prop on the PersonCard component.\n */\nexport function FamilyCard(props: FamilyCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"FamilyCard\" })}>\n      <InternalFamilyCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { AvailableQueries, CardBase, CardBaseProps, fallback } from \"@components\";\nimport styled from \"@emotion/styled\";\nimport { type EntityName, type FilterByDomain, localize, useEntity, useHass, useIcon } from \"@hakit/core\";\nimport { useMemo } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst PersonBaseCard = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", PersonEntity>>)`\n  background-color: var(--ha-S500);\n  &:not(.disabled):hover,\n  &:not(:disabled):hover {\n    background-color: var(--ha-S600);\n  }\n`;\n\nconst PersonCardContent = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  gap: 8px;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  .state-text {\n    font-size: 0.8rem;\n    color: var(--ha-S500-contrast);\n  }\n`;\n\nconst UserAvatarDiv = styled.div<{ width: string; height: string; withBorder: boolean }>`\n  position: relative;\n  .avatar-image,\n  .avatar-icon {\n    border-radius: 100%;\n    width: ${({ width }) => width};\n    height: ${({ height }) => height};\n    border: ${({ withBorder }) => (withBorder ? \"2px solid var(--ha-50)\" : \"none\")};\n    box-shadow: ${({ withBorder }) => (withBorder ? \"0 2px 2px rgba(0, 0, 0, 0.2)\" : \"none\")};\n    background: var(--ha-S900);\n  }\n  .avatar-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`;\n\nconst UserAvatarStateIcon = styled.div`\n  position: absolute;\n  background-color: var(--ha-50);\n  border-radius: 100%;\n  top: calc(50% + 8px);\n  right: calc(0% - 11px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 28px;\n  width: 28px;\n  border: 3px solid var(--ha-S500);\n`;\n\nconst NameAndState = styled.div`\n  flex-grow: 1;\n  font-size: 0.8rem;\n  color: var(--ha-S50-contrast);\n  font-weight: 500;\n  text-align: center;\n  span {\n    width: 100%;\n    font-size: 0.7rem;\n    font-weight: 400;\n    display: block;\n    margin-top: 0.2rem;\n    color: var(--ha-S500-contrast);\n  }\n`;\n\nexport type PersonEntity = FilterByDomain<EntityName, \"person\">;\ntype PersonStateMap = {\n  [key: string]:\n    | {\n        text: string;\n        icon: string;\n      }\n    | undefined;\n};\n\ntype OmitProperties = \"as\" | \"active\" | \"disabled\" | \"children\" | \"entity\" | \"title\" | \"onClick\" | \"serviceData\" | \"service\";\n\nexport interface PersonCardProps extends Omit<CardBaseProps<\"div\", PersonEntity>, OmitProperties> {\n  /** person entity in the form of \"person.{string}\" */\n  entity: PersonEntity;\n  /** optional person.state to value object map, i.e:\n   * {home: {text: \"Home\", icon: \"mdi:home\"}, not_home: { text: \"Away\", icon: \"mdi:walk\" }, zone_id: { text: \"At work\", icon: \"mdi:briefcase\" }, etc.}\n   *\n   * Defaults to:\n   * { home: { text: \"Home\", icon: \"mdi:home\" }, not_home: { text: \"Away\", icon: \"mdi:walk\" } }\n   */\n  personStateMap?: PersonStateMap;\n}\n\nexport type UserAvatarProps = {\n  entity: PersonEntity;\n  iconSize?: { width: string; height: string };\n  avatarSize?: { width: string; height: string };\n  withBorder?: boolean;\n  stateIcon?: string;\n};\n\nexport const UserAvatar = ({\n  entity,\n  iconSize = { width: \"2.5rem\", height: \"2.5rem\" },\n  avatarSize = { width: \"3.5rem\", height: \"3.5rem\" },\n  withBorder = false,\n  stateIcon,\n}: UserAvatarProps) => {\n  const person = useEntity(entity);\n  const { joinHassUrl } = useHass.getState().helpers;\n\n  const userImage = useMemo(() => {\n    const url = person.attributes.entity_picture ? person.attributes.entity_picture : null;\n    return url && url.startsWith(\"/\") ? joinHassUrl(url) : url;\n  }, [person.attributes.entity_picture, joinHassUrl]);\n\n  const userIcon = useIcon(person.attributes.icon ?? \"mdi:account\", iconSize);\n  const renderedStateIcon = useIcon(stateIcon ?? \"\", { width: \"16px\", height: \"16px\", color: \"var(--ha-S900)\" });\n\n  return userImage ? (\n    <UserAvatarDiv width={avatarSize.width} height={avatarSize.height} withBorder={withBorder}>\n      <img src={userImage} className=\"avatar-image\" />\n      {stateIcon && renderedStateIcon && <UserAvatarStateIcon>{renderedStateIcon}</UserAvatarStateIcon>}\n    </UserAvatarDiv>\n  ) : (\n    <UserAvatarDiv width={avatarSize.width} height={avatarSize.height} withBorder={withBorder}>\n      <div className=\"avatar-icon\">{userIcon}</div>\n      {stateIcon && renderedStateIcon && <UserAvatarStateIcon>{renderedStateIcon}</UserAvatarStateIcon>}\n    </UserAvatarDiv>\n  );\n};\n\nfunction InternalPersonCard({\n  entity,\n  personStateMap: _personStateMap = {},\n  cssStyles,\n  modalProps,\n  className,\n  ...rest\n}: PersonCardProps): React.ReactNode {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n\n  const personStateMapDefault: PersonStateMap = {\n    home: { text: localize(\"home\"), icon: \"mdi:home\" },\n    not_home: { text: localize(\"away\"), icon: \"mdi:walk\" },\n  };\n  const personStateMap = { ...personStateMapDefault, ..._personStateMap };\n\n  const person = useEntity(entity);\n  const stateText = personStateMap[person.state]?.text ?? person.state;\n  const stateIcon = personStateMap[person.state]?.icon;\n  return (\n    <PersonBaseCard\n      entity={entity}\n      className={`person-card ${className}`}\n      cssStyles={`\n      ${globalComponentStyle?.personCard ?? \"\"}\n      ${cssStyles ?? \"\"}\n    `}\n      modalProps={{\n        stateTitle: stateText,\n        ...modalProps,\n      }}\n      {...rest}\n    >\n      <PersonCardContent>\n        <UserAvatar entity={entity} stateIcon={stateIcon} />\n        <NameAndState>\n          {person.attributes.friendly_name}\n          <span>{stateText}</span>\n        </NameAndState>\n      </PersonCardContent>\n    </PersonBaseCard>\n  );\n}\n\n/** The PersonCard component is an easy way to represent the state of a person. Can be added as children to the FamilyCard component to quickly give an overview of the whole family. */\nexport function PersonCard(props: PersonCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"PersonCard\" })}>\n      <InternalPersonCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useMemo, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css, Global } from \"@emotion/react\";\nimport { Icon } from \"@iconify/react\";\nimport { useHass } from \"@hakit/core\";\nimport { TimeCard, WeatherCard, Row, Column, fallback, mq, useBreakpoint } from \"@components\";\nimport type { WeatherCardProps, TimeCardProps } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst StyledTimeCard = styled(TimeCard)<{\n  open: boolean;\n}>`\n  padding: 0;\n  background: transparent;\n  width: 100%;\n  box-shadow: none;\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: padding;\n  border-radius: 0;\n  &:hover {\n    box-shadow: none;\n    background: transparent;\n  }\n  &:not(.disabled):not(:disabled):not(:focus):hover {\n    box-shadow: none;\n    background: transparent;\n    color: var(--ha-S200-contrast) svg {\n      color: var(--ha-S200-contrast);\n    }\n  }\n  .time,\n  .time-suffix {\n    transition: var(--ha-transition-duration) var(--ha-easing);\n    transition-property: font-size;\n  }\n  ${(props) =>\n    !props.open &&\n    `\n    padding: 0.5rem 0;\n    .time, .time-suffix {\n      font-size: 0.7rem;\n    }\n  `}\n`;\n\nconst StyledSidebarCard = styled.div`\n  background-color: var(--ha-S50);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow: hidden;\n  height: 100%;\n  justify-content: flex-start;\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: left, max-width, width;\n  transform-origin: left center;\n  gap: 1rem;\n  > * {\n    transition: var(--ha-transition-duration) var(--ha-easing);\n    transition-property: padding;\n  }\n  ${mq(\n    [\"xxs\", \"xs\"],\n    `\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: var(--ha-sidebar-offset);\n    z-index: calc(var(--ha-device-area-card-z-index) - 1);\n  `,\n  )}\n`;\n\nconst Menu = styled.ul<{\n  open: boolean;\n}>`\n  padding: 0;\n  margin: 1rem 0 0 0;\n  width: 100%;\n  li {\n    position: relative;\n    list-style-type: none;\n    a {\n      position: relative;\n      cursor: pointer;\n      user-select: none;\n      position: relative;\n      cursor: pointer;\n      user-select: none;\n      height: 3rem;\n      text-decoration: none;\n      font-weight: 500;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      flex-direction: row;\n      padding: 0.5rem 0rem 0.5rem 1rem;\n      gap: 1rem;\n\n      &:hover {\n        background: transparent;\n      }\n      svg {\n        display: inline-block;\n        margin: 0;\n        text-align: left;\n        font-size: 1.5rem;\n      }\n      > .menu-inner {\n        display: flex;\n        align-items: flex-start;\n        justify-content: center;\n        flex-direction: column;\n      }\n      span {\n        display: block;\n        width: 100%;\n        font-size: 0.7rem;\n        font-weight: 300;\n        color: var(--ha-S100-contrast);\n      }\n    }\n  }\n  li {\n    > a {\n      color: var(--ha-S100-contrast);\n      background-color: transparent;\n      transition: var(--ha-transition-duration) var(--ha-easing);\n      transition-property: color, background-color;\n      svg {\n        color: var(--ha-S100-contrast);\n        transition: var(--ha-transition-duration) var(--ha-easing);\n        transition-property: color;\n      }\n    }\n    &:hover,\n    &.active,\n    &:focus {\n      > a {\n        color: var(--ha-A400);\n        background-color: var(--ha-S100);\n\n        svg {\n          color: var(--ha-A400);\n        }\n      }\n    }\n  }\n  ${(props) =>\n    !props.open &&\n    `\n    margin: 0;\n    li {\n      a {\n        padding: 0;\n        justify-content: center;\n        svg {\n          margin: 0;\n        }\n      }\n    }\n  `}\n`;\n\nconst Divider = styled.hr`\n  width: 100%;\n  border: none;\n  border-bottom: 1px solid var(--ha-S200);\n  margin: 0;\n`;\n\nconst HamburgerMenu = styled(Menu)`\n  margin: 0;\n  li {\n    a {\n      justify-content: center;\n      padding: 0.7rem;\n      svg {\n        margin: 0;\n      }\n    }\n  }\n\n  ${mq(\n    [\"xxs\", \"xs\"],\n    `\n    left: 0;\n    top: 0;\n    li {\n      a {\n        background-color: transparent;\n      }\n    }\n  `,\n  )}\n`;\n\nconst Filler = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nconst StyledWeatherCard = styled(WeatherCard)`\n  background: transparent;\n  width: 100%;\n  padding: 0;\n  border-radius: 0;\n  box-shadow: none;\n  &:hover {\n    box-shadow: none;\n    background: transparent;\n  }\n`;\n\nconst WeatherCardCustom = styled(StyledWeatherCard)<{\n  open: boolean;\n}>`\n  padding-bottom: 1rem;\n  border-radius: 0;\n  ${(props) =>\n    !props.open &&\n    `\n    div > * {\n      display: none;\n    }\n    div > svg {\n      display: flex;\n    }\n  `}\n`;\nexport interface MenuItem {\n  /** The title of the menu item */\n  title: string;\n  /** the description, this will appear below the title */\n  description?: string;\n  /** the icon name or JSX element, eg <Icon icon=\"mdi:cross\" /> */\n  icon: React.ReactNode | string;\n  /** the hash name of the menu item, this is optional */\n  hash?: string;\n  /** if the item is active or not */\n  active: boolean;\n  /** onClick action to fire when the menu item is clicked  */\n  onClick: (event: React.MouseEvent<HTMLLIElement>) => void;\n}\nexport interface SidebarCardProps extends React.ComponentProps<\"div\"> {\n  /** should the time card be included by default @default true */\n  includeTimeCard?: boolean;\n  /** should the sidebar start opened,  True by default if collapsible=false @default true */\n  startOpen?: boolean;\n  /** Whether the sidebar can be collapsed by the end-user @default true */\n  collapsible?: boolean;\n  /** the props for the weather card , if omitted, weather card is not rendered @default undefined */\n  weatherCardProps?: WeatherCardProps;\n  /** Adding menu items can also add routes by default, disabled this if need be @default true */\n  autoIncludeRoutes?: boolean;\n  /** the props for the timeCard @default { hideIcon: true, hideIcon: true, center: true }*/\n  timeCardProps?: TimeCardProps;\n  /** the menu items to add to the sidebar @default [] */\n  menuItems?: MenuItem[];\n  /** the children to render in the sidebar */\n  children?: React.ReactNode;\n  /** a method to apply a sort function to the sidebar menu items before they render */\n  sortSidebarMenuItems?: (a: MenuItem, b: MenuItem) => number;\n}\nfunction InternalSidebarCard({\n  weatherCardProps,\n  timeCardProps = {\n    hideIcon: true,\n    hideDate: true,\n    center: true,\n  },\n  startOpen = true,\n  collapsible = true,\n  menuItems = [],\n  children,\n  autoIncludeRoutes = true,\n  includeTimeCard = true,\n  className,\n  cssStyles,\n  sortSidebarMenuItems,\n  key,\n  style,\n  ...rest\n}: SidebarCardProps) {\n  const [open, setOpen] = useState(startOpen);\n  const routes = useHass((state) => state.routes);\n  const hash = useHass((state) => state.hash);\n  const devices = useBreakpoint();\n  const concatenatedMenuItems = useMemo<MenuItem[]>(() => {\n    const mappedRoutes = routes.map<MenuItem>((route) => ({\n      ...route,\n      title: route.name,\n      onClick() {\n        if (!route.active) {\n          location.hash = \"\";\n          setTimeout(\n            () => {\n              location.hash = route.hash;\n            },\n            hash === \"\" ? 0 : 450,\n          );\n        }\n      },\n    }));\n    const items = autoIncludeRoutes ? [...menuItems, ...mappedRoutes] : menuItems;\n    if (typeof sortSidebarMenuItems === \"function\") {\n      items.sort(sortSidebarMenuItems);\n    }\n    return items;\n  }, [routes, sortSidebarMenuItems, autoIncludeRoutes, menuItems, hash]);\n  return (\n    <>\n      <Global\n        styles={css`\n          :root {\n            --ha-area-card-expanded-offset: ${devices.xxs || devices.xs\n              ? \"0rem\"\n              : open\n                ? `var(--ha-device-sidebar-card-width-expanded, 19rem)`\n                : `var(--ha-device-sidebar-card-width-collapsed, 5rem)`};\n            --ha-sidebar-max-width: ${open\n              ? `var(--ha-device-sidebar-card-width-expanded, 19rem)`\n              : `var(--ha-device-sidebar-card-width-collapsed, 5rem)`};\n            --ha-sidebar-offset: ${open ? `0` : `calc(var(--ha-sidebar-max-width) * -1)`};\n          }\n        `}\n      />\n      <StyledSidebarCard\n        key={key ?? `ha-sidebar-closed`}\n        css={css`\n          ${cssStyles ?? \"\"}\n        `}\n        className={`${className ?? \"\"} sidebar-card`}\n        style={{\n          ...style,\n          width: \"100%\",\n          maxWidth: open ? `var(--ha-device-sidebar-card-width-expanded, 19rem)` : `var(--ha-device-sidebar-card-width-collapsed, 5rem)`,\n        }}\n        {...rest}\n      >\n        <Column className=\"column\" wrap=\"nowrap\" fullHeight fullWidth alignItems=\"flex-start\" justifyContent=\"space-between\">\n          <Filler className=\"filler\">\n            <Row\n              className=\"row\"\n              wrap=\"nowrap\"\n              style={{\n                padding: open ? \"0.28rem 0\" : \"0\",\n                flexDirection: open ? \"row\" : \"column\",\n              }}\n            >\n              {includeTimeCard && (\n                <StyledTimeCard disableColumns key=\"sidebar-large-time-card\" className=\"sidebar-time-card\" open={open} {...timeCardProps} />\n              )}\n              {collapsible && (\n                <HamburgerMenu\n                  open={open}\n                  className=\"hamburger-menu\"\n                  key=\"hamburger-menu-open\"\n                  style={{\n                    width: devices.xxs || devices.xs ? \"auto\" : !open ? \"100%\" : \"40%\",\n                    position: devices.xxs || devices.xs ? \"fixed\" : \"relative\",\n                  }}\n                >\n                  <li\n                    onClick={(event) => {\n                      event.stopPropagation();\n                      setOpen(!open);\n                    }}\n                  >\n                    <a\n                      style={{\n                        justifyContent: \"center\",\n                      }}\n                    >\n                      <Icon className=\"icon\" icon={open ? \"mdi:close\" : \"mdi:menu\"} />\n                    </a>\n                  </li>\n                </HamburgerMenu>\n              )}\n            </Row>\n            <Divider className=\"divider\" />\n            <Menu open={open} className=\"menu\">\n              {concatenatedMenuItems.map((item, index) => {\n                return (\n                  <li\n                    onClick={(event) => {\n                      event.stopPropagation();\n                      item.onClick(event);\n                    }}\n                    key={index}\n                    className={item.active ? \"active\" : \"inactive\"}\n                  >\n                    <a>\n                      {typeof item.icon === \"string\" ? <Icon className=\"icon\" icon={item.icon} /> : item.icon}\n                      {open && (\n                        <div className=\"menu-inner\">\n                          {item.title}\n                          {item.description && <span>{item.description}</span>}\n                        </div>\n                      )}\n                    </a>\n                  </li>\n                );\n              })}\n            </Menu>\n            {children && open && <Filler className=\"filler\">{children}</Filler>}\n          </Filler>\n          {weatherCardProps && (\n            <div\n              className=\"weather-wrapper\"\n              key=\"sidebar-weather-large\"\n              style={{\n                width: \"100%\",\n                padding: open ? \"0 1rem 1rem\" : \"0\",\n              }}\n            >\n              <WeatherCardCustom disableColumns className=\"weather-card-sidebar\" open={open} {...weatherCardProps} />\n            </div>\n          )}\n        </Column>\n      </StyledSidebarCard>\n    </>\n  );\n}\n/** This component is a nice way of organizing components / groups into an easy to navigate sidebar, the \"Area Cards\" will automatically insert into the sidebar items if they're present on the page, eg if you have 6 AreaCards, all 6 items will be added to the sidebar automatically, you can also add your own menu items to the start of the list, this all needs a bit more thought but for now it is pretty useful! The TimeCard and WeatherCard are integrate and themed slightly different in the sidebar, if the sidebar is present, the AreaCard will only expand to the available space and not cover the sidebar */\nexport function SidebarCard(props: SidebarCardProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"SidebarCard\" })}>\n      <InternalSidebarCard {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { CLIMATE_HVAC_ACTION_TO_MODE, ClimateEntityFeature, UNIT_F } from \"./data\";\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\nimport {\n  HvacAction,\n  HvacMode,\n  type FilterByDomain,\n  type EntityName,\n  isOffState,\n  UNAVAILABLE,\n  useEntity,\n  supportsFeatureFromAttributes,\n  stateActive,\n  toReadableString,\n  localize,\n  useHass,\n} from \"@hakit/core\";\nimport styled from \"@emotion/styled\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { clamp } from \"lodash\";\nimport { FabCard, ControlSliderCircular, type ControlCircularSliderMode } from \"@components\";\nimport { colors } from \"./shared\";\nimport { BigNumber } from \"./BigNumber\";\n\nimport { Icon } from \"@iconify/react\";\n\ntype Target = \"value\" | \"low\" | \"high\";\n\nconst SLIDER_MODES: Record<HvacMode, ControlCircularSliderMode> = {\n  auto: \"full\",\n  cool: \"end\",\n  dry: \"full\",\n  fan_only: \"full\",\n  heat: \"start\",\n  heat_cool: \"full\",\n  off: \"full\",\n};\n\nconst Wrapper = styled.div`\n  position: relative;\n  width: 320px;\n  .container {\n    position: relative;\n  }\n  .info * {\n    margin: 0;\n    pointer-events: auto;\n  }\n  .label {\n    width: 60%;\n    font-weight: 500;\n    text-align: center;\n    align-items: center;\n    justify-content: center;\n    display: flex;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n  .label span {\n    white-space: nowrap;\n  }\n  .label ha-svg-icon {\n    bottom: 5%;\n  }\n  .label.disabled {\n    color: #444;\n  }\n  .buttons {\n    position: absolute;\n    bottom: 10px;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    gap: 24px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n  .info {\n    position: absolute;\n    inset: 0px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    pointer-events: none;\n    font-size: 16px;\n    line-height: 24px;\n    letter-spacing: 0.1px;\n  }\n  /* Dual target */\n  .dual {\n    display: flex;\n    flex-direction: row;\n    gap: 24px;\n  }\n  .dual button {\n    outline: none;\n    background: none;\n    color: inherit;\n    font-family: inherit;\n    -webkit-tap-highlight-color: transparent;\n    border: none;\n    opacity: 0.5;\n    padding: 0;\n    transition:\n      opacity 180ms ease-in-out,\n      transform 180ms ease-in-out;\n    cursor: pointer;\n  }\n  .dual button:focus-visible {\n    transform: scale(1.1);\n  }\n  .dual button.selected {\n    opacity: 1;\n  }\n\n  .control-slider-circular {\n    width: 100%;\n  }\n`;\n\nexport interface ClimateControlSliderProps {\n  entity: FilterByDomain<EntityName, \"climate\">;\n  showCurrent?: boolean;\n  targetTempStep?: number;\n}\n\nexport function ClimateControlSlider({ entity: _entity, targetTempStep, showCurrent = false }: ClimateControlSliderProps) {\n  const [_targetTemperature, setTargetTemperature] = useState<Partial<Record<Target, number>>>({});\n  const [_selectTargetTemperature, setSelectTargetTemperature] = useState<Target>(\"low\");\n  const entity = useEntity(_entity);\n  const config = useHass((store) => store.config);\n\n  const { min_temp: _min, max_temp: _max, target_temp_step, hvac_modes } = entity.attributes;\n\n  const _step = useMemo(() => {\n    return targetTempStep ?? target_temp_step ?? (config?.unit_system.temperature === UNIT_F ? 1 : 0.5);\n  }, [config?.unit_system.temperature, targetTempStep, target_temp_step]);\n\n  useEffect(() => {\n    setTargetTemperature({\n      value: entity.attributes.temperature,\n      low: entity.attributes.target_temp_low,\n      high: entity.attributes.target_temp_high,\n    });\n  }, [entity.attributes.temperature, entity.attributes.target_temp_low, entity.attributes.target_temp_high]);\n\n  const supportsTargetTemperature = supportsFeatureFromAttributes(entity.attributes, ClimateEntityFeature.TARGET_TEMPERATURE);\n\n  const supportsTargetTemperatureRange = supportsFeatureFromAttributes(entity.attributes, ClimateEntityFeature.TARGET_TEMPERATURE_RANGE);\n\n  const _callService = useCallback(\n    (type: string) => {\n      if (type === \"high\" || type === \"low\") {\n        entity.service.setTemperature({\n          serviceData: {\n            target_temp_low: _targetTemperature.low,\n            target_temp_high: _targetTemperature.high,\n          },\n        });\n        return;\n      }\n      entity.service.setTemperature({\n        serviceData: {\n          temperature: _targetTemperature.value,\n        },\n      });\n    },\n    [_targetTemperature, entity],\n  );\n\n  const _debouncedCallService = useDebouncedCallback((target: Target) => _callService(target), 1000, {\n    trailing: true,\n    leading: true,\n  });\n\n  const _handleButton = useCallback(\n    (target: Target, step: number) => {\n      const defaultValue = target === \"high\" ? _max : _min;\n\n      let temp = _targetTemperature[target] ?? defaultValue;\n      temp += step;\n      temp = clamp(temp, _min, _max);\n      if (target === \"high\" && _targetTemperature.low != null) {\n        temp = clamp(temp, _targetTemperature.low, _max);\n      }\n      if (target === \"low\" && _targetTemperature.high != null) {\n        temp = clamp(temp, _min, _targetTemperature.high);\n      }\n      setTargetTemperature((_targetTemperature) => ({\n        ..._targetTemperature,\n        [target]: temp,\n      }));\n      _debouncedCallService(target);\n    },\n    [_max, _min, _debouncedCallService, _targetTemperature],\n  );\n\n  const _handleSelectTemp = useCallback((target: Target) => {\n    setSelectTargetTemperature(target);\n  }, []);\n\n  const _renderLabel = useCallback(() => {\n    if (entity.state === UNAVAILABLE) {\n      return <p className=\"label disabled\">{entity.state ?? \"\"}</p>;\n    }\n\n    if (!supportsTargetTemperature && !supportsTargetTemperatureRange) {\n      return <p className=\"label\">{entity.state ?? \"\"}</p>;\n    }\n\n    const action = entity.attributes.hvac_action;\n\n    const actionLabel = toReadableString(entity.attributes.hvac_action);\n\n    return <p className=\"label\">{action && action !== \"off\" && action !== \"idle\" ? actionLabel : localize(\"target_temperature\")}</p>;\n  }, [entity.attributes.hvac_action, entity.state, supportsTargetTemperature, supportsTargetTemperatureRange]);\n\n  const _valueChanged = useCallback(\n    (value: number, target: Target) => {\n      setTargetTemperature((_targetTemperature) => ({\n        ..._targetTemperature,\n        [target]: value,\n      }));\n      setSelectTargetTemperature(target);\n      _callService(target);\n    },\n    [_callService],\n  );\n\n  const _valueChanging = useCallback((value: number, target: Target) => {\n    setTargetTemperature((_targetTemperature) => ({\n      ..._targetTemperature,\n      [target]: value,\n    }));\n    setSelectTargetTemperature(target);\n  }, []);\n\n  const _renderTemperatureButtons = useCallback(\n    (target: Target, colored?: boolean) => {\n      const lowColor = colors[\"heat\"];\n      const highColor = colors[\"cool\"];\n\n      const color = colored && stateActive(entity) ? (target === \"high\" ? highColor[1] : lowColor[1]) : undefined;\n\n      return (\n        <div className=\"buttons\">\n          <FabCard\n            style={{\n              borderColor: color,\n            }}\n            icon=\"mdi:minus\"\n            onClick={() => _handleButton(target, -_step)}\n          />\n          <FabCard\n            style={{\n              borderColor: color,\n            }}\n            icon=\"mdi:plus\"\n            onClick={() => _handleButton(target, _step)}\n          />\n        </div>\n      );\n    },\n    [_handleButton, _step, entity],\n  );\n\n  const _renderTargetTemperature = useCallback(\n    (temperature: number) => {\n      const digits = _step.toString().split(\".\")?.[1]?.length ?? 0;\n      const formatOptions: Intl.NumberFormatOptions = {\n        maximumFractionDigits: digits,\n        minimumFractionDigits: digits,\n      };\n      return (\n        <BigNumber\n          value={temperature}\n          unit={config?.unit_system.temperature}\n          unitPosition={_step === 1 ? \"bottom\" : \"top\"}\n          formatOptions={formatOptions}\n        />\n      );\n    },\n    [_step, config],\n  );\n\n  const _renderCurrentTemperature = useCallback(\n    (temperature?: number) => {\n      if (!showCurrent || temperature == null) {\n        return <p className=\"label\">&nbsp;</p>;\n      }\n      if (isOffState(entity.state)) {\n        return <p className=\"label disabled\">{entity.state ?? \"\"}</p>;\n      }\n\n      return (\n        <p className=\"label current\">\n          <Icon icon={\"mdi:thermometer\"} />\n          <span>{temperature ?? entity.attributes.current_temperature}</span>\n        </p>\n      );\n    },\n    [entity.state, entity.attributes.current_temperature, showCurrent],\n  );\n\n  function render() {\n    const mode = entity.state as HvacMode;\n    const action = entity.attributes.hvac_action as HvacAction;\n    const active = stateActive(entity);\n\n    const stateColor = colors[mode];\n    const lowColor = active ? colors[\"heat\"][1] : colors[\"off\"];\n    const highColor = active ? colors[\"cool\"][1] : colors[\"off\"];\n\n    let actionColor: string[] | undefined;\n    if (action && action !== \"idle\" && action !== \"off\" && active) {\n      actionColor = colors[mode] ?? colors[CLIMATE_HVAC_ACTION_TO_MODE[action]];\n    }\n\n    if (supportsTargetTemperature && _targetTemperature.value != null && entity.state !== UNAVAILABLE) {\n      const heatCoolModes: HvacMode[] = (hvac_modes as HvacMode[]).filter((m) => [\"heat\", \"cool\", \"heat_cool\"].includes(m));\n      const sliderMode = SLIDER_MODES[heatCoolModes.length === 1 && [\"off\", \"auto\"].includes(mode) ? heatCoolModes[1] : mode];\n\n      return (\n        <div className={`container`}>\n          <ControlSliderCircular\n            inactive={!active}\n            mode={sliderMode}\n            value={_targetTemperature.value}\n            min={_min}\n            max={_max}\n            step={_step}\n            current={entity.attributes.current_temperature}\n            onChange={(value, type) => {\n              _valueChanging(value, type);\n            }}\n            onChangeApplied={(value, type) => {\n              _valueChanged(value, type);\n            }}\n            colors={{\n              color: stateColor ? stateColor[1] : undefined,\n              lowColor: lowColor ? lowColor[1] : undefined,\n              highColor: highColor ? highColor[1] : undefined,\n            }}\n          />\n          <div className=\"info\">\n            {_renderLabel()}\n            {_renderTargetTemperature(_targetTemperature.value)}\n            {_renderCurrentTemperature(entity.attributes.current_temperature)}\n          </div>\n          {_renderTemperatureButtons(\"value\")}\n        </div>\n      );\n    }\n\n    if (\n      supportsTargetTemperatureRange &&\n      _targetTemperature.low != null &&\n      _targetTemperature.high != null &&\n      entity.state !== UNAVAILABLE\n    ) {\n      return (\n        <div className={`container`}>\n          <ControlSliderCircular\n            inactive={!active}\n            dual\n            low={_targetTemperature.low}\n            high={_targetTemperature.high}\n            min={_min}\n            max={_max}\n            step={_step}\n            current={entity.attributes.current_temperature}\n            onChange={(value, type) => {\n              _valueChanging(value, type);\n            }}\n            onChangeApplied={(value, type) => {\n              _valueChanged(value, type);\n            }}\n            colors={{\n              lowColor: lowColor ? lowColor[1] : undefined,\n              highColor: highColor ? highColor[1] : undefined,\n              color: actionColor ? actionColor[1] : undefined,\n            }}\n          />\n          <div className=\"info\">\n            {_renderLabel()}\n            <div className=\"dual\">\n              <button onClick={() => _handleSelectTemp(\"low\")} className={`${_selectTargetTemperature === \"low\" ? \"selected\" : \"\"}`}>\n                {_renderTargetTemperature(_targetTemperature.low)}\n              </button>\n              <button onClick={() => _handleSelectTemp(\"high\")} className={`${_selectTargetTemperature === \"high\" ? \"selected\" : \"\"}`}>\n                {_renderTargetTemperature(_targetTemperature.high)}\n              </button>\n            </div>\n            {_renderCurrentTemperature(entity.attributes.current_temperature)}\n          </div>\n          {_renderTemperatureButtons(_selectTargetTemperature, true)}\n        </div>\n      );\n    }\n    return (\n      <div className=\"container\">\n        <ControlSliderCircular\n          mode=\"full\"\n          current={entity.attributes.current_temperature}\n          min={_min}\n          max={_max}\n          step={_step}\n          readonly\n          disabled={!active}\n        ></ControlSliderCircular>\n        <div className=\"info\">\n          {_renderLabel()}\n          {_renderCurrentTemperature(entity.attributes.current_temperature)}\n        </div>\n      </div>\n    );\n  }\n\n  return <Wrapper>{render()}</Wrapper>;\n}\n","import { ClimateEntityFeature, UNIT_F } from \"./data\";\nimport { useState, useMemo, useEffect, useCallback } from \"react\";\nimport {\n  type FilterByDomain,\n  type EntityName,\n  UNAVAILABLE,\n  useEntity,\n  supportsFeatureFromAttributes,\n  stateActive,\n  useHass,\n} from \"@hakit/core\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { clamp } from \"lodash\";\nimport { FabCard, ControlSliderCircular } from \"@components\";\nimport { colors } from \"./shared\";\nimport { BigNumber } from \"./BigNumber\";\nimport { Icon } from \"@iconify/react\";\n\nexport interface ClimateHumiditySliderProps {\n  entity: FilterByDomain<EntityName, \"climate\">;\n  showCurrent?: boolean;\n  targetTempStep?: number;\n}\n\nexport function ClimateHumiditySlider({ entity: _entity, targetTempStep, showCurrent = false }: ClimateHumiditySliderProps) {\n  const entity = useEntity(_entity);\n  const [_targetHumidity, setTargetHumidity] = useState<number | null>(entity.attributes.humidity ?? null);\n  const config = useHass((state) => state.config);\n  const { target_temp_step, min_humidity = 0, max_humidity = 100 } = entity.attributes;\n\n  const _step = useMemo(() => {\n    return targetTempStep ?? target_temp_step ?? (config?.unit_system.temperature === UNIT_F ? 1 : 0.5);\n  }, [config?.unit_system.temperature, targetTempStep, target_temp_step]);\n\n  useEffect(() => {\n    setTargetHumidity(entity.attributes.humidity ?? null);\n  }, [entity.attributes.humidity]);\n\n  const _callService = useCallback(\n    (targetHumidity: number) => {\n      if (targetHumidity) {\n        entity.service.setHumidity({\n          serviceData: {\n            humidity: targetHumidity,\n          },\n        });\n      }\n    },\n    [entity.service],\n  );\n\n  const _debouncedCallService = useDebouncedCallback((target: number) => _callService(target), 1000, {\n    leading: true,\n    trailing: true,\n  });\n\n  const _valueChanged = useCallback(\n    (value: number) => {\n      if (isNaN(value)) return;\n      setTargetHumidity(value);\n      _callService(value);\n    },\n    [_callService],\n  );\n\n  const _valueChanging = useCallback((value: number) => {\n    if (isNaN(value)) return;\n    setTargetHumidity(value);\n  }, []);\n\n  const _handleButton = useCallback(\n    (step: number) => {\n      let humidity = _targetHumidity ?? min_humidity;\n      humidity += step;\n      humidity = clamp(humidity, min_humidity, max_humidity);\n      setTargetHumidity(humidity);\n      _debouncedCallService(humidity);\n    },\n    [_debouncedCallService, max_humidity, min_humidity, _targetHumidity],\n  );\n\n  const _renderLabel = useCallback(() => {\n    if (entity.state === UNAVAILABLE) {\n      return <p className=\"label disabled\">{entity.state ?? UNAVAILABLE}</p>;\n    }\n    return <p className=\"label\">Target</p>;\n  }, [entity.state]);\n\n  const _renderButtons = useCallback(() => {\n    return (\n      <div className=\"buttons\">\n        <FabCard icon=\"mdi:minus\" onClick={() => _handleButton(-_step)} />\n        <FabCard icon=\"mdi:plus\" onClick={() => _handleButton(_step)} />\n      </div>\n    );\n  }, [_handleButton, _step]);\n\n  const _renderTarget = useCallback((humidity: number) => {\n    const formatOptions = {\n      maximumFractionDigits: 0,\n    };\n\n    return <BigNumber value={humidity} unit=\"%\" unitPosition=\"bottom\" formatOptions={formatOptions} />;\n  }, []);\n\n  const _renderCurrentHumidity = useCallback(\n    (humidity?: number) => {\n      if (!showCurrent || humidity == null) {\n        return <p className=\"label\">&nbsp;</p>;\n      }\n\n      return (\n        <p className=\"label\">\n          <Icon icon=\"mdi:water-percent\" />\n          <span>{entity.attributes.current_humidity ?? humidity}</span>\n        </p>\n      );\n    },\n    [entity.attributes.current_humidity, showCurrent],\n  );\n  const supportsTargetHumidity = supportsFeatureFromAttributes(entity.attributes, ClimateEntityFeature.TARGET_HUMIDITY);\n  const active = stateActive(entity);\n\n  // Use humidifier state color\n  const stateColor = active ? colors[\"cool\"][1] : colors.off[1];\n\n  const targetHumidity = _targetHumidity;\n  const currentHumidity = entity.attributes.current_humidity;\n\n  if (supportsTargetHumidity && targetHumidity != null && entity.state !== UNAVAILABLE) {\n    return (\n      <div className=\"container\">\n        <ControlSliderCircular\n          inactive={!active}\n          value={_targetHumidity ?? 0}\n          min={min_humidity}\n          max={max_humidity}\n          step={_step}\n          current={currentHumidity}\n          onChangeApplied={_valueChanged}\n          onChange={_valueChanging}\n          colors={{\n            color: stateColor,\n          }}\n        />\n        <div className=\"info\">\n          {_renderLabel()} {_renderTarget(targetHumidity)}\n          {_renderCurrentHumidity(entity.attributes.current_humidity)}\n        </div>\n        {_renderButtons()}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container${containerSizeClass}\">\n      <ControlSliderCircular current={entity.attributes.current_humidity} min={min_humidity} max={max_humidity} step={_step} disabled />\n      <div className=\"info\">\n        {_renderLabel()}\n        {_renderCurrentHumidity(entity.attributes.current_humidity)}\n      </div>\n    </div>\n  );\n}\n","import { Menu, FabCard, ButtonBar, ButtonBarButton, fallback } from \"@components\";\nimport type { EntityName, FilterByDomain } from \"@hakit/core\";\nimport { useEntity, HvacMode, toReadableString, OFF, localize, supportsFeatureFromAttributes, UNAVAILABLE, useHass } from \"@hakit/core\";\nimport { useState, useEffect, useMemo, useCallback } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { css } from \"@emotion/react\";\nimport {\n  ClimateEntityFeature,\n  ClimateBuiltInPresetMode,\n  compareClimateHvacModes,\n  ClimateBuiltInSwingMode,\n  computeFanModeIcon,\n  computeHvacModeIcon,\n  computePresetModeIcon,\n  computeSwingModeIcon,\n  ClimateBuiltInFanMode,\n  UNIT_F,\n} from \"./data\";\nimport { ClimateControlSlider } from \"./ClimateControlSlider\";\nimport { ClimateHumiditySlider } from \"./ClimateHumiditySlider\";\n\ntype MainControl = \"temperature\" | \"humidity\";\n\nconst Wrapper = styled.div`\n  color: var(--ha-500-contrast);\n  width: 100%;\n  .controls {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n  .controls-scroll {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    gap: 24px;\n    padding: 0 24px;\n  }\n`;\n\nexport interface ClimateControlsProps extends Omit<React.ComponentPropsWithoutRef<\"div\">, \"title\"> {\n  /** the name of your climate entity */\n  entity: FilterByDomain<EntityName, \"climate\">;\n  /** provide a list of hvacModes you want to support/display in the UI, will use all by default */\n  hvacModes?: HvacMode[];\n  /** use custom labels for the displayed hvac modes */\n  hvacModeLabels?: Record<HvacMode, string>;\n  /** hide the current temperature @default false */\n  hideCurrentTemperature?: boolean;\n  /** hide the hvac modes button @default false */\n  hideHvacModes?: boolean;\n  /** hide the swing modes button @default false */\n  hideSwingModes?: boolean;\n  /** hide the fan modes button @default false */\n  hideFanModes?: boolean;\n  /** hide the preset modes button @default false */\n  hidePresetModes?: boolean;\n  /** changed whenever the state changes */\n  entityStateChanged?: (state: string) => void;\n  /** the control mode */\n  mainControl?: MainControl;\n  /** The custom step increment for the climate entity, this is automatically retrieved from the entity */\n  targetTempStep?: number;\n}\n\nfunction InternalClimateControls({\n  entity: _entity,\n  hvacModes,\n  hvacModeLabels,\n  hideCurrentTemperature,\n  hideHvacModes,\n  hideSwingModes,\n  hideFanModes,\n  hidePresetModes,\n  entityStateChanged,\n  cssStyles,\n  className,\n  targetTempStep,\n  mainControl = \"temperature\",\n  ...rest\n}: ClimateControlsProps) {\n  const [_mainControl, setMainControl] = useState<MainControl>(mainControl);\n  const entity = useEntity(_entity);\n  const isOff = entity.state === OFF;\n  const { hvac_action, preset_mode, fan_mode } = entity.attributes;\n  const fan_modes = entity.attributes.fan_modes as ClimateBuiltInFanMode[] | undefined;\n  const preset_modes = entity.attributes.preset_modes as ClimateBuiltInPresetMode[] | undefined;\n  const swing_modes = entity.attributes.swing_modes as ClimateBuiltInSwingMode[] | undefined;\n  const modes = hvacModes ?? entity.attributes.hvac_modes;\n  const config = useHass((state) => state.config);\n\n  const supportTargetHumidity = supportsFeatureFromAttributes(entity.attributes, ClimateEntityFeature.TARGET_HUMIDITY);\n  const supportFanMode = supportsFeatureFromAttributes(entity.attributes, ClimateEntityFeature.FAN_MODE);\n  const supportPresetMode = supportsFeatureFromAttributes(entity.attributes, ClimateEntityFeature.PRESET_MODE);\n  const supportSwingMode = supportsFeatureFromAttributes(entity.attributes, ClimateEntityFeature.SWING_MODE);\n\n  useEffect(() => {\n    if (!entityStateChanged) return;\n    if (isOff) {\n      return entityStateChanged(\"Off\");\n    }\n    return entityStateChanged(hvac_action ?? \"unknown\");\n  }, [hvac_action, entityStateChanged, isOff]);\n\n  useEffect(() => {\n    setMainControl(mainControl);\n  }, [mainControl]);\n\n  const { target_temp_step } = entity.attributes;\n\n  const _step = useMemo(() => {\n    return targetTempStep ?? target_temp_step ?? (config?.unit_system.temperature === UNIT_F ? 1 : 0.5);\n  }, [config?.unit_system.temperature, targetTempStep, target_temp_step]);\n\n  const _handleFanModeChanged = useCallback(\n    (value: ClimateBuiltInFanMode) => {\n      entity.service.setFanMode({\n        serviceData: {\n          fan_mode: value,\n        },\n      });\n    },\n    [entity.service],\n  );\n\n  const _handleOperationModeChanged = useCallback(\n    (value: HvacMode) => {\n      entity.service.setHvacMode({\n        serviceData: {\n          hvac_mode: value,\n        },\n      });\n    },\n    [entity.service],\n  );\n\n  const _handleSwingmodeChanged = useCallback(\n    (value: ClimateBuiltInSwingMode) => {\n      entity.service.setSwingMode({\n        serviceData: {\n          swing_mode: value,\n        },\n      });\n    },\n    [entity.service],\n  );\n\n  const _handlePresetmodeChanged = useCallback(\n    (value: ClimateBuiltInPresetMode) => {\n      if (value) {\n        entity.service.setPresetMode({\n          serviceData: {\n            preset_mode: value,\n          },\n        });\n      }\n    },\n    [entity.service],\n  );\n\n  return (\n    <Wrapper\n      {...rest}\n      className={`climate-card-controls ${className}`}\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n    >\n      <div className=\"controls\">\n        {_mainControl === \"temperature\" ? (\n          <ClimateControlSlider targetTempStep={_step} entity={_entity} showCurrent={!hideCurrentTemperature} />\n        ) : null}\n        {_mainControl === \"humidity\" ? (\n          <ClimateHumiditySlider targetTempStep={_step} entity={_entity} showCurrent={!hideCurrentTemperature} />\n        ) : null}\n        {supportTargetHumidity ? (\n          <ButtonBar\n            cssStyles={`\n              margin-bottom: 12px;\n            `}\n          >\n            <ButtonBarButton\n              active={_mainControl === \"temperature\"}\n              disabled={entity!.state === UNAVAILABLE}\n              title={localize(\"temperature\")}\n              icon=\"mdi:thermometer\"\n              onClick={() => setMainControl(\"temperature\")}\n            />\n            <ButtonBarButton\n              active={_mainControl === \"humidity\"}\n              disabled={entity!.state === UNAVAILABLE}\n              title={localize(\"humidity\")}\n              onClick={() => setMainControl(\"humidity\")}\n              icon=\"mdi:water-percent\"\n            />\n          </ButtonBar>\n        ) : null}\n        <div className={`controls-scroll`}>\n          {modes && !hideHvacModes && (\n            <Menu\n              placement=\"top\"\n              items={modes\n                .concat()\n                .sort(compareClimateHvacModes)\n                .map((mode) => {\n                  return {\n                    active: entity.state === mode,\n                    icon: computeHvacModeIcon(mode),\n                    label: hvacModeLabels?.[mode] ?? toReadableString(mode),\n                    onClick: () => {\n                      _handleOperationModeChanged(mode);\n                    },\n                  };\n                })}\n            >\n              <FabCard\n                icon={computeHvacModeIcon(entity.state as HvacMode)}\n                disabled={entity.state === UNAVAILABLE}\n                title={toReadableString(entity.state)}\n              />\n            </Menu>\n          )}\n          {supportPresetMode && !hidePresetModes && preset_modes && (\n            <Menu\n              placement=\"top\"\n              items={preset_modes.map((mode) => {\n                return {\n                  active: preset_mode === mode,\n                  icon: computePresetModeIcon(mode),\n                  label: toReadableString(mode),\n                  onClick: () => {\n                    _handlePresetmodeChanged(mode);\n                  },\n                };\n              })}\n            >\n              <FabCard\n                icon={computePresetModeIcon(preset_mode as ClimateBuiltInPresetMode)}\n                disabled={entity.state === UNAVAILABLE}\n                title={toReadableString(entity.attributes.preset_mode)}\n              />\n            </Menu>\n          )}\n          {supportFanMode && !hideFanModes && fan_modes && (\n            <Menu\n              placement=\"top\"\n              items={fan_modes.map((mode) => {\n                return {\n                  active: entity.attributes.fan_mode === mode,\n                  icon: computeFanModeIcon(mode),\n                  label: toReadableString(mode),\n                  onClick: () => {\n                    _handleFanModeChanged(mode);\n                  },\n                };\n              })}\n            >\n              <FabCard\n                icon={computeFanModeIcon(fan_mode as ClimateBuiltInFanMode)}\n                disabled={entity.state === UNAVAILABLE}\n                title={toReadableString(entity.attributes.fan_mode)}\n              />\n            </Menu>\n          )}\n          {supportSwingMode && !hideSwingModes && swing_modes && (\n            <Menu\n              placement=\"top\"\n              items={swing_modes.map((mode) => {\n                return {\n                  active: entity.attributes.swing_mode === mode,\n                  icon: computeSwingModeIcon(mode),\n                  label: toReadableString(mode),\n                  onClick: () => {\n                    _handleSwingmodeChanged(mode);\n                  },\n                };\n              })}\n            >\n              <FabCard\n                icon={computeSwingModeIcon(entity.attributes.swing_mode as ClimateBuiltInSwingMode)}\n                disabled={entity.state === UNAVAILABLE}\n                title={toReadableString(entity.attributes.swing_mode)}\n              />\n            </Menu>\n          )}\n        </div>\n      </div>\n    </Wrapper>\n  );\n}\n\n/** This layout is shared for the popup for a buttonCard and fabCard when long pressing on a card with a climate entity, and also the climateCard, this will fill the width/height of the parent component */\nexport function ClimateControls(props: ClimateControlsProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ClimateControls\" })}>\n      <InternalClimateControls {...props} />\n    </ErrorBoundary>\n  );\n}\n","export default \"data:image/png;base64,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\"","import { useMemo, useEffect, useState, useCallback } from \"react\";\nimport styled from \"@emotion/styled\";\nimport {\n  ControlSlider,\n  Tooltip,\n  Column,\n  FabCard,\n  ColorTempPicker,\n  ColorPicker,\n  useBreakpoint,\n  fallback,\n  ColumnProps,\n  ControlToggle,\n  Menu,\n} from \"@components\";\nimport {\n  useEntity,\n  LIGHT_COLOR_MODES,\n  OFF,\n  ON,\n  isUnavailableState,\n  useLightBrightness,\n  lightSupportsBrightness,\n  lightSupportsColorMode,\n  lightSupportsColor,\n  localize,\n  toReadableString,\n  lightSupportsFavoriteColors,\n  computeDefaultFavoriteColors,\n  temperature2rgb,\n  getLightCurrentModeRgbColor,\n  luminosity,\n  rgbww2rgb,\n  rgbw2rgb,\n  hs2rgb,\n  type LightColor,\n  useHass,\n  DOMAIN_ATTRIBUTES_UNITS,\n  isOffState,\n} from \"@hakit/core\";\nimport type { EntityName, FilterByDomain, LightEntityAttributes, ServiceData } from \"@hakit/core\";\nimport colorWheel from \"./color_wheel.png\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst SWATCH_SIZE = 40;\n\nconst ButtonBar = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 56px;\n  border-radius: 28px;\n  background-color: rgba(120, 120, 120, 0.1);\n  box-sizing: border-box;\n  width: auto;\n  padding: 4px;\n  gap: 4px;\n  margin-top: 24px;\n`;\n\nconst Separator = styled.div`\n  background-color: rgba(255, 255, 255, 0.1);\n  width: 1px;\n  height: 40px;\n`;\n\ntype MainControl = \"brightness\" | \"color_temp\" | \"color\";\n\nconst FabCardColor = styled(FabCard)`\n  position: relative;\n  .icon {\n    background-color: transparent;\n    transition: background var(--ha-transition-duration) var(--ha-easing);\n  }\n  &:after {\n    content: \"\";\n    position: absolute;\n    inset: 0px;\n    border-radius: 50%;\n    border: 0px;\n    background-image: url(${colorWheel});\n    background-size: 101%;\n    transition: var(--ha-transition-duration) var(--ha-easing);\n    transition-property: inset, border;\n    pointer-events: none;\n  }\n  ${(props) =>\n    props.active &&\n    `\n    .icon {\n      background-color: white;\n      transition: background var(--ha-transition-duration) var(--ha-easing);\n    }\n    &:after {\n      inset: 2px;\n      border: 2px solid var(--ha-S200);\n    }\n  `}\n  svg {\n    display: none;\n  }\n`;\n\nconst FabCardTemp = styled(FabCard)`\n  position: relative;\n  .icon {\n    background-color: transparent;\n    transition: background var(--ha-transition-duration) var(--ha-easing);\n  }\n  &:after {\n    content: \"\";\n    position: absolute;\n    inset: 0px;\n    border-radius: 50%;\n    border: 0px;\n    pointer-events: none;\n    background: linear-gradient(0deg, rgb(166, 209, 255) 0%, rgb(255, 255, 255) 50%, rgb(255, 160, 0) 100%);\n    transition: var(--ha-transition-duration) var(--ha-easing);\n    transition-property: inset, border;\n  }\n  ${(props) =>\n    props.active &&\n    `\n    .icon {\n      background-color: white;\n    }\n    &:after {\n      inset: 2px;\n      border: 2px solid var(--ha-S200);\n    }\n  `}\n  svg {\n    display: none;\n  }\n`;\n\ntype Extended = React.HTMLAttributes<HTMLDivElement> & ColumnProps;\nexport interface LightControlsProps extends Extended {\n  entity: FilterByDomain<EntityName, \"light\">;\n  onStateChange?: (state: string) => void;\n  /** Show the favorite colors section (defaults to true) */\n  showFavoriteColors?: boolean;\n  /** Provide custom favorite colors instead of computed defaults */\n  favoriteColors?: LightColor[];\n}\n\nfunction InternalLightControls({\n  entity: _entity,\n  onStateChange,\n  style,\n  showFavoriteColors = true,\n  favoriteColors,\n  ...rest\n}: LightControlsProps) {\n  const [control, setControl] = useState<MainControl>(\"brightness\");\n  const entity = useEntity(_entity);\n  const brightnessValue = useLightBrightness(entity);\n  const device = useBreakpoint();\n  const isUnavailable = isUnavailableState(entity.state);\n  const formatter = useHass((state) => state.formatter);\n  const titleValue = useMemo(() => {\n    if (entity.state === OFF) {\n      return localize(\"off\");\n    }\n    if (entity.state === ON) {\n      return `${brightnessValue}${DOMAIN_ATTRIBUTES_UNITS.light.brightness}`;\n    }\n    return localize(\"unavailable\");\n  }, [brightnessValue, entity.state]);\n\n  useEffect(() => {\n    if (onStateChange) {\n      onStateChange(titleValue);\n    }\n  }, [titleValue, onStateChange]);\n\n  // Effects restored per user request.\n\n  const supportsColorTemp = lightSupportsColorMode(entity, LIGHT_COLOR_MODES.COLOR_TEMP);\n  const supportsColor = lightSupportsColor(entity);\n  const supportsBrightness = lightSupportsBrightness(entity);\n  const supportsWhite = lightSupportsColorMode(entity, LIGHT_COLOR_MODES.WHITE);\n  const hasEffects = !!(entity?.attributes?.effect_list && entity.attributes.effect_list.length > 0);\n\n  const supportsFavorites = lightSupportsFavoriteColors(entity);\n  const computedFavorites = useMemo(() => {\n    if (!supportsFavorites) return [] as LightColor[];\n    return favoriteColors && favoriteColors.length > 0 ? favoriteColors : computeDefaultFavoriteColors(entity);\n  }, [supportsFavorites, favoriteColors, entity]);\n\n  const currentRgb = getLightCurrentModeRgbColor(entity);\n  const currentKelvin = entity.attributes.color_temp_kelvin;\n\n  const isFavoriteActive = useCallback(\n    (fav: LightColor) => {\n      if (\"color_temp_kelvin\" in fav) {\n        return (fav as { color_temp_kelvin: number }).color_temp_kelvin === currentKelvin;\n      }\n      if (\"rgb_color\" in fav && currentRgb) {\n        const rgb = (fav as { rgb_color: [number, number, number] }).rgb_color;\n        return rgb.every((v, i) => v === currentRgb[i]);\n      }\n      return false;\n    },\n    [currentKelvin, currentRgb],\n  );\n\n  const handleFavoriteClick = useCallback(\n    (fav: LightColor) => {\n      // Mirror HA: spread favorite object keys directly into service data without using 'any'\n      const serviceData: ServiceData<\"light\", \"turnOn\"> = {};\n      if (\"hs_color\" in fav) serviceData.hs_color = fav.hs_color;\n      if (\"color_temp_kelvin\" in fav) serviceData.color_temp_kelvin = fav.color_temp_kelvin;\n      if (\"rgb_color\" in fav) serviceData.rgb_color = fav.rgb_color;\n      if (\"rgbw_color\" in fav) serviceData.rgbw_color = fav.rgbw_color;\n      if (\"rgbww_color\" in fav) serviceData.rgbww_color = fav.rgbww_color;\n      entity.service.turnOn({ serviceData });\n    },\n    [entity.service],\n  );\n\n  const _handleEffectChange = useCallback(\n    (value?: string) => {\n      entity.service.turnOn({\n        serviceData: {\n          effect: value,\n        },\n      });\n    },\n    [entity.service],\n  );\n\n  return (\n    <Column\n      fullHeight\n      fullWidth\n      wrap=\"nowrap\"\n      justifyContent={device.xxs ? \"flex-start\" : \"center\"}\n      style={{\n        padding: device.xxs ? \"1rem\" : \"0\",\n        ...style,\n      }}\n      {...rest}\n    >\n      <Column>\n        {/* Mirrors HA: if no brightness support, show a simple toggle first */}\n        {!supportsBrightness && (\n          <ControlToggle\n            disabled={isUnavailable}\n            reversed\n            checked={entity.state === ON}\n            onChange={() => {\n              entity.service.toggle();\n            }}\n          />\n        )}\n        {(supportsColorTemp || supportsColor || supportsBrightness) && (\n          <>\n            {supportsBrightness && control === \"brightness\" && (\n              <ControlSlider\n                sliderColor={entity.state === ON ? entity.custom.color : undefined}\n                min={1}\n                max={100}\n                thickness={device.xxs ? 90 : 100}\n                clampValueToBaseline={!isOffState(entity.state)}\n                borderRadius={24}\n                value={brightnessValue}\n                disabled={isUnavailable}\n                onChange={(value) => {\n                  if (onStateChange) onStateChange(`${Math.round(value)}%`);\n                }}\n                onChangeApplied={(value) => {\n                  entity.service.turnOn({\n                    serviceData: { brightness_pct: value },\n                  });\n                  if (onStateChange) onStateChange(`${Math.round(value)}%`);\n                }}\n              />\n            )}\n            {supportsColor && control === \"color\" && <ColorPicker entity={_entity} />}\n            {supportsColorTemp && control === \"color_temp\" && (\n              <ColorTempPicker\n                entity={_entity}\n                disabled={isUnavailable || entity.state === OFF}\n                onChange={(kelvin) => {\n                  if (kelvin === null) {\n                    if (onStateChange) onStateChange(`${titleValue}`);\n                  } else {\n                    if (onStateChange) onStateChange(`${kelvin}K`);\n                  }\n                }}\n                onChangeApplied={() => {\n                  if (onStateChange) onStateChange(`${titleValue}`);\n                }}\n              />\n            )}\n          </>\n        )}\n      </Column>\n\n      {(supportsColorTemp || supportsColor || supportsBrightness) && (\n        <ButtonBar>\n          {/* Power button only when brightness supported (HA pattern) */}\n          {supportsBrightness && (\n            <Tooltip title={entity.state === OFF ? localize(\"turn_on\") : localize(\"turn_off\")}>\n              <FabCard\n                icon=\"mdi:power\"\n                onClick={() => {\n                  entity.service.toggle();\n                }}\n              />\n            </Tooltip>\n          )}\n          {/* Show brightness toggle button only if there are other modes to switch to */}\n          {(supportsColor || supportsColorTemp) && supportsBrightness && <Separator />}\n          {(supportsColor || supportsColorTemp) && supportsBrightness && (\n            <Tooltip title={localize(\"color_brightness\")}>\n              <FabCard\n                key={`${_entity}-brightness`}\n                icon=\"mdi:brightness-6\"\n                active={control === \"brightness\"}\n                onClick={() => setControl(\"brightness\")}\n              />\n            </Tooltip>\n          )}\n          {supportsColor && (\n            <Tooltip title={localize(\"color\")}>\n              <FabCardColor key={`${_entity}-color`} active={control === \"color\"} onClick={() => setControl(\"color\")} />\n            </Tooltip>\n          )}\n          {supportsColorTemp && (\n            <Tooltip title={localize(\"color_temperature\")}>\n              <FabCardTemp key={`${_entity}-color-temp`} active={control === \"color_temp\"} onClick={() => setControl(\"color_temp\")} />\n            </Tooltip>\n          )}\n          {supportsWhite && (\n            <>\n              <Separator />\n              <Tooltip title={localize(\"set_white\") /* placeholder key */}>\n                <FabCard\n                  key={`${_entity}-white`}\n                  icon=\"mdi:file-word-box\"\n                  onClick={() => {\n                    entity.service.turnOn({ serviceData: { white: true } });\n                  }}\n                />\n              </Tooltip>\n            </>\n          )}\n          {/* Effects menu (mirrors HA effect selection placement after controls) */}\n          {hasEffects && entity.attributes.effect_list && (\n            <Menu\n              placement=\"top\"\n              items={entity.attributes.effect_list.map((effect) => {\n                return {\n                  active: entity.attributes.effect === effect,\n                  label: toReadableString(effect),\n                  onClick: () => {\n                    _handleEffectChange(effect);\n                  },\n                };\n              })}\n            >\n              <Tooltip title={localize(\"effect\")}>\n                <FabCard key={`${_entity}-effects`} icon=\"mdi:stars\" />\n              </Tooltip>\n            </Menu>\n          )}\n        </ButtonBar>\n      )}\n      {showFavoriteColors && supportsFavorites && computedFavorites.length > 0 && (\n        <FavoritesWrapper>\n          {/* TODO: allow user persistence & editing of custom favorite colors */}\n          {computedFavorites.map((fav, idx) => {\n            const [r, g, b] = getRgbColor(entity.attributes, fav);\n            const bg = `rgb(${r}, ${g}, ${b})`;\n            const active = isFavoriteActive(fav);\n            const lum = luminosity([r, g, b]);\n            const contrastColor = lum > 0.8 ? \"rgb(33,33,33)\" : \"white\";\n\n            // Helper: clamp & round before hex conversion so decimals don't produce invalid hex like \"fe.1c...\"\n            const rgbToHex = (vals: [number, number, number]) =>\n              \"#\" +\n              vals\n                .map((v) => Math.min(255, Math.max(0, Math.round(v))))\n                .map((v) => v.toString(16).padStart(2, \"0\"))\n                .join(\"\");\n\n            let label: string;\n            if (\"color_temp_kelvin\" in fav) {\n              // Only show kelvin label when the light actually supports color temperature; otherwise show hex.\n              if (lightSupportsColorMode(entity, LIGHT_COLOR_MODES.COLOR_TEMP)) {\n                label = formatter.attributeValue(\n                  {\n                    ...entity,\n                    attributes: {\n                      ...entity.attributes,\n                      color_temp_kelvin: fav.color_temp_kelvin,\n                    },\n                  },\n                  \"color_temp_kelvin\",\n                ) as string;\n              } else {\n                label = rgbToHex([r, g, b]);\n              }\n            } else {\n              label = rgbToHex([r, g, b]);\n            }\n            return (\n              <Tooltip key={`fav-${idx}`} title={label}>\n                <FavoriteFabCard\n                  data-label={label}\n                  size={SWATCH_SIZE}\n                  icon={active ? \"mdi:check-circle-outline\" : null}\n                  iconProps={{\n                    style: {\n                      color: contrastColor,\n                    },\n                  }}\n                  noIcon={!active}\n                  active={active}\n                  style={{\n                    backgroundColor: bg,\n                    color: contrastColor,\n                  }}\n                  onClick={() => handleFavoriteClick(fav)}\n                />\n              </Tooltip>\n            );\n          })}\n        </FavoritesWrapper>\n      )}\n    </Column>\n  );\n}\n\n/** A component that will render the controls for a light, this is currently used by the popup for buttons */\nexport function LightControls(props: LightControlsProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"LightControls\" })}>\n      <InternalLightControls {...props} />\n    </ErrorBoundary>\n  );\n}\n\nfunction getRgbColor(entityAttributes: LightEntityAttributes, color: LightColor): [number, number, number] {\n  if (color) {\n    if (\"hs_color\" in color) {\n      return hs2rgb([color.hs_color[0], color.hs_color[1] / 100]);\n    }\n    if (\"color_temp_kelvin\" in color) {\n      return temperature2rgb(color.color_temp_kelvin);\n    }\n    if (\"rgb_color\" in color) {\n      return color.rgb_color;\n    }\n    if (\"rgbw_color\" in color) {\n      return rgbw2rgb(color.rgbw_color);\n    }\n    if (\"rgbww_color\" in color) {\n      return rgbww2rgb(color.rgbww_color, entityAttributes.min_color_temp_kelvin, entityAttributes.max_color_temp_kelvin);\n    }\n  }\n\n  return [255, 255, 255];\n}\n\n// Styled components for favorites\nconst FavoritesWrapper = styled.div`\n  /* Keep a consistent swatch size & gap regardless of parent width */\n  --favorite-swatch-size: ${SWATCH_SIZE}px;\n  --favorite-swatch-gap: 8px;\n  margin-top: 16px;\n  display: grid;\n  width: 100%;\n  gap: var(--favorite-swatch-gap);\n  /* Fixed-size columns so they don't stretch when there's extra space */\n  grid-template-columns: repeat(4, var(--favorite-swatch-size));\n  justify-content: center; /* center the 4-column block horizontally */\n  align-items: center;\n  justify-items: center;\n`;\n\nconst FavoriteFabCard = styled(FabCard)`\n  position: relative;\n  box-sizing: border-box;\n  width: var(--favorite-swatch-size);\n  height: var(--favorite-swatch-size);\n  .icon {\n    opacity: 0;\n  }\n  &:hover {\n    transform: scale(0.97);\n  }\n`;\n","import styled from \"@emotion/styled\";\nimport { keyframes } from \"@emotion/react\";\nimport { useEffect, useState, CSSProperties, useRef } from \"react\";\nimport {\n  localize,\n  useHass,\n  type AlarmMode,\n  type AlarmPanelCardConfigState,\n  type EntityName,\n  type HassEntityWithService,\n  type FilterByDomain,\n  useEntity,\n  LocaleKeys,\n} from \"@hakit/core\";\nimport { fallback, ButtonGroup, ButtonGroupButton } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { TextField } from \"../../../Form/TextField\";\nimport { snakeCase } from \"lodash\";\n\nimport { _getActionLabel, _getActionColor, filterSupportedAlarmStates, ALARM_MODE_STATE_MAP, ALARM_MODES, DEFAULT_STATES } from \"./shared\";\n\nconst BUTTONS = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"\", \"0\", \"clear\"];\n// split the buttons into 3 rows so we can render them like an input pad\nconst BUTTON_ROWS = BUTTONS.reduce((acc, _val, i) => {\n  if (i % 3 === 0) {\n    acc.push(BUTTONS.slice(i, i + 3));\n  }\n  return acc;\n}, [] as string[][]);\n\nconst FORMAT_NUMBER = \"number\";\n\nconst pulse = keyframes`\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n`;\n\nconst Wrapper = styled.div`\n  width: 100%;\n  position: relative;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-sizing: border-box;\n\n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    box-sizing: border-box;\n  }\n\n  .loading-wrapper {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    overflow: hidden;\n    z-index: 2;\n  }\n\n  .loading-indicator {\n    position: absolute;\n    inset: 0;\n    animation: ${pulse} 1s infinite;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: var(--ha-300-a1);\n  }\n\n  .keypad {\n    .keypad-buttons {\n      z-index: 1;\n    }\n    &:before {\n      content: \"\";\n      position: absolute;\n      top: -10%;\n      left: -10%;\n      right: -10%;\n      bottom: -10%;\n      display: block;\n      opacity: 0.25;\n      z-index: 0;\n      pointer-events: none;\n      transition: var(--ha-transition-duration) var(--ha-easing);\n      transition-property: background;\n      background: radial-gradient(\n        var(--ha-alarm-controls-size) at var(--ha-alarm-controls-position),\n        var(--ha-alarm-controls-color, transparent) 0%,\n        transparent 100%\n      );\n    }\n  }\n\n  .actions {\n    margin: 0;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    width: 100%;\n  }\n`;\n\nconst ControlPanelSize = styled.div<{\n  buttonSize: number;\n  buttonGap: CSSProperties[\"gap\"];\n}>`\n  ${(props) => {\n    return `\n      display: flex;\n      justify-content: center;\n      flex-wrap: wrap;\n      margin: auto;\n      width: 100%;\n      direction: ltr;\n      gap: ${props.buttonGap};\n      position: relative;\n      max-width: calc(${props.buttonSize}px * 3 + ${props.buttonGap} * 2);\n      > * {\n        width: 100%;\n      }\n      .button-group-parent:not(.vertical) {\n        max-width: none;\n        min-width: 0;\n        width: 100%;\n        gap: ${props.buttonGap};\n      }\n    `;\n  }}\n`;\n\ninterface Slot {\n  position: \"1\" | \"2\" | \"3\" | \"4\";\n  children: React.ReactNode;\n}\n\ntype AlarmServices = keyof HassEntityWithService<\"alarm_control_panel\">[\"service\"];\nexport interface AlarmControlsProps extends React.ComponentPropsWithoutRef<\"div\"> {\n  /** The alarm entity to control */\n  entity: FilterByDomain<EntityName, \"alarm_control_panel\">;\n  /** overwrite the default actions that are displayed, by default it will show what's supported by the entity */\n  states?: AlarmPanelCardConfigState[];\n  /** if you provide this the pin-code functionality will be hidden and you'll just be able to call disarm/arm without a pin-code input.  */\n  defaultCode?: number;\n  /** The size of the buttons for the keypad in pixels @default 80 */\n  buttonSize?: number;\n  /** The gap between each button @default '0.5rem' */\n  buttonGap?: CSSProperties[\"gap\"];\n  /** hide the code input field, useful if you only want to show the keypad @default false */\n  hideCodeInput?: boolean;\n  /** hide the keypad, useful if you only want to show the action buttons or just the code input field @default false */\n  hideKeypad?: boolean;\n  /** use a custom color for the background gradient behind the keypad depending on the state, if you return undefined it will use the default */\n  customActionColor?: (state: AlarmMode) => string | undefined;\n  /** overwrite the labels used on the buttons by assigning the state value to a label, by default this will use the same values as home assistant */\n  labelMap?: Record<AlarmPanelCardConfigState | \"disarm\", string>;\n  /** you can customize and add in additional content/layout by inserting custom slots, this allows you to insert custom elements within the component layout. */\n  slots?: Slot[];\n}\n\nfunction InternalAlarmControls({\n  entity: _entity,\n  states: _states,\n  className,\n  cssStyles,\n  defaultCode,\n  buttonSize = 80,\n  buttonGap = \"0.5rem\",\n  hideCodeInput = false,\n  hideKeypad = false,\n  customActionColor,\n  labelMap,\n  slots,\n  ...rest\n}: AlarmControlsProps) {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const [inputVal, setInputVal] = useState<string>(defaultCode ? `${defaultCode}` : \"\");\n  const entity = useEntity(_entity);\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n\n  const states = _states || filterSupportedAlarmStates(entity, DEFAULT_STATES);\n\n  const _handlePadClick = (val: string): void => {\n    setInputVal(val === \"clear\" ? \"\" : inputVal + val);\n  };\n\n  const _handleActionClick = (state: AlarmPanelCardConfigState | \"disarm\"): void => {\n    entity.service[snakeCase(`alarm_${state}`) as AlarmServices]({\n      serviceData: {\n        code: inputVal,\n      },\n    });\n    if (!defaultCode) {\n      setInputVal(\"\");\n    }\n  };\n\n  useEffect(() => {\n    if (defaultCode) {\n      setInputVal(`${defaultCode}`);\n    }\n  }, [defaultCode]);\n\n  useEffect(() => {\n    if (!wrapperRef.current) return;\n    wrapperRef.current.style.setProperty(\"--ha-alarm-controls-position\", \"50% 50%\");\n    wrapperRef.current.style.setProperty(\"--ha-alarm-controls-size\", \"50% 50%\");\n    wrapperRef.current.style.setProperty(\"--ha-alarm-controls-color\", _getActionColor(entity.state, customActionColor));\n  }, [entity.state, customActionColor]);\n\n  const localizeState = (): string => {\n    if (entity.state === \"triggered\") return localize(\"pending\");\n    if (entity.state.includes(\"custom_bypass\")) return localize(\"custom_bypass\");\n    if (entity.state.includes(\"armed_\")) return localize(\"armed\");\n    return localize(entity.state as LocaleKeys);\n  };\n\n  const isLoading = [\"pending\", \"triggered\", \"arming\"].includes(entity.state);\n\n  const showKeypad = entity.attributes.code_format === FORMAT_NUMBER && !defaultCode && !hideKeypad;\n  const unpackSlot = (position: \"1\" | \"2\" | \"3\" | \"4\") => slots?.find((slot) => slot.position === position)?.children ?? null;\n\n  return (\n    <Wrapper\n      ref={wrapperRef}\n      className={`alarm-control-panel ${isLoading ? \"is-loading\" : \"\"} ${className ?? \"\"}`}\n      cssStyles={`\n          ${globalComponentStyle.alarmCard ?? \"\"}\n          ${cssStyles ?? \"\"}\n        `}\n      {...rest}\n    >\n      {unpackSlot(\"1\")}\n      <ControlPanelSize className=\"actions-wrapper\" buttonSize={buttonSize} buttonGap={buttonGap}>\n        <ButtonGroup\n          id=\"armActions\"\n          className=\"actions\"\n          orientation=\"horizontal\"\n          thickness={buttonSize}\n          gap={buttonGap}\n          maintainAspectRatio={false}\n        >\n          {(entity.state === \"disarmed\" ? states : ([\"disarm\"] as const)).map((stateAction) => (\n            <ButtonGroupButton\n              key={stateAction}\n              icon={stateAction in ALARM_MODE_STATE_MAP ? ALARM_MODES[ALARM_MODE_STATE_MAP[stateAction]].icon : \"\"}\n              iconProps={{\n                fontSize: \"30px\",\n                style: {\n                  marginBottom: \"6px\",\n                },\n              }}\n              title={!inputVal ? localize(\"enter_code\") : _getActionLabel(stateAction, labelMap)}\n              placement=\"top\"\n              style={{\n                flexDirection: \"column\",\n                fontSize: \"14px\",\n                aspectRatio: \"unset\",\n              }}\n              disabled={!inputVal || isLoading}\n              onClick={() => _handleActionClick(stateAction)}\n            >\n              {_getActionLabel(stateAction, labelMap)}\n            </ButtonGroupButton>\n          ))}\n        </ButtonGroup>\n      </ControlPanelSize>\n      {unpackSlot(\"2\")}\n      {!entity.attributes.code_format || defaultCode || hideCodeInput ? null : (\n        <ControlPanelSize className=\"actions-wrapper-input\" buttonSize={buttonSize} buttonGap={buttonGap}>\n          <TextField value={inputVal} type=\"password\" label={localize(\"code\")} id=\"alarmCode\" disabled={isLoading} />\n        </ControlPanelSize>\n      )}\n      {unpackSlot(\"3\")}\n      {!showKeypad ? null : (\n        <ControlPanelSize className=\"keypad\" buttonSize={buttonSize} buttonGap={buttonGap}>\n          {BUTTON_ROWS.map((buttons, index) => {\n            return (\n              <ButtonGroup key={index} orientation=\"horizontal\" gap={buttonGap} thickness={buttonSize} className=\"keypad-buttons\">\n                {buttons.map((val, j) => {\n                  return (\n                    <ButtonGroupButton\n                      key={`${index}-${j}`}\n                      className={`keypad-button keypad-button-${val === \"\" ? \"empty\" : val} ${val !== \"clear\" ? \"numberkey\" : \"\"}`}\n                      disabled={isLoading || val === \"\"}\n                      disableScaleEffect={val === \"\"}\n                      onClick={() => {\n                        _handlePadClick(val);\n                      }}\n                      style={{\n                        opacity: val === \"\" ? 0.2 : 1,\n                        zIndex: val === \"\" ? -1 : undefined,\n                        cursor: val === \"\" ? \"default\" : \"pointer\",\n                      }}\n                    >\n                      <span>{val === \"clear\" ? localize(\"clear\") : val}</span>\n                    </ButtonGroupButton>\n                  );\n                })}\n              </ButtonGroup>\n            );\n          })}\n        </ControlPanelSize>\n      )}\n      {isLoading && (\n        <>\n          <ControlPanelSize className=\"loading-wrapper\" buttonSize={buttonSize} buttonGap={buttonGap}>\n            <div className=\"loading-indicator\">\n              <span>{localizeState()}</span>\n            </div>\n          </ControlPanelSize>\n        </>\n      )}\n      {unpackSlot(\"4\")}\n    </Wrapper>\n  );\n}\n\n/** This component will render controls for a an alarm system, it supports arm home, arm away, and disarm buttons.\n *  It has full keypad support for entering a pin code to arm/disarm the alarm system.\n *  You can bypass the keycode functionality and just retain the action buttons by providing a defaultCode value with the expected code to pass around\n */\nexport function AlarmControls(props: AlarmControlsProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"AlarmControls\" })}>\n      <InternalAlarmControls {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useMemo, useEffect, useCallback, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { ControlSlider, Column, Row, FabCard, useBreakpoint, fallback, ButtonGroup, ButtonGroupButton } from \"@components\";\nimport { useEntity, supportsFeatureFromAttributes, isUnavailableState, localize } from \"@hakit/core\";\nimport type { EntityName, CoverEntity, FilterByDomain } from \"@hakit/core\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst enum CoverEntityFeature {\n  OPEN = 1,\n  CLOSE = 2,\n  SET_POSITION = 4,\n  STOP = 8,\n  OPEN_TILT = 16,\n  CLOSE_TILT = 32,\n  STOP_TILT = 64,\n  SET_TILT_POSITION = 128,\n}\n\nconst ButtonBar = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 56px;\n  border-radius: 28px;\n  background-color: rgba(120, 120, 120, 0.1);\n  box-sizing: border-box;\n  width: auto;\n  padding: 4px;\n  gap: 4px;\n  margin-top: 24px;\n`;\n\nconst Label = styled.span`\n  font-size: 0.8rem;\n  margin-top: 0.5rem;\n  text-transform: uppercase;\n`;\n\nfunction computeTitleDisplay(entity: CoverEntity, position?: number) {\n  const isUnavailable = isUnavailableState(entity.state);\n  const statePosition =\n    !isUnavailable && entity.state !== \"closed\"\n      ? (entity.attributes.current_position ?? entity.attributes.current_tilt_position)\n      : undefined;\n\n  const currentPosition = position ?? statePosition;\n\n  const suffix = currentPosition && currentPosition !== 100 ? (currentPosition ?? entity.attributes.current_position ?? \"\") : \"\";\n  if (typeof position === \"number\") {\n    return `${position === 0 ? \"closed\" : position === 100 ? \"open\" : entity.state}${suffix ? ` - ${suffix}%` : \"\"}`;\n  }\n  return `${entity.state}${suffix ? ` - ${suffix}%` : \"\"}`;\n}\n\ntype Mode = \"position\" | \"button\";\ntype Orientation = \"vertical\" | \"horizontal\";\n\nexport interface CoverControlsProps {\n  entity: FilterByDomain<EntityName, \"cover\">;\n  onStateChange?: (state: string) => void;\n  mode?: Mode;\n  /** the orientation of the slider, useful if you want to represent the slider to match your curtain/blind orientation */\n  orientation?: Orientation;\n  /** reverse the direction of the slider, useful if you want the ui to reflect the actual cover, the UI will not change, but the actions will reverse, open becomes close, just changes the order */\n  reverse?: boolean;\n}\n\nfunction InternalCoverControls({\n  entity: _entity,\n  mode = \"position\",\n  orientation = \"vertical\",\n  reverse = false,\n  onStateChange,\n}: CoverControlsProps) {\n  const entity = useEntity(_entity);\n  const isUnavailable = isUnavailableState(entity.state);\n  const supports = useCallback(\n    (feature: CoverEntityFeature) => {\n      return supportsFeatureFromAttributes(entity.attributes, feature);\n    },\n    [entity.attributes],\n  );\n  const supportsPosition = supports(CoverEntityFeature.SET_POSITION);\n  const supportsTiltPosition = supports(CoverEntityFeature.SET_TILT_POSITION);\n\n  const supportsOpenClose = supports(CoverEntityFeature.OPEN) || supports(CoverEntityFeature.CLOSE) || supports(CoverEntityFeature.STOP);\n\n  const supportsTilt =\n    supports(CoverEntityFeature.OPEN_TILT) || supports(CoverEntityFeature.CLOSE_TILT) || supports(CoverEntityFeature.STOP_TILT);\n\n  const [_mode, setMode] = useState<Mode>((mode ?? supportsPosition) ? \"position\" : \"button\");\n\n  const device = useBreakpoint();\n  const titleValue = useMemo(() => {\n    return computeTitleDisplay(entity);\n  }, [entity]);\n\n  useEffect(() => {\n    if (supportsPosition && mode === \"position\") {\n      setMode(mode);\n    } else {\n      setMode(\"button\");\n    }\n  }, [mode, supportsPosition]);\n\n  useEffect(() => {\n    if (onStateChange) {\n      onStateChange(titleValue);\n    }\n  }, [titleValue, onStateChange]);\n\n  return (\n    <Column\n      fullHeight\n      wrap=\"nowrap\"\n      justifyContent={device.xxs ? \"flex-start\" : \"flex-start\"}\n      style={{\n        padding: device.xxs ? \"1rem\" : \"0\",\n      }}\n    >\n      <Column>\n        {_mode === \"position\" && (\n          <>\n            <Row\n              gap=\"1rem\"\n              style={{\n                flexDirection: orientation === \"vertical\" ? \"row\" : \"column\",\n              }}\n            >\n              {supportsPosition && typeof entity.attributes.current_position !== \"undefined\" && (\n                <Column>\n                  <ControlSlider\n                    sliderColor={isUnavailable ? undefined : `var(--ha-A400)`}\n                    min={0}\n                    max={100}\n                    mode={reverse ? \"end\" : \"start\"}\n                    vertical={orientation === \"vertical\"}\n                    thickness={device.xxs ? 90 : 100}\n                    borderRadius={24}\n                    value={entity.attributes.current_position}\n                    disabled={isUnavailable}\n                    onChange={(value) => {\n                      if (onStateChange) onStateChange(computeTitleDisplay(entity, Math.round(value)));\n                    }}\n                    onChangeApplied={(value) => {\n                      entity.service.setCoverPosition({\n                        serviceData: {\n                          position: value,\n                        },\n                      });\n                      if (onStateChange) onStateChange(computeTitleDisplay(entity, Math.round(value)));\n                    }}\n                  />\n                  <Label>{localize(\"cover_position\")}</Label>\n                </Column>\n              )}\n              {supportsTiltPosition && typeof entity.attributes.current_tilt_position !== \"undefined\" && (\n                <Column>\n                  <ControlSlider\n                    sliderColor={isUnavailable ? undefined : `var(--ha-A400)`}\n                    min={0}\n                    max={100}\n                    mode={reverse ? \"end\" : \"start\"}\n                    vertical={orientation === \"vertical\"}\n                    thickness={device.xxs ? 90 : 100}\n                    borderRadius={24}\n                    value={entity.attributes.current_tilt_position}\n                    disabled={isUnavailable}\n                    onChange={(value) => {\n                      if (onStateChange) onStateChange(computeTitleDisplay(entity, Math.round(value)));\n                    }}\n                    onChangeApplied={(value) => {\n                      entity.service.setCoverTiltPosition({\n                        serviceData: {\n                          tilt_position: value,\n                        },\n                      });\n                      if (onStateChange) onStateChange(computeTitleDisplay(entity, Math.round(value)));\n                    }}\n                  />\n                  <Label>{localize(\"cover_tilt_position\")}</Label>\n                </Column>\n              )}\n            </Row>\n          </>\n        )}\n        {_mode === \"button\" && (\n          <>\n            <Row\n              gap=\"1rem\"\n              style={{\n                flexDirection: orientation === \"vertical\" ? \"row\" : \"column\",\n              }}\n            >\n              {supportsOpenClose && (\n                <Column>\n                  <ButtonGroup\n                    thickness={device.xxs ? 80 : 96}\n                    reverse={reverse}\n                    orientation={orientation}\n                    style={{\n                      minHeight: orientation === \"vertical\" ? \"200px\" : undefined,\n                      maxHeight: orientation === \"vertical\" ? \"320px\" : undefined,\n                      height: orientation === \"vertical\" ? \"45vh\" : undefined,\n                      minWidth: orientation === \"horizontal\" ? \"320px\" : undefined,\n                      maxWidth: orientation === \"horizontal\" ? \"420px\" : undefined,\n                      flexWrap: \"nowrap\",\n                    }}\n                  >\n                    <ButtonGroupButton\n                      title={localize(\"open_cover\")}\n                      entity={_entity}\n                      service=\"openCover\"\n                      icon={reverse ? \"mdi:arrow-down\" : \"mdi:arrow-up\"}\n                    />\n                    <ButtonGroupButton\n                      title={localize(\"stop_cover\")}\n                      entity={_entity}\n                      service=\"stopCover\"\n                      icon={\"mdi:stop-circle-outline\"}\n                    />\n                    <ButtonGroupButton\n                      title={localize(\"close_cover\")}\n                      entity={_entity}\n                      service=\"closeCover\"\n                      icon={!reverse ? \"mdi:arrow-down\" : \"mdi:arrow-up\"}\n                    />\n                  </ButtonGroup>\n                  <Label>{localize(\"control\")}</Label>\n                </Column>\n              )}\n              {supportsTilt && (\n                <Column>\n                  <ButtonGroup\n                    thickness={device.xxs ? 80 : 96}\n                    reverse={reverse}\n                    orientation={orientation}\n                    style={{\n                      minHeight: orientation === \"vertical\" ? \"200px\" : undefined,\n                      maxHeight: orientation === \"vertical\" ? \"320px\" : undefined,\n                      height: orientation === \"vertical\" ? \"45vh\" : undefined,\n                      minWidth: orientation === \"horizontal\" ? \"320px\" : undefined,\n                      maxWidth: orientation === \"horizontal\" ? \"420px\" : undefined,\n                      flexWrap: \"nowrap\",\n                    }}\n                  >\n                    <ButtonGroupButton\n                      title={localize(\"open_cover_tilt\")}\n                      entity={_entity}\n                      service=\"openCoverTilt\"\n                      icon={reverse ? \"mdi:arrow-collapse\" : \"mdi:arrow-expand\"}\n                    />\n                    <ButtonGroupButton\n                      title={localize(\"stops_a_tilting_cover_movement\")}\n                      entity={_entity}\n                      service=\"stopCoverTilt\"\n                      icon={\"mdi:stop-circle-outline\"}\n                    />\n                    <ButtonGroupButton\n                      title={localize(\"close_cover_tilt\")}\n                      entity={_entity}\n                      service=\"closeCoverTilt\"\n                      icon={!reverse ? \"mdi:arrow-collapse\" : \"mdi:arrow-expand\"}\n                    />\n                  </ButtonGroup>\n                  <Label>{localize(\"tilt_position\")}</Label>\n                </Column>\n              )}\n            </Row>\n          </>\n        )}\n        {(supportsTilt || supportsPosition) && (\n          <ButtonBar>\n            <FabCard\n              icon=\"mdi:hamburger-menu\"\n              active={_mode === \"position\"}\n              title={localize(\"position\")}\n              onClick={() => {\n                setMode(\"position\");\n              }}\n            />\n            <FabCard\n              icon=\"mdi:swap-vertical\"\n              active={_mode === \"button\"}\n              title={localize(\"button\")}\n              onClick={() => {\n                setMode(\"button\");\n              }}\n            />\n          </ButtonBar>\n        )}\n      </Column>\n    </Column>\n  );\n}\n\n/** This component will render controls for a cover, it supports tilt & position sliders, as well as a button mode\n *\n * The below demos show how different cover entities will render based on what they support, this is automatic and no need to configure anything.\n */\nexport function CoverControls(props: CoverControlsProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"CoverControls\" })}>\n      <InternalCoverControls {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { FabCard } from \"@components\";\n\nexport const Fab = styled(FabCard)`\n  background-color: var(--ha-S600);\n\n  &:not(.active) {\n    color: black;\n  }\n  opacity: 0.8;\n  transition-property: opacity, color, background-color;\n  &:disabled {\n    opacity: 0.38;\n  }\n  &:not(:disabled) {\n    &:hover,\n    &:active {\n      opacity: 1;\n      color: black;\n    }\n  }\n  z-index: 2;\n`;\n","import {\n  EntityName,\n  FilterByDomain,\n  useEntity,\n  useService,\n  isUnavailableState,\n  OFF,\n  supportsFeatureFromAttributes,\n  type MediaPlayerEntity,\n  localize,\n} from \"@hakit/core\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport styled from \"@emotion/styled\";\nimport { MediaPlayerCard, CardBase, Row, Column, Group, VolumeControls, fallback, ColumnProps } from \"@components\";\nimport { Fab } from \"../../../../Cards/MediaPlayerCard/Fab\";\nimport { capitalize, flatten, groupBy } from \"lodash\";\nimport { useCallback, useMemo, useState, useEffect } from \"react\";\n\nconst StyledMediaPlayerCard = styled(CardBase)`\n  transform: none;\n  will-change: width, height;\n  overflow: visible;\n  svg {\n    color: currentColor;\n  }\n  &:not(.disabled) {\n    &:hover,\n    &:active {\n      background-color: var(--ha-S300);\n      svg {\n        color: currentColor;\n      }\n    }\n  }\n  padding: 1rem;\n  cursor: default;\n`;\n\nconst Title = styled.div`\n  font-size: 0.8rem;\n  color: rgba(255, 255, 255, 1);\n`;\nconst State = styled.span`\n  font-size: 0.8rem;\n  color: rgba(255, 255, 255, 0.5);\n`;\n\nconst StyledColumn = styled(Column)`\n  display: grid;\n  grid-template-columns: auto auto;\n`;\nconst GroupLine = styled.div`\n  height: 50px;\n  width: 2px;\n  background-color: var(--ha-A400);\n  position: absolute;\n  top: 30px;\n  left: 14px;\n  z-index: 1;\n`;\n\nexport interface MediaPlayerControlsProps extends ColumnProps {\n  entity: FilterByDomain<EntityName, \"media_player\">;\n  groupedEntities: MediaPlayerEntity[];\n  allEntityIds: string[];\n  onStateChange?: (state: string) => void;\n}\n\nexport const MediaPlayerControls = ({\n  groupedEntities = [],\n  allEntityIds = [],\n  onStateChange,\n  entity,\n  ...rest\n}: MediaPlayerControlsProps) => {\n  const primaryEntity = useEntity(entity);\n  const supportsGrouping = supportsFeatureFromAttributes(primaryEntity.attributes, 524288);\n  // To get proper ordering of speakers, we need to flatten the groupedEntities array while keeping the order of the groups\n  const mediaPlayersOrderedByGroup = useMemo(\n    () => flatten(Object.values(groupBy(groupedEntities, (entity) => entity.attributes?.group_members))),\n    [groupedEntities],\n  );\n  const mediaPlayerService = useService(\"media_player\");\n  const [lastPlayedMedia, setLastPlayedMedia] = useState<{ media_content_id: string; media_content_type: string }>({\n    media_content_id: \"\",\n    media_content_type: \"\",\n  });\n\n  const handleMediaPlayerActionClick = useCallback(\n    (entityId: FilterByDomain<EntityName, \"media_player\">) => {\n      const entity = groupedEntities.find((entity) => entity.entity_id === entityId);\n      if (!entity) {\n        // TODO - handle the case where it's not found?\n        return;\n      }\n      const playingSpeakers = groupedEntities.filter((entity) => entity.state === \"playing\");\n\n      // no speakers are playing -> play media\n      if (playingSpeakers.length === 0) {\n        mediaPlayerService.playMedia({\n          target: entity.attributes?.group_members ?? entity.entity_id,\n          serviceData: { media: { ...lastPlayedMedia }, enqueue: \"play\" },\n        });\n        return mediaPlayerService.mediaPlay({\n          target: entity.attributes?.group_members ?? entity.entity_id,\n        });\n      }\n\n      // the target speaker is playing and only has one member in the group -> pause media\n      if (entity.attributes?.group_members?.length === 1 && entity.state === \"playing\") {\n        setLastPlayedMedia({\n          media_content_id: entity.attributes.media_content_id ?? \"\",\n          media_content_type: entity.attributes.media_content_type ?? \"\",\n        });\n        return mediaPlayerService.mediaPause({\n          target: entity.attributes?.group_members ?? entity.entity_id,\n        });\n      }\n\n      // the target speaker is playing and has more than one member in the group -> unjoin\n      if ((entity.attributes?.group_members?.length || 0) > 1 && entity.state === \"playing\") {\n        return mediaPlayerService.unjoin({\n          target: entityId,\n        });\n      }\n\n      // the target speaker is not playing, and we have at least one speaker playing -> join\n      if (entity.state !== \"playing\" && playingSpeakers.length > 0) {\n        return mediaPlayerService.join({\n          target: playingSpeakers[0].entity_id,\n          serviceData: { group_members: [entityId] },\n        });\n      }\n    },\n    [groupedEntities, mediaPlayerService, lastPlayedMedia],\n  );\n\n  const getIcon = useCallback(\n    (entity: MediaPlayerEntity): string => {\n      const hasSomePlayingSpeakers = mediaPlayersOrderedByGroup?.some((mediaPlayer) => mediaPlayer.state === \"playing\");\n\n      if (entity.attributes.group_members?.length === 1 && entity.state === \"playing\") {\n        return \"mdi:pause\";\n      }\n\n      if (hasSomePlayingSpeakers) {\n        return \"mdi:speaker-multiple\";\n      }\n\n      if (entity.attributes.group_members?.length === 1 && entity.state !== \"playing\") {\n        return \"mdi:play\";\n      }\n\n      return \"mdi:speaker-off\";\n    },\n    [mediaPlayersOrderedByGroup],\n  );\n\n  useEffect(() => {\n    if (primaryEntity && onStateChange) {\n      onStateChange(primaryEntity.state);\n    }\n  }, [primaryEntity, onStateChange]);\n\n  return (\n    <Column fullHeight fullWidth {...rest}>\n      <Column fullWidth fullHeight className={`column`} gap=\"1rem\">\n        {primaryEntity && (\n          <MediaPlayerCard\n            layout=\"slim\"\n            groupMembers={allEntityIds.length > 1 ? (allEntityIds as FilterByDomain<EntityName, \"media_player\">[]) : undefined}\n            disableColumns\n            entity={primaryEntity.entity_id as FilterByDomain<EntityName, \"media_player\">}\n            hideGrouping={true}\n            disableScale\n            disableModal\n          />\n        )}\n        {allEntityIds.length > 1 && (\n          <Group\n            title={localize(\"related_entities\")}\n            disableColumns\n            cssStyles={`\n            &.group {\n              background-color: rgba(0,0,0,0.1);\n            }\n          `}\n          >\n            {mediaPlayersOrderedByGroup.map((entity, index) => {\n              const isPlaying = entity.state === \"playing\";\n              const isLastOfGroup = index === mediaPlayersOrderedByGroup.length - 1;\n              const friendlyName = `${entity.attributes?.friendly_name ?? entity.entity_id}`;\n              const isOff = entity.state === OFF;\n              const isUnavailable = isUnavailableState(entity.state);\n              const supportsTurnOn = supportsFeatureFromAttributes(entity.attributes, 128);\n              const supportsTurnOff = supportsFeatureFromAttributes(entity.attributes, 256);\n\n              return (\n                <StyledMediaPlayerCard\n                  key={entity.entity_id}\n                  disableRipples\n                  disableScale\n                  disableActiveState\n                  xxs={12}\n                  xs={12}\n                  sm={12}\n                  md={12}\n                  lg={12}\n                  xlg={12}\n                  className={`entities-card entities-card-media-controls`}\n                >\n                  <ErrorBoundary {...fallback({ prefix: \"EntityRow\" })}>\n                    <StyledColumn gap={\"0.5rem\"} justifyContent={\"space-between\"}>\n                      <Title className=\"title device-name\">\n                        {friendlyName}\n                        <State> - {capitalize(entity.state)}</State>\n                      </Title>\n                      <Row gap={\"0.5rem\"} justifyContent={\"end\"}>\n                        {!supportsGrouping && (\n                          <Fab\n                            className=\"media-player-power\"\n                            iconProps={{\n                              color: `var(--ha-S200-contrast)`,\n                            }}\n                            active={!isOff && !isUnavailable}\n                            disabled={!supportsTurnOn || !supportsTurnOff}\n                            size={30}\n                            icon=\"mdi:power\"\n                            rippleProps={{\n                              preventPropagation: true,\n                            }}\n                            onClick={() => {\n                              if (isOff) {\n                                mediaPlayerService.turnOn({\n                                  target: entity.entity_id,\n                                });\n                              } else {\n                                mediaPlayerService.turnOff({\n                                  target: entity.entity_id,\n                                });\n                              }\n                            }}\n                          />\n                        )}\n                        {!isOff && (\n                          <VolumeControls\n                            entity={entity.entity_id as FilterByDomain<EntityName, \"media_player\">}\n                            volumeLayout={\"buttons\"}\n                            hideMute={false}\n                            disabled={false}\n                            layout={\"slim\"}\n                          />\n                        )}\n                        {supportsGrouping && !isOff && (\n                          <div style={{ position: \"relative\" }}>\n                            <Fab\n                              rippleProps={{\n                                preventPropagation: true,\n                              }}\n                              className=\"speaker-group\"\n                              iconProps={{\n                                color: `var(--ha-S200-contrast)`,\n                              }}\n                              active={isPlaying}\n                              disabled={false}\n                              size={30}\n                              icon={getIcon(entity)}\n                              onClick={() => handleMediaPlayerActionClick(entity.entity_id as FilterByDomain<EntityName, \"media_player\">)}\n                            />\n                            {!isLastOfGroup && <GroupLine />}\n                          </div>\n                        )}\n                      </Row>\n                    </StyledColumn>\n                  </ErrorBoundary>\n                </StyledMediaPlayerCard>\n              );\n            })}\n          </Group>\n        )}\n      </Column>\n    </Column>\n  );\n};\n","import { UserAvatar, fallback } from \"@components\";\nimport styled from \"@emotion/styled\";\nimport type { EntityName, FilterByDomain } from \"@hakit/core\";\nimport { useEntity } from \"@hakit/core\";\nimport L, { DivIcon } from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { MapContainer, Marker, MarkerProps, TileLayer } from \"react-leaflet\";\n\nconst StyledMapContainer = styled(MapContainer)`\n  .leaflet-layer,\n  .leaflet-control-zoom-in,\n  .leaflet-control-zoom-out,\n  .leaflet-control-attribution {\n    filter: brightness(0.6) invert(1) contrast(4) hue-rotate(300deg) saturate(0.3) brightness(1) grayscale(40%);\n  }\n  .leaflet-div-icon {\n    background: none;\n    border: none;\n  }\n`;\n\ntype ReactProps = { children: React.ReactNode };\n\ntype ContainerProps = {\n  tagName: string;\n  className?: string;\n  container?: HTMLElement;\n};\n\ntype DivIconMarkerProps = ReactProps & { marker: MarkerProps } & {\n  container: ContainerProps;\n};\nexport const MapMarker = ({ children, marker, container }: DivIconMarkerProps) => {\n  const { tagName, className } = container;\n  const element = L.DomUtil.create(tagName, className);\n  const divIcon = new DivIcon({ html: element });\n  const portal = createPortal(children, element);\n  const { position, eventHandlers } = marker;\n\n  useEffect(() => {\n    return () => {\n      L.DomUtil.remove(element);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Cleanup runs on unmount\n\n  return (\n    <>\n      {portal}\n      <Marker position={position} icon={divIcon} eventHandlers={eventHandlers} />\n    </>\n  );\n};\n\nexport interface PersonControlsProps {\n  entity: FilterByDomain<EntityName, \"person\">;\n  mapHeight: number;\n}\n\nfunction InternalPersonControls({ entity: _entity, mapHeight }: PersonControlsProps) {\n  const entity = useEntity(_entity);\n  const position = new L.LatLng(entity.attributes.latitude, entity.attributes.longitude);\n\n  return (\n    <StyledMapContainer center={position} zoom={14} style={{ height: `${mapHeight}px`, width: \"100%\" }}>\n      <TileLayer\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      />\n      <MapMarker\n        marker={{\n          position: position,\n        }}\n        container={{\n          tagName: \"div\",\n          className: \"custom-marker\",\n        }}\n      >\n        <UserAvatar\n          entity={_entity}\n          iconSize={{ width: \"30px\", height: \"30px\" }}\n          avatarSize={{ width: \"48px\", height: \"48px\" }}\n          withBorder\n        />\n      </MapMarker>\n    </StyledMapContainer>\n  );\n}\n\n/**\n * The PersonControls component renders a map with a user avatar marker of the persons location.\n * */\nexport function PersonControls(props: PersonControlsProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"PersonControls\" })}>\n      <InternalPersonControls {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useMemo } from \"react\";\nimport styled from \"@emotion/styled\";\nimport type { HassEntityWithService, HvacMode } from \"@hakit/core\";\nimport type { ClimateControlsProps, AvailableQueries } from \"@components\";\nimport { useEntity, OFF, isUnavailableState, useHass, localize } from \"@hakit/core\";\nimport { fallback, Row, ButtonBar, Column } from \"@components\";\nimport { capitalize } from \"lodash\";\nimport { icons, activeColors, colors } from \"../../Shared/Entity/Climate/ClimateControls/shared\";\nimport { UNIT_F } from \"../../Shared/Entity/Climate/ClimateControls/data\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { FeatureEntity, type FeatureEntityProps } from \"../CardBase/FeatureEntity\";\n\nimport { ButtonCard, type ButtonCardProps } from \"../ButtonCard\";\n\nconst StyledClimateCard = styled(ButtonCard)`\n  &.slim {\n    &.has-temp-controls {\n    }\n  }\n  &.slim-vertical {\n    &.has-temp-controls {\n    }\n  }\n`;\n\nconst Gap = styled.div`\n  height: 20px;\n`;\n\nconst Description = styled.div`\n  color: var(--ha-S400-contrast);\n  font-size: 0.7rem;\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n  > * {\n    position: relative;\n    display: flex;\n    flex-shrink: 0;\n    &:after {\n      content: \",\";\n      position: absolute;\n      bottom: 0;\n      right: -3px;\n    }\n    &:last-of-type {\n      &:after {\n        display: none;\n      }\n    }\n  }\n`;\n\nconst Temperature = styled.span`\n  position: relative;\n  display: flex;\n  span {\n    font-size: 0.7rem;\n    align-items: flex-start;\n  }\n`;\n\ntype OmitProperties = \"onClick\" | \"children\" | \"active\" | \"as\" | \"disableActiveState\" | \"features\";\n\ntype Extendable = Omit<ClimateControlsProps, \"onClick\"> & Omit<ButtonCardProps<ClimateControlsProps[\"entity\"]>, OmitProperties>;\nexport interface ClimateCardProps extends Extendable {\n  /** the onClick handler is called when the card is pressed  */\n  onClick?: (entity: HassEntityWithService<\"climate\">) => void;\n  /** show the labels in the button bar for the hvac modes @default false */\n  showHvacModeLabels?: boolean;\n  /** show the temperature controls within the main card, does not change the popup @default false */\n  showTemperatureControls?: boolean;\n}\n\nfunction InternalClimateCard({\n  entity: _entity,\n  onClick,\n  hvacModes,\n  hvacModeLabels,\n  showHvacModeLabels = false,\n  hideCurrentTemperature,\n  showTemperatureControls = false,\n  hideToggle = true,\n  hideHvacModes,\n  disabled,\n  className,\n  modalProps,\n  service,\n  serviceData,\n  cssStyles,\n  layoutType,\n  key,\n  title,\n  targetTempStep,\n  ...rest\n}: ClimateCardProps): React.ReactNode {\n  const config = useHass((state) => state.config);\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const entity = useEntity(_entity);\n  const currentMode = entity.state in icons ? entity.state : \"unknown-mode\";\n  const isUnavailable = isUnavailableState(entity.state);\n  const on = entity.state !== \"off\" && !isUnavailable && !disabled;\n  const {\n    current_temperature,\n    hvac_action,\n    hvac_modes,\n    min_temp = 6,\n    max_temp = 40,\n    unit_of_measurement,\n    temperature = 20,\n    target_temp_step,\n  } = entity.attributes || {};\n  const isOff = entity.state === OFF;\n  const titleValue = useMemo(() => {\n    if (isUnavailable) {\n      return localize(\"unavailable\");\n    }\n    if (isOff) {\n      return localize(\"off\");\n    }\n    return hvac_action ? localize(hvac_action) : localize(\"unknown\");\n  }, [hvac_action, isUnavailable, isOff]);\n\n  const _step = useMemo(() => {\n    return targetTempStep ?? target_temp_step ?? (config?.unit_system.temperature === UNIT_F ? 1 : 0.5);\n  }, [config?.unit_system.temperature, targetTempStep, target_temp_step]);\n\n  const havacModesToUse = (hvacModes ?? []).length === 0 ? hvac_modes : (hvacModes ?? []);\n\n  return (\n    <>\n      <StyledClimateCard\n        key={key}\n        hideToggle={hideToggle}\n        disableActiveState\n        className={`climate-card ${showTemperatureControls ? \"has-temp-controls\" : \"\"} ${className ?? \"\"}`}\n        disabled={disabled || isUnavailable}\n        entity={_entity}\n        title={title ?? entity.attributes.friendly_name}\n        // @ts-expect-error - don't know the entity name, so we can't know the service type\n        service={service}\n        // @ts-expect-error - don't know the entity name, so we can't know the service data\n        serviceData={serviceData}\n        layoutType={layoutType}\n        modalProps={{\n          hvacModes: havacModesToUse,\n          hideCurrentTemperature,\n          hideHvacModes,\n          hvacModeLabels,\n          targetTempStep: _step,\n          ...modalProps,\n        }}\n        onClick={() => {\n          if (isUnavailable || disabled || typeof onClick !== \"function\") return;\n          onClick(entity);\n        }}\n        cssStyles={`\n          ${globalComponentStyle.climateCard ?? \"\"}\n          ${cssStyles ?? \"\"}\n        `}\n        hideState\n        features={havacModesToUse\n          .concat()\n          .filter((x) => !!x)\n          .map((mode) => {\n            const props = {\n              size: 35,\n              disabled: disabled || isUnavailable,\n              iconProps: {\n                color: currentMode === mode ? activeColors[mode] : undefined,\n              },\n              rippleProps: {\n                preventPropagation: true,\n              },\n              title: capitalize(mode.replace(/_/g, \" \")),\n              active: currentMode === mode,\n              icon: icons[mode],\n              onClick: () => {\n                entity.service.setHvacMode({\n                  serviceData: {\n                    hvac_mode: mode,\n                  },\n                });\n              },\n            } satisfies FeatureEntityProps;\n            if (hvacModeLabels?.[mode] && showHvacModeLabels) {\n              const customLabel = hvacModeLabels?.[mode];\n              return (\n                <FeatureEntity key={mode} {...props} title={customLabel}>\n                  {customLabel}\n                </FeatureEntity>\n              );\n            }\n            return <FeatureEntity key={mode} {...props} />;\n          })}\n        fabProps={{\n          style: {\n            color: on ? \"var(--ha-A400)\" : \"var(--ha-S500-contrast)\",\n            backgroundColor:\n              isUnavailable || disabled\n                ? colors[\"off\"][1]\n                : currentMode === \"unknown-mode\"\n                  ? \"var(--ha-S500-contrast)\"\n                  : colors[currentMode as HvacMode][1],\n          },\n        }}\n        description={\n          <Row justifyContent=\"flex-start\">\n            <Description className=\"climate-description\">\n              <span>{titleValue}</span>\n              <span className=\"fan-speed\">\n                {localize(\"speed\")}: {localize(entity.attributes.fan_mode as \"low\") || localize(\"unknown\")}\n              </span>\n              {!hideCurrentTemperature && (\n                <span className=\"current-temperature\">\n                  <Temperature>\n                    <div>\n                      {capitalize(\n                        localize(\"current_temperature\", {\n                          search: \"{name} \",\n                          replace: \"\",\n                        }),\n                      )}\n                      : {current_temperature}\n                    </div>\n                    <span>{unit_of_measurement ?? config?.unit_system.temperature}</span>\n                  </Temperature>\n                </span>\n              )}\n            </Description>\n          </Row>\n        }\n        {...rest}\n      >\n        {showTemperatureControls && (\n          <Column alignItems={layoutType === \"slim-vertical\" ? \"center\" : \"flex-start\"} fullWidth fullHeight>\n            <Gap />\n            <ButtonBar fullWidth>\n              <FeatureEntity\n                size={40}\n                disabled={disabled || isUnavailable || temperature === min_temp}\n                rippleProps={{\n                  preventPropagation: true,\n                }}\n                title={localize(\"decrease_temperature\")}\n                icon={\"mdi:minus\"}\n                onClick={() => {\n                  entity.service.setTemperature({\n                    serviceData: {\n                      temperature: temperature - _step,\n                    },\n                  });\n                }}\n              />\n              <FeatureEntity\n                size={40}\n                disabled\n                rippleProps={{\n                  preventPropagation: true,\n                }}\n                borderRadius={0}\n                noIcon\n                title={capitalize(\n                  localize(\"current_temperature\", {\n                    search: \"{name} \",\n                    replace: \"\",\n                  }),\n                )}\n                cssStyles={`\n                  button {\n                    cursor: default;\n                  }\n                `}\n              >\n                <Temperature>\n                  <div>{temperature}</div>\n                  <span>{unit_of_measurement ?? config?.unit_system.temperature}</span>\n                </Temperature>\n              </FeatureEntity>\n              <FeatureEntity\n                size={40}\n                disabled={disabled || isUnavailable || temperature === max_temp}\n                rippleProps={{\n                  preventPropagation: true,\n                }}\n                title={localize(\"increase_temperature\")}\n                icon={\"mdi:plus\"}\n                onClick={() => {\n                  entity.service.setTemperature({\n                    serviceData: {\n                      temperature: temperature + _step,\n                    },\n                  });\n                }}\n              />\n            </ButtonBar>\n          </Column>\n        )}\n      </StyledClimateCard>\n    </>\n  );\n}\n/** The ClimateCard is a card to easily interact with climate entities, whilst it's not documented below, the types are correct and you can also pass through anything related to ModalClimateControlsProps\n * The ClimateCard shares the same functionality/props as the ButtonCard so you can display in different layouts and also utilize the same props\n */\nexport function ClimateCard(props: ClimateCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ClimateCard\" })}>\n      <InternalClimateCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { useHass, type EntityName } from \"@hakit/core\";\nimport {\n  Column,\n  fallback,\n  CardBase,\n  EntitiesCardRow,\n  type EntitiesCardRowProps,\n  type AvailableQueries,\n  type CardBaseProps,\n} from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { Children, isValidElement, cloneElement, type ReactElement } from \"react\";\nconst StyledEntitiesCard = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", EntityName>>)`\n  svg {\n    color: currentColor;\n  }\n  &:not(.disabled) {\n    &:hover,\n    &:active {\n      svg {\n        color: currentColor;\n      }\n    }\n  }\n`;\n\ntype OmitProperties =\n  | \"as\"\n  | \"active\"\n  | \"disabled\"\n  | \"children\"\n  | \"entity\"\n  | \"title\"\n  | \"onClick\"\n  | \"modalProps\"\n  | \"serviceData\"\n  | \"service\"\n  | \"disableRipples\"\n  | \"disableActiveState\"\n  | \"disableScale\";\nexport interface EntitiesCardProps extends Omit<CardBaseProps<\"div\", EntityName>, OmitProperties> {\n  /** the children for the ButtonBar, it accepts ButtonBarButton components */\n  children: ReactElement<typeof EntitiesCardRow> | ReactElement<typeof EntitiesCardRow>[];\n  /** include the last updated time, will apply to every row unless specified on an individual EntityItem @default false */\n  includeLastUpdated?: boolean;\n}\nfunction InternalEntitiesCard({\n  includeLastUpdated = false,\n  key,\n  className,\n  children,\n  cssStyles,\n  ...rest\n}: EntitiesCardProps): React.ReactNode {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const childrenWithKeys = Children.map(children, (child, index) => {\n    if (isValidElement<EntitiesCardRowProps<EntityName>>(child)) {\n      return cloneElement(child, {\n        key: child.key || index,\n        includeLastUpdated: includeLastUpdated,\n      });\n    }\n    return child;\n  });\n  return (\n    <StyledEntitiesCard\n      key={key}\n      cssStyles={`\n      ${globalComponentStyle?.entitiesCard ?? \"\"}\n      ${cssStyles ?? \"\"}\n    `}\n      disableRipples\n      disableScale\n      disableActiveState\n      className={`entities-card ${className ?? \"\"}`}\n      {...rest}\n    >\n      <Column fullWidth fullHeight className={`column`}>\n        {childrenWithKeys}\n      </Column>\n    </StyledEntitiesCard>\n  );\n}\n/** The EntitiesCard component is an easy way to represent the state a of multiple entities with a simple layout, you can customize every part of every row with the EntityItem properties, the renderState and onClick both receive the entity object with the api properties. */\nexport function EntitiesCard(props: EntitiesCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"EntitiesCard\" })}>\n      <InternalEntitiesCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useHass, useEntity, useIconByDomain, useIconByEntity, computeDomain, isUnavailableState, ON, localize } from \"@hakit/core\";\nimport type { EntityName, ExtractDomain, AllDomains, HassEntityWithService } from \"@hakit/core\";\nimport { Icon, type IconProps } from \"@iconify/react\";\nimport { Row, fallback, ModalByEntityDomain, type ModalPropsHelper } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { useState, ReactNode, useId, useMemo, lazy, Suspense } from \"react\";\nimport { useLongPress } from \"use-long-press\";\nimport styled from \"@emotion/styled\";\n\nconst IconWrapper = styled(Row)`\n  width: 100%;\n  max-width: 2rem;\n`;\nconst Name = styled.div`\n  flex-grow: 1;\n  font-size: 0.8rem;\n  color: var(--ha-S50-contrast);\n  font-weight: 500;\n  span {\n    width: 100%;\n    font-size: 0.7rem;\n    font-weight: 400;\n    display: block;\n    margin-top: 0.2rem;\n    color: var(--ha-S500-contrast);\n  }\n`;\nconst State = styled.div`\n  max-width: 5rem;\n  font-size: 0.8rem;\n  font-weight: 400;\n  text-align: right;\n  white-space: nowrap;\n  color: var(--ha-S300-contrast);\n`;\n\nconst EntityRowInner = styled.div`\n  width: 100%;\n  padding: 1rem;\n  transition: background-color var(--ha-transition-duration) var(--ha-easing);\n  &:hover {\n    background-color: var(--ha-S500);\n  }\n`;\n\nconst LAZY_LOAD_STATE_TYPES = {\n  climate: () => import(\"./action-types/climate\"),\n  toggle: () => import(\"./action-types/toggle\"),\n  sensor: () => import(\"./action-types/sensor\"),\n};\n\nconst DOMAIN_TO_ELEMENT_TYPE: Partial<Record<AllDomains, keyof typeof LAZY_LOAD_STATE_TYPES>> = {\n  water_heater: \"climate\",\n  climate: \"climate\",\n  // _domain_not_found: \"simple\",\n  alert: \"toggle\",\n  automation: \"toggle\",\n  // button: \"button\",\n  // cover: \"cover\",\n  // date: \"date\",\n  // datetime: \"datetime\",\n  // event: \"event\",\n  fan: \"toggle\",\n  // group: \"group\",\n  // humidifier: \"humidifier\",\n  input_boolean: \"toggle\",\n  // input_button: \"input-button\",\n  // input_datetime: \"input-datetime\",\n  // input_number: \"input-number\",\n  // input_select: \"input-select\",\n  // input_text: \"input-text\",\n  light: \"toggle\",\n  // lock: \"lock\",\n  // media_player: \"media-player\",\n  // number: \"number\",\n  remote: \"toggle\",\n  // scene: \"scene\",\n  // script: \"script\",\n  // select: \"select\",\n  sensor: \"sensor\",\n  siren: \"toggle\",\n  switch: \"toggle\",\n  // text: \"text\",\n  // time: \"time\",\n  // timer: \"timer\",\n  // update: \"update\",\n  vacuum: \"toggle\",\n  // valve: \"valve\",\n  // weather: \"weather\",\n};\n\nexport interface EntitiesCardRowProps<E extends EntityName> extends Omit<React.ComponentPropsWithoutRef<\"div\">, \"onClick\"> {\n  /** The name of the entity to render */\n  entity: E;\n  /** the icon name to use @default entity_icon */\n  icon?: string;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** the name of the entity @default friendly_name */\n  name?: ReactNode;\n  /** the function to call when the row is clicked @default undefined */\n  onClick?: (entity: HassEntityWithService<ExtractDomain<E>>) => void;\n  /** the function to render the state @default undefined */\n  renderState?: (entity: HassEntityWithService<ExtractDomain<E>>) => React.ReactElement<HTMLElement>;\n  /** include last updated time @default false */\n  includeLastUpdated?: boolean;\n  /** props to pass to the modal for each row */\n  modalProps?: Partial<ModalPropsHelper<ExtractDomain<E>>>;\n}\n\nfunction InternalEntitiesCardRow<E extends EntityName>({\n  entity: _entity,\n  icon: _icon,\n  iconProps,\n  name: _name,\n  renderState,\n  onClick,\n  modalProps,\n  key,\n  includeLastUpdated = false,\n  ...rest\n}: EntitiesCardRowProps<E>) {\n  const _id = useId();\n  const [openModal, setOpenModal] = useState(false);\n  const formatter = useHass((store) => store.formatter);\n  const entity = useEntity(_entity);\n  const domain = computeDomain(_entity);\n  const domainIcon = useIconByDomain(domain === null ? \"unknown\" : domain);\n  const entityIcon = useIconByEntity(_entity || \"unknown\");\n  const isUnavailable = isUnavailableState(entity?.state);\n  const title = useMemo(() => _name ?? entity.attributes.friendly_name ?? entity.attributes.entity_id, [_name, entity]);\n  const on = entity?.state === ON;\n  const iconColor = on ? entity.custom.hexColor : \"var(--ha-S500-contrast)\";\n  const bind = useLongPress(\n    () => {\n      if (typeof _entity === \"string\" && !openModal) {\n        setOpenModal(true);\n      }\n    },\n    {\n      threshold: 300,\n      cancelOnMovement: true,\n      cancelOutsideElement: true,\n      filterEvents(e) {\n        return !(\"button\" in e && e.button === 2);\n      },\n    },\n  );\n\n  const lazyKey = DOMAIN_TO_ELEMENT_TYPE[domain];\n\n  const LazyComponent = useMemo(() => {\n    if (!lazyKey || !(lazyKey in LAZY_LOAD_STATE_TYPES)) return null;\n    return lazy(LAZY_LOAD_STATE_TYPES[lazyKey]);\n  }, [lazyKey]);\n\n  return (\n    <>\n      <EntityRowInner key={key} className={`entities-card-row`} {...bind()} {...rest}>\n        <Row className={`row`} wrap=\"nowrap\" gap=\"1rem\" fullWidth onClick={() => onClick && onClick(entity)}>\n          <IconWrapper\n            className={`icon-wrapper`}\n            style={{\n              opacity: isUnavailable ? \"0.3\" : \"1\",\n              color: iconColor,\n              filter: (on && entity?.custom.brightness) || \"brightness(100%)\",\n            }}\n          >\n            {_icon ? <Icon className={`icon`} icon={_icon} {...(iconProps ?? {})} /> : (entityIcon ?? domainIcon)}\n          </IconWrapper>\n          <Name className={`name`}>\n            {title}\n            {includeLastUpdated && <span>{entity.custom.relativeTime}</span>}\n          </Name>\n          <State className={`state`}>\n            {typeof renderState === \"function\" ? (\n              renderState(entity)\n            ) : isUnavailable ? (\n              localize(\"unavailable\")\n            ) : LazyComponent ? (\n              <Suspense fallback={<div>{localize(\"loading\")}...</div>}>\n                {<LazyComponent entity={entity as HassEntityWithService<AllDomains>} />}\n              </Suspense>\n            ) : (\n              <>{formatter.stateValue(entity)}</>\n            )}\n          </State>\n        </Row>\n      </EntityRowInner>\n      {typeof _entity === \"string\" && (\n        <ModalByEntityDomain\n          entity={_entity as EntityName}\n          title={title ?? localize(\"unknown\")}\n          onClose={() => {\n            setOpenModal(false);\n          }}\n          open={openModal}\n          id={_id}\n          {...modalProps}\n        />\n      )}\n    </>\n  );\n}\n\n/** The EntitiesCardRow component is a child component of the EntitiesCard component. */\nexport function EntitiesCardRow<E extends EntityName>(props: EntitiesCardRowProps<E>) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"EntitiesCardRow\" })}>\n      <InternalEntitiesCardRow {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { EntityName, FilterByDomain, supportsFeatureFromAttributes, useEntity, useService } from \"@hakit/core\";\nimport { useCallback, useRef, useEffect, useState } from \"react\";\nimport { mq, Row, RangeSlider } from \"@components\";\nimport styled from \"@emotion/styled\";\nimport { Fab } from \"../Fab\";\nimport { Layout, VolumeLayout, DEFAULT_FAB_SIZE } from \"../constants\";\nconst VolumeSlider = styled.label<{\n  layout: Layout;\n}>`\n  display: inline-block;\n  width: 100%;\n  color: rgba(0, 0, 0, 0.87);\n  font-size: 1rem;\n  line-height: 1.5;\n  ${mq(\n    [\"xxs\"],\n    `\n    width: 40%;\n  `,\n  )}\n\n  ${mq(\n    [\"xs\", \"sm\"],\n    `\n    width: 60%;\n  `,\n  )}\n`;\n\nconst StyledRangeSlider = styled(RangeSlider)`\n  width: 100%;\n`;\n\nexport interface VolumeControlsProps {\n  entity: FilterByDomain<EntityName, \"media_player\">;\n  volumeLayout: VolumeLayout;\n  hideMute: boolean;\n  disabled: boolean;\n  allEntityIds?: string[];\n  layout: Layout;\n}\n\nexport function VolumeControls({ entity: _entity, volumeLayout, hideMute, disabled, allEntityIds, layout }: VolumeControlsProps) {\n  const entity = useEntity(_entity);\n  const { volume_level, is_volume_muted } = entity.attributes;\n  const [volume, _setVolume] = useState(volume_level);\n  const mp = useService(\"mediaPlayer\");\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const supportsVolumeSet = supportsFeatureFromAttributes(entity.attributes, 4);\n  const supportsVolumeMute = supportsFeatureFromAttributes(entity.attributes, 8);\n  const setVolume = useCallback(\n    (volume: number) => {\n      _setVolume(volume);\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n      }\n      timerRef.current = setTimeout(() => {\n        mp.volumeSet({\n          target: allEntityIds ?? _entity,\n          serviceData: {\n            volume_level: volume,\n          },\n        });\n      }, 500);\n    },\n    [mp, allEntityIds, _setVolume, _entity],\n  );\n\n  useEffect(() => {\n    _setVolume(volume_level);\n  }, [volume_level]);\n\n  return (\n    <Row gap=\"0.5rem\" wrap=\"nowrap\">\n      {!hideMute && supportsVolumeMute && (\n        <Fab\n          iconProps={{\n            color: `var(--ha-S200-contrast)`,\n          }}\n          className={`volume-mute ${is_volume_muted ? \"muted\" : \"not-muted\"}`}\n          disabled={disabled}\n          size={DEFAULT_FAB_SIZE}\n          rippleProps={{\n            preventPropagation: true,\n          }}\n          icon={is_volume_muted ? \"mdi:volume-off\" : \"mdi:volume-high\"}\n          onClick={() => {\n            mp.volumeMute({\n              target: allEntityIds ?? _entity,\n              serviceData: {\n                is_volume_muted: !is_volume_muted,\n              },\n            });\n          }}\n        />\n      )}\n      {volumeLayout === \"buttons\" && supportsVolumeSet && (\n        <>\n          <Fab\n            rippleProps={{\n              preventPropagation: true,\n            }}\n            iconProps={{\n              color: `var(--ha-S200-contrast)`,\n            }}\n            className=\"volume-down\"\n            disabled={disabled}\n            size={DEFAULT_FAB_SIZE}\n            icon=\"mdi:volume-minus\"\n            title={`${Number(volume_level) * 100}%`}\n            onClick={() =>\n              mp.volumeDown({\n                target: allEntityIds ?? _entity,\n              })\n            }\n          />\n          <Fab\n            rippleProps={{\n              preventPropagation: true,\n            }}\n            iconProps={{\n              color: `var(--ha-S200-contrast)`,\n            }}\n            className=\"volume-up\"\n            disabled={disabled}\n            size={DEFAULT_FAB_SIZE}\n            icon=\"mdi:volume-plus\"\n            title={`${Number(volume_level) * 100}%`}\n            onClick={() =>\n              mp.volumeUp({\n                target: allEntityIds ?? _entity,\n              })\n            }\n          />\n        </>\n      )}\n      {volumeLayout === \"slider\" && supportsVolumeSet && (\n        <VolumeSlider\n          className=\"volume-slider\"\n          layout={layout}\n          onPointerDownCapture={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          <StyledRangeSlider\n            type=\"range\"\n            min={0}\n            max={1}\n            disabled={disabled}\n            step={0.02}\n            value={is_volume_muted ? 0 : volume}\n            formatTooltipValue={(value) => `${Math.round(value * 100)}%`}\n            tooltipSize={2.2}\n            onChangeComplete={(value, event) => {\n              event.preventDefault();\n              setVolume(value);\n            }}\n          />\n        </VolumeSlider>\n      )}\n    </Row>\n  );\n}\n","import { EntityName, FilterByDomain, OFF, supportsFeatureFromAttributes, useEntity, useService } from \"@hakit/core\";\nimport { Fab } from \"../Fab\";\n\nexport interface PlaybackControlsProps {\n  entity: FilterByDomain<EntityName, \"media_player\">;\n  disabled: boolean;\n  allEntityIds: string[];\n  size?: number;\n  feature?: boolean;\n}\nexport function PlaybackControls({ entity: _entity, size = 20, feature, disabled, allEntityIds }: PlaybackControlsProps) {\n  const entity = useEntity(_entity);\n  const mp = useService(\"mediaPlayer\");\n  const playing = entity.state === \"playing\";\n  const isOff = entity.state === OFF;\n  const supportsPreviousTrack = supportsFeatureFromAttributes(entity.attributes, 16);\n  const supportsNextTrack = supportsFeatureFromAttributes(entity.attributes, 32);\n  const supportsPlay = supportsFeatureFromAttributes(entity.attributes, 16384);\n  return (\n    <>\n      <Fab\n        className=\"skip-previous\"\n        disabled={disabled || isOff || !supportsPreviousTrack}\n        size={size}\n        iconProps={{\n          color: `var(--ha-S200-contrast)`,\n        }}\n        icon=\"mdi:skip-previous\"\n        rippleProps={{\n          preventPropagation: true,\n        }}\n        onClick={() =>\n          mp.mediaPreviousTrack({\n            target: allEntityIds,\n          })\n        }\n      />\n      <Fab\n        className=\"play-pause\"\n        iconProps={{\n          color: `var(--ha-S200-contrast)`,\n        }}\n        disabled={disabled || isOff || !supportsPlay}\n        size={size * (feature ? 2 : 1)}\n        rippleProps={{\n          preventPropagation: true,\n        }}\n        icon={playing ? \"mdi:pause\" : \"mdi:play\"}\n        onClick={() => {\n          if (playing) {\n            mp.mediaPause({\n              target: allEntityIds,\n            });\n          } else {\n            mp.mediaPlay({\n              target: allEntityIds,\n            });\n          }\n        }}\n      />\n      <Fab\n        rippleProps={{\n          preventPropagation: true,\n        }}\n        className=\"skip-next\"\n        iconProps={{\n          color: `var(--ha-S200-contrast)`,\n        }}\n        disabled={disabled || isOff || !supportsNextTrack}\n        size={size}\n        icon=\"mdi:skip-next\"\n        onClick={() =>\n          mp.mediaNextTrack({\n            target: allEntityIds,\n          })\n        }\n      />\n    </>\n  );\n}\n","import { Row, RowProps } from \"@components\";\nimport { EntityName, FilterByDomain, isUnavailableState, OFF, supportsFeatureFromAttributes, useEntity, useService } from \"@hakit/core\";\nimport { Fab } from \"./Fab\";\nimport { DEFAULT_FAB_SIZE } from \"./constants\";\nimport styled from \"@emotion/styled\";\n\nconst SmallText = styled.span`\n  font-size: 0.8rem;\n  color: rgba(255, 255, 255, 1);\n`;\n\ninterface AlternateControlsProps extends RowProps {\n  entity: FilterByDomain<EntityName, \"media_player\">;\n  disabled: boolean;\n  allEntityIds: string[];\n  onSpeakerGroupClick: () => void;\n  hideGrouping?: boolean;\n}\n\nexport function AlternateControls({\n  entity: _entity,\n  disabled,\n  allEntityIds,\n  onSpeakerGroupClick,\n  hideGrouping = false,\n}: AlternateControlsProps) {\n  const entity = useEntity(_entity);\n  const mp = useService(\"mediaPlayer\");\n  const groups = entity.attributes.group_members ?? [];\n  const isOff = entity.state === OFF;\n  const isUnavailable = isUnavailableState(entity.state);\n  const supportsTurnOn = supportsFeatureFromAttributes(entity.attributes, 128);\n  const supportsTurnOff = supportsFeatureFromAttributes(entity.attributes, 256);\n\n  return (\n    <Row gap=\"0.5rem\" wrap=\"nowrap\" className=\"row\">\n      {!hideGrouping && (allEntityIds.length > 1 || groups.length > 0) && (\n        <Fab\n          className=\"speaker-group\"\n          iconProps={{\n            color: `var(--ha-S200-contrast)`,\n          }}\n          active={groups.length > 0}\n          disabled={disabled}\n          rippleProps={{\n            preventPropagation: true,\n          }}\n          size={DEFAULT_FAB_SIZE}\n          icon={groups.length === 0 ? \"mdi:speaker-off\" : \"mdi:speaker-multiple\"}\n          onClick={() => {\n            onSpeakerGroupClick();\n          }}\n        />\n      )}\n      {(isUnavailable || isOff) && <SmallText>{entity.state}</SmallText>}\n      <Fab\n        className=\"media-player-power\"\n        iconProps={{\n          color: `var(--ha-S200-contrast)`,\n        }}\n        active={!isOff && !isUnavailable}\n        disabled={disabled || !supportsTurnOn || !supportsTurnOff}\n        size={DEFAULT_FAB_SIZE}\n        icon=\"mdi:power\"\n        rippleProps={{\n          preventPropagation: true,\n        }}\n        onClick={() => {\n          if (isOff) {\n            mp.turnOn({\n              target: allEntityIds,\n            });\n          } else {\n            mp.turnOff({\n              target: allEntityIds,\n            });\n          }\n        }}\n      />\n    </Row>\n  );\n}\n","import { useEffect, useRef, useCallback, useMemo, useState } from \"react\";\nimport { useService, useHass, isUnavailableState, useEntity, OFF, supportsFeatureFromAttributes } from \"@hakit/core\";\nimport { snakeCase, clamp } from \"lodash\";\nimport { useGesture } from \"@use-gesture/react\";\nimport type { EntityName, FilterByDomain, MediaPlayerEntity } from \"@hakit/core\";\nimport { fallback, Row, Column, CardBase } from \"@components\";\nimport type { CardBaseProps, AvailableQueries } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport styled from \"@emotion/styled\";\nimport { Marquee } from \"./Marquee\";\nimport type { MarqueeProps } from \"./Marquee\";\nimport { useThrottledCallback } from \"use-debounce\";\nimport { VolumeControls } from \"./VolumeControls\";\nimport { Thumbnail } from \"./Thumbnail\";\nimport { Clock } from \"./Clock\";\nimport { PlaybackControls } from \"./PlaybackControls\";\nimport { ProgressBar } from \"./ProgressBar\";\nimport { AlternateControls } from \"./AlternateControls\";\nimport { Layout, VolumeLayout, DEFAULT_FAB_SIZE } from \"./constants\";\n\ntype BackgroundImageProps = {\n  backgroundImage: string;\n};\nconst BackgroundImage = styled.div<BackgroundImageProps>`\n  width: 100%;\n  height: 100%;\n  ${(props) => props.backgroundImage && `background-image: url(${props.backgroundImage});`}\n  background-size: cover;\n  background-position: center;\n  position: absolute;\n  background-repeat: no-repeat;\n  inset: 0;\n  z-index: -1;\n  &:after {\n    background: rgba(0, 0, 0, 0.7);\n    content: \"\";\n    position: absolute;\n    inset: 0;\n    z-index: 0;\n  }\n`;\nconst MediaPlayerWrapper = styled(CardBase as React.ComponentType<CardBaseProps<\"button\", MediaPlayerString>>)<MediaPlayerCardProps>`\n  padding: 0;\n  background-color: var(--ha-S300);\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: background-image, background-color, box-shadow, transform;\n  position: relative;\n  overflow: hidden;\n  border-radius: 1rem;\n  width: 100%;\n  flex-shrink: 1;\n\n  ${(props) =>\n    props.layout === \"card\" &&\n    `\n    aspect-ratio: 1/1;\n  `}\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.8;\n  }\n\n  &:active {\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);\n  }\n  &:not(:disabled):hover {\n    background-color: var(--ha-S400);\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);\n  }\n\n  .content {\n    position: relative;\n    z-index: 1;\n  }\n`;\n\nconst Title = styled.div`\n  font-size: 0.8rem;\n  color: rgba(255, 255, 255, 1);\n`;\n\nconst Base = styled(Column)`\n  padding: 0.5rem 0.5rem 1rem;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n`;\nconst Empty = styled.span``;\n\nconst StyledMarquee = styled(Marquee)`\n  font-size: 0.8rem;\n  color: rgba(255, 255, 255, 0.87);\n`;\n\ntype OmitProperties =\n  | \"title\"\n  | \"as\"\n  | \"layout\"\n  | \"entity\"\n  | \"disabled\"\n  | \"active\"\n  | \"ref\"\n  | \"disableActiveState\"\n  | \"disableRipples\"\n  | \"rippleProps\";\n\ntype MediaPlayerString = FilterByDomain<EntityName, \"media_player\">;\nexport interface MediaPlayerCardProps extends Omit<CardBaseProps<\"button\", MediaPlayerString>, OmitProperties> {\n  /** the entity_id of the media_player to control */\n  entity: FilterByDomain<EntityName, \"media_player\">;\n  /** an optional override for the title of the entity */\n  title?: React.ReactNode;\n  /**\n   * if the entity supports grouping, you can provide the groupMembers as a list to join them together\n   * specify all the group members you want to group together, including the entity_id of the entity itself\n   */\n  groupMembers?: FilterByDomain<EntityName, \"media_player\">[];\n  /** the layout of the card @default 'card' */\n  layout?: Layout;\n  /** properties to pass to the track title marquee element  */\n  marqueeProps?: MarqueeProps;\n  /** the layout of the volume elements @default 'slider' */\n  volumeLayout?: VolumeLayout;\n  /** hide the mute button @default false */\n  hideMute?: boolean;\n  /** hide the app name eg YouTube @default false */\n  hideAppName?: boolean;\n  /** hide the entity friendly name @default false */\n  hideEntityName?: boolean;\n  /** disable the card manually if the internal disable functionality needs to be updated @default false */\n  disabled?: boolean;\n  /** hide the thumbnail element @default false */\n  hideThumbnail?: boolean;\n  /** hide the grouping button @default false */\n  hideGrouping?: boolean;\n  /** the size of the thumbnail to show @default 3rem */\n  thumbnailSize?: string;\n  /** show the artwork as the background of the card @default true */\n  showArtworkBackground?: boolean;\n}\n\nfunction InternalMediaPlayerCard({\n  entity: _entity,\n  groupMembers = [],\n  volumeLayout = \"slider\",\n  thumbnailSize = \"3rem\",\n  hideThumbnail = false,\n  showArtworkBackground = true,\n  layout = \"card\",\n  hideMute = false,\n  hideAppName = false,\n  hideEntityName = false,\n  hideGrouping = false,\n  disabled: _disabled = false,\n  service,\n  serviceData,\n  marqueeProps,\n  className,\n  cssStyles,\n  key,\n  modalProps,\n  ...rest\n}: MediaPlayerCardProps) {\n  const entity = useEntity(_entity);\n  const mp = useService(\"mediaPlayer\");\n  const { joinHassUrl } = useHass.getState().helpers;\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const interval = useRef<NodeJS.Timeout | null>(null);\n  const progressRef = useRef<HTMLDivElement>(null);\n  const playerRef = useRef<HTMLElement>(null);\n  const clockRef = useRef<HTMLDivElement>(null);\n  const entitiesById = useHass((store) => store.entities);\n  const groupedEntities = groupMembers\n    .map((entity) => entitiesById[entity] ?? null)\n    .filter((entity): entity is MediaPlayerEntity => entity !== null && !isUnavailableState(entity.state));\n  const allEntityIds = useMemo(() => [_entity, ...groupedEntities.map((x) => x.entity_id)], [_entity, groupedEntities]);\n  const { state } = entity;\n  const { media_artist, media_title, media_playlist, app_name, media_duration, media_position, media_position_updated_at } =\n    entity.attributes;\n  // use the group members for device names if available, else use the entity name\n  const deviceNames = (entity?.attributes?.group_members || [entity.entity_id]).reduce((friendlyNames, entityId) => {\n    const entity = entitiesById[entityId];\n    if (!entity) {\n      return friendlyNames;\n    }\n    return [...friendlyNames, entity.attributes?.friendly_name || entity.entity_id];\n  }, [] as string[]);\n  const title = `${media_artist ? media_artist + \" - \" : \"\"}${media_title ?? media_playlist ?? \"\"}`;\n  const appName = app_name;\n  const artworkUrl = useMemo(() => {\n    const url = entity.attributes.entity_picture ? entity.attributes.entity_picture : null;\n    return url && url.startsWith(\"/\") ? joinHassUrl(url) : url;\n  }, [entity.attributes.entity_picture, joinHassUrl]);\n  const isUnavailable = isUnavailableState(state);\n  const isIdle = state === \"idle\";\n  const isStandby = state === \"standby\";\n  const isOff = state === OFF;\n  const playing = state === \"playing\";\n  const buffering = state === \"buffering\";\n  const disabled = isUnavailable || _disabled;\n  const seekDisabled = isIdle || isOff || isStandby || buffering || disabled;\n  const [isGroupingModalOpen, setIsGroupingModalOpen] = useState(false);\n\n  const updateClock = useCallback(\n    (x: number) => {\n      if (!progressRef.current || !clockRef.current || seekDisabled || !playerRef.current || !media_duration) return;\n\n      // Get the bounding client rectangle\n      const rect = progressRef.current.getBoundingClientRect();\n      // Calculate the click position relative to the element\n      const offsetX = x - rect.left;\n      // Translate the click position into a percentage between 0-100\n      const percentage = (offsetX / rect.width) * 100;\n      // Calculate the current time in seconds\n      const currentTimeInSeconds: number = (media_duration * percentage) / 100;\n      // Convert the current time to minutes and remaining seconds\n      const minutes: number = Math.max(0, Math.floor(currentTimeInSeconds / 60));\n      const seconds: number = Math.max(0, Math.floor(currentTimeInSeconds % 60));\n      // Convert minutes and seconds to string and ensure they have at least two digits\n      const minutesStr: string = String(minutes).padStart(2, \"0\");\n      const secondsStr: string = String(seconds).padStart(2, \"0\");\n      // Update the clock\n      clockRef.current.style.left = `${clamp(percentage, 5, 95)}%`;\n      playerRef.current.style.setProperty(`--progress-${snakeCase(_entity)}-clock`, `'${minutesStr}:${secondsStr}'`);\n    },\n    [_entity, media_duration, seekDisabled],\n  );\n\n  const calculatePercentageViewed = useCallback(\n    (media_duration?: number, media_position?: number) => {\n      if (!media_duration || !media_position) return 0;\n      const progress = (media_position / media_duration) * 100;\n      if (playerRef.current) {\n        playerRef.current.style.setProperty(`--progress-${snakeCase(_entity)}-width`, `${clamp(progress, 0, 100)}%`);\n      }\n    },\n    [_entity],\n  );\n\n  useEffect(() => {\n    if (playing && interval.current === null && media_position_updated_at !== undefined && media_position !== undefined) {\n      interval.current = setInterval(() => {\n        const now = new Date();\n        const lastUpdated = new Date(media_position_updated_at);\n        const timeDifferenceInSeconds = (now.getTime() - lastUpdated.getTime()) / 1000.0;\n\n        const newMediaPosition = media_position + timeDifferenceInSeconds;\n        calculatePercentageViewed(media_duration, newMediaPosition);\n      }, 1000);\n    } else if (!playing && interval.current !== null) {\n      clearInterval(interval.current);\n      interval.current = null;\n    }\n    return () => {\n      if (interval.current !== null) {\n        clearInterval(interval.current);\n        interval.current = null;\n      }\n    };\n  }, [playing, media_position, media_position_updated_at, media_duration, calculatePercentageViewed]);\n\n  const seekTrack = useCallback(\n    (x: number): void => {\n      if (!progressRef.current) return;\n      // Get the bounding client rectangle\n      const rect = progressRef.current.getBoundingClientRect();\n      // Calculate the click position relative to the element\n      const offsetX = x - rect.left;\n      // Translate the click position into a percentage between 0-100\n      const percentage = offsetX / rect.width;\n      mp.mediaSeek({\n        target: allEntityIds,\n        serviceData: {\n          seek_position: percentage * (media_duration ?? 0),\n        },\n      });\n    },\n    [mp, allEntityIds, media_duration],\n  );\n  // Calculate percentage viewed whenever mediaPosition or mediaDuration changes\n  useEffect(() => {\n    calculatePercentageViewed(media_duration, media_position);\n  }, [media_position, calculatePercentageViewed, media_duration]);\n\n  const debounceUpdateClock = useThrottledCallback(\n    (value: number) => {\n      updateClock(value);\n    },\n    20,\n    {\n      trailing: true,\n      leading: true,\n    },\n  );\n\n  const bindProgress = useGesture({\n    onMove: (state) => {\n      if (seekDisabled) return;\n      debounceUpdateClock(state.event.clientX);\n    },\n    onClick: (state) => {\n      if (seekDisabled) return;\n      seekTrack(state.event.clientX);\n    },\n  });\n\n  const supportsGrouping = supportsFeatureFromAttributes(entity.attributes, 524288);\n\n  if (groupMembers.length > 0 && !supportsGrouping && !entity.attributes.group_members) {\n    throw new Error(`\"${_entity}\" does not support grouping, but you have provided groupMembers.`);\n  }\n  return (\n    <>\n      <MediaPlayerWrapper\n        key={key}\n        disabled={disabled}\n        modalProps={{\n          open: isGroupingModalOpen,\n          groupedEntities,\n          allEntityIds,\n          onClose: () => setIsGroupingModalOpen(false),\n          ...modalProps,\n        }}\n        entity={_entity}\n        // just a dodgey hack to let typescript play nicely here\n        // as we don't know the service/serviceData at this level\n        service={service as undefined}\n        serviceData={serviceData as undefined}\n        disableActiveState\n        disableRipples\n        className={`media-player-card ${className ?? \"\"}`}\n        refCallback={(ref) => {\n          if (ref) {\n            playerRef.current = ref.current;\n          }\n        }}\n        layout={layout}\n        cssStyles={`\n          ${globalComponentStyle?.mediaPlayerCard ?? \"\"}\n          ${cssStyles ?? \"\"}\n        `}\n        {...rest}\n      >\n        {showArtworkBackground && artworkUrl !== null && <BackgroundImage className=\"artwork\" backgroundImage={artworkUrl} />}\n        <Column fullHeight fullWidth className=\"column content\" justifyContent=\"space-between\">\n          <Empty className=\"empty\" />\n          {layout === \"card\" && (\n            <Row gap=\"1rem\" fullWidth className=\"row\">\n              <PlaybackControls entity={_entity} disabled={disabled} allEntityIds={allEntityIds} feature size={40} />\n            </Row>\n          )}\n\n          <Base\n            className=\"base\"\n            fullWidth\n            gap=\"0.5rem\"\n            style={{\n              paddingBottom: isOff ? (layout === \"slim\" ? \"1rem\" : \"0.5rem\") : \"1rem\",\n            }}\n          >\n            <Row className=\"row\" gap=\"0.5rem\" wrap=\"nowrap\" fullWidth>\n              {hideThumbnail === false && artworkUrl !== null && (\n                <Thumbnail className=\"thumbnail\" backgroundImage={artworkUrl} size={thumbnailSize} />\n              )}\n              <Column\n                className=\"column\"\n                gap=\"0.5rem\"\n                alignItems=\"flex-start\"\n                style={{\n                  width: hideThumbnail === false && artworkUrl !== null ? `calc(100% - (${thumbnailSize} + 0.5rem))` : \"100%\",\n                }}\n              >\n                <Row className=\"row\" justifyContent={deviceNames.length > 0 && !hideEntityName ? \"space-between\" : \"flex-end\"} fullWidth>\n                  {deviceNames.length > 0 && !hideEntityName && (\n                    <Title className=\"title device-name\">\n                      {hideEntityName ? \"\" : deviceNames.join(\", \")}\n                      {buffering ? (hideEntityName ? \"\" : \" - \") + \"buffering\" : \"\"}\n                    </Title>\n                  )}\n                  {(isOff || layout === \"slim\") && (\n                    <AlternateControls\n                      allEntityIds={allEntityIds}\n                      entity={_entity}\n                      disabled={disabled}\n                      onSpeakerGroupClick={() => setIsGroupingModalOpen(true)}\n                      hideGrouping={hideGrouping}\n                    />\n                  )}\n                </Row>\n                {title && !isOff && (\n                  <StyledMarquee speed={30} pauseOnHover play={playing} autoFill {...marqueeProps} className=\"title marquee\">\n                    {title}\n                    {appName && !hideAppName ? ` - ${appName}` : \"\"}\n                  </StyledMarquee>\n                )}\n              </Column>\n            </Row>\n\n            {!isUnavailable ? (\n              <Row className=\"row\" gap=\"1rem\" justifyContent=\"space-between\" wrap=\"nowrap\" fullWidth>\n                {!isOff && (\n                  <VolumeControls\n                    entity={_entity}\n                    disabled={disabled}\n                    allEntityIds={allEntityIds}\n                    volumeLayout={volumeLayout}\n                    layout={layout}\n                    hideMute={hideMute}\n                  />\n                )}\n                {layout === \"slim\" && (\n                  <Row gap=\"0.5rem\" wrap=\"nowrap\">\n                    <PlaybackControls\n                      entity={_entity}\n                      disabled={disabled}\n                      allEntityIds={allEntityIds}\n                      feature={false}\n                      size={DEFAULT_FAB_SIZE}\n                    />\n                  </Row>\n                )}\n                {!isOff && layout === \"card\" && (\n                  <AlternateControls\n                    allEntityIds={allEntityIds}\n                    entity={_entity}\n                    disabled={disabled}\n                    onSpeakerGroupClick={() => setIsGroupingModalOpen(true)}\n                    hideGrouping={hideGrouping}\n                  />\n                )}\n              </Row>\n            ) : null}\n          </Base>\n        </Column>\n        <ProgressBar\n          className={`${seekDisabled ? \"disabled\" : \"\"} progress-bar`}\n          disabled={seekDisabled}\n          entity={snakeCase(_entity)}\n          ref={progressRef}\n          onPointerDownCapture={(e) => {\n            e.stopPropagation();\n          }}\n          {...bindProgress()}\n        >\n          <span></span>\n        </ProgressBar>\n        <Clock entity={snakeCase(_entity)} className=\"clock\" ref={clockRef} />\n      </MediaPlayerWrapper>\n    </>\n  );\n}\n\n/** A MediaPlayerCard to control media similar to the mini-media-player from Hacs.\n * - groups - if the player supports grouping, the popup for the media player will show group controls for related entities\n * - group_members - if the group_members attribute is present on the primary entity, but the entity doesn't support grouping, you will only see volume controls in the popup for related entities\n * - if you provide the groupMembers prop, but the entity doesn't support grouping at all, an error will be thrown\n * It supports skip, previous, volume, mute, power, seeking, play, pause, grouping, artwork */\nexport function MediaPlayerCard(props: MediaPlayerCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"MediaPlayerCard\" })}>\n      <InternalMediaPlayerCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","const isIterable = (obj) => Symbol.iterator in obj;\nconst hasIterableEntries = (value) => (\n  // HACK: avoid checking entries type\n  \"entries\" in value\n);\nconst compareEntries = (valueA, valueB) => {\n  const mapA = valueA instanceof Map ? valueA : new Map(valueA.entries());\n  const mapB = valueB instanceof Map ? valueB : new Map(valueB.entries());\n  if (mapA.size !== mapB.size) {\n    return false;\n  }\n  for (const [key, value] of mapA) {\n    if (!mapB.has(key) || !Object.is(value, mapB.get(key))) {\n      return false;\n    }\n  }\n  return true;\n};\nconst compareIterables = (valueA, valueB) => {\n  const iteratorA = valueA[Symbol.iterator]();\n  const iteratorB = valueB[Symbol.iterator]();\n  let nextA = iteratorA.next();\n  let nextB = iteratorB.next();\n  while (!nextA.done && !nextB.done) {\n    if (!Object.is(nextA.value, nextB.value)) {\n      return false;\n    }\n    nextA = iteratorA.next();\n    nextB = iteratorB.next();\n  }\n  return !!nextA.done && !!nextB.done;\n};\nfunction shallow(valueA, valueB) {\n  if (Object.is(valueA, valueB)) {\n    return true;\n  }\n  if (typeof valueA !== \"object\" || valueA === null || typeof valueB !== \"object\" || valueB === null) {\n    return false;\n  }\n  if (Object.getPrototypeOf(valueA) !== Object.getPrototypeOf(valueB)) {\n    return false;\n  }\n  if (isIterable(valueA) && isIterable(valueB)) {\n    if (hasIterableEntries(valueA) && hasIterableEntries(valueB)) {\n      return compareEntries(valueA, valueB);\n    }\n    return compareIterables(valueA, valueB);\n  }\n  return compareEntries(\n    { entries: () => Object.entries(valueA) },\n    { entries: () => Object.entries(valueB) }\n  );\n}\n\nexport { shallow };\n","import React from 'react';\nimport { shallow } from 'zustand/vanilla/shallow';\n\nfunction useShallow(selector) {\n  const prev = React.useRef(void 0);\n  return (state) => {\n    const next = selector(state);\n    return shallow(prev.current, next) ? prev.current : prev.current = next;\n  };\n}\n\nexport { useShallow };\n","import styled from \"@emotion/styled\";\nimport type { CalendarOptions, CalendarApi, EventClickArg, MoreLinkArg, EventSourceFuncArg, EventInput } from \"@fullcalendar/core\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin, { DateClickArg } from \"@fullcalendar/interaction\";\nimport listPlugin from \"@fullcalendar/list\";\nimport { Icon } from \"@iconify/react\";\nimport { isUnavailableState, useHass, getColorByIndex, localize } from \"@hakit/core\";\nimport type { FilterByDomain, EntityName } from \"@hakit/core\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { useResizeDetector } from \"react-resize-detector\";\nimport Autolinker from \"autolinker\";\nimport {\n  Row,\n  Column,\n  fallback,\n  Modal,\n  ButtonBar,\n  Alert,\n  ButtonBarButton,\n  CardBase,\n  type CardBaseProps,\n  type AvailableQueries,\n} from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { useRef, useEffect, useState, useCallback } from \"react\";\nimport { useShallow } from \"zustand/shallow\";\n\nconst StyledCalendarCard = styled(CardBase as React.ComponentType<CardBaseProps<\"div\", FilterByDomain<EntityName, \"calendar\">>>)`\n  .contents .calendar > * {\n    flex-grow: 1;\n    background-color: var(--ha-S300);\n    min-height: 400px;\n    --fc-neutral-bg-color: var(--ha-S300);\n    --fc-list-event-hover-bg-color: var(--ha-S300);\n    --fc-theme-standard-border-color: var(--ha-S500);\n    --fc-border-color: var(--ha-S500);\n    --fc-page-bg-color: var(--ha-S300);\n  }\n\n  a {\n    color: inherit !important;\n  }\n\n  .fc-theme-standard .fc-scrollgrid {\n    border: 1px solid var(--ha-S500);\n    border-radius: 0.5rem;\n  }\n\n  .fc-theme-standard td {\n    border-bottom-left-radius: 0.5rem;\n    border-bottom-right-radius: 0.5rem;\n  }\n\n  .fc-scrollgrid-section-header td {\n    border: none;\n  }\n\n  th.fc-col-header-cell.fc-day {\n    background-color: var(--ha-S200);\n    color: var(--ha-S200-contrast);\n    font-size: 11px;\n    font-weight: bold;\n    text-transform: uppercase;\n  }\n\n  .fc-daygrid-dot-event:hover {\n    background-color: inherit;\n  }\n\n  .fc-daygrid-day-top {\n    text-align: center;\n    padding-top: 0.25rem;\n    justify-content: center;\n  }\n\n  table.fc-scrollgrid-sync-table tbody tr:first-of-type .fc-daygrid-day-top {\n    padding-top: 0;\n  }\n\n  a.fc-daygrid-day-number {\n    font-size: 0.8rem;\n    cursor: pointer;\n  }\n\n  .fc .fc-daygrid-day-number {\n  }\n  .fc .fc-daygrid-more-link {\n    font-size: 0.7rem;\n    float: none;\n  }\n  .fc-daygrid-day-bottom {\n    width: 100%;\n    text-align: center;\n    &:before,\n    &:after {\n      display: none;\n    }\n  }\n\n  .fc .fc-daygrid-day.fc-day-today {\n    background: inherit;\n  }\n\n  td.fc-day-today .fc-daygrid-day-number {\n    height: 1.5rem;\n    width: 1.5rem;\n    flex-grow: 0;\n    flex-shrink: 0;\n    display: flex;\n    border-radius: 50%;\n    text-align: center;\n    white-space: nowrap;\n    background-color: var(--ha-A400);\n    color: var(--ha-900-contrast);\n    line-height: 1.5rem;\n    padding: 0;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .fc-event {\n    border-radius: 4px;\n    line-height: 1.7;\n    cursor: pointer;\n  }\n\n  .fc-daygrid-block-event .fc-event-main {\n    padding: 0 1px;\n  }\n\n  .fc-day-past .fc-daygrid-day-events {\n    opacity: 0.5;\n  }\n\n  .fc-popover {\n    background-color: var(--primary-background-color) !important;\n  }\n\n  .fc-popover-header {\n    background-color: var(--secondary-background-color) !important;\n  }\n\n  .fc-theme-standard .fc-list-day-frame {\n    background-color: transparent;\n  }\n\n  .fc-list.fc-view,\n  .fc-list-event.fc-event td {\n    border: none;\n  }\n\n  .fc-list-day.fc-day th {\n    border-bottom: none;\n    border-top: 1px solid var(--fc-theme-standard-border-color, #ddd) !important;\n  }\n\n  .fc-list-day-text {\n    font-size: 16px;\n    font-weight: 400;\n  }\n\n  .fc-list-day-side-text {\n    font-weight: 400;\n    font-size: 16px;\n    color: var(--primary-color);\n  }\n  .fc-list-day-cushion {\n    background-color: var(--ha-S200);\n    color: var(--ha-S200-contrast);\n  }\n\n  .fc-list-table td,\n  .fc-list-day-frame {\n    padding-top: 12px;\n    padding-bottom: 12px;\n  }\n  &.narrow .fc-list-table {\n    table-layout: fixed;\n    tr th,\n    tr td {\n      &:first-of-type {\n        box-sizing: border-box;\n        width: 30%;\n        overflow-wrap: break-word;\n        white-space: pre-wrap;\n        font-size: 0.8rem;\n      }\n      &[aria-hidden=\"true\"] {\n        box-sizing: border-box;\n        width: 5%;\n      }\n      &:last-of-type {\n        box-sizing: border-box;\n        width: 65%;\n        overflow-wrap: break-word;\n        white-space: pre-wrap;\n        font-size: 0.8rem;\n      }\n    }\n  }\n\n  .fc-dayGridMonth-view {\n    .fc-event-time,\n    .fc-event-title {\n      display: none;\n    }\n    .fc-daygrid-event-harness {\n      margin-top: 0 !important;\n    }\n    .fc-daygrid-day-events {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-wrap: wrap;\n      position: relative;\n      margin-top: 0;\n    }\n  }\n\n  .fc-dayGridDay-view {\n    .fc-event-title {\n      &:before {\n        content: \"- \";\n      }\n    }\n    th.fc-col-header-cell.fc-day {\n      font-size: 16px;\n      font-weight: 400;\n      .fc-col-header-cell-cushion {\n        padding: 8px 14px;\n        text-transform: none;\n      }\n    }\n  }\n\n  &.narrow {\n    .fc-dayGridMonth-view .fc-scrollgrid-sync-table {\n      overflow: hidden;\n    }\n    .fc .fc-col-header-cell-cushion {\n      padding: 0.4rem;\n    }\n    .monthly-toggle-view {\n      display: none;\n    }\n  }\n\n  .fc-header-toolbar,\n  .fc .fc-toolbar {\n    display: none;\n  }\n`;\n\nconst Header = styled.div`\n  padding: 1rem;\n`;\n\nconst EventBody = styled.div`\n  overflow-wrap: break-word;\n  color: var(--ha-S200-contrast);\n  padding: 1rem 0;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n`;\nconst StyledAlert = styled(Alert)`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 4;\n  &:after {\n    border-radius: 0;\n  }\n`;\n\nexport interface CalendarEvent {\n  title: string;\n  start: string;\n  end?: string;\n  backgroundColor?: string;\n  borderColor?: string;\n  calendar: string;\n  eventData: CalendarEventData;\n}\n\n/** Data returned from the core APIs. */\nexport interface CalendarEventData {\n  uid?: string;\n  recurrence_id?: string;\n  summary: string;\n  dtstart: string;\n  dtend: string;\n  start?: string;\n  end?: string;\n  rrule?: string;\n  description?: string;\n}\n\nexport interface CalendarEventWithEntity extends CalendarEvent {\n  entity: HassEntity;\n}\ntype OmitProperties =\n  | \"modalProps\"\n  | \"onClick\"\n  | \"children\"\n  | \"active\"\n  | \"as\"\n  | \"title\"\n  | \"disabled\"\n  | \"entity\"\n  | \"service\"\n  | \"serviceData\"\n  | \"ref\"\n  | \"longPressCallback\"\n  | \"disableRipples\"\n  | \"disableScale\"\n  | \"disableActiveState\";\nexport interface CalendarCardProps extends Omit<CardBaseProps<\"div\", EntityName>, OmitProperties> {\n  /** The names of your calendar entities */\n  entities: FilterByDomain<EntityName, \"calendar\">[];\n  /** if need be, you can provide a timezone to display time in a specific timezone */\n  timeZone?: string;\n  /** the default rendered view @default \"dayGridMonth\" */\n  view?: \"dayGridMonth\" | \"listWeek\" | \"dayGridDay\";\n  /** disables the auto view switching based on the size of the card @default false */\n  disableAutoView?: boolean;\n  /** disables the narrow class/styles from being added when the card is too small @default false */\n  disableNarrow?: boolean;\n  /** include the header controls @default true */\n  includeHeader?: boolean;\n}\n\nconst getCalendarDate = (\n  dateObj?:\n    | string\n    | {\n        dateTime?: string;\n        date?: string;\n      },\n): string | undefined => {\n  if (typeof dateObj === \"string\") {\n    return dateObj;\n  }\n\n  if (dateObj?.dateTime) {\n    return dateObj.dateTime;\n  }\n\n  if (dateObj?.date) {\n    return dateObj.date;\n  }\n\n  return undefined;\n};\n\nfunction formatDate(dateString: string) {\n  const optionsDate: Intl.DateTimeFormatOptions = {\n    month: \"long\",\n    day: \"numeric\",\n    year: \"numeric\",\n  };\n\n  const optionsTime: Intl.DateTimeFormatOptions = {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  };\n\n  const date = new Date(dateString);\n\n  const formattedDate = new Intl.DateTimeFormat(\"en-US\", optionsDate).format(date);\n  const formattedStartTime = new Intl.DateTimeFormat(\"en-US\", optionsTime).format(date);\n\n  // Assume event is 15 minutes long for this example\n  const eventEndTime = new Date(date.getTime() + 15 * 60000);\n  const formattedEndTime = new Intl.DateTimeFormat(\"en-US\", optionsTime).format(eventEndTime);\n\n  return `${formattedDate} ${formattedStartTime} - ${formattedEndTime}`;\n}\n\nconst defaultFullCalendarConfig: CalendarOptions = {\n  headerToolbar: false,\n  plugins: [dayGridPlugin, listPlugin, interactionPlugin],\n  initialView: \"dayGridMonth\",\n  dayMaxEventRows: true,\n  height: \"parent\",\n  views: {\n    listWeek: {\n      type: \"list\",\n      duration: { days: 7 },\n    },\n  },\n  eventTimeFormat: {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    hour12: true,\n  },\n};\n\nfunction InternalCalendarCard({\n  entities,\n  className,\n  timeZone,\n  view,\n  disableAutoView = false,\n  disableNarrow = false,\n  includeHeader = true,\n  cssStyles,\n  key,\n  ...rest\n}: CalendarCardProps): React.ReactNode {\n  const { callApi } = useHass.getState().helpers;\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const config = useHass((store) => store.config);\n  const calRef = useRef<FullCalendar>(null);\n  const initialRequest = useRef(false);\n  const [error, setError] = useState<string | null>(null);\n  const [title, setTitle] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(false);\n  const [narrow, setNarrow] = useState<boolean>(false);\n  const { width, ref: widthRef } = useResizeDetector({\n    refreshMode: \"debounce\",\n    handleHeight: false,\n    refreshRate: 500,\n  });\n  const [currentEvent, setCurrentEvent] = useState<CalendarEventWithEntity | null>(null);\n  const calEntities = useHass(useShallow((state) => entities.map((id) => state.entities[id])));\n  const [activeView, setActiveView] = useState<CalendarCardProps[\"view\"]>(view ?? \"dayGridMonth\");\n\n  const calendars = calEntities.filter((entity) => !isUnavailableState(entity?.state));\n  const fetchEvents = useCallback(\n    async (info: EventSourceFuncArg, successCallback: (events: EventInput[]) => void): Promise<void> => {\n      setError(null);\n      const params = encodeURI(`?start=${info.start.toISOString()}&end=${info.end.toISOString()}`);\n      const calEvents: CalendarEvent[] = [];\n      const errors: string[] = [];\n      const apiCalls = entities.map(async (entity) =>\n        callApi<CalendarEventData[]>(`/calendars/${entity}${params}`, {\n          method: \"GET\",\n        }).then(\n          (result) => ({\n            result: result,\n            error: result.status === \"error\" ? result.data : null,\n            entityId: entity,\n          }),\n          (error) => ({ error, result: null, entityId: entity }),\n        ),\n      );\n      const responses = await Promise.all(apiCalls);\n      responses.forEach(({ result, error, entityId }, index) => {\n        const backgroundColor = getColorByIndex(index);\n        if (error || !result || result.status === \"error\") {\n          errors.push(`${entityId} - ${error}`);\n          return;\n        }\n        (result.data ?? []).forEach((ev) => {\n          const eventStart = getCalendarDate(ev.start);\n          const eventEnd = getCalendarDate(ev.end);\n          if (!eventStart || !eventEnd) {\n            return;\n          }\n          const eventData: CalendarEventData = {\n            uid: ev.uid,\n            summary: ev.summary,\n            description: ev.description,\n            dtstart: eventStart,\n            dtend: eventEnd,\n            recurrence_id: ev.recurrence_id,\n            rrule: ev.rrule,\n          };\n          const event: CalendarEvent = {\n            start: eventStart,\n            end: eventEnd,\n            title: ev.summary,\n            backgroundColor: backgroundColor,\n            borderColor: backgroundColor,\n            calendar: entities[index],\n            eventData: eventData,\n          };\n\n          calEvents.push(event);\n        });\n      });\n      if (errors.length > 0) {\n        setError(`${localize(\"components.calendar.event_retrieval_error\")}: \"${errors.join(\", \")}\".`);\n        successCallback([]);\n      } else {\n        successCallback(calEvents);\n      }\n      initialRequest.current = true;\n    },\n    [callApi, entities],\n  );\n\n  const changeView = useCallback(\n    (fn: (api: CalendarApi) => void) => {\n      if (!calRef.current) return;\n      const calendarApi = calRef.current.getApi();\n      // @ts-expect-error - this does exist.\n      calendarApi.batchRendering(() => {\n        calendarApi.removeAllEventSources();\n        fn(calendarApi);\n        calendarApi.addEventSource(fetchEvents);\n        setTitle(calendarApi.view.title);\n      });\n    },\n    [fetchEvents],\n  );\n\n  const measureCard = useCallback(\n    (width: number) => {\n      if (calRef.current) {\n        const calendarApi = calRef.current.getApi();\n        calRef.current.requestResize();\n        if (width < 400) {\n          // only change the view if it's not already in listWeek, and not defined as an input prop\n          if (!disableAutoView && calendarApi.view.type !== \"listWeek\") {\n            changeView((api) => {\n              api.setOption(\"eventDisplay\", \"auto\");\n              api.changeView(\"listWeek\");\n              setActiveView(\"listWeek\");\n            });\n          }\n          if (!narrow && !disableNarrow) {\n            setNarrow(true);\n          }\n        }\n        if (width >= 400 && narrow && !disableNarrow) {\n          setNarrow(false);\n        }\n      }\n    },\n    [narrow, disableAutoView, disableNarrow, changeView],\n  );\n  useEffect(() => {\n    if (width) {\n      measureCard(width);\n    }\n  }, [width, measureCard]);\n\n  const _handleNext = useCallback(() => {\n    changeView((api) => api.next());\n  }, [changeView]);\n\n  const _handlePrev = useCallback(() => {\n    changeView((api) => api.prev());\n  }, [changeView]);\n\n  const _handleToday = useCallback(() => {\n    changeView((api) => api.today());\n  }, [changeView]);\n  const _handleView = useCallback(\n    (newView: CalendarCardProps[\"view\"]): void => {\n      if (newView === activeView || !calRef.current) return;\n      const eventDisplay = newView === \"dayGridMonth\" ? \"list-item\" : \"auto\";\n      changeView((api) => {\n        api.setOption(\"eventDisplay\", eventDisplay);\n        api.changeView(newView as string);\n        setActiveView(newView);\n      });\n    },\n    [activeView, changeView],\n  );\n\n  const _handleEventClick = useCallback(\n    (info: EventClickArg): void => {\n      const entityStateObj = calendars.find((entity) => entity.entity_id === info.event.extendedProps.calendar);\n      setCurrentEvent({\n        ...info.event.extendedProps,\n        entity: entityStateObj ?? null,\n      } as CalendarEventWithEntity);\n    },\n    [calendars],\n  );\n\n  const _handleDateClick = useCallback(\n    (info: DateClickArg | MoreLinkArg): void => {\n      if (info.view.type !== \"dayGridMonth\") {\n        return;\n      }\n      changeView((api) => {\n        api.gotoDate(info.date);\n        api.changeView(\"dayGridDay\");\n        setActiveView(\"dayGridDay\");\n      });\n    },\n    [changeView],\n  );\n\n  useEffect(() => {\n    if (initialRequest.current) return;\n    // initially request the events\n    if (!view) {\n      const defaultView = \"dayGridMonth\";\n      const eventDisplay = defaultView === \"dayGridMonth\" ? \"list-item\" : \"auto\";\n      changeView((api) => {\n        api.setOption(\"eventDisplay\", eventDisplay);\n        api.changeView(defaultView as string);\n        setActiveView(defaultView);\n      });\n    } else {\n      changeView((api) => {\n        api.changeView(view);\n      });\n    }\n  }, [changeView, view]);\n\n  return (\n    <StyledCalendarCard\n      key={key}\n      disableScale\n      disableActiveState\n      disableRipples\n      className={`calendar-card ${className ?? \"\"} ${narrow ? \"narrow\" : \"\"}`}\n      cssStyles={`\n        ${globalComponentStyle.calendarCard ?? \"\"}\n        ${cssStyles ?? \"\"}\n      `}\n      {...rest}\n    >\n      {includeHeader && (\n        <Header className=\"header\">\n          <Row justifyContent=\"space-between\">\n            <Column>\n              <h3 className=\"title\">{title}</h3>\n            </Column>\n            <ButtonBar className=\"button-group-nav\">\n              <ButtonBarButton\n                title={localize(\"previous\")}\n                size={35}\n                disabled={loading}\n                onClick={() => {\n                  _handlePrev();\n                }}\n                icon=\"mdi:navigate-before\"\n              />\n              <ButtonBarButton\n                title={localize(\"next\")}\n                size={35}\n                disabled={loading}\n                onClick={() => {\n                  _handleNext();\n                }}\n                icon=\"mdi:navigate-next\"\n              />\n            </ButtonBar>\n          </Row>\n          <Row justifyContent=\"flex-end\">\n            <ButtonBar className=\"button-group-views\">\n              <ButtonBarButton\n                title={localize(\"today\")}\n                size={35}\n                disabled={loading}\n                onClick={() => {\n                  _handleToday();\n                }}\n                noIcon\n              >\n                {localize(\"today\").toUpperCase()}\n              </ButtonBarButton>\n              <ButtonBarButton\n                className=\"monthly-toggle-view\"\n                title={localize(\"monthly\")}\n                active={activeView === \"dayGridMonth\"}\n                size={35}\n                disabled={loading}\n                onClick={() => {\n                  _handleView(\"dayGridMonth\");\n                }}\n                icon=\"mdi:view-module\"\n              />\n              <ButtonBarButton\n                title={localize(\"weekly\")}\n                size={35}\n                disabled={loading}\n                onClick={() => {\n                  _handleView(\"listWeek\");\n                }}\n                icon=\"mdi:view-week\"\n              />\n              <ButtonBarButton\n                title={localize(\"daily\")}\n                size={35}\n                disabled={loading}\n                onClick={() => {\n                  _handleView(\"dayGridDay\");\n                }}\n                icon=\"mdi:view-day\"\n              />\n            </ButtonBar>\n          </Row>\n        </Header>\n      )}\n      <div className=\"calendar\" ref={widthRef}>\n        <FullCalendar\n          dateClick={_handleDateClick}\n          moreLinkClick={_handleDateClick}\n          eventClick={_handleEventClick}\n          editable={false}\n          ref={calRef}\n          loading={(isLoading) => {\n            setLoading(isLoading);\n          }}\n          locale={config?.language}\n          timeZone={timeZone ?? \"local\"}\n          progressiveEventRendering\n          {...defaultFullCalendarConfig}\n        />\n      </div>\n      {loading && <StyledAlert className={\"loading\"} description={`${localize(\"loading\")}...`} />}\n      {currentEvent && (\n        <Modal\n          title={currentEvent.eventData.summary}\n          id={currentEvent.eventData.uid as string}\n          description={\n            <Row\n              justifyContent=\"flex-start\"\n              gap=\"1rem\"\n              style={{\n                textTransform: \"lowercase\",\n              }}\n            >\n              {currentEvent.entity.attributes.friendly_name}\n            </Row>\n          }\n          open\n          onClose={() => {\n            setCurrentEvent(null);\n          }}\n        >\n          <Column justifyContent=\"flex-start\" alignItems=\"flex-start\">\n            <Row justifyContent=\"flex-start\" gap=\"1rem\">\n              <Icon\n                style={{\n                  fontSize: \"1.5rem\",\n                }}\n                icon=\"mdi:calendar-clock\"\n              />\n              <span>{formatDate(currentEvent.eventData.dtstart)}</span>\n            </Row>\n            {currentEvent.eventData.description && (\n              <EventBody\n                dangerouslySetInnerHTML={{\n                  __html: Autolinker.link(currentEvent.eventData.description.replace(/\\n/g, \"<br/>\"), {\n                    newWindow: true,\n                    stripPrefix: false,\n                  }),\n                }}\n              />\n            )}\n          </Column>\n        </Modal>\n      )}\n      {error && (\n        <Alert title={localize(\"components.calendar.event_retrieval_error\")} type=\"error\">\n          {error}\n        </Alert>\n      )}\n    </StyledCalendarCard>\n  );\n}\n\n/**\n * The CalendarCard is very similar to the home assistant calendar card, with the exception of not having delete/edit event functionality, the preview here contains only a month (the current month) of fake events to preview the functionality\n *\n * This component uses the REST API to retrieve events from home assistant, ensure you've followed the instructions [here](https://shannonhochkins.github.io/ha-component-kit/?path=/docs/core-hooks-usehass-hass-callapi--docs)\n * */\nexport function CalendarCard(props: CalendarCardProps) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 8,\n    sm: 6,\n    md: 6,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"CalendarCard\" })}>\n      <InternalCalendarCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { fallback, ButtonBarButton } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/react\";\nimport { ReactElement, Children, isValidElement, cloneElement } from \"react\";\n\ntype Extendable = React.ComponentPropsWithoutRef<\"div\">;\n\n// Define the allowed children types\ntype AllowedChild = ReactElement<typeof ButtonBarButton> | false | null;\ntype AllowedChildren = AllowedChild | AllowedChild[];\n\nexport interface ButtonBarProps extends Extendable {\n  /** standard flex css properties for align-items, @default \"center\" */\n  alignItems?: React.CSSProperties[\"alignItems\"];\n  /** standard flex css properties for justify-content, @default \"center\" */\n  justifyContent?: React.CSSProperties[\"justifyContent\"];\n  /** standard flex css properties for flex-wrap property, @default \"wrap\" */\n  wrap?: React.CSSProperties[\"justifyContent\"];\n  /** gap between buttons, note - will not be applied in \"grouped\" layoutType @default \"0\" */\n  gap?: React.CSSProperties[\"gap\"];\n  /** the children for the ButtonBar, it accepts ButtonBarButton components */\n  children: AllowedChildren;\n  /** should the group stretch to the height of the parent */\n  fullHeight?: boolean;\n  /** should the group stretch to the width of the parent */\n  fullWidth?: boolean;\n  /** type of the layout, grouped will render all buttons together, bubble will render them as buttons in a row @default 'grouped' */\n  layoutType?: \"grouped\" | \"bubble\";\n}\n\nconst ButtonBarParent = styled.div<Partial<ButtonBarProps>>`\n  display: flex;\n  ${({ fullWidth }) => {\n    if (fullWidth) {\n      return `\n        > .fit-content {\n          flex-basis: auto;\n          width: 100%;\n        }\n      `;\n    }\n    return ``;\n  }};\n`;\n\nconst FitContent = styled.div`\n  display: flex;\n  flex-basis: fit-content;\n`;\n\nconst ButtonBarInner = styled.div<Partial<ButtonBarProps>>`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: ${({ wrap }) => wrap || \"wrap\"};\n  justify-content: ${({ justifyContent }) => justifyContent || \"center\"};\n  align-items: ${({ alignItems }) => alignItems || \"center\"};\n  width: ${({ fullWidth }) => (fullWidth ? \"100%\" : \"auto\")};\n  height: ${({ fullHeight }) => (fullHeight ? \"100%\" : \"auto\")};\n  overflow: hidden;\n  flex-wrap: nowrap;\n\n  > * {\n    height: 100%;\n    width: auto;\n    display: flex;\n    align-items: stretch;\n    .button-bar-button {\n      height: 100%;\n      display: flex;\n      align-items: stretch;\n    }\n  }\n\n  &.grouped {\n    background-color: var(--ha-S300);\n    border-radius: 0.5rem;\n    border: 1px solid var(--ha-S500);\n    > * {\n      border-right: 1px solid var(--ha-S500);\n      &:last-of-type {\n        border-right: none;\n      }\n    }\n  }\n  &.bubble {\n    gap: ${({ gap }) => gap || \"0px\"};\n    > * {\n      flex-grow: 1;\n    }\n    .button-bar-button {\n      background-color: var(--ha-300-a3-contrast);\n      color: var(--ha-300);\n      &:not(.disabled):not(:focus):hover {\n        background-color: var(--ha-S50-a6);\n        color: var(--ha-500);\n      }\n    }\n  }\n`;\n\nfunction InternalButtonBar({\n  key,\n  alignItems,\n  fullWidth,\n  fullHeight,\n  gap,\n  justifyContent,\n  wrap,\n  style,\n  id,\n  className,\n  cssStyles,\n  children,\n  layoutType = \"grouped\",\n  ...rest\n}: ButtonBarProps) {\n  const childrenWithKeys = Children.map(children, (child, index) => {\n    if (isValidElement(child)) {\n      return cloneElement(child, {\n        key: child.key || index,\n        // @ts-expect-error - it does exist, fix types later\n        size: child?.props?.size ?? (layoutType === \"bubble\" ? 35 : 30),\n        borderRadius: layoutType === \"bubble\" ? \"8px\" : \"0px\",\n      });\n    }\n    return null;\n  });\n  return (\n    <ButtonBarParent\n      key={key}\n      id={id ?? \"\"}\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n      layoutType={layoutType}\n      className={`button-bar ${layoutType} ${className ?? \"\"}`}\n      style={{\n        ...(style ?? {}),\n      }}\n      {...rest}\n    >\n      <FitContent className=\"fit-content\">\n        <ButtonBarInner\n          className={`button-group-inner ${layoutType}`}\n          {...{\n            alignItems,\n            justifyContent,\n            wrap,\n            gap: (gap ?? layoutType === \"bubble\") ? \"0.5rem\" : \"0\",\n            fullWidth,\n            fullHeight,\n          }}\n        >\n          {/* @ts-expect-error - fix later */}\n          {childrenWithKeys}\n        </ButtonBarInner>\n      </FitContent>\n    </ButtonBarParent>\n  );\n}\n\n/**\n * This is a very simple function that turns FabCards into a button bar, you can use this with entities or just normal button elements\n *\n * There's a known problem with the types when you provide an entity name, typescript will complain about the available services, this is something i'll address later * */\nexport function ButtonBar(props: ButtonBarProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ButtonBar\" })}>\n      <InternalButtonBar {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { type EntityName } from \"@hakit/core\";\nimport { type FabCardProps, FabCard } from \"@components\";\n\nexport interface ButtonBarButtonProps<E extends EntityName> extends FabCardProps<E> {\n  /** optional override to determine if the button should render in an active state */\n  active?: boolean;\n  /** hide the bottom border when active */\n  hideActiveBorder?: boolean;\n}\n\nconst DEFAULT_ICON_SIZE = 35;\n\nexport function ButtonBarButton<E extends EntityName>({\n  key,\n  children,\n  active,\n  className,\n  size,\n  cssStyles,\n  borderRadius,\n  hideActiveBorder,\n  ...rest\n}: ButtonBarButtonProps<E>) {\n  return (\n    <FabCard\n      key={key}\n      className={`button-bar-button ${className ?? \"\"} ${hideActiveBorder ? \"hide-active-border\" : \"\"}`}\n      disableScale\n      borderRadius={borderRadius ?? 0}\n      size={size ?? DEFAULT_ICON_SIZE}\n      active={active}\n      cssStyles={`\n        &.button-bar-button {\n          height: auto;\n          &:not(.hide-active-border) {\n            border-bottom: 2px solid transparent;\n            transition: border-bottom-color var(--ha-transition-duration) var(--ha-easing);\n          }\n          \n          .contents {\n            > div {\n              padding: 0.4rem;\n            }\n          }\n          &.active {\n            &:not(.hide-active-border) {\n              border-bottom-color: var(--ha-A400);\n            }\n          }\n        }\n        ${cssStyles ?? \"\"}\n      `}\n      {...rest}\n    >\n      {children}\n    </FabCard>\n  );\n}\n","import { ReactElement, Children, isValidElement, cloneElement, CSSProperties, useMemo } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Row, fallback, ButtonGroupButton, type RowProps } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst ButtonGroupParent = styled(Row)<\n  {\n    thickness: number;\n  } & RowProps\n>`\n  --ha-control-button-group-thickness: ${(props) => props.thickness}px;\n  width: auto;\n  &:not(.maintain-aspect-ratio) {\n    > * {\n      flex: 1;\n      height: 100%;\n      width: 100%;\n    }\n  }\n\n  &.maintain-aspect-ratio {\n    > * {\n      flex-grow: 0;\n    }\n  }\n\n  &:not(.vertical) {\n    height: var(--ha-control-button-group-thickness);\n    &.maintain-aspect-ratio {\n      > * {\n        height: 100%;\n        width: var(--ha-control-button-group-thickness);\n      }\n    }\n  }\n  &.vertical {\n    width: var(--ha-control-button-group-thickness);\n    &.maintain-aspect-ratio {\n      > * {\n        width: 100%;\n        height: var(--ha-control-button-group-thickness);\n      }\n    }\n  }\n`;\n\ntype Orientation = \"vertical\" | \"horizontal\";\nexport interface ButtonGroupProps extends RowProps {\n  /** the orientation of the slider, useful if you want to represent the slider to match your curtain/blind orientation */\n  orientation?: Orientation;\n  /** reverse the direction of the slider, useful if you want the ui to reflect the actual cover */\n  reverse?: boolean;\n  /** the thickness of the buttons @default 100 */\n  thickness?: number;\n  /** This will only accept ButtonGroupButton as a child component */\n  children: ReactElement<typeof ButtonGroupButton> | ReactElement<typeof ButtonGroupButton>[];\n  /** The gap between the buttons  @default '1rem' */\n  gap?: CSSProperties[\"gap\"];\n  /** should the buttons maintain their aspect ratio, disabling this you'll need to control your own dimensions @default true */\n  maintainAspectRatio?: boolean;\n}\n\nfunction InternalButtonGroup({\n  key,\n  orientation = \"vertical\",\n  reverse = false,\n  thickness = 100,\n  children,\n  className,\n  gap = \"1rem\",\n  maintainAspectRatio = true,\n  ...rest\n}: ButtonGroupProps) {\n  const childrenWithKeys = Children.map(children, (child, index) => {\n    if (isValidElement(child)) {\n      return cloneElement(child, {\n        key: child.key || index,\n      });\n    }\n    return child;\n  });\n\n  const _classes = useMemo(() => {\n    return [\n      \"button-group-parent\",\n      className,\n      maintainAspectRatio ? \"maintain-aspect-ratio\" : \"\",\n      reverse ? \"reverse\" : \"\",\n      orientation === \"vertical\" ? \"vertical\" : \"\",\n    ]\n      .filter((x) => !!x)\n      .join(\" \");\n  }, [maintainAspectRatio, className, reverse, orientation]);\n  const flexDirection = useMemo(() => {\n    if (reverse) {\n      return orientation === \"vertical\" ? \"column-reverse\" : \"row-reverse\";\n    }\n    return orientation === \"vertical\" ? \"column\" : \"row\";\n  }, [reverse, orientation]);\n  return (\n    <ButtonGroupParent\n      key={key}\n      {...rest}\n      style={{\n        ...(rest.style || {}),\n        flexDirection,\n      }}\n      gap={gap}\n      thickness={thickness}\n      className={_classes}\n    >\n      {childrenWithKeys}\n    </ButtonGroupParent>\n  );\n}\n\n/** This component will render buttons to control any entity, they can be displayed vertically, horizontally, reversed order and the size, color and icons are all configurable.\n */\nexport function ButtonGroup(props: ButtonGroupProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ButtonGroup\" })}>\n      <InternalButtonGroup {...props} />\n    </ErrorBoundary>\n  );\n}\n","import styled from \"@emotion/styled\";\nimport { Tooltip, fallback, type TooltipProps, Row, Column } from \"@components\";\nimport {\n  useIcon,\n  ON,\n  useEntity,\n  type DomainService,\n  type ServiceData,\n  type ExtractDomain,\n  type HassEntityWithService,\n  type EntityName,\n} from \"@hakit/core\";\nimport { ReactNode, useMemo } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { IconProps } from \"@iconify/react\";\n\nconst Button = styled.button<{\n  borderRadius?: number;\n  activeColor?: string;\n}>`\n  outline: none;\n  cursor: pointer;\n  border: 0;\n  border-radius: ${(props) => props.borderRadius ?? 0.25}rem;\n  background-color: var(--ha-S300);\n  color: var(--ha-S500-contrast);\n  display: flex;\n  flex-shrink: 0;\n  aspect-ratio: 1/1;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);\n  transition: var(--ha-transition-duration) var(--ha-easing);\n  transition-property: transform, background-color, color, box-shadow, opacity;\n  font-size: calc(var(--ha-control-button-group-thickness) / 4);\n  width: 100%;\n  height: 100%;\n  svg {\n    transition: color var(--ha-transition-duration) var(--ha-easing);\n  }\n  &:not(:disabled):hover {\n    background-color: var(--ha-S400);\n  }\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.8;\n  }\n  &.active:not(:disabled) {\n    background-color: ${(props) => props.activeColor ?? \"var(--ha-A400)\"};\n    color: var(--ha-900-contrast);\n    svg {\n      color: var(--ha-900-contrast);\n    }\n    &:hover {\n      background-color: ${(props) => props.activeColor ?? \"var(--ha-A700)\"};\n    }\n  }\n  &:active:not(:disabled):not(.disable-scale-effect) {\n    transform: scale(0.9);\n  }\n`;\n\nexport interface ButtonGroupButtonProps<E extends EntityName> extends Omit<TooltipProps, \"title\" | \"children\" | \"onClick\"> {\n  /** the entity name to render */\n  entity?: E;\n  /** The service name to call\" */\n  service?: DomainService<ExtractDomain<E>>;\n  /** The data to pass to the service */\n  serviceData?: ServiceData<ExtractDomain<E>, DomainService<ExtractDomain<E>>>;\n  /** an optional override for the title for the tooltip */\n  title?: React.ReactNode;\n  /** an optional override for the icon */\n  icon?: string;\n  /** the props for the icon, which includes styles for the icon */\n  iconProps?: Omit<IconProps, \"icon\">;\n  /** a callback when the button is clicked, this will receive the entity with the available services if entity was provided */\n  onClick?: (entity: HassEntityWithService<ExtractDomain<E>> | null) => void;\n  /** optional override to determine if the button should render in an active state */\n  active?: boolean;\n  /** optional override to the button color when active */\n  activeColor?: string;\n  /** show the title */\n  showTitle?: boolean;\n  /** optionally render children within the button */\n  children?: ReactNode;\n  /** should the button render as disabled */\n  disabled?: boolean;\n  /** disableScaleEffect while tapping */\n  disableScaleEffect?: boolean;\n}\n\nfunction InternalButtonGroupButton<E extends EntityName>({\n  entity,\n  onClick,\n  icon,\n  iconProps,\n  title,\n  active,\n  service,\n  serviceData,\n  key,\n  showTitle = false,\n  activeColor,\n  children,\n  disabled,\n  disableScaleEffect = false,\n  style,\n  ...rest\n}: ButtonGroupButtonProps<E>) {\n  const _entity = useEntity(entity ?? \"unknown\", {\n    returnNullIfNotFound: true,\n  });\n  const _icon = useIcon(icon ?? _entity?.attributes?.icon ?? (children ? null : \"mdi:help-circle-outline\"), iconProps);\n  const titleValue = useMemo(() => {\n    return title ?? _entity?.attributes?.friendly_name ?? _entity?.entity_id ?? \"\";\n  }, [_entity, title]);\n  const _active = useMemo(() => {\n    return active ?? _entity?.state === ON;\n  }, [_entity, active]);\n  return (\n    <Tooltip placement=\"left\" title={titleValue} key={key} {...rest}>\n      <Button\n        className={`button-group-button ${showTitle ? \"has-title\" : \"\"} ${_active ? \"active\" : \"\"} ${disableScaleEffect ? \"disable-scale-effect\" : \"\"}`}\n        activeColor={activeColor}\n        disabled={disabled}\n        onClick={() => {\n          // @ts-expect-error - this is fine, entity name, service etc aren't known here\n          if (onClick) onClick(_entity);\n          if (service && _entity) {\n            // @ts-expect-error - this is fine, entity name, service etc aren't known here\n            _entity.service[service](serviceData ?? {});\n          }\n        }}\n        style={style}\n      >\n        {showTitle && (\n          <Column>\n            <Row fullWidth>{_icon}</Row>\n            <Row\n              fullWidth\n              style={{\n                fontSize: \"1.2rem\",\n              }}\n            >\n              {title}\n            </Row>\n          </Column>\n        )}\n        {!showTitle && _icon}\n        {children && children}\n      </Button>\n    </Tooltip>\n  );\n}\n\n/** This component is designed to work with the ButtonGroup as a child component */\nexport function ButtonGroupButton<E extends EntityName>(props: ButtonGroupButtonProps<E>) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ButtonGroupButton\" })}>\n      <InternalButtonGroupButton {...props} />\n    </ErrorBoundary>\n  );\n}\n","import type HlsType from \"hls.js\";\nimport type { ErrorData } from \"hls.js\";\nimport { useRef, useState, useCallback, useEffect } from \"react\";\nimport { Alert } from \"@components\";\nimport { VideoPlayer, type VideoState } from \"./\";\n\ntype HlsLite = Omit<HlsType, \"subtitleTrackController\" | \"audioTrackController\" | \"emeController\">;\n\nexport interface HlsPlayerProps {\n  url: string;\n  posterUrl: string;\n  controls?: boolean;\n  muted?: boolean;\n  autoPlay?: boolean;\n  playsInline?: boolean;\n  onStateChange?: (state: VideoState) => void;\n}\n\nexport function HlsPlayer({\n  url,\n  posterUrl,\n  controls = true,\n  muted = false,\n  autoPlay = false,\n  playsInline = false,\n  onStateChange,\n}: HlsPlayerProps) {\n  const _videoEl = useRef<HTMLVideoElement>(null);\n  const [fatalError, setFatalError] = useState<string | null>(null);\n  const [retryableError, setRetryableError] = useState<string | null>(null);\n  const _hlsPolyfillInstance = useRef<HlsLite | undefined>(undefined);\n  const started = useRef(false);\n\n  const _renderHLSPolyfill = useCallback(async (videoEl: HTMLVideoElement, Hls: typeof HlsType, url: string) => {\n    const hls = new Hls({\n      backBufferLength: 60,\n      fragLoadingTimeOut: 30000,\n      manifestLoadingTimeOut: 30000,\n      levelLoadingTimeOut: 30000,\n      maxLiveSyncPlaybackRate: 2,\n      lowLatencyMode: _isLLHLSSupported(),\n    });\n    _hlsPolyfillInstance.current = hls;\n    hls.attachMedia(videoEl);\n    hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n      setRetryableError(null);\n      setFatalError(null);\n      hls.loadSource(url);\n    });\n    hls.on(Hls.Events.FRAG_LOADED, () => {\n      setRetryableError(null);\n      setFatalError(null);\n    });\n    hls.on(Hls.Events.ERROR, (_event, data: ErrorData) => {\n      // Some errors are recovered automatically by the hls player itself, and the others handled\n      // in this function require special actions to recover. Errors retried in this function\n      // are done with backoff to not cause unecessary failures.\n      if (!data.fatal) {\n        return;\n      }\n      if (data.type === Hls.ErrorTypes.NETWORK_ERROR) {\n        switch (data.details) {\n          case Hls.ErrorDetails.MANIFEST_LOAD_ERROR: {\n            let error = \"Error starting stream, see logs for details\";\n            if (data.response !== undefined && data.response.code !== undefined) {\n              if (data.response.code >= 500) {\n                error += \" (Server failure)\";\n              } else if (data.response.code >= 400) {\n                error += \" (Stream never started)\";\n              } else {\n                error += \" (\" + data.response.code + \")\";\n              }\n            }\n            setRetryableError(error);\n            break;\n          }\n          case Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:\n            setRetryableError(\"Timeout while starting stream\");\n            break;\n          default:\n            setRetryableError(\"Stream network error\");\n            break;\n        }\n        hls.startLoad();\n      } else if (data.type === Hls.ErrorTypes.MEDIA_ERROR) {\n        setRetryableError(\"Error with media stream contents\");\n        hls.recoverMediaError();\n      } else {\n        setFatalError(\"Error playing stream\");\n      }\n    });\n  }, []);\n\n  const _startHls = useCallback(async (): Promise<void> => {\n    if (!_videoEl.current || started.current) {\n      return;\n    }\n    const masterPlaylistPromise = fetch(url);\n    // @ts-expect-error - no need for types\n    const Hls: typeof HlsType = (await import(\"hls.js/dist/hls.light.mjs\")).default;\n    started.current = true;\n\n    let hlsSupported = Hls.isSupported();\n\n    if (!hlsSupported) {\n      hlsSupported = _videoEl.current.canPlayType(\"application/vnd.apple.mpegurl\") !== \"\";\n    }\n\n    if (!hlsSupported) {\n      setFatalError(\"video not supported\");\n      return;\n    }\n\n    const masterPlaylist = await (await masterPlaylistPromise).text();\n\n    // Parse playlist assuming it is a master playlist. Match group 1 is whether hevc, match group 2 is regular playlist url\n    // See https://tools.ietf.org/html/rfc8216 for HLS spec details\n    const playlistRegexp = /#EXT-X-STREAM-INF:.*?(?:CODECS=\".*?(hev1|hvc1)?\\..*?\".*?)?(?:\\n|\\r\\n)(.+)/g;\n    const match = playlistRegexp.exec(masterPlaylist);\n    const matchTwice = playlistRegexp.exec(masterPlaylist);\n\n    // Get the regular playlist url from the input (master) playlist, falling back to the input playlist if necessary\n    // This avoids the player having to load and parse the master playlist again before loading the regular playlist\n    let playlist_url: string;\n    if (match !== null && matchTwice === null) {\n      // Only send the regular playlist url if we match exactly once\n      playlist_url = new URL(match[2], url).href;\n    } else {\n      playlist_url = url;\n    }\n\n    // If codec is HEVC\n    if (Hls.isSupported()) {\n      _renderHLSPolyfill(_videoEl.current, Hls, playlist_url);\n    } else {\n      _renderHLSNative(_videoEl.current, playlist_url);\n    }\n  }, [url, _renderHLSPolyfill]);\n\n  function _isLLHLSSupported(): boolean {\n    // LL-HLS keeps multiple requests in flight, which can run into browser limitations without\n    // an http/2 proxy to pipeline requests. However, a small number of streams active at\n    // once should be OK.\n    // The stream count may be incremented multiple times before this function is called to check\n    // the count e.g. when loading a page with many streams on it. The race can work in our favor\n    // so we now have a better idea on if we'll use too many browser connections later.\n    if ((typeof window !== \"undefined\" && !(\"performance\" in window)) || performance.getEntriesByType(\"resource\").length === 0) {\n      return false;\n    }\n    const perfEntry = performance.getEntriesByType(\"resource\")[0] as PerformanceResourceTiming;\n    return \"nextHopProtocol\" in perfEntry && perfEntry.nextHopProtocol === \"h2\";\n  }\n\n  async function _renderHLSNative(videoEl: HTMLVideoElement, url: string) {\n    videoEl.src = url;\n    videoEl.addEventListener(\"loadedmetadata\", () => {\n      videoEl.play();\n    });\n  }\n\n  useEffect(() => {\n    _startHls();\n  }, [_startHls]);\n\n  if (fatalError) {\n    return <Alert type=\"error\" description={fatalError} />;\n  }\n  if (retryableError) {\n    console.error(retryableError);\n  }\n\n  return (\n    <VideoPlayer\n      ref={_videoEl}\n      type=\"application/vnd.apple.mpegurl\"\n      poster={posterUrl}\n      autoPlay={autoPlay}\n      muted={muted}\n      playsInline={playsInline}\n      controls={controls}\n      onVideoStateChange={onStateChange}\n    />\n  );\n}\n","import { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Alert } from \"@components\";\nimport { useHass, type EntityName, type FilterByDomain } from \"@hakit/core\";\nimport { VideoPlayer, type VideoState } from \"./\";\n\ntype SubscriptionUnsubscribe = () => Promise<void>;\n\nexport interface WebRTCPlayerProps {\n  /** The name of your entity */\n  entity: FilterByDomain<EntityName, \"camera\">;\n  controls?: boolean;\n  muted?: boolean;\n  autoPlay?: boolean;\n  playsInline?: boolean;\n  posterUrl?: string;\n  onStateChange?: (state: VideoState) => void;\n}\n\nexport type WebRtcOfferEvent = WebRtcId | WebRtcAnswer | WebRtcCandidate | WebRtcError;\n\nexport interface WebRtcId {\n  type: \"session\";\n  session_id: string;\n}\n\nexport interface WebRtcAnswer {\n  type: \"answer\";\n  answer: string;\n}\n\nexport interface WebRtcCandidate {\n  type: \"candidate\";\n  candidate: RTCIceCandidateInit;\n}\n\nexport interface WebRtcError {\n  type: \"error\";\n  code: string;\n  message: string;\n}\n\nexport interface WebRTCClientConfiguration {\n  configuration: RTCConfiguration;\n  dataChannel?: string;\n  getCandidatesUpfront: boolean;\n}\n\n/**\n * A WebRTC stream is established by first sending an offer through a signal\n * path via an integration. An answer is returned, then the rest of the stream\n * is handled entirely client side.\n */\nexport function WebRTCPlayer({ entity, controls, muted, autoPlay, playsInline, posterUrl, onStateChange }: WebRTCPlayerProps) {\n  const connection = useHass((store) => store.connection);\n  const _videoEl = useRef<HTMLVideoElement>(null);\n  const [error, setError] = useState<string | undefined>(undefined);\n  const _peerConnection = useRef<RTCPeerConnection | undefined>(undefined);\n  const _remoteStream = useRef<MediaStream | undefined>(undefined);\n  const _sessionId = useRef<string | undefined>(undefined);\n  const _candidatesList = useRef<RTCIceCandidate[]>([]);\n  const _unsub = useRef<Promise<SubscriptionUnsubscribe> | undefined>(undefined);\n  const started = useRef(false);\n  const fetchWebRtcSettings = useCallback(\n    async () =>\n      connection?.sendMessagePromise<WebRTCClientConfiguration>({\n        type: \"camera/webrtc/get_client_config\",\n        entity_id: entity,\n      }),\n    [connection, entity],\n  );\n\n  const cleanUp = () => {\n    if (_remoteStream.current) {\n      _remoteStream.current.getTracks().forEach((track) => {\n        track.stop();\n      });\n\n      _remoteStream.current = undefined;\n    }\n    if (_videoEl.current) {\n      _videoEl.current.removeAttribute(\"src\");\n      _videoEl.current.load();\n    }\n    if (_peerConnection.current) {\n      const peerConnection = _peerConnection.current;\n      peerConnection.close();\n\n      peerConnection.onnegotiationneeded = null;\n      peerConnection.onicecandidate = null;\n      peerConnection.oniceconnectionstatechange = null;\n      peerConnection.onicegatheringstatechange = null;\n      peerConnection.ontrack = null;\n      peerConnection.onsignalingstatechange = null;\n      _peerConnection.current = undefined;\n    }\n    _unsub.current?.then((unsub_call) => unsub_call());\n    _unsub.current = undefined;\n    _sessionId.current = undefined;\n    _candidatesList.current = [];\n  };\n\n  const addTrack = useCallback(\n    async (event: RTCTrackEvent) => {\n      if (!_remoteStream.current || !_videoEl.current) {\n        return;\n      }\n      _remoteStream.current.addTrack(event.track);\n      _videoEl.current.srcObject = _remoteStream.current;\n    },\n    [_remoteStream],\n  );\n\n  // Reference: https://github.com/home-assistant/frontend/blob/7d1ca2acf0a7dcb68ebc69cf2d54c7395455c8e5/src/components/ha-web-rtc-player.ts\n  const _startWebRtc = useCallback(async (): Promise<void> => {\n    if (!connection || !_videoEl.current || started.current) return;\n    started.current = true;\n    setError(undefined);\n    const configuration = await fetchWebRtcSettings();\n    if (!configuration) return;\n    const peerConnection: RTCPeerConnection | undefined = new RTCPeerConnection(configuration.configuration);\n    if (configuration.dataChannel) {\n      // Some cameras (such as nest) require a data channel to establish a stream\n      // however, not used by any integrations.\n      peerConnection.createDataChannel(configuration.dataChannel);\n    }\n\n    const addWebRtcCandidate = (candidateSession: string, candidate: RTCIceCandidateInit) =>\n      connection?.sendMessage({\n        type: \"camera/webrtc/candidate\",\n        entity_id: entity,\n        session_id: candidateSession,\n        candidate: candidate,\n      });\n\n    const startNegotiation = async () => {\n      if (!peerConnection) {\n        return;\n      }\n\n      const offerOptions: RTCOfferOptions = {\n        offerToReceiveAudio: true,\n        offerToReceiveVideo: true,\n      };\n\n      const offer: RTCSessionDescriptionInit = await peerConnection.createOffer(offerOptions);\n\n      if (!peerConnection) {\n        return;\n      }\n\n      await peerConnection.setLocalDescription(offer);\n\n      if (!peerConnection) {\n        return;\n      }\n\n      let candidates = \"\";\n\n      if (configuration?.getCandidatesUpfront) {\n        await new Promise<void>((resolve) => {\n          peerConnection!.onicegatheringstatechange = (ev: Event) => {\n            const iceGatheringState = (ev.target as RTCPeerConnection).iceGatheringState;\n            if (iceGatheringState === \"complete\") {\n              peerConnection!.onicegatheringstatechange = null;\n              resolve();\n            }\n          };\n        });\n\n        if (!peerConnection) {\n          return;\n        }\n      }\n\n      while (_candidatesList.current.length) {\n        const candidate = _candidatesList.current.pop();\n        if (candidate) {\n          candidates += `a=${candidate}\\r\\n`;\n        }\n      }\n\n      const handleAnswer = async (event: WebRtcAnswer) => {\n        if (!_peerConnection.current?.signalingState || [\"stable\", \"closed\"].includes(_peerConnection.current.signalingState)) {\n          return;\n        }\n\n        // Initiate the stream with the remote device\n        const remoteDesc = new RTCSessionDescription({\n          type: \"answer\",\n          sdp: event.answer,\n        });\n        try {\n          await _peerConnection.current.setRemoteDescription(remoteDesc);\n        } catch (err) {\n          if (err instanceof Error) {\n            setError(\"Failed to connect WebRTC stream: \" + err.message);\n          }\n          cleanUp();\n        }\n      };\n\n      const handleOfferEvent = async (event: WebRtcOfferEvent) => {\n        if (event.type === \"session\") {\n          _sessionId.current = event.session_id;\n          _candidatesList.current.forEach((candidate) => addWebRtcCandidate(event.session_id, candidate.toJSON()));\n          _candidatesList.current = [];\n        } else if (event.type === \"answer\") {\n          handleAnswer(event);\n        } else if (event.type === \"candidate\") {\n          try {\n            // The spdMid or sdpMLineIndex is required so set sdpMid=\"0\" if not\n            // sent from the backend.\n            const candidate =\n              event.candidate.sdpMid || event.candidate.sdpMLineIndex != null\n                ? new RTCIceCandidate(event.candidate)\n                : new RTCIceCandidate({\n                    candidate: event.candidate.candidate,\n                    sdpMid: \"0\",\n                  });\n\n            await _peerConnection.current?.addIceCandidate(candidate);\n          } catch (err) {\n            if (err instanceof Error) {\n              setError(err.message);\n            }\n            console.error(err);\n          }\n        } else if (event.type === \"error\") {\n          setError(\"Failed to start WebRTC stream: \" + event.message);\n          cleanUp();\n        }\n      };\n\n      const offer_sdp = offer.sdp! + candidates;\n      try {\n        _unsub.current = connection.subscribeMessage<WebRtcOfferEvent>((event) => handleOfferEvent(event), {\n          type: \"camera/webrtc/offer\",\n          entity_id: entity,\n          offer: offer_sdp,\n        });\n      } catch (err) {\n        if (err instanceof Error) {\n          setError(\"Failed to start WebRTC stream: \" + err.message);\n        }\n        cleanUp();\n      }\n    };\n\n    peerConnection.onnegotiationneeded = startNegotiation;\n\n    const handleIceCandidate = (event: RTCPeerConnectionIceEvent) => {\n      if (!event.candidate?.candidate) {\n        return;\n      }\n      if (_sessionId.current) {\n        addWebRtcCandidate(_sessionId.current, event.candidate.toJSON());\n      } else {\n        _candidatesList.current.push(event.candidate);\n      }\n    };\n    peerConnection.onicecandidate = handleIceCandidate;\n\n    const iceConnectionStateChanged = () => {\n      if (peerConnection?.iceConnectionState === \"failed\") {\n        peerConnection.restartIce();\n      }\n    };\n    peerConnection.oniceconnectionstatechange = iceConnectionStateChanged;\n\n    // just for debugging\n    peerConnection.onsignalingstatechange = (ev) => {\n      switch ((ev.target as RTCPeerConnection).signalingState) {\n        case \"stable\":\n          console.log(\"WebRTC ICE Negotiation complete\");\n          break;\n        default:\n          console.log(`WebRTC signaling state changed: ${(ev.target as RTCPeerConnection).signalingState}`);\n      }\n    };\n\n    // Setup callbacks to render remote stream once media tracks are discovered.\n    _remoteStream.current = new MediaStream();\n    peerConnection.ontrack = addTrack;\n\n    peerConnection.addTransceiver(\"audio\", { direction: \"recvonly\" });\n    peerConnection.addTransceiver(\"video\", { direction: \"recvonly\" });\n\n    _peerConnection.current = peerConnection;\n  }, [fetchWebRtcSettings, addTrack, connection, entity]);\n\n  useEffect(() => {\n    _startWebRtc();\n  }, [_startWebRtc]);\n\n  useEffect(() => {\n    const localVideo = _videoEl.current;\n    return () => {\n      if (_remoteStream.current) {\n        _remoteStream.current.getTracks().forEach((track) => {\n          track.stop();\n        });\n        _remoteStream.current = undefined;\n      }\n      if (localVideo) {\n        localVideo.removeAttribute(\"src\");\n        localVideo.load();\n      }\n      if (_peerConnection.current) {\n        _peerConnection.current.close();\n        _peerConnection.current = undefined;\n      }\n    };\n  }, []);\n\n  if (error) {\n    return <Alert type=\"error\" description={error} />;\n  }\n\n  return (\n    <VideoPlayer\n      ref={_videoEl}\n      poster={posterUrl}\n      autoPlay={autoPlay}\n      muted={muted}\n      playsInline={playsInline}\n      controls={controls}\n      onVideoStateChange={onStateChange}\n    />\n  );\n}\n","import { STREAM_TYPE_WEB_RTC, STREAM_TYPE_HLS, useCamera, localize } from \"@hakit/core\";\nimport type { FilterByDomain, EntityName } from \"@hakit/core\";\nimport { HlsPlayer } from \"../players/hls\";\nimport { WebRTCPlayer } from \"../players/webrtc\";\nimport type { VideoState } from \"../players\";\nexport interface CameraStreamProps {\n  /** The name of your entity */\n  entity: FilterByDomain<EntityName, \"camera\">;\n  /** if the player should start muted @default false */\n  muted?: boolean;\n  /** if the player should show the controls @default true */\n  controls?: boolean;\n  /** if the player should play inline @default false */\n  playsInline?: boolean;\n  /** if the player should start playing automatically @default false */\n  autoPlay?: boolean;\n  /** called whenever the video changes state, not every listener is available, but most of the important listeners are supported */\n  onStateChange?: (state: VideoState) => void;\n}\n\n/**\n * A Simple wrapper for HLS and WEBRTC to display a live feed of your camera entity.\n * This component will not render anything if your camera does not support HLS or WEBRTC */\nexport function CameraStream({\n  entity,\n  muted = false,\n  controls = true,\n  autoPlay = false,\n  playsInline = false,\n  onStateChange,\n}: CameraStreamProps) {\n  const camera = useCamera(entity);\n  const { stream, poster, mjpeg } = camera;\n  if (mjpeg.shouldRenderMJPEG && mjpeg.url) {\n    return <img src={mjpeg.url} alt={`${localize(\"camera_view\")} \"${camera.attributes.friendly_name ?? camera.entity_id}\".`} />;\n  }\n  if (camera.frontend_stream_types.includes(STREAM_TYPE_WEB_RTC)) {\n    return (\n      <WebRTCPlayer\n        autoPlay={autoPlay}\n        playsInline={playsInline}\n        muted={muted}\n        controls={controls}\n        entity={entity}\n        onStateChange={onStateChange}\n        posterUrl={poster.url}\n      />\n    );\n  }\n  if (camera.frontend_stream_types.includes(STREAM_TYPE_HLS)) {\n    return (\n      !poster.loading &&\n      poster.url &&\n      !stream.loading &&\n      stream.url && (\n        <HlsPlayer\n          autoPlay={autoPlay}\n          muted={muted}\n          controls={controls}\n          playsInline={playsInline}\n          posterUrl={poster.url}\n          onStateChange={onStateChange}\n          url={stream.url}\n        />\n      )\n    );\n  }\n\n  return null;\n}\n","import type { EntityName, FilterByDomain, CameraEntityExtended } from \"@hakit/core\";\nimport { useCamera, useHass, isUnavailableState, STREAM_TYPE_WEB_RTC, STREAM_TYPE_HLS, localize } from \"@hakit/core\";\nimport styled from \"@emotion/styled\";\nimport { useEffect, useCallback, useRef, useState, useMemo, Children, isValidElement, cloneElement } from \"react\";\nimport {\n  PreloadImage,\n  fallback,\n  Row,\n  FabCard,\n  ButtonBar,\n  ButtonBarProps,\n  ButtonBarButton,\n  ButtonBarButtonProps,\n  CardBase,\n  type AvailableQueries,\n  type CardBaseProps,\n} from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { CameraStream } from \"./stream\";\nimport { type VideoState } from \"./players\";\nimport { Icon } from \"@iconify/react\";\n\ntype OmitProperties = \"onClick\" | \"children\" | \"active\" | \"as\" | \"title\" | \"ref\" | \"disableActiveState\" | \"features\";\n\ntype Extendable = Omit<CardBaseProps<\"div\", FilterByDomain<EntityName, \"camera\">>, OmitProperties>;\nexport interface CameraCardProps<E extends FilterByDomain<EntityName, \"camera\">> extends Extendable {\n  /** the camera entity to display */\n  entity: E;\n  /** override the camera name displayed in the card */\n  name?: string;\n  /** hide the camera name @default false */\n  hideName?: boolean;\n  /** the view to display the camera in, poster is an image that updated based on the\n   * specified interval, live is a live stream if supported and motion is a motion jpeg\n   * (automatically selected if live stream not supported) @default 'poster' */\n  view?: \"poster\" | \"live\" | \"motion\";\n  /** auto play the video stream */\n  autoPlay?: boolean;\n  /** mute the video player  @default true */\n  muted?: boolean;\n  /** enable / disable the controls for the player @default false */\n  controls?: boolean;\n  /** tells the video player to play inline @default true */\n  playsInline?: boolean;\n  /** the refresh rate for the poster image when in poster view @default 10000 */\n  posterUpdateInterval?: number;\n  /** sensors to render in the header of the card */\n  headerSensors?: ButtonBarProps[\"children\"];\n  /** hide the footer of the card, this will hide all sensors @default false */\n  hideFooter?: boolean;\n  /** hide the view controls @default false */\n  hideViewControls?: boolean;\n  /** fired when the card is clicked, this will provide the camera with all extended data */\n  onClick?: (camera: CameraEntityExtended, event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}\n\nconst Header = styled(Row)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  padding: 0.5rem;\n  z-index: 1;\n`;\n\nconst StateFabCard = styled(FabCard)`\n  box-shadow: 0px 2px 4px rgba(255, 255, 255, 0.1);\n  border-radius: 10px;\n  .icon {\n    background-color: ${(props) => (props.active ? `rgba(255,255,255,0.8)` : `rgba(255,255,255,0.5)`)};\n\n    color: ${(props) => (props.active ? `rgba(0, 0, 0, 1)` : `rgba(0, 0, 0, 0.4)`)};\n    &:not(:disabled):hover {\n      background-color: ${(props) => (props.active ? `rgba(255,255,255,0.8)` : `rgba(255,255,255,0.5)`)};\n    }\n  }\n`;\n\nconst Wrapper = styled(CardBase)`\n  aspect-ratio: 16/9;\n`;\n\nconst CameraName = styled.div`\n  color: var(--ha-500-contrast);\n  background-color: hsla(var(--ha-h), calc(var(--ha-s) * 1%), 10%, 0.6);\n  padding: 0.5rem;\n  border-radius: 0.4rem;\n`;\n\nconst Footer = styled(Row)`\n  padding: 0.5rem;\n  color: var(--ha-500-contrast);\n  background-color: hsla(var(--ha-h), calc(var(--ha-s) * 1%), 10%, 0.6);\n  transition: color var(--ha-transition-duration) var(--ha-easing);\n  position: absolute;\n  inset: auto 0 0 0;\n  font-weight: bold;\n  font-size: 1.2rem;\n  z-index: 1;\n`;\n\nconst StyledIcon = styled(Icon)`\n  opacity: 1;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 2rem;\n`;\n\nconst DEFAULT_ICON_BUTTON_SIZE = 40;\n\nfunction InternalCameraCard<E extends FilterByDomain<EntityName, \"camera\">>({\n  entity,\n  view = \"poster\",\n  autoPlay = true,\n  muted = true,\n  controls = false,\n  playsInline = true,\n  posterUpdateInterval = 10000,\n  className,\n  name,\n  hideName,\n  headerSensors,\n  hideFooter,\n  hideViewControls,\n  onClick,\n  service,\n  serviceData,\n  cssStyles,\n  key,\n  ...rest\n}: CameraCardProps<E>) {\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const cameraUpdater = useRef<NodeJS.Timeout | undefined>(undefined);\n  const loadingIconRef = useRef<SVGSVGElement | null>(null);\n  const stateValueRef = useRef<HTMLDivElement | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [_view, setView] = useState(view);\n  const camera = useCamera(entity, {\n    // stream loading handled internally on the stream component\n    stream: false,\n    poster: _view === \"poster\",\n  });\n  const { poster, mjpeg } = camera;\n  const isUnavailable = isUnavailableState(camera.state);\n\n  const supportsLiveStream =\n    camera.frontend_stream_types.includes(STREAM_TYPE_WEB_RTC) || camera.frontend_stream_types.includes(STREAM_TYPE_HLS);\n\n  const _stopUpdateCameraInterval = (): void => {\n    if (cameraUpdater.current) {\n      clearInterval(cameraUpdater.current);\n      cameraUpdater.current = undefined;\n    }\n  };\n\n  const _startUpdateCameraInterval = useCallback((): void => {\n    _stopUpdateCameraInterval();\n    cameraUpdater.current = setInterval(() => poster.refresh(), posterUpdateInterval);\n  }, [poster, posterUpdateInterval]);\n\n  useEffect(() => {\n    return () => {\n      _stopUpdateCameraInterval();\n    };\n  }, []);\n\n  useEffect(() => {\n    if (view === \"poster\") {\n      _startUpdateCameraInterval();\n    }\n  }, [view, _startUpdateCameraInterval]);\n\n  useEffect(() => {\n    if (view) {\n      setView(view);\n    }\n  }, [view]);\n\n  const onImageLoad = useCallback(() => {\n    setLoading(false);\n  }, []);\n\n  const onImageLoading = useCallback(() => {\n    setLoading(true);\n  }, []);\n\n  const onVideoStateChange = useCallback((state: VideoState) => {\n    if (stateValueRef.current !== null) {\n      if (state === \"canplay\" || state === \"canplaythrough\") {\n        stateValueRef.current.innerText = \"ready\";\n      } else if (state === \"play\" || state === \"playing\") {\n        stateValueRef.current.innerText = \"playing\";\n      } else {\n        stateValueRef.current.innerText = state;\n      }\n    }\n    if (loadingIconRef.current) {\n      loadingIconRef.current.style.opacity = state === \"waiting\" || state === \"stalled\" ? \"1\" : \"0\";\n    }\n  }, []);\n\n  const viewButtons = useMemo(() => {\n    const buttons: ButtonBarProps[\"children\"] = [];\n    if (supportsLiveStream) {\n      buttons.push(\n        <ButtonBarButton\n          key=\"live\"\n          icon=\"mdi:video\"\n          size={DEFAULT_ICON_BUTTON_SIZE}\n          disabled={isUnavailable}\n          onClick={() => {\n            setView(\"live\");\n          }}\n          active={_view === \"live\"}\n          title={localize(\"preload_camera_stream\")}\n          tooltipPlacement=\"top\"\n          rippleProps={{\n            preventPropagation: true,\n          }}\n        />,\n      );\n    }\n    buttons.push(\n      ...([\n        <ButtonBarButton\n          key=\"motion\"\n          icon=\"mdi:video-image\"\n          size={DEFAULT_ICON_BUTTON_SIZE}\n          disabled={isUnavailable}\n          onClick={() => {\n            setView(\"motion\");\n          }}\n          active={_view === \"motion\"}\n          title={`${localize(\"motion\")} ${localize(\"view\")}`}\n          tooltipPlacement=\"top\"\n          rippleProps={{\n            preventPropagation: true,\n          }}\n        />,\n        <ButtonBarButton\n          key=\"poster\"\n          icon=\"el:picture\"\n          size={DEFAULT_ICON_BUTTON_SIZE}\n          disabled={isUnavailable}\n          onClick={() => {\n            setView(\"poster\");\n          }}\n          active={_view === \"poster\"}\n          title={`${localize(\"image\")} ${localize(\"view\")}`}\n          tooltipPlacement=\"top\"\n          rippleProps={{\n            preventPropagation: true,\n          }}\n        />,\n      ] satisfies ButtonBarProps[\"children\"]),\n    );\n    return buttons;\n  }, [supportsLiveStream, isUnavailable, _view]);\n\n  const cameraName = useMemo(() => name ?? camera.attributes.friendly_name ?? camera.entity_id, [name, camera]);\n\n  return (\n    <>\n      <Wrapper\n        key={key}\n        entity={entity}\n        // @ts-expect-error - don't know the entity name, so we can't know the service type\n        service={service}\n        // @ts-expect-error - don't know the entity name, so we can't know the service data\n        serviceData={serviceData}\n        disableActiveState\n        title={cameraName}\n        className={`camera-card ${className ?? \"\"}`}\n        onClick={(event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n          if (onClick) onClick(camera, event);\n        }}\n        cssStyles={`\n          ${globalComponentStyle.cameraCard ?? \"\"}\n          ${cssStyles ?? \"\"}\n        `}\n        {...rest}\n      >\n        <Header justifyContent=\"space-between\" gap=\"0.5rem\">\n          <Row justifyContent=\"flex-start\" gap=\"0.5rem\">\n            <StateFabCard active borderRadius={10} disableScale size={30} noIcon>\n              <div ref={stateValueRef}>{loading || _view === \"live\" ? localize(\"loading\") : camera.state}</div>\n            </StateFabCard>\n          </Row>\n          {isUnavailable && (\n            <CameraName>\n              {localize(\"unavailable\")} {camera.entity_id}\n            </CameraName>\n          )}\n          {!hideName && <CameraName>{cameraName}</CameraName>}\n        </Header>\n        {!hideFooter && (\n          <Footer justifyContent=\"space-between\" gap=\"0.5rem\" wrap=\"nowrap\">\n            {headerSensors && (\n              <ButtonBar layoutType=\"bubble\" gap=\"0.5rem\">\n                {/* @ts-expect-error E doesn't extend EntityName, it's filtered by camera name and we can't really fix that here */}\n                {Children.map(headerSensors, (child, index) => {\n                  if (isValidElement<ButtonBarButtonProps<EntityName>>(child)) {\n                    return cloneElement(child, {\n                      key: child.key || index,\n                      size: child.props.size ?? DEFAULT_ICON_BUTTON_SIZE,\n                      rippleProps: {\n                        preventPropagation: true,\n                        ...(child?.props?.rippleProps ?? {}),\n                        key: child.key || index,\n                      },\n                    });\n                  }\n                  return child;\n                })}\n              </ButtonBar>\n            )}\n            {!hideViewControls && (\n              <ButtonBar gap=\"0.5rem\" layoutType=\"bubble\">\n                {viewButtons}\n              </ButtonBar>\n            )}\n          </Footer>\n        )}\n        {_view !== \"live\" && (poster.url || mjpeg.url) && (\n          <PreloadImage\n            onLoad={onImageLoad}\n            onLoading={onImageLoading}\n            src={_view === \"motion\" && mjpeg.url ? mjpeg.url : (poster.url ?? \"\")}\n            style={{\n              width: \"100%\",\n              height: \"100%\",\n              position: \"absolute\",\n            }}\n            lazy\n          />\n        )}\n        {_view === \"live\" && (\n          <>\n            <StyledIcon ref={loadingIconRef} icon=\"eos-icons:three-dots-loading\" />\n            <CameraStream\n              autoPlay={autoPlay}\n              muted={muted}\n              controls={controls}\n              playsInline={playsInline}\n              onStateChange={onVideoStateChange}\n              entity={entity}\n            />\n          </>\n        )}\n      </Wrapper>\n    </>\n  );\n}\n\n/**\n * The CameraCard is a card to display a live stream, poster image that refreshes at a specified interval or a motion jpeg stream.\n *\n * By Default, it will load a poster image and refresh it at a specified interval, if you want to use the live stream you can set the view to live or motion.\n *\n * This supports HLS, WebRTC and MJPEG streams, the WebRTC implementation hasn't been tested so if you're using WebRTC and it's not working for you please create an [issue request](https://github.com/shannonhochkins/ha-component-kit/issues).\n *\n * It also supports additional entities to render on the card such is motion detection, vehicle detection if you have entities that have additional data you can display them in the card easily.\n *\n * This is one of the first components that i have NOT got a complete demo working, as you can imagine setting up a live stream, motion image and refreshable poster image is a difficult and time expensive task, so you'll have to try it out to explore it's wonders :)\n *\n * Note: If you want to just use the stream, you can also import CameraStream from @hakit/components to use the stream as a video player element.\n * */\nexport function CameraCard<E extends FilterByDomain<EntityName, \"camera\">>(props: CameraCardProps<E>) {\n  const defaultColumns: AvailableQueries = {\n    xxs: 12,\n    xs: 6,\n    sm: 6,\n    md: 4,\n    lg: 4,\n    xlg: 3,\n  };\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"CameraCard\" })}>\n      <InternalCameraCard {...defaultColumns} {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { HassEntity } from \"home-assistant-js-websocket\";\nimport styled from \"@emotion/styled\";\nimport { Row, fallback } from \"@components\";\nimport { css } from \"@emotion/react\";\nimport { useCallback, ComponentPropsWithoutRef } from \"react\";\nimport {\n  useLogs,\n  useDevice,\n  useHass,\n  computeDomain,\n  createHistoricState,\n  localizeStateMessage,\n  localizeTriggerSource,\n  timeAgo,\n  ON,\n  type LogbookEntry,\n  type EntityName,\n  type UseLogOptions,\n  localize,\n} from \"@hakit/core\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst Wrapper = styled.div`\n  --divider-color: rgba(225, 225, 225, 0.12);\n  display: block;\n  height: 100%;\n  width: 100%;\n\n  .entry-container {\n    width: 100%;\n  }\n\n  .entry {\n    position: relative;\n    display: flex;\n    width: 100%;\n    line-height: 1.6rem;\n    padding: 0.5rem 1rem;\n    box-sizing: border-box;\n    border-top: 1px solid var(--divider-color);\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .indicator {\n    background-color: var(--disabled-color);\n    height: 0.5rem;\n    width: 0.5rem;\n    border-radius: 0.25rem;\n    flex-shrink: 0;\n    margin-right: 0.7rem;\n    margin-inline-start: initial;\n    margin-inline-end: 0.7rem;\n  }\n\n  .entry:hover {\n    background-color: rgba(0, 0, 0, 0.12);\n  }\n\n  .message-relative_time {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .secondary {\n    font-size: 0.8rem;\n    line-height: 1.7;\n    display: flex;\n    gap: 0.25rem;\n  }\n\n  .secondary a {\n    color: var(--ha-S300-contrast);\n  }\n\n  .date {\n    margin: 0.5rem 0;\n    padding: 0 1rem;\n  }\n\n  .icon-message {\n    display: flex;\n    align-items: center;\n  }\n\n  .no-entries {\n    text-align: center;\n    color: var(--ha-S300-contrast);\n    width: 100%;\n    display: block;\n    padding: 0.5rem;\n  }\n\n  .message {\n    color: var(--ha-S100-contrast);\n    span {\n      padding-right: 0.15rem;\n    }\n  }\n\n  .message span:first-of-type {\n    &:first-letter {\n      text-transform: capitalize;\n    }\n  }\n\n  button.link {\n    color: var(--ha-A100);\n    text-decoration: none;\n    background: 0px 0px;\n    border: none;\n    padding: 0px;\n    font: inherit;\n    text-align: left;\n    text-decoration: underline;\n    cursor: pointer;\n    outline: 0px;\n    margin-right: 0.15rem;\n  }\n`;\n\nconst triggerDomains = [\"script\", \"automation\"];\n\nconst hasContext = (item: LogbookEntry) => item.context_event_type || item.context_state || item.context_message;\nconst stripEntityId = (message: string, entityId?: string) => (entityId ? message.replace(entityId, \" \") : message);\n\nexport interface LogBookRendererProps extends ComponentPropsWithoutRef<\"div\"> {\n  /** the entity id to retrieve log information */\n  entity: EntityName;\n  /** options to pass to the useLog hook */\n  options?: UseLogOptions;\n  /** hide the header with the show more button @default false */\n  hideHeader?: boolean;\n  /** Whether to show an indicator next to each log row. @default false */\n  hideIndicator?: boolean;\n}\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n\nfunction InternalLogBookRenderer({\n  entity,\n  hideIndicator = false,\n  hideHeader = false,\n  options,\n  className,\n  cssStyles,\n  id,\n  style,\n  ...rest\n}: LogBookRendererProps): React.ReactNode {\n  const logs = useLogs(entity, options);\n  const { joinHassUrl } = useHass.getState().helpers;\n  const entities = useHass((state) => state.entities);\n  const services = useHass((state) => state.services);\n  const language = useHass((state) => state.config?.language);\n  const device = useDevice(entity);\n\n  const _entityClicked = useCallback(\n    async (entityId: string | undefined) => {\n      if (!entityId) {\n        return;\n      }\n      if (device && device.device_id && typeof window !== \"undefined\") {\n        window.open(joinHassUrl(`config/devices/device/${device.device_id}`), \"_blank\");\n      }\n    },\n    [device, joinHassUrl],\n  );\n\n  const showMoreLogs = useCallback(() => {\n    if (typeof window === \"undefined\") return;\n    window.open(joinHassUrl(`/logbook?entity_id=${entity}`), \"_blank\");\n  }, [entity, joinHassUrl]);\n\n  const _renderEntity = useCallback(\n    (entityId: string | undefined, entityName: string | undefined) => {\n      const hasState = entityId && entityId in entities;\n      const displayName = entityName || (hasState ? entities[entityId].attributes.friendly_name || entityId : entityId);\n      if (!hasState) {\n        return <span className=\"entity-name\">{displayName}</span>;\n      }\n      return (\n        <button className=\"link entity-name\" onClick={() => _entityClicked(entityId)}>\n          {displayName}\n        </button>\n      );\n    },\n    [entities, _entityClicked],\n  );\n\n  // 9:15:24 PM || 21:15:24\n  const formatTimeWithSecondsMem = useCallback(\n    (dateObj: Date) =>\n      new Intl.DateTimeFormat(\"en-US\", {\n        hour: \"numeric\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        hourCycle: \"h12\",\n      }).format(dateObj),\n    [],\n  );\n\n  const _formatMessageWithPossibleEntity = useCallback(\n    (message: string, seenEntities: string[], possibleEntity?: string) => {\n      //\n      // As we are looking at a log(book), we are doing entity_id\n      // \"highlighting\"/\"colorizing\". The goal is to make it easy for\n      // the user to access the entity that caused the event.\n      //\n      // If there is an entity_id in the message that is also in the\n      // state machine, we search the message for the entity_id and\n      // replace it with _renderEntity\n      //\n      if (message.indexOf(\".\") !== -1) {\n        const messageParts = message.split(\" \");\n        for (let i = 0, size = messageParts.length; i < size; i++) {\n          if (messageParts[i] in entities) {\n            const entityId = messageParts[i];\n            if (seenEntities.includes(entityId)) {\n              return null;\n            }\n            seenEntities.push(entityId);\n            const messageEnd = messageParts.splice(i);\n            messageEnd.shift(); // remove the entity\n            return (\n              <>\n                <span className=\"triggered-by-state\">{messageParts.join(\" \")}</span>\n                {_renderEntity(entityId, entities[entityId].attributes.friendly_name)}\n                <span className=\"message-suffix\">{messageEnd.join(\" \")}</span>\n              </>\n            );\n          }\n        }\n      }\n      //\n      // When we have a message that has a specific entity_id attached to\n      // it, and the entity_id is not in the message, we look\n      // for the friendly name of the entity and replace that with\n      // _renderEntity if its there so the user can quickly get to\n      // that entity.\n      //\n      if (possibleEntity && possibleEntity in entities) {\n        const possibleEntityName = entities[possibleEntity].attributes.friendly_name;\n        if (possibleEntityName && message.endsWith(possibleEntityName)) {\n          if (seenEntities.includes(possibleEntity)) {\n            return null;\n          }\n          seenEntities.push(possibleEntity);\n          message = message.substring(0, message.length - possibleEntityName.length);\n          return (\n            <>\n              <span className=\"message-entity\">{message}</span>\n              {_renderEntity(possibleEntity, possibleEntityName)}\n            </>\n          );\n        }\n      }\n      return <span className=\"message-entity\">{message}</span>;\n    },\n    [entities, _renderEntity],\n  );\n\n  const formatDateMem = useCallback(\n    (dateObject: Date) =>\n      new Intl.DateTimeFormat(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        timeZone: undefined,\n      }).format(dateObject),\n    [],\n  );\n\n  const _renderIndicator = useCallback((item: LogbookEntry) => {\n    const style = {\n      backgroundColor: item.state === ON ? `var(--ha-A400)` : `var(--ha-S300-contrast)`,\n    };\n    return <div className=\"indicator\" style={style}></div>;\n  }, []);\n\n  const _renderUnseenContextSourceEntity = useCallback(\n    (item: LogbookEntry, seenEntityIds: string[]) => {\n      if (!item.context_entity_id || seenEntityIds.includes(item.context_entity_id!)) {\n        return \"\";\n      }\n      // We don't know what caused this entity\n      // to be included since its an integration\n      // described event.\n      return <>({_renderEntity(item.context_entity_id, item.context_entity_id_name)})</>;\n    },\n    [_renderEntity],\n  );\n\n  const _renderContextMessage = useCallback(\n    (item: LogbookEntry, seenEntityIds: string[]) => {\n      // State change\n      if (item.context_state) {\n        const historicStateObj =\n          item.context_entity_id && item.context_entity_id in entities\n            ? createHistoricState(entities[item.context_entity_id], item.context_state)\n            : undefined;\n        return (\n          <>\n            <span className=\"triggered-by\">{localize(\"triggered_by_state_of\")}</span>\n            {_renderEntity(item.context_entity_id, item.context_entity_id_name)}\n            <span>\n              {historicStateObj\n                ? localizeStateMessage(item.context_state, historicStateObj, computeDomain(item.context_entity_id as EntityName))\n                : item.context_state}\n            </span>\n          </>\n        );\n      }\n      // Service call\n      if (item.context_event_type === \"call_service\") {\n        return (\n          <>\n            <span className=\"triggered-by\">{localize(\"triggered_by_action\")}</span>\n            {item.context_domain && item.context_service ? (\n              <span className=\"service-trigger-details\">\n                {item.context_domain}:{\" \"}\n                {services ? services[item.context_domain]?.[item.context_service]?.name || item.context_service : item.context_service}\n              </span>\n            ) : null}\n          </>\n        );\n      }\n      if (!item.context_message || seenEntityIds.includes(item.context_entity_id!)) {\n        return null;\n      }\n      // Automation or script\n      if (item.context_event_type === \"automation_triggered\" || item.context_event_type === \"script_started\") {\n        // context_source is available in 2022.6 and later\n        const triggerMsg = item.context_source ? item.context_source : item.context_message.replace(\"triggered by \", \"\");\n        const contextTriggerSource = localizeTriggerSource(triggerMsg);\n        return (\n          <>\n            <span className=\"triggered-by\">\n              {localize(item.context_event_type === \"automation_triggered\" ? \"triggered_by_automation\" : \"triggered_by_script\")}\n            </span>\n            {_renderEntity(item.context_entity_id, item.context_entity_id_name)}\n            {item.context_message ? _formatMessageWithPossibleEntity(contextTriggerSource, seenEntityIds, undefined) : null}\n          </>\n        );\n      }\n      // Generic externally described logbook platform\n      // These are not localizable\n      return (\n        <>\n          <span className=\"triggered-by\">{localize(\"triggered_by\")}</span>\n          <span className=\"trigger-name\">{item.context_name}</span>\n          {_formatMessageWithPossibleEntity(item.context_message, seenEntityIds, item.context_entity_id)}\n          {_renderUnseenContextSourceEntity(item, seenEntityIds)}\n        </>\n      );\n    },\n    [_formatMessageWithPossibleEntity, _renderEntity, _renderUnseenContextSourceEntity, entities, services],\n  );\n\n  const _renderMessage = useCallback(\n    (item: LogbookEntry, seenEntityIds: string[], domain?: string, historicStateObj?: HassEntity) => {\n      if (item.entity_id) {\n        if (item.state) {\n          return (\n            <span className=\"message-state\">\n              {historicStateObj ? localizeStateMessage(item.state, historicStateObj, domain!) : item.state}\n            </span>\n          );\n        }\n      }\n\n      const itemHasContext = hasContext(item);\n      let message = item.message;\n      if (triggerDomains.includes(domain!) && item.source) {\n        if (itemHasContext) {\n          // These domains include the trigger source in the message\n          // but if we have the context we want to display that instead\n          // as otherwise we display duplicate triggers\n          return null;\n        }\n        message = item.source;\n      }\n      return message\n        ? _formatMessageWithPossibleEntity(\n            itemHasContext ? stripEntityId(message, item.context_entity_id) : message,\n            seenEntityIds,\n            undefined,\n          )\n        : null;\n    },\n    [_formatMessageWithPossibleEntity],\n  );\n  const _renderLogbookItem = useCallback(\n    (item: LogbookEntry, index: number) => {\n      if (!item || index === undefined) {\n        return null;\n      }\n      const previous = logs[index - 1] as LogbookEntry | undefined;\n      const seenEntityIds: string[] = [];\n      const currentStateObj = item.entity_id ? entities[item.entity_id] : undefined;\n      const historicStateObj = currentStateObj ? createHistoricState(currentStateObj, item.state!) : undefined;\n      const domain = item.entity_id\n        ? computeDomain(item.entity_id as EntityName)\n        : // Domain is there if there is no entity ID.\n          item.domain!;\n      const then = new Date(item.when * 1000);\n      const relativeTime = timeAgo(then, language);\n\n      return (\n        <div key={index} className=\"entry-container\">\n          {index === 0 ||\n          (item?.when && previous?.when && new Date(item.when * 1000).toDateString() !== new Date(previous.when * 1000).toDateString()) ? (\n            <h4 className=\"date\">{formatDateMem(new Date(item.when * 1000))}</h4>\n          ) : null}\n\n          <div className={`entry ${!item.entity_id ? \"no-entity\" : \"\"}`}>\n            <div className=\"icon-message\">\n              {!hideIndicator ? _renderIndicator(item) : \"\"}\n              <div className=\"message-relative_time\">\n                <div className=\"message\">\n                  {_renderMessage(item, seenEntityIds, domain, historicStateObj)}\n                  {_renderContextMessage(item, seenEntityIds)}\n                </div>\n                <div className=\"secondary\">\n                  <span>{formatTimeWithSecondsMem(new Date(item.when * 1000))}</span>-<span className=\"relative-time\">{relativeTime}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    },\n    [\n      _renderContextMessage,\n      _renderIndicator,\n      _renderMessage,\n      entities,\n      formatDateMem,\n      formatTimeWithSecondsMem,\n      logs,\n      hideIndicator,\n      language,\n    ],\n  );\n\n  return (\n    <Wrapper\n      id={id ?? \"\"}\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n      className={`logbook-renderer ${className ?? \"\"}`}\n      style={{\n        ...(style ?? {}),\n      }}\n      {...rest}\n    >\n      {!logs.length ? (\n        <span className=\"no-entries\">{localize(\"no_activity_found\")}</span>\n      ) : (\n        <Header>\n          {!hideHeader && (\n            <Row fullWidth justifyContent=\"space-between\">\n              <h3>{localize(\"activity\")}</h3>\n              <button className=\"link\" onClick={showMoreLogs}>\n                {localize(\"show_more\")}\n              </button>\n            </Row>\n          )}\n          {logs.map((log, index) => {\n            return _renderLogbookItem(log, index);\n          })}\n        </Header>\n      )}\n    </Wrapper>\n  );\n}\n\n/** A component to render logs for an entity as a list, the list is updated automatically via a websocket listening to updates for the entity.\n * This is currently used for all popups for the cards and accessible via the button next to the close button. */\nexport function LogBookRenderer(props: LogBookRendererProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"LogBookRenderer\" })}>\n      <InternalLogBookRenderer {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { Column, FabCard, Row, fallback, mq } from \"@components\";\nimport { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled\";\nimport { localize, useHass } from \"@hakit/core\";\nimport { Fragment, ReactNode, memo, useCallback, useEffect, useId, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { useKeyPress } from \"react-use\";\n\nconst ModalContainer = styled.div`\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  left: 50%;\n  display: flex;\n  width: var(--ha-modal-width);\n  margin-left: calc(var(--ha-modal-width) / -2);\n  transform: translateY(-50%);\n  color: var(--ha-S50-contrast);\n  max-height: calc(100% - 4rem);\n  overflow: hidden;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: space-between;\n  background-color: var(--ha-S200);\n  z-index: var(--ha-modal-z-index);\n  opacity: 0;\n  transition: opacity var(--ha-transition-duration) var(--ha-easing);\n  box-shadow: 0px 0px 10px hsla(var(--ha-h), calc(var(--ha-50-s) * 0.8), 3%, 0.6);\n  ${mq(\n    [\"xxs\", \"xs\"],\n    `\n    max-width: 95vw;\n    margin-left: calc(95vw / -2);\n  `,\n  )}\n`;\nconst ModalInner = styled.div`\n  display: flex;\n  padding: 0rem 1rem 2rem;\n  align-items: flex-start;\n  flex-direction: column;\n`;\nconst ModalOverflow = styled.div`\n  overflow-x: hidden;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  margin-top: 5rem;\n  justify-content: flex-start;\n  align-items: stretch;\n  width: 100%;\n`;\nconst ModalHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem;\n  flex-wrap: nowrap;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst Title = styled.h4`\n  margin: 0;\n  font-size: 1.5rem;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  > span {\n    margin: 0;\n    font-size: 0.9rem;\n    color: var(--ha-S500-contrast);\n    display: flex;\n  }\n`;\n\nconst Description = styled.h4`\n  margin: 0;\n  font-size: 0.9rem;\n  color: var(--ha-S500-contrast);\n`;\n\nconst ModalBackdrop = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  background: hsla(var(--ha-h), calc(var(--ha-s) * 1%), 10%, 0.3);\n  z-index: var(--ha-modal-z-index);\n  backdrop-filter: blur(2em) brightness(0.75);\n  opacity: 0;\n  transition: opacity var(--ha-transition-duration) var(--ha-easing);\n`;\n\ntype Extendable = React.ComponentPropsWithoutRef<\"div\">;\nexport interface ModalProps extends Omit<Extendable, \"title\"> {\n  /** triggers the modal opening */\n  open: boolean;\n  /** the react layout to include inside the Modal */\n  children: React.ReactNode;\n  /** The title of the dialog */\n  title?: ReactNode;\n  /** the description of the modal */\n  description?: ReactNode;\n  /** triggered when the users pressed the close button, this is also triggered when the escape key is pressed */\n  onClose: () => void;\n  /** any prop to pass to the backdrop element */\n  backdropProps?: React.ComponentProps<\"div\">;\n  /** react elements to render next to the close button */\n  headerActions?: () => ReactNode;\n  /** the animation duration modal animation in seconds @default 0.25 */\n  animationDuration?: number;\n  /** Automatically close the modal after the provided number of seconds */\n  autocloseSeconds?: number;\n}\n\nfunction InternalModal({\n  open,\n  id,\n  title,\n  description,\n  children,\n  onClose,\n  backdropProps,\n  style,\n  className,\n  cssStyles,\n  headerActions,\n  autocloseSeconds = undefined,\n  animationDuration = 0.25,\n  ...rest\n}: ModalProps) {\n  const _id = useId();\n  const prefix = id ?? _id;\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const windowContext = useHass((store) => store.windowContext);\n  const win = windowContext ?? window;\n  const portalRoot = useHass((store) => store.portalRoot);\n  const [isPressed] = useKeyPress((event) => event.key === \"Escape\");\n  const autocloseRef = useRef<NodeJS.Timeout | null>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const backdropRef = useRef<HTMLDivElement>(null);\n\n  const doClose = useCallback(() => {\n    if (autocloseRef.current) {\n      clearTimeout(autocloseRef.current);\n    }\n    if (onClose && open) {\n      onClose();\n    }\n  }, [open, onClose]);\n\n  useEffect(() => {\n    const removeCurrent = () => {\n      if (autocloseRef.current) {\n        clearTimeout(autocloseRef.current);\n      }\n    };\n    removeCurrent();\n    if (autocloseSeconds && open) {\n      autocloseRef.current = setTimeout(doClose, autocloseSeconds * 1000);\n      return removeCurrent;\n    }\n  }, [open, autocloseSeconds, doClose]);\n\n  useEffect(() => {\n    if (isPressed) {\n      doClose();\n    }\n  }, [isPressed, doClose, open]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (containerRef.current) {\n        containerRef.current.style.opacity = open ? \"1\" : \"0\";\n      }\n      if (backdropRef.current) {\n        backdropRef.current.style.opacity = open ? \"1\" : \"0\";\n      }\n    }, 25);\n  }, [open, animationDuration]);\n\n  return createPortal(\n    <>\n      {open && (\n        <Fragment key={`${prefix}-fragment`}>\n          <ModalBackdrop\n            ref={backdropRef}\n            key={`${prefix}-backdrop`}\n            className=\"modal-backdrop\"\n            id={`${prefix}-backdrop`}\n            onClick={() => {\n              // stops double tapping the backdrop whilst animating\n              if (open) {\n                onClose();\n              }\n            }}\n            css={css`\n              transition-duration: ${animationDuration}s;\n            `}\n            {...backdropProps}\n          />\n          <ModalContainer\n            {...rest}\n            ref={containerRef}\n            style={{\n              borderRadius: \"16px\",\n              ...style,\n            }}\n            css={css`\n              ${globalComponentStyle.modal ?? \"\"}\n              ${cssStyles ?? \"\"}\n            transition-duration: ${animationDuration}s;\n            `}\n            key={`${prefix}-container`}\n            className={`modal-container ${className ?? \"\"}`}\n          >\n            <ModalHeader className={`modal-header`}>\n              <Column\n                alignItems=\"flex-start\"\n                className={`modal-column`}\n                style={{\n                  flexShrink: 1,\n                  maxWidth: \"70%\",\n                }}\n              >\n                {title && <Title className={`modal-title`}>{title}</Title>}\n                {description && <Description className={`modal-description`}>{description}</Description>}\n              </Column>\n              <Row\n                gap=\"0.5rem\"\n                wrap=\"nowrap\"\n                style={{\n                  flexShrink: 0,\n                }}\n              >\n                {headerActions && headerActions()}\n                <FabCard\n                  onClick={() => {\n                    doClose();\n                  }}\n                  className={`modal-close-button`}\n                  tooltipPlacement=\"left\"\n                  title={localize(\"close\")}\n                  icon=\"mdi:close\"\n                  disableRipples\n                  disableScale\n                />\n              </Row>\n            </ModalHeader>\n            <ModalOverflow className={`modal-overflow`}>\n              <ModalInner\n                className={\"modal-inner\"}\n                style={{\n                  transformOrigin: \"top\",\n                }}\n              >\n                {children}\n              </ModalInner>\n            </ModalOverflow>\n          </ModalContainer>\n        </Fragment>\n      )}\n    </>,\n    portalRoot ?? win.document.body,\n  );\n}\n/** The modal component was built to easily generate a popup dialog from any element by passing through an \"open\" value */\nexport const Modal = memo(function Modal(props: ModalProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"Modal\" })}>\n      <InternalModal {...props} />\n    </ErrorBoundary>\n  );\n});\n","import { AllDomains, EntityName, CamelToSnake } from \"@typings\";\nimport { snakeCase } from \"lodash\";\n\nexport const computeDomain = <E extends EntityName | \"unknown\">(entityId: E): CamelToSnake<AllDomains> =>\n  snakeCase(entityId.substring(0, entityId.indexOf(\".\"))) as CamelToSnake<AllDomains>;\n","import {\n  Column,\n  EntityAttributes,\n  FabCard,\n  LogBookRenderer,\n  Modal,\n  type ModalAlarmControlsProps,\n  type ModalCameraControlsProps,\n  type ModalClimateControlsProps,\n  type ModalCoverControlsProps,\n  type ModalLightControlsProps,\n  type ModalMediaPlayerControlsProps,\n  type ModalPersonControlsProps,\n  type ModalSwitchControlsProps,\n  type ModalWeatherControlsProps,\n  type ModalVacuumControlsProps,\n} from \"@components\";\nimport styled from \"@emotion/styled\";\nimport {\n  useEntity,\n  useHass,\n  useDevice,\n  localize,\n  type AllDomains,\n  type EntityName,\n  type ExtractDomain,\n  type FilterByDomain,\n} from \"@hakit/core\";\nimport { Icon } from \"@iconify/react\";\nimport { computeDomain } from \"@utils/computeDomain\";\nimport { lowerCase, startCase } from \"lodash\";\nimport { Suspense, lazy, useCallback, useMemo, useRef, useState, ReactNode } from \"react\";\nimport type { ModalProps } from \"..\";\n\nconst Separator = styled.div`\n  height: 30px;\n  width: 1px;\n  background-color: var(--ha-S400);\n`;\n\nconst State = styled.div`\n  font-weight: 400;\n  font-size: 36px;\n  line-height: 44px;\n  user-select: none;\n  &:first-letter {\n    text-transform: capitalize;\n  }\n`;\n\nconst Updated = styled.div`\n  font-style: normal;\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  letter-spacing: 0.1px;\n  padding: 4px 0px;\n  margin-bottom: 20px;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  margin-bottom: 2rem;\n`;\n\nconst StyledIcon = styled(Icon)`\n  font-size: 2rem;\n`;\n\ninterface ModalPropsByDomain {\n  light: ModalLightControlsProps;\n  climate: ModalClimateControlsProps;\n  weather: ModalWeatherControlsProps;\n  switch: ModalSwitchControlsProps;\n  camera: ModalCameraControlsProps;\n  cover: ModalCoverControlsProps;\n  media_player: ModalMediaPlayerControlsProps;\n  person: ModalPersonControlsProps;\n  vacuum: ModalVacuumControlsProps;\n  alarm_control_panel: ModalAlarmControlsProps;\n}\n\nexport type ModalPropsHelper<D extends AllDomains> = D extends keyof ModalPropsByDomain\n  ? ModalPropsByDomain[D]\n  : {\n      entity: EntityName;\n    };\n\n// remove children from ModalProps, and make it optional\ntype OptionalChildrenModalProps = Omit<ModalProps, \"children\"> & {\n  children?: React.ReactNode;\n};\n\nexport type ModalByEntityDomainProps<E extends EntityName> = ModalPropsHelper<ExtractDomain<E>> & {\n  hideState?: boolean;\n  hideUpdated?: boolean;\n  hideAttributes?: boolean;\n  hideLogbook?: boolean;\n  stateTitle?: ReactNode;\n  /** There's currently a few default header actions, this will allow you to place your own actions in a different order @default 'start' */\n  headerActionsPosition?: \"start\" | \"middle\" | \"end\";\n  /** This will hide the default lazy component thats loaded as the children of the modal if you want to create your own */\n  hideDefaultLayout?: boolean;\n} & OptionalChildrenModalProps;\n\nfunction getLazyModal<D extends keyof ModalPropsByDomain>(\n  domain: D,\n): (() => Promise<{ default: React.ComponentType<ModalPropsByDomain[D]> }>) | null {\n  const modals: { [K in keyof ModalPropsByDomain]: () => Promise<{ default: React.ComponentType<ModalPropsByDomain[K]> }> } = {\n    cover: () => import(\"./Cover\"),\n    alarm_control_panel: () => import(\"./AlarmControlPanel\"),\n    camera: () => import(\"./Camera\"),\n    light: () => import(\"./Light\"),\n    media_player: () => import(\"./MediaPlayer\"),\n    person: () => import(\"./Person\"),\n    switch: () => import(\"./Switch\"),\n    vacuum: () => import(\"./Vacuum\"),\n    weather: () => import(\"./Weather\"),\n    climate: () => import(\"./Climate\"),\n  };\n  return modals[domain] ?? null;\n}\n\nexport function ModalByEntityDomain<E extends EntityName>({\n  entity,\n  hideState,\n  hideUpdated,\n  hideAttributes,\n  headerActionsPosition = \"start\",\n  headerActions,\n  hideLogbook = false,\n  hideDefaultLayout = false,\n  children,\n  ...rest\n}: ModalByEntityDomainProps<E>) {\n  const { joinHassUrl } = useHass.getState().helpers;\n  const [showLogbook, setShowLogbook] = useState(false);\n  const _entity = useEntity(entity);\n  const device = useDevice(entity);\n\n  const openDevice = useCallback(() => {\n    if (typeof window === \"undefined\") return;\n    // if we have a device value, open it up in a new tab and join the url with joinHassUrl\n    if (device && device.device_id) {\n      window.open(joinHassUrl(`config/devices/device/${device.device_id}`), \"_blank\");\n    }\n  }, [device, joinHassUrl]);\n\n  const [modalProps, childProps] = useMemo(() => {\n    const { open, id, title, description, onClose, backdropProps, stateTitle, ...childProps } = rest;\n    return [\n      {\n        open,\n        id,\n        title,\n        description,\n        onClose,\n        backdropProps,\n        stateTitle,\n      },\n      childProps,\n    ];\n  }, [rest]);\n  const domain = computeDomain(entity);\n\n  const onStateChange = useCallback((value: string) => {\n    if (!stateRef.current) return;\n    stateRef.current.innerText = value;\n  }, []);\n  const LazyModalComponent = useMemo(() => {\n    const modal = getLazyModal(domain as keyof ModalPropsByDomain);\n    if (!modal) return null;\n    return lazy(modal);\n  }, [domain]);\n  const defaultChildren = useMemo(() => {\n    if (!LazyModalComponent || hideDefaultLayout) return null;\n    const fallback = (\n      <Column fullWidth fullHeight>\n        <StyledIcon icon=\"eos-icons:three-dots-loading\" className=\"preloader-loading-icon\" />\n      </Column>\n    );\n    if (domain === \"person\") {\n      return (\n        <Suspense fallback={fallback}>\n          <LazyModalComponent\n            entity={entity as FilterByDomain<EntityName, \"person\">}\n            mapHeight={modalProps.open ? 300 : 0}\n            {...childProps}\n          />\n        </Suspense>\n      );\n    }\n    return (\n      <Suspense fallback={fallback}>\n        <LazyModalComponent\n          // @ts-expect-error types are impossible to fix at this level, cast it as anything\n          entity={entity as FilterByDomain<EntityName, \"light\">}\n          onStateChange={onStateChange}\n          {...{\n            ...childProps,\n            entity,\n          }}\n        />\n      </Suspense>\n    );\n  }, [entity, hideDefaultLayout, LazyModalComponent, childProps, onStateChange, domain, modalProps.open]);\n\n  const stateRef = useRef<HTMLDivElement>(null);\n  const titleValue = useMemo(() => {\n    return modalProps.stateTitle ?? startCase(lowerCase(`${_entity.state}${_entity.attributes.unit_of_measurement ?? \"\"}`));\n  }, [_entity, modalProps.stateTitle]);\n  return (\n    <Modal\n      {...modalProps}\n      headerActions={() => {\n        return (\n          <>\n            {!hideLogbook && showLogbook && (\n              <FabCard\n                title={localize(\"device\")}\n                tooltipPlacement=\"left\"\n                icon=\"mdi:arrow-back\"\n                size={30}\n                onClick={() => setShowLogbook(false)}\n              />\n            )}\n            {headerActionsPosition === \"start\" && headerActions && headerActions()}\n            {!hideLogbook && !showLogbook && (\n              <FabCard\n                title={localize(\"activity\")}\n                tooltipPlacement=\"left\"\n                icon=\"mdi:graph-box\"\n                size={30}\n                onClick={() => setShowLogbook(true)}\n              />\n            )}\n            {headerActionsPosition === \"middle\" && headerActions && headerActions()}\n            {device && device.device_id && (\n              <FabCard title={localize(\"open_device_settings\")} tooltipPlacement=\"left\" icon=\"mdi:cog\" size={30} onClick={openDevice} />\n            )}\n            {headerActionsPosition === \"end\" && headerActions && headerActions()}\n            {(!hideLogbook || (device && device.device_id)) && <Separator />}\n          </>\n        );\n      }}\n    >\n      {showLogbook ? (\n        <>\n          <LogBookRenderer entity={entity} />\n        </>\n      ) : (\n        <>\n          {(!hideUpdated || !hideState) && (\n            <Column fullWidth>\n              {!hideState && (\n                <State className=\"state\" ref={stateRef}>\n                  {titleValue}\n                </State>\n              )}\n              {!hideUpdated && <Updated className=\"last-updated\">{_entity.custom.relativeTime}</Updated>}\n            </Column>\n          )}\n          {children ?? null}\n          {defaultChildren}\n          {!hideAttributes && <EntityAttributes entity={entity} />}\n        </>\n      )}\n    </Modal>\n  );\n}\n","import { useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { keyframes } from \"@emotion/react\";\nimport {\n  ButtonGroup,\n  ButtonGroupButton,\n  Column,\n  FabCard,\n  Row,\n  type ButtonGroupProps,\n  type ButtonGroupButtonProps,\n  useBreakpoint,\n} from \"@components\";\nimport { useEntity, type HassEntityWithService, type EntityName, batteryIconByLevel, localize } from \"@hakit/core\";\nimport { useDebounce } from \"react-use\";\nimport { getToolbarActions } from \"./shared\";\nimport { VacuumImage } from \"./VacuumImage\";\n\ninterface Shortcut extends Partial<Omit<ButtonGroupButtonProps<EntityName>, \"onClick\">> {\n  onClick: (entity: HassEntityWithService<\"vacuum\">) => void;\n}\nexport interface VacuumControlsProps extends React.ComponentPropsWithoutRef<\"div\"> {\n  entity: `${\"vacuum\"}.${string}`;\n  /** provide a list of shorts you want to support/display in the UI, you can call your own service if need be! */\n  shortcuts?: Shortcut[];\n  /** hide the fan mode shown in the popup @default false */\n  hideFanModes?: boolean;\n  /** hide the current battery level @default false */\n  hideCurrentBatteryLevel?: boolean;\n  /** hide the state of the vacuum entity @default false */\n  hideState?: boolean;\n  /** hide the last updated time @default false */\n  hideUpdated?: boolean;\n  /** hide the toolbar @default false */\n  hideToolbar?: boolean;\n  /** change the default custom image to display @default vacuum.png */\n  customImage?: string;\n  /** the text/node to render when locating @default 'Locate...' in preferred language */\n  locatingNode?: React.ReactNode;\n  /** additional props to pass to the button-group */\n  buttonGroupProps?: Omit<ButtonGroupProps, \"children\">;\n}\n\nconst VacuumSize = styled.div`\n  height: 100%;\n  max-height: 45vh;\n  min-height: 300px;\n  margin-bottom: 2rem;\n  position: relative;\n`;\n\nconst ModeColumn = styled(Column)`\n  font-size: 0.8rem;\n`;\n\nconst Push = styled.span`\n  padding: 1rem;\n`;\n\nconst spin = keyframes`\n  from {\n    transform:rotate(0deg);\n  }\n  to {\n    transform:rotate(360deg);\n  }\n`;\n\nconst FanMode = styled(FabCard)<{\n  speed?: string;\n}>`\n  animation-name: ${spin};\n  animation-duration: ${(props) => {\n    const speed = (props.speed || \"\").toLowerCase().trim();\n    const silent = speed.includes(\"silent\");\n    const standard = speed.includes(\"standard\");\n    const medium = speed.includes(\"medium\");\n    const turbo = speed.includes(\"turbo\");\n    if (silent) return \"4s\";\n    if (standard) return \"2.5s\";\n    if (medium) return \"1.8s\";\n    if (turbo) return \"0.7s\";\n    return \"2s\";\n  }};\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n`;\n\ninterface VacuumToolbarProps {\n  /** the vacuum entity to control */\n  entity: `${\"vacuum\"}.${string}`;\n  /** hide the toolbar @default false */\n  hideToolbar?: boolean;\n  /** provide a list of shorts you want to support/display in the UI, you can call your own service if need be! */\n  shortcuts?: Shortcut[];\n  /** a callback when the locate button is clicked */\n  onLocate?: () => void;\n  /** additional props to pass to the button-group */\n  buttonGroupProps?: Omit<ButtonGroupProps, \"children\">;\n}\n\nexport function VacuumToolbar({\n  entity: _entity,\n  shortcuts,\n  onLocate,\n  hideToolbar = false,\n  buttonGroupProps,\n  ...rest\n}: VacuumToolbarProps) {\n  const entity = useEntity(_entity);\n  const device = useBreakpoint();\n\n  if (hideToolbar) {\n    return null;\n  }\n  const actions = getToolbarActions({ entity, shortcuts, onLocate });\n  return (\n    <Row gap=\"0.5rem\" {...rest}>\n      <ButtonGroup\n        wrap=\"nowrap\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        orientation=\"horizontal\"\n        thickness={device.xxs ? 80 : 80}\n        maintainAspectRatio\n        {...buttonGroupProps}\n      >\n        {actions.map((action, index) => (\n          <ButtonGroupButton\n            key={index}\n            iconProps={{\n              color: action?.active ? \"var(--ha-300)\" : undefined,\n            }}\n            rippleProps={{\n              preventPropagation: true,\n            }}\n            // @ts-expect-error - cannot assume the types at this level because of how generics work\n            onClick={(_, event) => action?.onClick?.(entity, event)}\n            {...action}\n          />\n        ))}\n      </ButtonGroup>\n    </Row>\n  );\n}\n\n/** The VacuumControls component can be used in isolation of the VacuumCard and will display the some information that's displayed\n * in the more info panel when the component expands.\n */\nexport function VacuumControls({\n  entity: _entity,\n  hideCurrentBatteryLevel = false,\n  hideFanModes = false,\n  hideToolbar = false,\n  customImage,\n  shortcuts,\n  buttonGroupProps,\n  ...rest\n}: VacuumControlsProps) {\n  const entity = useEntity(_entity);\n  const isDocked = entity.state === \"docked\";\n  const { battery_level, fan_speed, fan_speed_list } = entity.attributes || {};\n  const [internalFanSpeed, setInternalFanSpeed] = useState(fan_speed);\n\n  useDebounce(\n    () => {\n      if (typeof internalFanSpeed === \"string\") {\n        entity.service.setFanSpeed({\n          serviceData: {\n            fan_speed: internalFanSpeed,\n          },\n        });\n      }\n    },\n    200,\n    [internalFanSpeed],\n  );\n  const fanSpeedList = fan_speed_list ?? [];\n  const shouldShowFanControls = !hideFanModes && !isDocked && fanSpeedList.length > 0;\n  const shouldShowBatteryLevel = !hideCurrentBatteryLevel && typeof battery_level === \"number\";\n\n  return (\n    <Column fullHeight fullWidth wrap=\"nowrap\" {...rest}>\n      <VacuumSize>\n        <Column gap=\"0.5rem\">\n          <VacuumImage src={customImage} className={entity.state} />\n          {(shouldShowBatteryLevel || shouldShowFanControls) && (\n            <Row\n              style={{\n                padding: \"1rem 0\",\n              }}\n            >\n              {shouldShowFanControls && (\n                <ModeColumn gap=\"0.5rem\">\n                  <FanMode\n                    size={40}\n                    disabled={isDocked}\n                    title={internalFanSpeed}\n                    speed={isDocked ? undefined : internalFanSpeed}\n                    active={!isDocked}\n                    icon=\"mdi:fan\"\n                    onClick={() => {\n                      const currentIndex = fanSpeedList.findIndex(\n                        (speed) => speed.toLowerCase() === (internalFanSpeed ?? \"\").toLowerCase(),\n                      );\n                      const fanSpeed = fanSpeedList[currentIndex + 1] ? fanSpeedList[currentIndex + 1] : fanSpeedList[0];\n                      setInternalFanSpeed(fanSpeed);\n                      entity.service.setFanSpeed({\n                        serviceData: {\n                          fan_speed: fanSpeed,\n                        },\n                      });\n                    }}\n                  />\n                  <div>{localize(\"fan_speed\")}</div>\n                  {internalFanSpeed}\n                </ModeColumn>\n              )}\n              {shouldShowBatteryLevel && shouldShowFanControls && (\n                <>\n                  <Push />\n                </>\n              )}\n              {shouldShowBatteryLevel && (\n                <ModeColumn gap=\"0.5rem\">\n                  <FabCard size={40} disabled={isDocked} title={`${battery_level}%`} icon={batteryIconByLevel(battery_level)} />\n                  <div>{localize(\"battery_level\")}</div>\n                  {`${battery_level}%`}\n                </ModeColumn>\n              )}\n            </Row>\n          )}\n          <VacuumToolbar entity={_entity} hideToolbar={hideToolbar} shortcuts={shortcuts} buttonGroupProps={buttonGroupProps} />\n        </Column>\n      </VacuumSize>\n    </Column>\n  );\n}\n","import { useRef, useEffect, useCallback } from \"react\";\nimport { css } from \"@emotion/react\";\nimport styled from \"@emotion/styled\";\nimport { useGesture } from \"@use-gesture/react\";\nimport { fallback, mq } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nexport interface ControlSliderProps extends Omit<React.ComponentPropsWithoutRef<\"div\">, \"onChange\"> {\n  /** the orientation of the slider @default true */\n  vertical?: boolean;\n  /** hide the handle on the slider @default false */\n  showHandle?: boolean;\n  /** the value of the slider, this should equal to or between the min/max values */\n  value: number;\n  /** the mode of the slider @default start */\n  mode?: \"start\" | \"end\" | \"cursor\";\n  /** the minimum value of the slider @default 0 */\n  min?: number;\n  /** the max value of the slider @default 100 */\n  max?: number;\n  /** the thickness of the slider @default 40 */\n  thickness?: number;\n  /** the border radius of the slider @default 10 */\n  borderRadius?: number;\n  /** the step increment of the slider @default 1 */\n  step?: number;\n  /** should the slider be disabled @default false*/\n  disabled?: boolean;\n  /** the colour to theme the slider, this should be in rgb format or a css color value [number, number, number] @default [70, 70, 70] */\n  sliderColor?: [number, number, number] | string;\n  /** called when the slider is being dragged around @default undefined */\n  onChange?: (value: number) => void;\n  /** called when the user has finished interacting with the slider @default undefined */\n  onChangeApplied?: (value: number) => void;\n  /** when true, minimum value (>0) is visually mapped to a baseline fill (12%) so it's still visible */\n  clampValueToBaseline?: boolean;\n}\n\nconst Slider = styled.div<Pick<ControlSliderProps, \"disabled\" | \"sliderColor\" | \"vertical\" | \"showHandle\" | \"thickness\" | \"borderRadius\">>`\n  ${(props) => {\n    const defaultColor = [70, 70, 70];\n    let color = `rgb(${defaultColor.join(\", \")})`;\n    if (!props.disabled) {\n      if (typeof props.sliderColor === \"string\") {\n        color = props.sliderColor;\n      } else {\n        color = `rgb(${(props.sliderColor || defaultColor).join(\",\")})`;\n      }\n    }\n    return `\n      \n      touch-action: none;\n      --ha-slider-control-thickness: ${props.thickness || 40}px;\n      --ha-slider-control-border-radius: ${props.borderRadius || 10}px;\n      --ha-slider-control-handle-size: 4px;\n      --ha-slider-control-handle-margin: calc(var(--ha-slider-control-thickness) / 8);\n      --ha-slider-control-slider-size: ${\n        props.showHandle ? \"calc(100% - 2 * var(--ha-slider-control-handle-margin) - var(--ha-slider-control-handle-size))\" : \"100%\"\n      };\n      \n      border-radius: var(--ha-slider-control-border-radius);\n      outline: 0px;\n      &:focus-visible {\n        box-shadow: 0 0 0 2px ${color};\n      }\n      &:not([vertical]) {\n        width: 100%;\n        height: var(--ha-slider-control-thickness);\n        max-width: 420px;\n        min-width: 320px;\n      }\n      &[vertical] {\n        width: var(--ha-slider-control-thickness);\n        height: 45vh;\n        max-height: 320px;\n        min-height: 200px;\n        ${mq(\n          [\"xxs\"],\n          `\n          min-height: 0;\n          height: 35vh;\n          max-height: 100%;\n        `,\n        )}\n      }\n      .slider {\n        position: relative;\n        height: 100%;\n        width: 100%;\n        border-radius: var(--ha-slider-control-border-radius);\n        transform: translateZ(0px);\n        overflow: hidden;\n        cursor: pointer;\n      }\n      .slider * {\n        pointer-events: none;\n      }\n      .slider-track-background {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        height: 100%;\n        width: 100%;\n        background: ${color};\n        opacity: 0.2;\n      }\n      .slider-track-bar {\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        background-color: ${color};\n        transition: transform 180ms ease-in-out, background-color 180ms ease-in-out;                \n        &:after {\n          display: ${props.showHandle ? \"block\" : \"none\"};\n          content: \"\";\n          position: absolute;\n          margin: auto;\n          border-radius: var(--ha-slider-control-handle-size);\n          background-color: white;\n        }\n      }\n      .slider-track-cursor {\n        position: absolute;\n        background-color: ${color};\n        border-radius: var(--ha-slider-control-handle-size);\n        transition:\n          left 180ms ease-in-out,\n          bottom 180ms ease-in-out;\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n      }\n      &.horizontal {\n        .slider-track-bar {\n          top: 0;\n          left: 0;\n          width: calc(var(--value, 0) * 100%);\n          height: 100%;\n          transition: width 180ms ease-in-out, background-color 180ms ease-in-out;\n          border-radius: 0 var(--ha-slider-control-border-radius) var(--ha-slider-control-border-radius) 0;\n          overflow: hidden;\n          &:after {\n            top: 0;\n            bottom: 0;\n            right: var(--ha-slider-control-handle-margin);\n            height: 50%;\n            width: var(--ha-slider-control-handle-size);\n            opacity: calc(var(--value, 0));\n            transition: opacity 120ms ease-in-out;\n          }\n          &.end {\n            right: 0;\n            left: initial;\n            width: calc(var(--value, 0) * 100%);\n            border-radius: var(--ha-slider-control-border-radius) 0 0 var(--ha-slider-control-border-radius);\n            &:after {\n              right: initial;\n              left: var(--ha-slider-control-handle-margin);\n            }\n          }\n        }\n        .slider-track-cursor {\n          top: 0;\n          bottom: 0;\n          left: calc(var(--value, 0) * (100% - calc(var(--ha-slider-control-thickness) / 4)));\n          width: calc(var(--ha-slider-control-thickness) / 4);\n          right: 0;\n          height: calc(var(--ha-slider-control-thickness) / 4);\n          &:after {\n            height: 50%;\n            width: var(--ha-slider-control-handle-size);\n          }\n        }\n      }\n      &.vertical {\n        .slider-track-bar {\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          height: calc(var(--value, 0) * 100%);\n          transition: height 180ms ease-in-out, background-color 180ms ease-in-out;\n          border-radius: var(--ha-slider-control-border-radius) var(--ha-slider-control-border-radius) 0 0;\n          overflow: hidden;\n          &:after {\n            top: var(--ha-slider-control-handle-margin);\n            right: 0;\n            left: 0;\n            bottom: initial;\n            width: 50%;\n            height: var(--ha-slider-control-handle-size);\n            opacity: calc(var(--value, 0));\n            transition: opacity 120ms ease-in-out;\n          }\n          &.end {\n            top: 0;\n            bottom: initial;\n            height: calc(var(--value, 0) * 100%);\n            border-radius: 0 0 var(--ha-slider-control-border-radius) var(--ha-slider-control-border-radius);\n            &:after {\n              top: initial;\n              bottom: var(--ha-slider-control-handle-margin);\n            }\n          }\n        }\n        .slider-track-cursor {\n          top: initial;\n          right: 0;\n          left: 0;\n          bottom: calc(var(--value, 0) * (100% - calc(var(--ha-slider-control-thickness) / 4)));\n          height: calc(var(--ha-slider-control-thickness) / 4);\n          width: 100%;\n          &:after {\n            width: 50%;\n            height: var(--ha-slider-control-handle-size);\n          }\n        }\n      }\n      &[dragging] .slider-track-bar,\n      &[dragging] .slider-track-cursor {\n        transition: none;\n      }\n      &.disabled {\n        cursor: not-allowed;\n        > * {\n          cursor: not-allowed;\n        }\n      }\n    `;\n  }}\n`;\n\nconst SliderHolder = styled.div``;\nconst SliderTrackBackground = styled.div``;\nconst SliderTrackBar = styled.div``;\n\nfunction InternalControlSlider({\n  vertical = true,\n  disabled = false,\n  showHandle = true,\n  min = 1,\n  max = 100,\n  step = 1,\n  value,\n  mode = \"start\",\n  thickness,\n  borderRadius,\n  sliderColor = [70, 70, 70],\n  onChangeApplied,\n  onChange,\n  clampValueToBaseline = true,\n  cssStyles,\n  className,\n  ...rest\n}: ControlSliderProps) {\n  const trackBarRef = useRef<HTMLDivElement>(null);\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const parentRef = useRef<HTMLDivElement>(null);\n  const inlineValue = useRef(value);\n  const timerRef = useRef<NodeJS.Timeout | undefined>(undefined);\n  const boundedValue = useCallback(\n    (value: number) => {\n      return Math.min(Math.max(value, min), max);\n    },\n    [min, max],\n  );\n\n  const valueToPercentage = useCallback(\n    (val: number) => {\n      const clamped = boundedValue(val);\n      const raw = (clamped - min) / (max - min);\n      if (!clampValueToBaseline) return raw; // direct mapping\n      const baseline = min > 0 ? 0.09 : 0; // baseline only when min > 0\n      if (raw <= 0) return baseline;\n      return baseline + raw * (1 - baseline);\n    },\n    [boundedValue, clampValueToBaseline, min, max],\n  );\n\n  const percentageToValue = useCallback(\n    (value: number) => {\n      return (max - min) * value + min;\n    },\n    [min, max],\n  );\n\n  const steppedValue = useCallback(\n    (value: number) => {\n      return Math.round(value / step) * step;\n    },\n    [step],\n  );\n\n  const triggerOnChange = useCallback(\n    (updatedValue: number) => {\n      if (timerRef.current) clearTimeout(timerRef.current);\n      if (updatedValue === value || typeof onChangeApplied !== \"function\") return;\n      timerRef.current = setTimeout(() => {\n        onChangeApplied(updatedValue);\n      }, 100);\n    },\n    [onChangeApplied, value],\n  );\n\n  const _getPercentageFromEvent = useCallback(\n    (xy: [number, number], target: HTMLElement) => {\n      const [x, y] = xy;\n      if (vertical) {\n        const offset = target.getBoundingClientRect().top;\n        const total = target.clientHeight;\n        return Math.max(Math.min(1, 1 - (y - offset) / total), 0);\n      }\n      const offset = target.getBoundingClientRect().left;\n      const total = target.clientWidth;\n      return Math.max(Math.min(1, (x - offset) / total), 0);\n    },\n    [vertical],\n  );\n  const setValue = useCallback(\n    (updatedValue: number) => {\n      if (!trackBarRef.current) return;\n      inlineValue.current = boundedValue(updatedValue);\n      trackBarRef.current.style.setProperty(\n        \"--value\",\n        disabled ? (mode === \"start\" ? `${min}` : mode === \"end\" ? `${max}` : \"0\") : `${valueToPercentage(updatedValue)}`,\n      );\n    },\n    [valueToPercentage, boundedValue, disabled, min, max, mode],\n  );\n\n  useEffect(() => {\n    setValue(value);\n  }, [value, setValue]);\n\n  useEffect(() => {\n    if (!parentRef.current) return;\n    if (vertical) {\n      parentRef.current.setAttribute(\"vertical\", \"\");\n    } else {\n      parentRef.current.removeAttribute(\"vertical\");\n    }\n  }, [vertical]);\n\n  const setPressed = function (pressed: boolean) {\n    if (!parentRef.current) return;\n    if (pressed) {\n      parentRef.current.setAttribute(\"dragging\", \"\");\n    } else {\n      parentRef.current.removeAttribute(\"dragging\");\n    }\n  };\n\n  const bind = useGesture(\n    {\n      onDrag: (state) => {\n        if (disabled) return;\n        const percentage = _getPercentageFromEvent(state.values, state.target as HTMLElement);\n        setPressed(state.dragging === true);\n        setValue(percentageToValue(percentage));\n        if (typeof onChange === \"function\") onChange(inlineValue.current);\n      },\n      onDragStart: () => {\n        if (disabled) return;\n        setPressed(true);\n        setValue(inlineValue.current);\n      },\n      onDragEnd: (state) => {\n        if (disabled) return;\n        setPressed(false);\n        const percentage = _getPercentageFromEvent(state.values, state.target as HTMLElement);\n        setValue(steppedValue(percentageToValue(percentage)));\n        triggerOnChange(inlineValue.current);\n      },\n      onClick: (state) => {\n        if (disabled) return;\n        const x = state.event.clientX;\n        const y = state.event.clientY;\n        const percentage = _getPercentageFromEvent([x, y], state.event.target as HTMLElement);\n        setValue(steppedValue(percentageToValue(percentage)));\n        triggerOnChange(inlineValue.current);\n      },\n    },\n    {\n      drag: {\n        filterTaps: true,\n      },\n    },\n  );\n\n  return (\n    <Slider\n      ref={parentRef}\n      className={`${className ?? \"\"} slider-host ${disabled ? \"disabled\" : \"\"} ${vertical ? \"vertical\" : \"horizontal\"}`}\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n      showHandle={showHandle && !disabled}\n      sliderColor={sliderColor}\n      vertical={vertical}\n      thickness={thickness}\n      borderRadius={borderRadius}\n      disabled={disabled}\n      {...bind()}\n      {...rest}\n    >\n      <SliderHolder ref={sliderRef} className=\"slider\">\n        <SliderTrackBackground className=\"slider-track-background\" />\n        {mode === \"cursor\" ? (\n          inlineValue.current != null ? (\n            <div className=\"slider-track-cursor\" ref={trackBarRef}></div>\n          ) : null\n        ) : (\n          <SliderTrackBar className={`slider-track-bar ${mode}`} ref={trackBarRef} />\n        )}\n      </SliderHolder>\n    </Slider>\n  );\n}\n\n/** A interactive slider to control values ranging between two other values, eg brightness on a light, or curtain position etc.. */\nexport function ControlSlider(props: ControlSliderProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ControlSlider\" })}>\n      <InternalControlSlider {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useState, useRef, useEffect, useCallback } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { useIcon } from \"@hakit/core\";\nimport { fallback } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { css } from \"@emotion/react\";\n\nconst Switch = styled.div`\n  display: block;\n  --ha-control-switch-on-color: var(--ha-A400);\n  --ha-control-switch-off-color: rgb(70, 70, 70);\n  --ha-control-switch-background-opacity: 0.2;\n  --ha-control-switch-thickness: 100px;\n  --ha-control-switch-border-radius: 12px;\n  --ha-control-switch-padding: 4px;\n  --mdc-icon-size: 20px;\n  box-sizing: border-box;\n  user-select: none;\n  cursor: pointer;\n  border-radius: var(--ha-control-switch-border-radius);\n  outline: none;\n  transition: box-shadow 180ms ease-in-out;\n  -webkit-tap-highlight-color: transparent;\n  &:focus-visible {\n    box-shadow: 0 0 0 2px var(--ha-control-switch-off-color);\n  }\n  &[checked=\"true\"]:focus-visible {\n    box-shadow: 0 0 0 2px var(--ha-control-switch-on-color);\n  }\n  .switch {\n    box-sizing: border-box;\n    position: relative;\n    height: 100%;\n    width: 100%;\n    border-radius: var(--ha-control-switch-border-radius);\n    overflow: hidden;\n    padding: var(--ha-control-switch-padding);\n    display: flex;\n  }\n  .switch .background {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: var(--ha-control-switch-off-color);\n    transition: background-color 180ms ease-in-out;\n    opacity: var(--ha-control-switch-background-opacity);\n  }\n  .switch .button {\n    width: 50%;\n    height: 100%;\n    background: lightgrey;\n    border-radius: calc(var(--ha-control-switch-border-radius) - var(--ha-control-switch-padding));\n    transition:\n      transform 180ms ease-in-out,\n      background-color 180ms ease-in-out;\n    background-color: var(--ha-control-switch-off-color);\n    color: white;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  &[checked=\"true\"] .switch .background {\n    background-color: var(--ha-control-switch-on-color);\n  }\n  &[checked=\"true\"] .switch .button {\n    transform: translateX(100%);\n    background-color: var(--ha-control-switch-on-color);\n  }\n  &[reversed=\"true\"] .switch {\n    flex-direction: row-reverse;\n  }\n  &[reversed=\"true\"][checked=\"true\"] .switch .button {\n    transform: translateX(-100%);\n  }\n  &[vertical=\"false\"] {\n    height: var(--ha-control-switch-thickness);\n    max-width: 420px;\n    min-width: 320px;\n  }\n  &[vertical=\"true\"] {\n    width: var(--ha-control-switch-thickness);\n    height: 45vh;\n    max-height: 320px;\n    min-height: 200px;\n  }\n  &[vertical=\"true\"][checked=\"true\"] .switch .button {\n    transform: translateY(100%);\n  }\n  &[vertical=\"true\"] .switch .button {\n    width: 100%;\n    height: 50%;\n  }\n  &[vertical=\"true\"][reversed=\"true\"] .switch {\n    flex-direction: column-reverse;\n  }\n  &[vertical=\"true\"][reversed=\"true\"][checked=\"true\"] .switch .button {\n    transform: translateY(-100%);\n  }\n  &[disabled=\"true\"] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\nconst Background = styled.div``;\nconst Button = styled.div``;\n\nexport interface ControlToggleProps extends Omit<React.ComponentPropsWithoutRef<\"div\">, \"checked\" | \"onChange\"> {\n  /** should the switch be disabled */\n  disabled?: boolean;\n  /** should the switch be vertical or horizontal @default true */\n  vertical?: boolean;\n  /** should you reverse the order of the switch by default @default false */\n  reversed?: boolean;\n  /** If the switch is checked */\n  checked?: boolean;\n  /** the thickness of the switch @default 40 */\n  thickness?: number;\n  /** the icon to use when the switch is on @default mdi:power */\n  onIcon?: string;\n  /** the icon to use when the switch is off @default mdi:power-off */\n  offIcon?: string;\n  /** called when the switch is toggled */\n  onChange?: (checked: boolean) => void;\n  /** switch color as a css value, rgb, rgba, hex etc.. */\n  color?: string;\n}\n\nconst InternalControlToggle = ({\n  disabled = false,\n  vertical = true,\n  reversed = false,\n  thickness = 100,\n  checked: propChecked = false,\n  onIcon: _onIcon,\n  offIcon: _offIcon,\n  onChange,\n  className,\n  cssStyles,\n  id,\n  style,\n  color,\n  ...rest\n}: ControlToggleProps) => {\n  const [checked, setChecked] = useState(propChecked);\n  const switchRef = useRef<HTMLDivElement>(null);\n  const onIcon = useIcon(typeof _onIcon === \"string\" ? _onIcon : \"mdi:power\");\n  const offIcon = useIcon(typeof _offIcon === \"string\" ? _offIcon : \"mdi:power-off\");\n\n  const _toggle = useCallback(() => {\n    if (disabled) return;\n    setChecked(!checked);\n    if (onChange) onChange(!checked);\n  }, [disabled, checked, onChange]);\n\n  useEffect(() => {\n    if (!switchRef.current) return;\n    switchRef.current.setAttribute(\"role\", \"switch\");\n    if (!switchRef.current.hasAttribute(\"tabindex\")) {\n      switchRef.current.setAttribute(\"tabindex\", \"0\");\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!switchRef.current) return;\n    switchRef.current.setAttribute(\"aria-checked\", checked ? \"true\" : \"false\");\n  }, [checked]);\n\n  useEffect(() => {\n    setChecked(propChecked);\n  }, [propChecked]);\n\n  useEffect(() => {\n    if (!switchRef.current) return;\n    switchRef.current.style.setProperty(\"--ha-control-switch-thickness\", `${thickness}px`);\n    switchRef.current.setAttribute(\"vertical\", vertical ? \"true\" : \"false\");\n    switchRef.current.setAttribute(\"reversed\", reversed ? \"true\" : \"false\");\n    switchRef.current.setAttribute(\"disabled\", disabled ? \"true\" : \"false\");\n    switchRef.current.setAttribute(\"checked\", checked ? \"true\" : \"false\");\n    switchRef.current.style.setProperty(\"--ha-control-switch-on-color\", color ?? \"var(--ha-A400)\");\n  }, [checked, vertical, disabled, reversed, thickness, color]);\n\n  return (\n    <Switch\n      ref={switchRef}\n      onClick={_toggle}\n      id={id ?? \"\"}\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n      className={`control-switch ${className ?? \"\"}`}\n      style={{\n        ...(style ?? {}),\n      }}\n      {...rest}\n    >\n      <div className=\"switch\">\n        <Background className={`${checked ? \"checked\" : \"\"} background`} />\n        <Button aria-hidden=\"true\" className=\"button\">\n          {checked ? onIcon : offIcon}\n        </Button>\n      </div>\n    </Switch>\n  );\n};\n\n/** A simple control switch similar to home assistant switches, used in the popup for switch entities, you can reverse the order, change orientation, all you need to set is your desired width/height depending on the orientation\n * Note: If you want to use this directly with an element to call the toggle service, you can use the SwitchControls component.\n */\nexport function ControlToggle(props: ControlToggleProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ControlToggle\" })}>\n      <InternalControlToggle {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useGesture } from \"@use-gesture/react\";\nimport { svgArc } from \"./svg-arc\";\nimport { useRef, useEffect, useCallback, useState, useMemo } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { clamp, isNumber } from \"lodash\";\nimport { fallback } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { useDebouncedCallback, useThrottledCallback } from \"use-debounce\";\n\nconst Wrapper = styled.div`\n  --ha-control-slider-track-bg: #464646;\n  --ha-control-slider-track-bg-opacity: 0.3;\n  --ha-control-slider-clear: black;\n  touch-action: none;\n  width: 320px;\n  display: block;\n\n  &:after {\n    display: block;\n    content: \"\";\n    position: absolute;\n    top: -10%;\n    left: -10%;\n    right: -10%;\n    bottom: -10%;\n    background: radial-gradient(50% 50% at 50% 50%, var(--ha-control-slider-color, transparent) 0%, transparent 100%);\n    opacity: 0.15;\n    pointer-events: none;\n  }\n  svg {\n    width: 100%;\n    display: block;\n  }\n  .slider {\n    outline: none;\n  }\n  .interaction {\n    display: flex;\n    fill: none;\n    stroke: transparent;\n    stroke-linecap: round;\n    stroke-width: calc(24px + 2 * 12px);\n    cursor: pointer;\n  }\n  .display {\n    pointer-events: none;\n  }\n  :host([disabled]) #interaction,\n  :host([readonly]) #interaction {\n    cursor: initial;\n  }\n\n  .background {\n    fill: none;\n    stroke: var(--ha-control-slider-track-bg);\n    opacity: var(--ha-control-slider-track-bg-opacity);\n    transition:\n      stroke 180ms ease-in-out,\n      opacity 180ms ease-in-out;\n    stroke-linecap: round;\n    stroke-width: 24px;\n  }\n\n  .arc {\n    fill: none;\n    stroke-linecap: round;\n    stroke-width: 24px;\n    transition:\n      stroke-width 300ms ease-in-out,\n      stroke-dasharray 300ms ease-in-out,\n      stroke-dashoffset 300ms ease-in-out,\n      stroke 180ms ease-in-out,\n      opacity 180ms ease-in-out;\n  }\n\n  .target {\n    fill: none;\n    stroke-linecap: round;\n    stroke-width: 18px;\n    stroke: white;\n    transition:\n      stroke-width 300ms ease-in-out,\n      stroke-dasharray 300ms ease-in-out,\n      stroke-dashoffset 300ms ease-in-out,\n      stroke 180ms ease-in-out,\n      opacity 180ms ease-in-out;\n  }\n\n  .target-border {\n    fill: none;\n    stroke-linecap: round;\n    stroke-width: 24px;\n    stroke: white;\n    transition:\n      stroke-width 300ms ease-in-out,\n      stroke-dasharray 300ms ease-in-out,\n      stroke-dashoffset 300ms ease-in-out,\n      stroke 180ms ease-in-out,\n      opacity 180ms ease-in-out;\n  }\n\n  .current {\n    fill: none;\n    stroke-linecap: round;\n    stroke-width: 8px;\n    stroke: var(--ha-500-contrast);\n    opacity: 0.5;\n    transition:\n      stroke-width 300ms ease-in-out,\n      stroke-dasharray 300ms ease-in-out,\n      stroke-dashoffset 300ms ease-in-out,\n      stroke 180ms ease-in-out,\n      opacity 180ms ease-in-out;\n  }\n\n  .arc-current {\n    stroke: var(--ha-control-slider-clear);\n  }\n\n  .arc-clear {\n    stroke: var(--ha-control-slider-clear);\n  }\n  .arc-colored {\n    opacity: 0.5;\n  }\n  .arc-active {\n    outline: none;\n  }\n  .arc-active:focus-visible {\n    stroke-width: 28px;\n  }\n\n  .pressed .arc,\n  .pressed .target,\n  .pressed .target-border,\n  .pressed .current {\n    transition:\n      stroke-width 300ms ease-in-out,\n      stroke 180ms ease-in-out,\n      opacity 180ms ease-in-out;\n  }\n\n  .inactive .arc,\n  .inactive .arc-current {\n    opacity: 0;\n  }\n\n  .value {\n    stroke: var(--ha-control-slider-color);\n  }\n\n  .low {\n    stroke: var(--ha-control-slider-low-color);\n  }\n\n  .high {\n    stroke: var(--ha-control-slider-high-color);\n  }\n`;\n\nconst MAX_ANGLE = 270;\nconst ROTATE_ANGLE = 360 - MAX_ANGLE / 2 - 90;\nconst RADIUS = 145;\n\nfunction xy2polar(x: number, y: number) {\n  const r = Math.sqrt(x * x + y * y);\n  const phi = Math.atan2(y, x);\n  return [r, phi];\n}\n\nfunction rad2deg(rad: number) {\n  return (rad / (2 * Math.PI)) * 360;\n}\n\ntype ActiveSlider = \"low\" | \"high\" | \"value\";\n\nexport type ControlCircularSliderMode = \"start\" | \"end\" | \"full\";\n\nexport interface ControlSliderCircularProps extends Omit<React.ComponentPropsWithoutRef<\"div\">, \"onChange\"> {\n  /** the value of the slider */\n  value?: number;\n  /** the low end value if low/high values are supported */\n  low?: number;\n  /** the high end value if low/high values are supported */\n  high?: number;\n  /** should the slider become disabled @default false */\n  disabled?: boolean;\n  /** should the slider become readonly @default false */\n  readonly?: boolean;\n  /** should the slider support dual values @default false */\n  dual?: boolean;\n  /** the mode of the slider */\n  mode?: ControlCircularSliderMode;\n  /** should the slider become inactive @default false */\n  inactive?: boolean;\n  /** the label of the slider used for screen readers */\n  label?: string;\n  /** the current value of the slider which places a dot on the slider */\n  current?: number;\n  /** the step of the slider @default 1 */\n  step?: number;\n  /** the minimum value of the slider @default 0 */\n  min?: number;\n  /** the maximum value of the slider @default 100 */\n  max?: number;\n  /** the colors of the slider, if single value, just use color, else use high and low color */\n  colors?: {\n    color?: string;\n    lowColor?: string;\n    highColor?: string;\n  };\n  /** called whenever the value changes, you should not use this to update state but rather display the value visually using refs for example, updates are throttled to 20ms */\n  onChange?: (value: number, type: ActiveSlider) => void;\n  /** called whenever the value changes and the user has finished interacting with the slider */\n  onChangeApplied?: (value: number, type: ActiveSlider) => void;\n}\n\nfunction InternalControlSliderCircular({\n  step = 1,\n  inactive,\n  label,\n  readonly = false,\n  value,\n  low,\n  high,\n  min = 0,\n  max = 100,\n  dual,\n  disabled = false,\n  mode,\n  current,\n  colors = {\n    color: \"tomato\",\n    lowColor: \"blue\",\n    highColor: \"tomato\",\n  },\n  onChange,\n  onChangeApplied,\n  ...rest\n}: ControlSliderCircularProps) {\n  const _sliderRef = useRef<HTMLDivElement>(null);\n  const _svgRef = useRef<SVGSVGElement>(null);\n  const _activeSlider = useRef<ActiveSlider | undefined>(undefined);\n  const _lastSlider = useRef<ActiveSlider | undefined>(undefined);\n  const [localValue, setLocalValue] = useState<number | undefined>(value);\n  const [localLow, setLocalLow] = useState<number | undefined>(low);\n  const [localHigh, setLocalHigh] = useState<number | undefined>(high);\n\n  const trackPath = useMemo(\n    () =>\n      svgArc({\n        x: 0,\n        y: 0,\n        start: 0,\n        end: MAX_ANGLE,\n        r: RADIUS,\n      }),\n    [],\n  );\n\n  const lowValue = dual ? localLow : localValue;\n  const highValue = localHigh;\n\n  useEffect(() => {\n    if (isNumber(value)) setLocalValue(value);\n    if (isNumber(low)) setLocalLow(low);\n    if (isNumber(high)) setLocalLow(high);\n  }, [value, low, high]);\n\n  const _setActiveValue = useCallback((value: number) => {\n    switch (_activeSlider.current) {\n      case \"high\":\n        setLocalHigh(value);\n        break;\n      case \"low\":\n        setLocalLow(value);\n        break;\n      case \"value\":\n        setLocalValue(value);\n        break;\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!_sliderRef.current) return;\n    if (colors.color) _sliderRef.current.style.setProperty(\"--ha-control-slider-color\", colors.color);\n    if (colors.lowColor) _sliderRef.current.style.setProperty(\"--ha-control-slider-low-color\", colors.lowColor);\n    if (colors.highColor) _sliderRef.current.style.setProperty(\"--ha-control-slider-high-color\", colors.highColor);\n  }, [colors]);\n\n  const _valueToPercentage = useCallback(\n    (value: number) => {\n      return (clamp(value, min, max) - min) / (max - min);\n    },\n    [max, min],\n  );\n\n  const _percentageToValue = useCallback(\n    (value: number) => {\n      return (max - min) * value + min;\n    },\n    [max, min],\n  );\n\n  const _steppedValue = useCallback(\n    (value: number) => {\n      return Math.round(value / step) * step;\n    },\n    [step],\n  );\n\n  const _strokeDashArc = useCallback(\n    (from: number, to: number): [string, string] => {\n      const start = _valueToPercentage(from);\n      const end = _valueToPercentage(to);\n\n      const track = (RADIUS * 2 * Math.PI * MAX_ANGLE) / 360;\n      const arc = Math.max((end - start) * track, 0);\n      const arcOffset = start * track - 0.5;\n\n      const strokeDasharray = `${arc} ${track - arc}`;\n      const strokeDashOffset = `-${arcOffset}`;\n      return [strokeDasharray, strokeDashOffset];\n    },\n    [_valueToPercentage],\n  );\n\n  const _strokeCircleDashArc = useCallback(\n    (value: number): [string, string] => {\n      return _strokeDashArc(value, value);\n    },\n    [_strokeDashArc],\n  );\n\n  const currentStroke = current ? _strokeCircleDashArc(current) : undefined;\n\n  const _boundedValue = useCallback(\n    (value: number) => {\n      const _min = _activeSlider.current === \"high\" ? Math.min(localLow ?? max) : min;\n      const _max = _activeSlider.current === \"low\" ? Math.max(localHigh ?? min) : max;\n      return Math.min(Math.max(value, _min), _max);\n    },\n    [localLow, max, min, localHigh],\n  );\n\n  const renderArc = useCallback(\n    (id: string, value: number | undefined, mode: ControlCircularSliderMode) => {\n      if (disabled) return null;\n\n      const path = svgArc({\n        x: 0,\n        y: 0,\n        start: 0,\n        end: MAX_ANGLE,\n        r: RADIUS,\n      });\n\n      const limit = mode === \"end\" ? max : min;\n\n      const _current = current ?? limit;\n      const target = value ?? limit;\n\n      const showActive = mode === \"end\" ? target <= _current : mode === \"start\" ? _current <= target : false;\n\n      const showTarget = value != null;\n\n      const activeArc = showTarget\n        ? showActive\n          ? mode === \"end\"\n            ? _strokeDashArc(target, _current)\n            : _strokeDashArc(_current, target)\n          : _strokeCircleDashArc(target)\n        : undefined;\n\n      const coloredArc =\n        mode === \"full\" ? _strokeDashArc(min, max) : mode === \"end\" ? _strokeDashArc(target, limit) : _strokeDashArc(limit, target);\n\n      const targetCircle = showTarget ? _strokeCircleDashArc(target) : undefined;\n\n      const currentCircle =\n        current != null && current <= max && current >= min && (showActive || mode === \"full\") ? _strokeCircleDashArc(current) : undefined;\n\n      return (\n        <g className={`${inactive ? \"inactive\" : \"\"}`}>\n          <path className=\"arc arc-clear\" d={path} strokeDasharray={coloredArc[0]} strokeDashoffset={coloredArc[1]} />\n          <path className={`arc arc-colored ${id}`} d={path} strokeDasharray={coloredArc[0]} strokeDashoffset={coloredArc[1]} />\n          {activeArc ? (\n            <path\n              d={path}\n              className={`arc arc-active ${id}`}\n              strokeDasharray={activeArc[0]}\n              strokeDashoffset={activeArc[1]}\n              role=\"slider\"\n              tabIndex={0}\n              aria-valuemin={min}\n              aria-valuemax={max}\n              aria-valuenow={localValue != null ? _steppedValue(localValue) : undefined}\n              aria-disabled={disabled}\n              aria-readonly={readonly}\n              aria-label={label}\n            />\n          ) : null}\n          {currentCircle ? (\n            <path className=\"current arc-current\" d={path} strokeDasharray={currentCircle[0]} strokeDashoffset={currentCircle[1]} />\n          ) : null}\n          {targetCircle ? (\n            <>\n              <path className={`target-border ${id}`} d={path} strokeDasharray={targetCircle[0]} strokeDashoffset={targetCircle[1]} />\n              <path className=\"target\" d={path} strokeDasharray={targetCircle[0]} strokeDashoffset={targetCircle[1]} />\n            </>\n          ) : null}\n        </g>\n      );\n    },\n    [_steppedValue, _strokeCircleDashArc, _strokeDashArc, current, disabled, inactive, label, localValue, max, min, readonly],\n  );\n\n  const _getPercentageFromEvent = useCallback((xy: [number, number]) => {\n    if (!_sliderRef.current) return 0;\n    const bound = _sliderRef.current.getBoundingClientRect();\n    const x = (2 * (xy[0] - bound.left - bound.width / 2)) / bound.width;\n    const y = (2 * (xy[1] - bound.top - bound.height / 2)) / bound.height;\n\n    const [, phi] = xy2polar(x, y);\n\n    const offset = (360 - MAX_ANGLE) / 2;\n\n    const angle = ((rad2deg(phi) + offset - ROTATE_ANGLE + 360) % 360) - offset;\n\n    return Math.max(Math.min(angle / MAX_ANGLE, 1), 0);\n  }, []);\n\n  const _findActiveSlider = useCallback(\n    (value: number): ActiveSlider => {\n      if (!dual) return \"value\";\n      const low = Math.max(localLow ?? min, min);\n      const high = Math.min(localHigh ?? max, max);\n      if (low >= value) {\n        return \"low\";\n      }\n      if (high <= value) {\n        return \"high\";\n      }\n      const lowDistance = Math.abs(value - low);\n      const highDistance = Math.abs(value - high);\n      return lowDistance <= highDistance ? \"low\" : \"high\";\n    },\n    [dual, localHigh, localLow, max, min],\n  );\n\n  const triggerOnChangeApplied = useDebouncedCallback(\n    (updatedValue: number, type: ActiveSlider) => {\n      if (typeof onChangeApplied !== \"function\") return;\n      onChangeApplied(updatedValue, type);\n    },\n    100,\n    {\n      trailing: true,\n      leading: true,\n    },\n  );\n\n  const triggerOnChange = useThrottledCallback(\n    (updatedValue: number, type: ActiveSlider) => {\n      if (typeof onChange !== \"function\") return;\n      onChange(updatedValue, type);\n    },\n    20,\n    {\n      trailing: true,\n      leading: true,\n    },\n  );\n\n  const bind = useGesture(\n    {\n      onDrag: (state) => {\n        if (disabled || readonly) return;\n        const { first, last } = state;\n        // 'movement' contains the delta of the drag\n        if (!first && !last) {\n          // Add your 'panmove' logic here\n          const values = state.values;\n          const [x, y] = values;\n          const percentage = _getPercentageFromEvent([x, y]);\n          const raw = _percentageToValue(percentage);\n          const bounded = _boundedValue(raw);\n          _setActiveValue(bounded);\n          const stepped = _steppedValue(bounded);\n          const type = _findActiveSlider(raw);\n          triggerOnChange(stepped, type);\n        }\n      },\n      onDragStart: (state) => {\n        if (disabled || readonly) return;\n        const values = state.values;\n        const [x, y] = values;\n        const percentage = _getPercentageFromEvent([x, y]);\n        const raw = _percentageToValue(percentage);\n        _activeSlider.current = _findActiveSlider(raw);\n        _lastSlider.current = _activeSlider.current;\n        if (_svgRef.current) {\n          _svgRef.current.focus();\n        }\n      },\n      onDragEnd: (state) => {\n        if (disabled) return;\n        const values = state.values;\n        const [x, y] = values;\n        const percentage = _getPercentageFromEvent([x, y]);\n        const raw = _percentageToValue(percentage);\n        const bounded = _boundedValue(raw);\n        const stepped = _steppedValue(bounded);\n        _setActiveValue(stepped);\n        _activeSlider.current = _findActiveSlider(raw);\n        triggerOnChange(stepped, _activeSlider.current);\n        triggerOnChangeApplied(stepped, _activeSlider.current);\n        _activeSlider.current = undefined;\n      },\n      onPointerDown: (state) => {\n        state.event.stopPropagation();\n        state.event.preventDefault();\n        if (disabled || readonly) return;\n        const percentage = _getPercentageFromEvent([state.event.clientX, state.event.clientY]);\n        const raw = _percentageToValue(percentage);\n        _activeSlider.current = _findActiveSlider(raw);\n        const bounded = _boundedValue(raw);\n        const stepped = _steppedValue(bounded);\n        _setActiveValue(bounded);\n        triggerOnChange(stepped, _activeSlider.current);\n      },\n      onPointerUp: (state) => {\n        if (disabled || readonly) return;\n        state.event.stopPropagation();\n        state.event.preventDefault();\n        if (disabled || readonly) return;\n        const percentage = _getPercentageFromEvent([state.event.clientX, state.event.clientY]);\n        const raw = _percentageToValue(percentage);\n        _activeSlider.current = _findActiveSlider(raw);\n        const bounded = _boundedValue(raw);\n        const stepped = _steppedValue(bounded);\n        triggerOnChange(stepped, _activeSlider.current);\n        triggerOnChangeApplied(stepped, _activeSlider.current);\n        _activeSlider.current = undefined;\n      },\n    },\n    {\n      drag: {\n        filterTaps: true,\n      },\n    },\n  );\n\n  return (\n    <Wrapper className=\"control-slider-circular\" ref={_sliderRef} {...bind()} {...rest}>\n      <svg\n        ref={_svgRef}\n        viewBox=\"0 0 320 320\"\n        overflow=\"visible\"\n        className={`slider ${_activeSlider.current ? \"pressed\" : \"\"}`}\n        tabIndex={_lastSlider.current ? 0 : -1}\n      >\n        <g className=\"container\" transform={`translate(160 160) rotate(${ROTATE_ANGLE})`}>\n          <g className=\"interaction\">\n            <path d={trackPath} />\n          </g>\n          <g className=\"display\">\n            <path className=\"background\" d={trackPath} />\n            {currentStroke ? (\n              <path className=\"current\" d={trackPath} strokeDasharray={currentStroke[0]} strokeDashoffset={currentStroke[1]} />\n            ) : null}\n            {lowValue != null || mode === \"full\" ? renderArc(dual ? \"low\" : \"value\", lowValue, (!dual && mode) || \"start\") : null}\n            {dual && highValue != null ? renderArc(\"high\", highValue, \"end\") : null}\n          </g>\n        </g>\n      </svg>\n    </Wrapper>\n  );\n}\n\n/** A interactive slider similar to the home assistant circular slider to control climate & humidifier entities */\nexport function ControlSliderCircular(props: ControlSliderCircularProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ControlSliderCircular\" })}>\n      <InternalControlSliderCircular {...props} />\n    </ErrorBoundary>\n  );\n}\n","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nconst invalidOverflowDisplayValues = /*#__PURE__*/new Set(['inline', 'contents']);\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !invalidOverflowDisplayValues.has(display);\n}\nconst tableElements = /*#__PURE__*/new Set(['table', 'td', 'th']);\nfunction isTableElement(element) {\n  return tableElements.has(getNodeName(element));\n}\nconst topLayerSelectors = [':popover-open', ':modal'];\nfunction isTopLayer(element) {\n  return topLayerSelectors.some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (_e) {\n      return false;\n    }\n  });\n}\nconst transformProperties = ['transform', 'translate', 'scale', 'rotate', 'perspective'];\nconst willChangeValues = ['transform', 'translate', 'scale', 'rotate', 'perspective', 'filter'];\nconst containValues = ['paint', 'layout', 'strict', 'content'];\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  // https://drafts.csswg.org/css-transforms-2/#individual-transforms\n  return transformProperties.some(value => css[value] ? css[value] !== 'none' : false) || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || willChangeValues.some(value => (css.willChange || '').includes(value)) || containValues.some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nconst lastTraversableNodeNames = /*#__PURE__*/new Set(['html', 'body', '#document']);\nfunction isLastTraversableNode(node) {\n  return lastTraversableNodeNames.has(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nconst yAxisSides = /*#__PURE__*/new Set(['top', 'bottom']);\nfunction getSideAxis(placement) {\n  return yAxisSides.has(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nconst lrPlacement = ['left', 'right'];\nconst rlPlacement = ['right', 'left'];\nconst tbPlacement = ['top', 'bottom'];\nconst btPlacement = ['bottom', 'top'];\nfunction getSideList(side, isStart, rtl) {\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rlPlacement : lrPlacement;\n      return isStart ? lrPlacement : rlPlacement;\n    case 'left':\n    case 'right':\n      return isStart ? tbPlacement : btPlacement;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","import { isShadowRoot, isHTMLElement } from '@floating-ui/utils/dom';\nimport * as React from 'react';\nimport { useLayoutEffect } from 'react';\nimport { floor } from '@floating-ui/utils';\nimport { tabbable } from 'tabbable';\n\n// Avoid Chrome DevTools blue warning.\nfunction getPlatform() {\n  const uaData = navigator.userAgentData;\n  if (uaData != null && uaData.platform) {\n    return uaData.platform;\n  }\n  return navigator.platform;\n}\nfunction getUserAgent() {\n  const uaData = navigator.userAgentData;\n  if (uaData && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(_ref => {\n      let {\n        brand,\n        version\n      } = _ref;\n      return brand + \"/\" + version;\n    }).join(' ');\n  }\n  return navigator.userAgent;\n}\nfunction isSafari() {\n  // Chrome DevTools does not complain about navigator.vendor\n  return /apple/i.test(navigator.vendor);\n}\nfunction isAndroid() {\n  const re = /android/i;\n  return re.test(getPlatform()) || re.test(getUserAgent());\n}\nfunction isMac() {\n  return getPlatform().toLowerCase().startsWith('mac') && !navigator.maxTouchPoints;\n}\nfunction isJSDOM() {\n  return getUserAgent().includes('jsdom/');\n}\n\nconst FOCUSABLE_ATTRIBUTE = 'data-floating-ui-focusable';\nconst TYPEABLE_SELECTOR = \"input:not([type='hidden']):not([disabled]),\" + \"[contenteditable]:not([contenteditable='false']),textarea:not([disabled])\";\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\n\nfunction activeElement(doc) {\n  let activeElement = doc.activeElement;\n  while (((_activeElement = activeElement) == null || (_activeElement = _activeElement.shadowRoot) == null ? void 0 : _activeElement.activeElement) != null) {\n    var _activeElement;\n    activeElement = activeElement.shadowRoot.activeElement;\n  }\n  return activeElement;\n}\nfunction contains(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n\n  // First, attempt with faster native method\n  if (parent.contains(child)) {\n    return true;\n  }\n\n  // then fallback to custom implementation with Shadow DOM support\n  if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    while (next) {\n      if (parent === next) {\n        return true;\n      }\n      // @ts-ignore\n      next = next.parentNode || next.host;\n    }\n  }\n\n  // Give up, the result is false\n  return false;\n}\nfunction getTarget(event) {\n  if ('composedPath' in event) {\n    return event.composedPath()[0];\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support\n  // `composedPath()`, but browsers without shadow DOM don't.\n  return event.target;\n}\nfunction isEventTargetWithin(event, node) {\n  if (node == null) {\n    return false;\n  }\n  if ('composedPath' in event) {\n    return event.composedPath().includes(node);\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support composedPath, but browsers without shadow dom don't\n  const e = event;\n  return e.target != null && node.contains(e.target);\n}\nfunction isRootElement(element) {\n  return element.matches('html,body');\n}\nfunction getDocument(node) {\n  return (node == null ? void 0 : node.ownerDocument) || document;\n}\nfunction isTypeableElement(element) {\n  return isHTMLElement(element) && element.matches(TYPEABLE_SELECTOR);\n}\nfunction isTypeableCombobox(element) {\n  if (!element) return false;\n  return element.getAttribute('role') === 'combobox' && isTypeableElement(element);\n}\nfunction matchesFocusVisible(element) {\n  // We don't want to block focus from working with `visibleOnly`\n  // (JSDOM doesn't match `:focus-visible` when the element has `:focus`)\n  if (!element || isJSDOM()) return true;\n  try {\n    return element.matches(':focus-visible');\n  } catch (_e) {\n    return true;\n  }\n}\nfunction getFloatingFocusElement(floatingElement) {\n  if (!floatingElement) {\n    return null;\n  }\n  // Try to find the element that has `{...getFloatingProps()}` spread on it.\n  // This indicates the floating element is acting as a positioning wrapper, and\n  // so focus should be managed on the child element with the event handlers and\n  // aria props.\n  return floatingElement.hasAttribute(FOCUSABLE_ATTRIBUTE) ? floatingElement : floatingElement.querySelector(\"[\" + FOCUSABLE_ATTRIBUTE + \"]\") || floatingElement;\n}\n\nfunction getNodeChildren(nodes, id, onlyOpenChildren) {\n  if (onlyOpenChildren === void 0) {\n    onlyOpenChildren = true;\n  }\n  const directChildren = nodes.filter(node => {\n    var _node$context;\n    return node.parentId === id && (!onlyOpenChildren || ((_node$context = node.context) == null ? void 0 : _node$context.open));\n  });\n  return directChildren.flatMap(child => [child, ...getNodeChildren(nodes, child.id, onlyOpenChildren)]);\n}\nfunction getDeepestNode(nodes, id) {\n  let deepestNodeId;\n  let maxDepth = -1;\n  function findDeepest(nodeId, depth) {\n    if (depth > maxDepth) {\n      deepestNodeId = nodeId;\n      maxDepth = depth;\n    }\n    const children = getNodeChildren(nodes, nodeId);\n    children.forEach(child => {\n      findDeepest(child.id, depth + 1);\n    });\n  }\n  findDeepest(id, 0);\n  return nodes.find(node => node.id === deepestNodeId);\n}\nfunction getNodeAncestors(nodes, id) {\n  var _nodes$find;\n  let allAncestors = [];\n  let currentParentId = (_nodes$find = nodes.find(node => node.id === id)) == null ? void 0 : _nodes$find.parentId;\n  while (currentParentId) {\n    const currentNode = nodes.find(node => node.id === currentParentId);\n    currentParentId = currentNode == null ? void 0 : currentNode.parentId;\n    if (currentNode) {\n      allAncestors = allAncestors.concat(currentNode);\n    }\n  }\n  return allAncestors;\n}\n\nfunction stopEvent(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nfunction isReactEvent(event) {\n  return 'nativeEvent' in event;\n}\n\n// License: https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/utils/src/isVirtualEvent.ts\nfunction isVirtualClick(event) {\n  // FIXME: Firefox is now emitting a deprecation warning for `mozInputSource`.\n  // Try to find a workaround for this. `react-aria` source still has the check.\n  if (event.mozInputSource === 0 && event.isTrusted) {\n    return true;\n  }\n  if (isAndroid() && event.pointerType) {\n    return event.type === 'click' && event.buttons === 1;\n  }\n  return event.detail === 0 && !event.pointerType;\n}\nfunction isVirtualPointerEvent(event) {\n  if (isJSDOM()) return false;\n  return !isAndroid() && event.width === 0 && event.height === 0 || isAndroid() && event.width === 1 && event.height === 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === 'mouse' ||\n  // iOS VoiceOver returns 0.333 for width/height.\n  event.width < 1 && event.height < 1 && event.pressure === 0 && event.detail === 0 && event.pointerType === 'touch';\n}\nfunction isMouseLikePointerType(pointerType, strict) {\n  // On some Linux machines with Chromium, mouse inputs return a `pointerType`\n  // of \"pen\": https://github.com/floating-ui/floating-ui/issues/2015\n  const values = ['mouse', 'pen'];\n  if (!strict) {\n    values.push('', undefined);\n  }\n  return values.includes(pointerType);\n}\n\nvar isClient = typeof document !== 'undefined';\n\nvar noop = function noop() {};\nvar index = isClient ? useLayoutEffect : noop;\n\n// https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\nconst SafeReact = {\n  ...React\n};\n\nfunction useLatestRef(value) {\n  const ref = React.useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\nconst useInsertionEffect = SafeReact.useInsertionEffect;\nconst useSafeInsertionEffect = useInsertionEffect || (fn => fn());\nfunction useEffectEvent(callback) {\n  const ref = React.useRef(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      throw new Error('Cannot call an event handler while rendering.');\n    }\n  });\n  useSafeInsertionEffect(() => {\n    ref.current = callback;\n  });\n  return React.useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return ref.current == null ? void 0 : ref.current(...args);\n  }, []);\n}\n\nfunction isDifferentGridRow(index, cols, prevRow) {\n  return Math.floor(index / cols) !== prevRow;\n}\nfunction isIndexOutOfListBounds(listRef, index) {\n  return index < 0 || index >= listRef.current.length;\n}\nfunction getMinListIndex(listRef, disabledIndices) {\n  return findNonDisabledListIndex(listRef, {\n    disabledIndices\n  });\n}\nfunction getMaxListIndex(listRef, disabledIndices) {\n  return findNonDisabledListIndex(listRef, {\n    decrement: true,\n    startingIndex: listRef.current.length,\n    disabledIndices\n  });\n}\nfunction findNonDisabledListIndex(listRef, _temp) {\n  let {\n    startingIndex = -1,\n    decrement = false,\n    disabledIndices,\n    amount = 1\n  } = _temp === void 0 ? {} : _temp;\n  let index = startingIndex;\n  do {\n    index += decrement ? -amount : amount;\n  } while (index >= 0 && index <= listRef.current.length - 1 && isListIndexDisabled(listRef, index, disabledIndices));\n  return index;\n}\nfunction getGridNavigatedIndex(listRef, _ref) {\n  let {\n    event,\n    orientation,\n    loop,\n    rtl,\n    cols,\n    disabledIndices,\n    minIndex,\n    maxIndex,\n    prevIndex,\n    stopEvent: stop = false\n  } = _ref;\n  let nextIndex = prevIndex;\n  if (event.key === ARROW_UP) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = maxIndex;\n    } else {\n      nextIndex = findNonDisabledListIndex(listRef, {\n        startingIndex: nextIndex,\n        amount: cols,\n        decrement: true,\n        disabledIndices\n      });\n      if (loop && (prevIndex - cols < minIndex || nextIndex < 0)) {\n        const col = prevIndex % cols;\n        const maxCol = maxIndex % cols;\n        const offset = maxIndex - (maxCol - col);\n        if (maxCol === col) {\n          nextIndex = maxIndex;\n        } else {\n          nextIndex = maxCol > col ? offset : offset - cols;\n        }\n      }\n    }\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n  if (event.key === ARROW_DOWN) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = minIndex;\n    } else {\n      nextIndex = findNonDisabledListIndex(listRef, {\n        startingIndex: prevIndex,\n        amount: cols,\n        disabledIndices\n      });\n      if (loop && prevIndex + cols > maxIndex) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex % cols - cols,\n          amount: cols,\n          disabledIndices\n        });\n      }\n    }\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n\n  // Remains on the same row/column.\n  if (orientation === 'both') {\n    const prevRow = floor(prevIndex / cols);\n    if (event.key === (rtl ? ARROW_LEFT : ARROW_RIGHT)) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== cols - 1) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex,\n          disabledIndices\n        });\n        if (loop && isDifferentGridRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledListIndex(listRef, {\n            startingIndex: prevIndex - prevIndex % cols - 1,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      }\n      if (isDifferentGridRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    if (event.key === (rtl ? ARROW_RIGHT : ARROW_LEFT)) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== 0) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex,\n          decrement: true,\n          disabledIndices\n        });\n        if (loop && isDifferentGridRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledListIndex(listRef, {\n            startingIndex: prevIndex + (cols - prevIndex % cols),\n            decrement: true,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex + (cols - prevIndex % cols),\n          decrement: true,\n          disabledIndices\n        });\n      }\n      if (isDifferentGridRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    const lastRow = floor(maxIndex / cols) === prevRow;\n    if (isIndexOutOfListBounds(listRef, nextIndex)) {\n      if (loop && lastRow) {\n        nextIndex = event.key === (rtl ? ARROW_RIGHT : ARROW_LEFT) ? maxIndex : findNonDisabledListIndex(listRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      } else {\n        nextIndex = prevIndex;\n      }\n    }\n  }\n  return nextIndex;\n}\n\n/** For each cell index, gets the item index that occupies that cell */\nfunction createGridCellMap(sizes, cols, dense) {\n  const cellMap = [];\n  let startIndex = 0;\n  sizes.forEach((_ref2, index) => {\n    let {\n      width,\n      height\n    } = _ref2;\n    if (width > cols) {\n      if (process.env.NODE_ENV !== \"production\") {\n        throw new Error(\"[Floating UI]: Invalid grid - item width at index \" + index + \" is greater than grid columns\");\n      }\n    }\n    let itemPlaced = false;\n    if (dense) {\n      startIndex = 0;\n    }\n    while (!itemPlaced) {\n      const targetCells = [];\n      for (let i = 0; i < width; i++) {\n        for (let j = 0; j < height; j++) {\n          targetCells.push(startIndex + i + j * cols);\n        }\n      }\n      if (startIndex % cols + width <= cols && targetCells.every(cell => cellMap[cell] == null)) {\n        targetCells.forEach(cell => {\n          cellMap[cell] = index;\n        });\n        itemPlaced = true;\n      } else {\n        startIndex++;\n      }\n    }\n  });\n\n  // convert into a non-sparse array\n  return [...cellMap];\n}\n\n/** Gets cell index of an item's corner or -1 when index is -1. */\nfunction getGridCellIndexOfCorner(index, sizes, cellMap, cols, corner) {\n  if (index === -1) return -1;\n  const firstCellIndex = cellMap.indexOf(index);\n  const sizeItem = sizes[index];\n  switch (corner) {\n    case 'tl':\n      return firstCellIndex;\n    case 'tr':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + sizeItem.width - 1;\n    case 'bl':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + (sizeItem.height - 1) * cols;\n    case 'br':\n      return cellMap.lastIndexOf(index);\n  }\n}\n\n/** Gets all cell indices that correspond to the specified indices */\nfunction getGridCellIndices(indices, cellMap) {\n  return cellMap.flatMap((index, cellIndex) => indices.includes(index) ? [cellIndex] : []);\n}\nfunction isListIndexDisabled(listRef, index, disabledIndices) {\n  if (typeof disabledIndices === 'function') {\n    return disabledIndices(index);\n  } else if (disabledIndices) {\n    return disabledIndices.includes(index);\n  }\n  const element = listRef.current[index];\n  return element == null || element.hasAttribute('disabled') || element.getAttribute('aria-disabled') === 'true';\n}\n\nconst getTabbableOptions = () => ({\n  getShadowRoot: true,\n  displayCheck:\n  // JSDOM does not support the `tabbable` library. To solve this we can\n  // check if `ResizeObserver` is a real function (not polyfilled), which\n  // determines if the current environment is JSDOM-like.\n  typeof ResizeObserver === 'function' && ResizeObserver.toString().includes('[native code]') ? 'full' : 'none'\n});\nfunction getTabbableIn(container, dir) {\n  const list = tabbable(container, getTabbableOptions());\n  const len = list.length;\n  if (len === 0) return;\n  const active = activeElement(getDocument(container));\n  const index = list.indexOf(active);\n  const nextIndex = index === -1 ? dir === 1 ? 0 : len - 1 : index + dir;\n  return list[nextIndex];\n}\nfunction getNextTabbable(referenceElement) {\n  return getTabbableIn(getDocument(referenceElement).body, 1) || referenceElement;\n}\nfunction getPreviousTabbable(referenceElement) {\n  return getTabbableIn(getDocument(referenceElement).body, -1) || referenceElement;\n}\nfunction isOutsideEvent(event, container) {\n  const containerElement = container || event.currentTarget;\n  const relatedTarget = event.relatedTarget;\n  return !relatedTarget || !contains(containerElement, relatedTarget);\n}\nfunction disableFocusInside(container) {\n  const tabbableElements = tabbable(container, getTabbableOptions());\n  tabbableElements.forEach(element => {\n    element.dataset.tabindex = element.getAttribute('tabindex') || '';\n    element.setAttribute('tabindex', '-1');\n  });\n}\nfunction enableFocusInside(container) {\n  const elements = container.querySelectorAll('[data-tabindex]');\n  elements.forEach(element => {\n    const tabindex = element.dataset.tabindex;\n    delete element.dataset.tabindex;\n    if (tabindex) {\n      element.setAttribute('tabindex', tabindex);\n    } else {\n      element.removeAttribute('tabindex');\n    }\n  });\n}\n\nexport { activeElement, contains, createGridCellMap, disableFocusInside, enableFocusInside, findNonDisabledListIndex, getDeepestNode, getDocument, getFloatingFocusElement, getGridCellIndexOfCorner, getGridCellIndices, getGridNavigatedIndex, getMaxListIndex, getMinListIndex, getNextTabbable, getNodeAncestors, getNodeChildren, getPlatform, getPreviousTabbable, getTabbableOptions, getTarget, getUserAgent, isAndroid, isDifferentGridRow, isEventTargetWithin, isIndexOutOfListBounds, isJSDOM, isListIndexDisabled, isMac, isMouseLikePointerType, isOutsideEvent, isReactEvent, isRootElement, isSafari, isTypeableCombobox, isTypeableElement, isVirtualClick, isVirtualPointerEvent, matchesFocusVisible, stopEvent, useEffectEvent, useLatestRef, index as useModernLayoutEffect };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          const ignoreCrossAxisOverflow = checkCrossAxis === 'alignment' ? initialSideAxis !== getSideAxis(nextPlacement) : false;\n          if (!ignoreCrossAxisOverflow ||\n          // We leave the current main axis only if every placement on that axis\n          // overflows the main axis.\n          overflowsData.every(d => getSideAxis(d.placement) === initialSideAxis ? d.overflows[0] > 0 : true)) {\n            // Try next placement and re-run the lifecycle.\n            return {\n              data: {\n                index: nextIndex,\n                overflows: overflowsData\n              },\n              reset: {\n                placement: nextPlacement\n              }\n            };\n          }\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nconst originSides = /*#__PURE__*/new Set(['left', 'top']);\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = originSides.has(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = originSides.has(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","import { rectToClientRect, arrow as arrow$1, autoPlacement as autoPlacement$1, detectOverflow as detectOverflow$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle as getComputedStyle$1, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle$1(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle$1(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\nfunction getHTMLOffset(documentElement, scroll) {\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - getWindowScrollBarX(documentElement, htmlRect);\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle$1(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Safety check: ensure the scrollbar space is reasonable in case this\n// calculation is affected by unusual styles.\n// Most scrollbars leave 15-18px of space.\nconst SCROLLBAR_MAX = 25;\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  const windowScrollbarX = getWindowScrollBarX(html);\n  // <html> `overflow: hidden` + `scrollbar-gutter: stable` reduces the\n  // visual width of the <html> but this is not considered in the size\n  // of `html.clientWidth`.\n  if (windowScrollbarX <= 0) {\n    const doc = html.ownerDocument;\n    const body = doc.body;\n    const bodyStyles = getComputedStyle(body);\n    const bodyMarginInline = doc.compatMode === 'CSS1Compat' ? parseFloat(bodyStyles.marginLeft) + parseFloat(bodyStyles.marginRight) || 0 : 0;\n    const clippingStableScrollbarWidth = Math.abs(html.clientWidth - body.clientWidth - bodyMarginInline);\n    if (clippingStableScrollbarWidth <= SCROLLBAR_MAX) {\n      width -= clippingStableScrollbarWidth;\n    }\n  } else if (windowScrollbarX <= SCROLLBAR_MAX) {\n    // If the <body> scrollbar is on the left, the width needs to be extended\n    // by the scrollbar amount so there isn't extra space on the right.\n    width += windowScrollbarX;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nconst absoluteOrFixed = /*#__PURE__*/new Set(['absolute', 'fixed']);\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle$1(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle$1(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle$1(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && absoluteOrFixed.has(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n\n  // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n  // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n  function setLeftRTLScrollbarOffset() {\n    offsets.x = getWindowScrollBarX(documentElement);\n  }\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      setLeftRTLScrollbarOffset();\n    }\n  }\n  if (isFixed && !isOffsetParentAnElement && documentElement) {\n    setLeftRTLScrollbarOffset();\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle$1(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle$1(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle$1(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\nfunction rectsAreEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const elementRectForRootMargin = element.getBoundingClientRect();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = elementRectForRootMargin;\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      if (ratio === 1 && !rectsAreEqual(elementRectForRootMargin, element.getBoundingClientRect())) {\n        // It's possible that even though the ratio is reported as 1, the\n        // element is not actually fully within the IntersectionObserver's root\n        // area anymore. This can happen under performance constraints. This may\n        // be a bug in the browser's IntersectionObserver implementation. To\n        // work around this, we compare the element's bounding rect now with\n        // what it was at the time we created the IntersectionObserver. If they\n        // are not equal then the element moved, so we refresh.\n        refresh();\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (_e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && !rectsAreEqual(prevRefRect, nextRefRect)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","import { computePosition, arrow as arrow$2, autoPlacement as autoPlacement$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1 } from '@floating-ui/dom';\nexport { autoUpdate, computePosition, detectOverflow, getOverflowAncestors, platform } from '@floating-ui/dom';\nimport * as React from 'react';\nimport { useLayoutEffect } from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar isClient = typeof document !== 'undefined';\n\nvar noop = function noop() {};\nvar index = isClient ? useLayoutEffect : noop;\n\n// Fork of `fast-deep-equal` that only does the comparisons we need and compares\n// functions\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (typeof a === 'function' && a.toString() === b.toString()) {\n    return true;\n  }\n  let length;\n  let i;\n  let keys;\n  if (a && b && typeof a === 'object') {\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length !== b.length) return false;\n      for (i = length; i-- !== 0;) {\n        if (!deepEqual(a[i], b[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) {\n      return false;\n    }\n    for (i = length; i-- !== 0;) {\n      if (!{}.hasOwnProperty.call(b, keys[i])) {\n        return false;\n      }\n    }\n    for (i = length; i-- !== 0;) {\n      const key = keys[i];\n      if (key === '_owner' && a.$$typeof) {\n        continue;\n      }\n      if (!deepEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return a !== a && b !== b;\n}\n\nfunction getDPR(element) {\n  if (typeof window === 'undefined') {\n    return 1;\n  }\n  const win = element.ownerDocument.defaultView || window;\n  return win.devicePixelRatio || 1;\n}\n\nfunction roundByDPR(element, value) {\n  const dpr = getDPR(element);\n  return Math.round(value * dpr) / dpr;\n}\n\nfunction useLatestRef(value) {\n  const ref = React.useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\n\n/**\n * Provides data to position a floating element.\n * @see https://floating-ui.com/docs/useFloating\n */\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform,\n    elements: {\n      reference: externalReference,\n      floating: externalFloating\n    } = {},\n    transform = true,\n    whileElementsMounted,\n    open\n  } = options;\n  const [data, setData] = React.useState({\n    x: 0,\n    y: 0,\n    strategy,\n    placement,\n    middlewareData: {},\n    isPositioned: false\n  });\n  const [latestMiddleware, setLatestMiddleware] = React.useState(middleware);\n  if (!deepEqual(latestMiddleware, middleware)) {\n    setLatestMiddleware(middleware);\n  }\n  const [_reference, _setReference] = React.useState(null);\n  const [_floating, _setFloating] = React.useState(null);\n  const setReference = React.useCallback(node => {\n    if (node !== referenceRef.current) {\n      referenceRef.current = node;\n      _setReference(node);\n    }\n  }, []);\n  const setFloating = React.useCallback(node => {\n    if (node !== floatingRef.current) {\n      floatingRef.current = node;\n      _setFloating(node);\n    }\n  }, []);\n  const referenceEl = externalReference || _reference;\n  const floatingEl = externalFloating || _floating;\n  const referenceRef = React.useRef(null);\n  const floatingRef = React.useRef(null);\n  const dataRef = React.useRef(data);\n  const hasWhileElementsMounted = whileElementsMounted != null;\n  const whileElementsMountedRef = useLatestRef(whileElementsMounted);\n  const platformRef = useLatestRef(platform);\n  const openRef = useLatestRef(open);\n  const update = React.useCallback(() => {\n    if (!referenceRef.current || !floatingRef.current) {\n      return;\n    }\n    const config = {\n      placement,\n      strategy,\n      middleware: latestMiddleware\n    };\n    if (platformRef.current) {\n      config.platform = platformRef.current;\n    }\n    computePosition(referenceRef.current, floatingRef.current, config).then(data => {\n      const fullData = {\n        ...data,\n        // The floating element's position may be recomputed while it's closed\n        // but still mounted (such as when transitioning out). To ensure\n        // `isPositioned` will be `false` initially on the next open, avoid\n        // setting it to `true` when `open === false` (must be specified).\n        isPositioned: openRef.current !== false\n      };\n      if (isMountedRef.current && !deepEqual(dataRef.current, fullData)) {\n        dataRef.current = fullData;\n        ReactDOM.flushSync(() => {\n          setData(fullData);\n        });\n      }\n    });\n  }, [latestMiddleware, placement, strategy, platformRef, openRef]);\n  index(() => {\n    if (open === false && dataRef.current.isPositioned) {\n      dataRef.current.isPositioned = false;\n      setData(data => ({\n        ...data,\n        isPositioned: false\n      }));\n    }\n  }, [open]);\n  const isMountedRef = React.useRef(false);\n  index(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n  index(() => {\n    if (referenceEl) referenceRef.current = referenceEl;\n    if (floatingEl) floatingRef.current = floatingEl;\n    if (referenceEl && floatingEl) {\n      if (whileElementsMountedRef.current) {\n        return whileElementsMountedRef.current(referenceEl, floatingEl, update);\n      }\n      update();\n    }\n  }, [referenceEl, floatingEl, update, whileElementsMountedRef, hasWhileElementsMounted]);\n  const refs = React.useMemo(() => ({\n    reference: referenceRef,\n    floating: floatingRef,\n    setReference,\n    setFloating\n  }), [setReference, setFloating]);\n  const elements = React.useMemo(() => ({\n    reference: referenceEl,\n    floating: floatingEl\n  }), [referenceEl, floatingEl]);\n  const floatingStyles = React.useMemo(() => {\n    const initialStyles = {\n      position: strategy,\n      left: 0,\n      top: 0\n    };\n    if (!elements.floating) {\n      return initialStyles;\n    }\n    const x = roundByDPR(elements.floating, data.x);\n    const y = roundByDPR(elements.floating, data.y);\n    if (transform) {\n      return {\n        ...initialStyles,\n        transform: \"translate(\" + x + \"px, \" + y + \"px)\",\n        ...(getDPR(elements.floating) >= 1.5 && {\n          willChange: 'transform'\n        })\n      };\n    }\n    return {\n      position: strategy,\n      left: x,\n      top: y\n    };\n  }, [strategy, transform, elements.floating, data.x, data.y]);\n  return React.useMemo(() => ({\n    ...data,\n    update,\n    refs,\n    elements,\n    floatingStyles\n  }), [data, update, refs, elements, floatingStyles]);\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * This wraps the core `arrow` middleware to allow React refs as the element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow$1 = options => {\n  function isRef(value) {\n    return {}.hasOwnProperty.call(value, 'current');\n  }\n  return {\n    name: 'arrow',\n    options,\n    fn(state) {\n      const {\n        element,\n        padding\n      } = typeof options === 'function' ? options(state) : options;\n      if (element && isRef(element)) {\n        if (element.current != null) {\n          return arrow$2({\n            element: element.current,\n            padding\n          }).fn(state);\n        }\n        return {};\n      }\n      if (element) {\n        return arrow$2({\n          element,\n          padding\n        }).fn(state);\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = (options, deps) => ({\n  ...offset$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = (options, deps) => ({\n  ...shift$1(options),\n  options: [options, deps]\n});\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = (options, deps) => ({\n  ...limitShift$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = (options, deps) => ({\n  ...flip$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = (options, deps) => ({\n  ...size$1(options),\n  options: [options, deps]\n});\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = (options, deps) => ({\n  ...autoPlacement$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = (options, deps) => ({\n  ...hide$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = (options, deps) => ({\n  ...inline$1(options),\n  options: [options, deps]\n});\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * This wraps the core `arrow` middleware to allow React refs as the element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = (options, deps) => ({\n  ...arrow$1(options),\n  options: [options, deps]\n});\n\nexport { arrow, autoPlacement, flip, hide, inline, limitShift, offset, shift, size, useFloating };\n","import * as React from 'react';\nimport { useModernLayoutEffect, useEffectEvent, getMinListIndex, getMaxListIndex, createGridCellMap, isListIndexDisabled, getGridNavigatedIndex, getGridCellIndexOfCorner, getGridCellIndices, findNonDisabledListIndex, isIndexOutOfListBounds, useLatestRef, getDocument as getDocument$1, isMouseLikePointerType, contains as contains$1, isSafari, enableFocusInside, isOutsideEvent, getPreviousTabbable, getNextTabbable, disableFocusInside, isTypeableCombobox, getFloatingFocusElement, getTabbableOptions, getNodeAncestors, activeElement, getNodeChildren as getNodeChildren$1, stopEvent, getTarget as getTarget$1, isVirtualClick, isVirtualPointerEvent, getPlatform, isTypeableElement, isReactEvent, isRootElement, isEventTargetWithin, matchesFocusVisible, isMac, getDeepestNode, getUserAgent } from '@floating-ui/react/utils';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { getComputedStyle, isElement, isShadowRoot, getNodeName, isNode, isHTMLElement, getWindow, isLastTraversableNode, getParentNode, isWebKit } from '@floating-ui/utils/dom';\nimport { tabbable, isTabbable, focusable } from 'tabbable';\nimport * as ReactDOM from 'react-dom';\nimport { getOverflowAncestors, useFloating as useFloating$1, offset, detectOverflow } from '@floating-ui/react-dom';\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, getOverflowAncestors, hide, inline, limitShift, offset, platform, shift, size } from '@floating-ui/react-dom';\nimport { evaluate, max, round, min } from '@floating-ui/utils';\n\n/**\n * Merges an array of refs into a single memoized callback ref or `null`.\n * @see https://floating-ui.com/docs/react-utils#usemergerefs\n */\nfunction useMergeRefs(refs) {\n  const cleanupRef = React.useRef(undefined);\n  const refEffect = React.useCallback(instance => {\n    const cleanups = refs.map(ref => {\n      if (ref == null) {\n        return;\n      }\n      if (typeof ref === 'function') {\n        const refCallback = ref;\n        const refCleanup = refCallback(instance);\n        return typeof refCleanup === 'function' ? refCleanup : () => {\n          refCallback(null);\n        };\n      }\n      ref.current = instance;\n      return () => {\n        ref.current = null;\n      };\n    });\n    return () => {\n      cleanups.forEach(refCleanup => refCleanup == null ? void 0 : refCleanup());\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n  return React.useMemo(() => {\n    if (refs.every(ref => ref == null)) {\n      return null;\n    }\n    return value => {\n      if (cleanupRef.current) {\n        cleanupRef.current();\n        cleanupRef.current = undefined;\n      }\n      if (value != null) {\n        cleanupRef.current = refEffect(value);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}\n\nfunction sortByDocumentPosition(a, b) {\n  const position = a.compareDocumentPosition(b);\n  if (position & Node.DOCUMENT_POSITION_FOLLOWING || position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n    return -1;\n  }\n  if (position & Node.DOCUMENT_POSITION_PRECEDING || position & Node.DOCUMENT_POSITION_CONTAINS) {\n    return 1;\n  }\n  return 0;\n}\nconst FloatingListContext = /*#__PURE__*/React.createContext({\n  register: () => {},\n  unregister: () => {},\n  map: /*#__PURE__*/new Map(),\n  elementsRef: {\n    current: []\n  }\n});\n/**\n * Provides context for a list of items within the floating element.\n * @see https://floating-ui.com/docs/FloatingList\n */\nfunction FloatingList(props) {\n  const {\n    children,\n    elementsRef,\n    labelsRef\n  } = props;\n  const [nodes, setNodes] = React.useState(() => new Set());\n  const register = React.useCallback(node => {\n    setNodes(prevSet => new Set(prevSet).add(node));\n  }, []);\n  const unregister = React.useCallback(node => {\n    setNodes(prevSet => {\n      const set = new Set(prevSet);\n      set.delete(node);\n      return set;\n    });\n  }, []);\n  const map = React.useMemo(() => {\n    const newMap = new Map();\n    const sortedNodes = Array.from(nodes.keys()).sort(sortByDocumentPosition);\n    sortedNodes.forEach((node, index) => {\n      newMap.set(node, index);\n    });\n    return newMap;\n  }, [nodes]);\n  return /*#__PURE__*/jsx(FloatingListContext.Provider, {\n    value: React.useMemo(() => ({\n      register,\n      unregister,\n      map,\n      elementsRef,\n      labelsRef\n    }), [register, unregister, map, elementsRef, labelsRef]),\n    children: children\n  });\n}\n/**\n * Used to register a list item and its index (DOM position) in the\n * `FloatingList`.\n * @see https://floating-ui.com/docs/FloatingList#uselistitem\n */\nfunction useListItem(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    label\n  } = props;\n  const {\n    register,\n    unregister,\n    map,\n    elementsRef,\n    labelsRef\n  } = React.useContext(FloatingListContext);\n  const [index, setIndex] = React.useState(null);\n  const componentRef = React.useRef(null);\n  const ref = React.useCallback(node => {\n    componentRef.current = node;\n    if (index !== null) {\n      elementsRef.current[index] = node;\n      if (labelsRef) {\n        var _node$textContent;\n        const isLabelDefined = label !== undefined;\n        labelsRef.current[index] = isLabelDefined ? label : (_node$textContent = node == null ? void 0 : node.textContent) != null ? _node$textContent : null;\n      }\n    }\n  }, [index, elementsRef, labelsRef, label]);\n  useModernLayoutEffect(() => {\n    const node = componentRef.current;\n    if (node) {\n      register(node);\n      return () => {\n        unregister(node);\n      };\n    }\n  }, [register, unregister]);\n  useModernLayoutEffect(() => {\n    const index = componentRef.current ? map.get(componentRef.current) : null;\n    if (index != null) {\n      setIndex(index);\n    }\n  }, [map]);\n  return React.useMemo(() => ({\n    ref,\n    index: index == null ? -1 : index\n  }), [index, ref]);\n}\n\nconst FOCUSABLE_ATTRIBUTE = 'data-floating-ui-focusable';\nconst ACTIVE_KEY = 'active';\nconst SELECTED_KEY = 'selected';\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\n\nfunction renderJsx(render, computedProps) {\n  if (typeof render === 'function') {\n    return render(computedProps);\n  }\n  if (render) {\n    return /*#__PURE__*/React.cloneElement(render, computedProps);\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    ...computedProps\n  });\n}\nconst CompositeContext = /*#__PURE__*/React.createContext({\n  activeIndex: 0,\n  onNavigate: () => {}\n});\nconst horizontalKeys = [ARROW_LEFT, ARROW_RIGHT];\nconst verticalKeys = [ARROW_UP, ARROW_DOWN];\nconst allKeys = [...horizontalKeys, ...verticalKeys];\n\n/**\n * Creates a single tab stop whose items are navigated by arrow keys, which\n * provides list navigation outside of floating element contexts.\n *\n * This is useful to enable navigation of a list of items that arent part of a\n * floating element. A menubar is an example of a composite, with each reference\n * element being an item.\n * @see https://floating-ui.com/docs/Composite\n */\nconst Composite = /*#__PURE__*/React.forwardRef(function Composite(props, forwardedRef) {\n  const {\n    render,\n    orientation = 'both',\n    loop = true,\n    rtl = false,\n    cols = 1,\n    disabledIndices,\n    activeIndex: externalActiveIndex,\n    onNavigate: externalSetActiveIndex,\n    itemSizes,\n    dense = false,\n    ...domProps\n  } = props;\n  const [internalActiveIndex, internalSetActiveIndex] = React.useState(0);\n  const activeIndex = externalActiveIndex != null ? externalActiveIndex : internalActiveIndex;\n  const onNavigate = useEffectEvent(externalSetActiveIndex != null ? externalSetActiveIndex : internalSetActiveIndex);\n  const elementsRef = React.useRef([]);\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const contextValue = React.useMemo(() => ({\n    activeIndex,\n    onNavigate\n  }), [activeIndex, onNavigate]);\n  const isGrid = cols > 1;\n  function handleKeyDown(event) {\n    if (!allKeys.includes(event.key)) return;\n    let nextIndex = activeIndex;\n    const minIndex = getMinListIndex(elementsRef, disabledIndices);\n    const maxIndex = getMaxListIndex(elementsRef, disabledIndices);\n    const horizontalEndKey = rtl ? ARROW_LEFT : ARROW_RIGHT;\n    const horizontalStartKey = rtl ? ARROW_RIGHT : ARROW_LEFT;\n    if (isGrid) {\n      const sizes = itemSizes || Array.from({\n        length: elementsRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = createGridCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isListIndexDisabled(elementsRef, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isListIndexDisabled(elementsRef, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      const maybeNextIndex = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex ? elementsRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        rtl,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getGridCellIndices([...((typeof disabledIndices !== 'function' ? disabledIndices : null) || elementsRef.current.map((_, index) => isListIndexDisabled(elementsRef, index, disabledIndices) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getGridCellIndexOfCorner(activeIndex > maxIndex ? minIndex : activeIndex, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction we're\n        // moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === horizontalEndKey ? 'tr' : 'tl')\n      })];\n      if (maybeNextIndex != null) {\n        nextIndex = maybeNextIndex;\n      }\n    }\n    const toEndKeys = {\n      horizontal: [horizontalEndKey],\n      vertical: [ARROW_DOWN],\n      both: [horizontalEndKey, ARROW_DOWN]\n    }[orientation];\n    const toStartKeys = {\n      horizontal: [horizontalStartKey],\n      vertical: [ARROW_UP],\n      both: [horizontalStartKey, ARROW_UP]\n    }[orientation];\n    const preventedKeys = isGrid ? allKeys : {\n      horizontal: horizontalKeys,\n      vertical: verticalKeys,\n      both: allKeys\n    }[orientation];\n    if (nextIndex === activeIndex && [...toEndKeys, ...toStartKeys].includes(event.key)) {\n      if (loop && nextIndex === maxIndex && toEndKeys.includes(event.key)) {\n        nextIndex = minIndex;\n      } else if (loop && nextIndex === minIndex && toStartKeys.includes(event.key)) {\n        nextIndex = maxIndex;\n      } else {\n        nextIndex = findNonDisabledListIndex(elementsRef, {\n          startingIndex: nextIndex,\n          decrement: toStartKeys.includes(event.key),\n          disabledIndices\n        });\n      }\n    }\n    if (nextIndex !== activeIndex && !isIndexOutOfListBounds(elementsRef, nextIndex)) {\n      var _elementsRef$current$;\n      event.stopPropagation();\n      if (preventedKeys.includes(event.key)) {\n        event.preventDefault();\n      }\n      onNavigate(nextIndex);\n      (_elementsRef$current$ = elementsRef.current[nextIndex]) == null || _elementsRef$current$.focus();\n    }\n  }\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: forwardedRef,\n    'aria-orientation': orientation === 'both' ? undefined : orientation,\n    onKeyDown(e) {\n      domProps.onKeyDown == null || domProps.onKeyDown(e);\n      renderElementProps.onKeyDown == null || renderElementProps.onKeyDown(e);\n      handleKeyDown(e);\n    }\n  };\n  return /*#__PURE__*/jsx(CompositeContext.Provider, {\n    value: contextValue,\n    children: /*#__PURE__*/jsx(FloatingList, {\n      elementsRef: elementsRef,\n      children: renderJsx(render, computedProps)\n    })\n  });\n});\n/**\n * @see https://floating-ui.com/docs/Composite\n */\nconst CompositeItem = /*#__PURE__*/React.forwardRef(function CompositeItem(props, forwardedRef) {\n  const {\n    render,\n    ...domProps\n  } = props;\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const {\n    activeIndex,\n    onNavigate\n  } = React.useContext(CompositeContext);\n  const {\n    ref,\n    index\n  } = useListItem();\n  const mergedRef = useMergeRefs([ref, forwardedRef, renderElementProps.ref]);\n  const isActive = activeIndex === index;\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: mergedRef,\n    tabIndex: isActive ? 0 : -1,\n    'data-active': isActive ? '' : undefined,\n    onFocus(e) {\n      domProps.onFocus == null || domProps.onFocus(e);\n      renderElementProps.onFocus == null || renderElementProps.onFocus(e);\n      onNavigate(index);\n    }\n  };\n  return renderJsx(render, computedProps);\n});\n\n// https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\nconst SafeReact = {\n  ...React\n};\n\nlet serverHandoffComplete = false;\nlet count = 0;\nconst genId = () => // Ensure the id is unique with multiple independent versions of Floating UI\n// on <React 18\n\"floating-ui-\" + Math.random().toString(36).slice(2, 6) + count++;\nfunction useFloatingId() {\n  const [id, setId] = React.useState(() => serverHandoffComplete ? genId() : undefined);\n  useModernLayoutEffect(() => {\n    if (id == null) {\n      setId(genId());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  React.useEffect(() => {\n    serverHandoffComplete = true;\n  }, []);\n  return id;\n}\nconst useReactId = SafeReact.useId;\n\n/**\n * Uses React 18's built-in `useId()` when available, or falls back to a\n * slightly less performant (requiring a double render) implementation for\n * earlier React versions.\n * @see https://floating-ui.com/docs/react-utils#useid\n */\nconst useId = useReactId || useFloatingId;\n\nlet devMessageSet;\nif (process.env.NODE_ENV !== \"production\") {\n  devMessageSet = /*#__PURE__*/new Set();\n}\nfunction warn() {\n  var _devMessageSet;\n  for (var _len = arguments.length, messages = new Array(_len), _key = 0; _key < _len; _key++) {\n    messages[_key] = arguments[_key];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet = devMessageSet) != null && _devMessageSet.has(message))) {\n    var _devMessageSet2;\n    (_devMessageSet2 = devMessageSet) == null || _devMessageSet2.add(message);\n    console.warn(message);\n  }\n}\nfunction error() {\n  var _devMessageSet3;\n  for (var _len2 = arguments.length, messages = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    messages[_key2] = arguments[_key2];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet3 = devMessageSet) != null && _devMessageSet3.has(message))) {\n    var _devMessageSet4;\n    (_devMessageSet4 = devMessageSet) == null || _devMessageSet4.add(message);\n    console.error(message);\n  }\n}\n\n/**\n * Renders a pointing arrow triangle.\n * @see https://floating-ui.com/docs/FloatingArrow\n */\nconst FloatingArrow = /*#__PURE__*/React.forwardRef(function FloatingArrow(props, ref) {\n  const {\n    context: {\n      placement,\n      elements: {\n        floating\n      },\n      middlewareData: {\n        arrow,\n        shift\n      }\n    },\n    width = 14,\n    height = 7,\n    tipRadius = 0,\n    strokeWidth = 0,\n    staticOffset,\n    stroke,\n    d,\n    style: {\n      transform,\n      ...restStyle\n    } = {},\n    ...rest\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!ref) {\n      warn('The `ref` prop is required for `FloatingArrow`.');\n    }\n  }\n  const clipPathId = useId();\n  const [isRTL, setIsRTL] = React.useState(false);\n\n  // https://github.com/floating-ui/floating-ui/issues/2932\n  useModernLayoutEffect(() => {\n    if (!floating) return;\n    const isRTL = getComputedStyle(floating).direction === 'rtl';\n    if (isRTL) {\n      setIsRTL(true);\n    }\n  }, [floating]);\n  if (!floating) {\n    return null;\n  }\n  const [side, alignment] = placement.split('-');\n  const isVerticalSide = side === 'top' || side === 'bottom';\n  let computedStaticOffset = staticOffset;\n  if (isVerticalSide && shift != null && shift.x || !isVerticalSide && shift != null && shift.y) {\n    computedStaticOffset = null;\n  }\n\n  // Strokes must be double the border width, this ensures the stroke's width\n  // works as you'd expect.\n  const computedStrokeWidth = strokeWidth * 2;\n  const halfStrokeWidth = computedStrokeWidth / 2;\n  const svgX = width / 2 * (tipRadius / -8 + 1);\n  const svgY = height / 2 * tipRadius / 4;\n  const isCustomShape = !!d;\n  const yOffsetProp = computedStaticOffset && alignment === 'end' ? 'bottom' : 'top';\n  let xOffsetProp = computedStaticOffset && alignment === 'end' ? 'right' : 'left';\n  if (computedStaticOffset && isRTL) {\n    xOffsetProp = alignment === 'end' ? 'left' : 'right';\n  }\n  const arrowX = (arrow == null ? void 0 : arrow.x) != null ? computedStaticOffset || arrow.x : '';\n  const arrowY = (arrow == null ? void 0 : arrow.y) != null ? computedStaticOffset || arrow.y : '';\n  const dValue = d || 'M0,0' + (\" H\" + width) + (\" L\" + (width - svgX) + \",\" + (height - svgY)) + (\" Q\" + width / 2 + \",\" + height + \" \" + svgX + \",\" + (height - svgY)) + ' Z';\n  const rotation = {\n    top: isCustomShape ? 'rotate(180deg)' : '',\n    left: isCustomShape ? 'rotate(90deg)' : 'rotate(-90deg)',\n    bottom: isCustomShape ? '' : 'rotate(180deg)',\n    right: isCustomShape ? 'rotate(-90deg)' : 'rotate(90deg)'\n  }[side];\n  return /*#__PURE__*/jsxs(\"svg\", {\n    ...rest,\n    \"aria-hidden\": true,\n    ref: ref,\n    width: isCustomShape ? width : width + computedStrokeWidth,\n    height: width,\n    viewBox: \"0 0 \" + width + \" \" + (height > width ? height : width),\n    style: {\n      position: 'absolute',\n      pointerEvents: 'none',\n      [xOffsetProp]: arrowX,\n      [yOffsetProp]: arrowY,\n      [side]: isVerticalSide || isCustomShape ? '100%' : \"calc(100% - \" + computedStrokeWidth / 2 + \"px)\",\n      transform: [rotation, transform].filter(t => !!t).join(' '),\n      ...restStyle\n    },\n    children: [computedStrokeWidth > 0 && /*#__PURE__*/jsx(\"path\", {\n      clipPath: \"url(#\" + clipPathId + \")\",\n      fill: \"none\",\n      stroke: stroke\n      // Account for the stroke on the fill path rendered below.\n      ,\n      strokeWidth: computedStrokeWidth + (d ? 0 : 1),\n      d: dValue\n    }), /*#__PURE__*/jsx(\"path\", {\n      stroke: computedStrokeWidth && !d ? rest.fill : 'none',\n      d: dValue\n    }), /*#__PURE__*/jsx(\"clipPath\", {\n      id: clipPathId,\n      children: /*#__PURE__*/jsx(\"rect\", {\n        x: -halfStrokeWidth,\n        y: halfStrokeWidth * (isCustomShape ? -1 : 1),\n        width: width + computedStrokeWidth,\n        height: width\n      })\n    })]\n  });\n});\n\nfunction createEventEmitter() {\n  const map = new Map();\n  return {\n    emit(event, data) {\n      var _map$get;\n      (_map$get = map.get(event)) == null || _map$get.forEach(listener => listener(data));\n    },\n    on(event, listener) {\n      if (!map.has(event)) {\n        map.set(event, new Set());\n      }\n      map.get(event).add(listener);\n    },\n    off(event, listener) {\n      var _map$get2;\n      (_map$get2 = map.get(event)) == null || _map$get2.delete(listener);\n    }\n  };\n}\n\nconst FloatingNodeContext = /*#__PURE__*/React.createContext(null);\nconst FloatingTreeContext = /*#__PURE__*/React.createContext(null);\n\n/**\n * Returns the parent node id for nested floating elements, if available.\n * Returns `null` for top-level floating elements.\n */\nconst useFloatingParentNodeId = () => {\n  var _React$useContext;\n  return ((_React$useContext = React.useContext(FloatingNodeContext)) == null ? void 0 : _React$useContext.id) || null;\n};\n\n/**\n * Returns the nearest floating tree context, if available.\n */\nconst useFloatingTree = () => React.useContext(FloatingTreeContext);\n\n/**\n * Registers a node into the `FloatingTree`, returning its id.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction useFloatingNodeId(customParentId) {\n  const id = useId();\n  const tree = useFloatingTree();\n  const reactParentId = useFloatingParentNodeId();\n  const parentId = customParentId || reactParentId;\n  useModernLayoutEffect(() => {\n    if (!id) return;\n    const node = {\n      id,\n      parentId\n    };\n    tree == null || tree.addNode(node);\n    return () => {\n      tree == null || tree.removeNode(node);\n    };\n  }, [tree, id, parentId]);\n  return id;\n}\n/**\n * Provides parent node context for nested floating elements.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingNode(props) {\n  const {\n    children,\n    id\n  } = props;\n  const parentId = useFloatingParentNodeId();\n  return /*#__PURE__*/jsx(FloatingNodeContext.Provider, {\n    value: React.useMemo(() => ({\n      id,\n      parentId\n    }), [id, parentId]),\n    children: children\n  });\n}\n/**\n * Provides context for nested floating elements when they are not children of\n * each other on the DOM.\n * This is not necessary in all cases, except when there must be explicit communication between parent and child floating elements. It is necessary for:\n * - The `bubbles` option in the `useDismiss()` Hook\n * - Nested virtual list navigation\n * - Nested floating elements that each open on hover\n * - Custom communication between parent and child floating elements\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingTree(props) {\n  const {\n    children\n  } = props;\n  const nodesRef = React.useRef([]);\n  const addNode = React.useCallback(node => {\n    nodesRef.current = [...nodesRef.current, node];\n  }, []);\n  const removeNode = React.useCallback(node => {\n    nodesRef.current = nodesRef.current.filter(n => n !== node);\n  }, []);\n  const [events] = React.useState(() => createEventEmitter());\n  return /*#__PURE__*/jsx(FloatingTreeContext.Provider, {\n    value: React.useMemo(() => ({\n      nodesRef,\n      addNode,\n      removeNode,\n      events\n    }), [addNode, removeNode, events]),\n    children: children\n  });\n}\n\nfunction createAttribute(name) {\n  return \"data-floating-ui-\" + name;\n}\n\nfunction clearTimeoutIfSet(timeoutRef) {\n  if (timeoutRef.current !== -1) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = -1;\n  }\n}\n\nconst safePolygonIdentifier = /*#__PURE__*/createAttribute('safe-polygon');\nfunction getDelay(value, prop, pointerType) {\n  if (pointerType && !isMouseLikePointerType(pointerType)) {\n    return 0;\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'function') {\n    const result = value();\n    if (typeof result === 'number') {\n      return result;\n    }\n    return result == null ? void 0 : result[prop];\n  }\n  return value == null ? void 0 : value[prop];\n}\nfunction getRestMs(value) {\n  if (typeof value === 'function') {\n    return value();\n  }\n  return value;\n}\n/**\n * Opens the floating element while hovering over the reference element, like\n * CSS `:hover`.\n * @see https://floating-ui.com/docs/useHover\n */\nfunction useHover(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    events,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    delay = 0,\n    handleClose = null,\n    mouseOnly = false,\n    restMs = 0,\n    move = true\n  } = props;\n  const tree = useFloatingTree();\n  const parentId = useFloatingParentNodeId();\n  const handleCloseRef = useLatestRef(handleClose);\n  const delayRef = useLatestRef(delay);\n  const openRef = useLatestRef(open);\n  const restMsRef = useLatestRef(restMs);\n  const pointerTypeRef = React.useRef();\n  const timeoutRef = React.useRef(-1);\n  const handlerRef = React.useRef();\n  const restTimeoutRef = React.useRef(-1);\n  const blockMouseMoveRef = React.useRef(true);\n  const performedPointerEventsMutationRef = React.useRef(false);\n  const unbindMouseMoveRef = React.useRef(() => {});\n  const restTimeoutPendingRef = React.useRef(false);\n  const isHoverOpen = useEffectEvent(() => {\n    var _dataRef$current$open;\n    const type = (_dataRef$current$open = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open.type;\n    return (type == null ? void 0 : type.includes('mouse')) && type !== 'mousedown';\n  });\n\n  // When closing before opening, clear the delay timeouts to cancel it\n  // from showing.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        open\n      } = _ref;\n      if (!open) {\n        clearTimeoutIfSet(timeoutRef);\n        clearTimeoutIfSet(restTimeoutRef);\n        blockMouseMoveRef.current = true;\n        restTimeoutPendingRef.current = false;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [enabled, events]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    if (!handleCloseRef.current) return;\n    if (!open) return;\n    function onLeave(event) {\n      if (isHoverOpen()) {\n        onOpenChange(false, event, 'hover');\n      }\n    }\n    const html = getDocument$1(elements.floating).documentElement;\n    html.addEventListener('mouseleave', onLeave);\n    return () => {\n      html.removeEventListener('mouseleave', onLeave);\n    };\n  }, [elements.floating, open, onOpenChange, enabled, handleCloseRef, isHoverOpen]);\n  const closeWithDelay = React.useCallback(function (event, runElseBranch, reason) {\n    if (runElseBranch === void 0) {\n      runElseBranch = true;\n    }\n    if (reason === void 0) {\n      reason = 'hover';\n    }\n    const closeDelay = getDelay(delayRef.current, 'close', pointerTypeRef.current);\n    if (closeDelay && !handlerRef.current) {\n      clearTimeoutIfSet(timeoutRef);\n      timeoutRef.current = window.setTimeout(() => onOpenChange(false, event, reason), closeDelay);\n    } else if (runElseBranch) {\n      clearTimeoutIfSet(timeoutRef);\n      onOpenChange(false, event, reason);\n    }\n  }, [delayRef, onOpenChange]);\n  const cleanupMouseMoveHandler = useEffectEvent(() => {\n    unbindMouseMoveRef.current();\n    handlerRef.current = undefined;\n  });\n  const clearPointerEvents = useEffectEvent(() => {\n    if (performedPointerEventsMutationRef.current) {\n      const body = getDocument$1(elements.floating).body;\n      body.style.pointerEvents = '';\n      body.removeAttribute(safePolygonIdentifier);\n      performedPointerEventsMutationRef.current = false;\n    }\n  });\n  const isClickLikeOpenEvent = useEffectEvent(() => {\n    return dataRef.current.openEvent ? ['click', 'mousedown'].includes(dataRef.current.openEvent.type) : false;\n  });\n\n  // Registering the mouse events on the reference directly to bypass React's\n  // delegation system. If the cursor was on a disabled element and then entered\n  // the reference (no gap), `mouseenter` doesn't fire in the delegation system.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onReferenceMouseEnter(event) {\n      clearTimeoutIfSet(timeoutRef);\n      blockMouseMoveRef.current = false;\n      if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current) || getRestMs(restMsRef.current) > 0 && !getDelay(delayRef.current, 'open')) {\n        return;\n      }\n      const openDelay = getDelay(delayRef.current, 'open', pointerTypeRef.current);\n      if (openDelay) {\n        timeoutRef.current = window.setTimeout(() => {\n          if (!openRef.current) {\n            onOpenChange(true, event, 'hover');\n          }\n        }, openDelay);\n      } else if (!open) {\n        onOpenChange(true, event, 'hover');\n      }\n    }\n    function onReferenceMouseLeave(event) {\n      if (isClickLikeOpenEvent()) {\n        clearPointerEvents();\n        return;\n      }\n      unbindMouseMoveRef.current();\n      const doc = getDocument$1(elements.floating);\n      clearTimeoutIfSet(restTimeoutRef);\n      restTimeoutPendingRef.current = false;\n      if (handleCloseRef.current && dataRef.current.floatingContext) {\n        // Prevent clearing `onScrollMouseLeave` timeout.\n        if (!open) {\n          clearTimeoutIfSet(timeoutRef);\n        }\n        handlerRef.current = handleCloseRef.current({\n          ...dataRef.current.floatingContext,\n          tree,\n          x: event.clientX,\n          y: event.clientY,\n          onClose() {\n            clearPointerEvents();\n            cleanupMouseMoveHandler();\n            if (!isClickLikeOpenEvent()) {\n              closeWithDelay(event, true, 'safe-polygon');\n            }\n          }\n        });\n        const handler = handlerRef.current;\n        doc.addEventListener('mousemove', handler);\n        unbindMouseMoveRef.current = () => {\n          doc.removeEventListener('mousemove', handler);\n        };\n        return;\n      }\n\n      // Allow interactivity without `safePolygon` on touch devices. With a\n      // pointer, a short close delay is an alternative, so it should work\n      // consistently.\n      const shouldClose = pointerTypeRef.current === 'touch' ? !contains$1(elements.floating, event.relatedTarget) : true;\n      if (shouldClose) {\n        closeWithDelay(event);\n      }\n    }\n\n    // Ensure the floating element closes after scrolling even if the pointer\n    // did not move.\n    // https://github.com/floating-ui/floating-ui/discussions/1692\n    function onScrollMouseLeave(event) {\n      if (isClickLikeOpenEvent()) return;\n      if (!dataRef.current.floatingContext) return;\n      handleCloseRef.current == null || handleCloseRef.current({\n        ...dataRef.current.floatingContext,\n        tree,\n        x: event.clientX,\n        y: event.clientY,\n        onClose() {\n          clearPointerEvents();\n          cleanupMouseMoveHandler();\n          if (!isClickLikeOpenEvent()) {\n            closeWithDelay(event);\n          }\n        }\n      })(event);\n    }\n    function onFloatingMouseEnter() {\n      clearTimeoutIfSet(timeoutRef);\n    }\n    function onFloatingMouseLeave(event) {\n      if (!isClickLikeOpenEvent()) {\n        closeWithDelay(event, false);\n      }\n    }\n    if (isElement(elements.domReference)) {\n      const reference = elements.domReference;\n      const floating = elements.floating;\n      if (open) {\n        reference.addEventListener('mouseleave', onScrollMouseLeave);\n      }\n      if (move) {\n        reference.addEventListener('mousemove', onReferenceMouseEnter, {\n          once: true\n        });\n      }\n      reference.addEventListener('mouseenter', onReferenceMouseEnter);\n      reference.addEventListener('mouseleave', onReferenceMouseLeave);\n      if (floating) {\n        floating.addEventListener('mouseleave', onScrollMouseLeave);\n        floating.addEventListener('mouseenter', onFloatingMouseEnter);\n        floating.addEventListener('mouseleave', onFloatingMouseLeave);\n      }\n      return () => {\n        if (open) {\n          reference.removeEventListener('mouseleave', onScrollMouseLeave);\n        }\n        if (move) {\n          reference.removeEventListener('mousemove', onReferenceMouseEnter);\n        }\n        reference.removeEventListener('mouseenter', onReferenceMouseEnter);\n        reference.removeEventListener('mouseleave', onReferenceMouseLeave);\n        if (floating) {\n          floating.removeEventListener('mouseleave', onScrollMouseLeave);\n          floating.removeEventListener('mouseenter', onFloatingMouseEnter);\n          floating.removeEventListener('mouseleave', onFloatingMouseLeave);\n        }\n      };\n    }\n  }, [elements, enabled, context, mouseOnly, move, closeWithDelay, cleanupMouseMoveHandler, clearPointerEvents, onOpenChange, open, openRef, tree, delayRef, handleCloseRef, dataRef, isClickLikeOpenEvent, restMsRef]);\n\n  // Block pointer-events of every element other than the reference and floating\n  // while the floating element is open and has a `handleClose` handler. Also\n  // handles nested floating elements.\n  // https://github.com/floating-ui/floating-ui/issues/1722\n  useModernLayoutEffect(() => {\n    var _handleCloseRef$curre;\n    if (!enabled) return;\n    if (open && (_handleCloseRef$curre = handleCloseRef.current) != null && (_handleCloseRef$curre = _handleCloseRef$curre.__options) != null && _handleCloseRef$curre.blockPointerEvents && isHoverOpen()) {\n      performedPointerEventsMutationRef.current = true;\n      const floatingEl = elements.floating;\n      if (isElement(elements.domReference) && floatingEl) {\n        var _tree$nodesRef$curren;\n        const body = getDocument$1(elements.floating).body;\n        body.setAttribute(safePolygonIdentifier, '');\n        const ref = elements.domReference;\n        const parentFloating = tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null ? void 0 : _tree$nodesRef$curren.elements.floating;\n        if (parentFloating) {\n          parentFloating.style.pointerEvents = '';\n        }\n        body.style.pointerEvents = 'none';\n        ref.style.pointerEvents = 'auto';\n        floatingEl.style.pointerEvents = 'auto';\n        return () => {\n          body.style.pointerEvents = '';\n          ref.style.pointerEvents = '';\n          floatingEl.style.pointerEvents = '';\n        };\n      }\n    }\n  }, [enabled, open, parentId, elements, tree, handleCloseRef, isHoverOpen]);\n  useModernLayoutEffect(() => {\n    if (!open) {\n      pointerTypeRef.current = undefined;\n      restTimeoutPendingRef.current = false;\n      cleanupMouseMoveHandler();\n      clearPointerEvents();\n    }\n  }, [open, cleanupMouseMoveHandler, clearPointerEvents]);\n  React.useEffect(() => {\n    return () => {\n      cleanupMouseMoveHandler();\n      clearTimeoutIfSet(timeoutRef);\n      clearTimeoutIfSet(restTimeoutRef);\n      clearPointerEvents();\n    };\n  }, [enabled, elements.domReference, cleanupMouseMoveHandler, clearPointerEvents]);\n  const reference = React.useMemo(() => {\n    function setPointerRef(event) {\n      pointerTypeRef.current = event.pointerType;\n    }\n    return {\n      onPointerDown: setPointerRef,\n      onPointerEnter: setPointerRef,\n      onMouseMove(event) {\n        const {\n          nativeEvent\n        } = event;\n        function handleMouseMove() {\n          if (!blockMouseMoveRef.current && !openRef.current) {\n            onOpenChange(true, nativeEvent, 'hover');\n          }\n        }\n        if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current)) {\n          return;\n        }\n        if (open || getRestMs(restMsRef.current) === 0) {\n          return;\n        }\n\n        // Ignore insignificant movements to account for tremors.\n        if (restTimeoutPendingRef.current && event.movementX ** 2 + event.movementY ** 2 < 2) {\n          return;\n        }\n        clearTimeoutIfSet(restTimeoutRef);\n        if (pointerTypeRef.current === 'touch') {\n          handleMouseMove();\n        } else {\n          restTimeoutPendingRef.current = true;\n          restTimeoutRef.current = window.setTimeout(handleMouseMove, getRestMs(restMsRef.current));\n        }\n      }\n    };\n  }, [mouseOnly, onOpenChange, open, openRef, restMsRef]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst NOOP = () => {};\nconst FloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  delay: 0,\n  initialDelay: 0,\n  timeoutMs: 0,\n  currentId: null,\n  setCurrentId: NOOP,\n  setState: NOOP,\n  isInstantPhase: false\n});\n\n/**\n * @deprecated\n * Use the return value of `useDelayGroup()` instead.\n */\nconst useDelayGroupContext = () => React.useContext(FloatingDelayGroupContext);\n/**\n * Provides context for a group of floating elements that should share a\n * `delay`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction FloatingDelayGroup(props) {\n  const {\n    children,\n    delay,\n    timeoutMs = 0\n  } = props;\n  const [state, setState] = React.useReducer((prev, next) => ({\n    ...prev,\n    ...next\n  }), {\n    delay,\n    timeoutMs,\n    initialDelay: delay,\n    currentId: null,\n    isInstantPhase: false\n  });\n  const initialCurrentIdRef = React.useRef(null);\n  const setCurrentId = React.useCallback(currentId => {\n    setState({\n      currentId\n    });\n  }, []);\n  useModernLayoutEffect(() => {\n    if (state.currentId) {\n      if (initialCurrentIdRef.current === null) {\n        initialCurrentIdRef.current = state.currentId;\n      } else if (!state.isInstantPhase) {\n        setState({\n          isInstantPhase: true\n        });\n      }\n    } else {\n      if (state.isInstantPhase) {\n        setState({\n          isInstantPhase: false\n        });\n      }\n      initialCurrentIdRef.current = null;\n    }\n  }, [state.currentId, state.isInstantPhase]);\n  return /*#__PURE__*/jsx(FloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({\n      ...state,\n      setState,\n      setCurrentId\n    }), [state, setCurrentId]),\n    children: children\n  });\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `FloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction useDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    floatingId\n  } = context;\n  const {\n    id: optionId,\n    enabled = true\n  } = options;\n  const id = optionId != null ? optionId : floatingId;\n  const groupContext = useDelayGroupContext();\n  const {\n    currentId,\n    setCurrentId,\n    initialDelay,\n    setState,\n    timeoutMs\n  } = groupContext;\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!currentId) return;\n    setState({\n      delay: {\n        open: 1,\n        close: getDelay(initialDelay, 'close')\n      }\n    });\n    if (currentId !== id) {\n      onOpenChange(false);\n    }\n  }, [enabled, id, onOpenChange, setState, currentId, initialDelay]);\n  useModernLayoutEffect(() => {\n    function unset() {\n      onOpenChange(false);\n      setState({\n        delay: initialDelay,\n        currentId: null\n      });\n    }\n    if (!enabled) return;\n    if (!currentId) return;\n    if (!open && currentId === id) {\n      if (timeoutMs) {\n        const timeout = window.setTimeout(unset, timeoutMs);\n        return () => {\n          clearTimeout(timeout);\n        };\n      }\n      unset();\n    }\n  }, [enabled, open, setState, currentId, id, onOpenChange, initialDelay, timeoutMs]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (setCurrentId === NOOP || !open) return;\n    setCurrentId(id);\n  }, [enabled, open, setCurrentId, id]);\n  return groupContext;\n}\n\nconst NextFloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  hasProvider: false,\n  timeoutMs: 0,\n  delayRef: {\n    current: 0\n  },\n  initialDelayRef: {\n    current: 0\n  },\n  timeoutIdRef: {\n    current: -1\n  },\n  currentIdRef: {\n    current: null\n  },\n  currentContextRef: {\n    current: null\n  }\n});\n/**\n * Experimental next version of `FloatingDelayGroup` to become the default\n * in the future. This component is not yet stable.\n * Provides context for a group of floating elements that should share a\n * `delay`. Unlike `FloatingDelayGroup`, `useNextDelayGroup` with this\n * component does not cause a re-render of unrelated consumers of the\n * context when the delay changes.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction NextFloatingDelayGroup(props) {\n  const {\n    children,\n    delay,\n    timeoutMs = 0\n  } = props;\n  const delayRef = React.useRef(delay);\n  const initialDelayRef = React.useRef(delay);\n  const currentIdRef = React.useRef(null);\n  const currentContextRef = React.useRef(null);\n  const timeoutIdRef = React.useRef(-1);\n  return /*#__PURE__*/jsx(NextFloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({\n      hasProvider: true,\n      delayRef,\n      initialDelayRef,\n      currentIdRef,\n      timeoutMs,\n      currentContextRef,\n      timeoutIdRef\n    }), [timeoutMs]),\n    children: children\n  });\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `NextFloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction useNextDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    floatingId\n  } = context;\n  const {\n    enabled = true\n  } = options;\n  const groupContext = React.useContext(NextFloatingDelayGroupContext);\n  const {\n    currentIdRef,\n    delayRef,\n    timeoutMs,\n    initialDelayRef,\n    currentContextRef,\n    hasProvider,\n    timeoutIdRef\n  } = groupContext;\n  const [isInstantPhase, setIsInstantPhase] = React.useState(false);\n  useModernLayoutEffect(() => {\n    function unset() {\n      var _currentContextRef$cu;\n      setIsInstantPhase(false);\n      (_currentContextRef$cu = currentContextRef.current) == null || _currentContextRef$cu.setIsInstantPhase(false);\n      currentIdRef.current = null;\n      currentContextRef.current = null;\n      delayRef.current = initialDelayRef.current;\n    }\n    if (!enabled) return;\n    if (!currentIdRef.current) return;\n    if (!open && currentIdRef.current === floatingId) {\n      setIsInstantPhase(false);\n      if (timeoutMs) {\n        timeoutIdRef.current = window.setTimeout(unset, timeoutMs);\n        return () => {\n          clearTimeout(timeoutIdRef.current);\n        };\n      }\n      unset();\n    }\n  }, [enabled, open, floatingId, currentIdRef, delayRef, timeoutMs, initialDelayRef, currentContextRef, timeoutIdRef]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!open) return;\n    const prevContext = currentContextRef.current;\n    const prevId = currentIdRef.current;\n    currentContextRef.current = {\n      onOpenChange,\n      setIsInstantPhase\n    };\n    currentIdRef.current = floatingId;\n    delayRef.current = {\n      open: 0,\n      close: getDelay(initialDelayRef.current, 'close')\n    };\n    if (prevId !== null && prevId !== floatingId) {\n      clearTimeoutIfSet(timeoutIdRef);\n      setIsInstantPhase(true);\n      prevContext == null || prevContext.setIsInstantPhase(true);\n      prevContext == null || prevContext.onOpenChange(false);\n    } else {\n      setIsInstantPhase(false);\n      prevContext == null || prevContext.setIsInstantPhase(false);\n    }\n  }, [enabled, open, floatingId, onOpenChange, currentIdRef, delayRef, timeoutMs, initialDelayRef, currentContextRef, timeoutIdRef]);\n  useModernLayoutEffect(() => {\n    return () => {\n      currentContextRef.current = null;\n    };\n  }, [currentContextRef]);\n  return React.useMemo(() => ({\n    hasProvider,\n    delayRef,\n    isInstantPhase\n  }), [hasProvider, delayRef, isInstantPhase]);\n}\n\nlet rafId = 0;\nfunction enqueueFocus(el, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    preventScroll = false,\n    cancelPrevious = true,\n    sync = false\n  } = options;\n  cancelPrevious && cancelAnimationFrame(rafId);\n  const exec = () => el == null ? void 0 : el.focus({\n    preventScroll\n  });\n  if (sync) {\n    exec();\n  } else {\n    rafId = requestAnimationFrame(exec);\n  }\n}\n\nfunction contains(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n\n  // First, attempt with faster native method\n  if (parent.contains(child)) {\n    return true;\n  }\n\n  // then fallback to custom implementation with Shadow DOM support\n  if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    while (next) {\n      if (parent === next) {\n        return true;\n      }\n      // @ts-ignore\n      next = next.parentNode || next.host;\n    }\n  }\n\n  // Give up, the result is false\n  return false;\n}\nfunction getTarget(event) {\n  if ('composedPath' in event) {\n    return event.composedPath()[0];\n  }\n\n  // TS thinks `event` is of type never as it assumes all browsers support\n  // `composedPath()`, but browsers without shadow DOM don't.\n  return event.target;\n}\nfunction getDocument(node) {\n  return (node == null ? void 0 : node.ownerDocument) || document;\n}\n\n// Modified to add conditional `aria-hidden` support:\n// https://github.com/theKashey/aria-hidden/blob/9220c8f4a4fd35f63bee5510a9f41a37264382d4/src/index.ts\nconst counters = {\n  inert: /*#__PURE__*/new WeakMap(),\n  'aria-hidden': /*#__PURE__*/new WeakMap(),\n  none: /*#__PURE__*/new WeakMap()\n};\nfunction getCounterMap(control) {\n  if (control === 'inert') return counters.inert;\n  if (control === 'aria-hidden') return counters['aria-hidden'];\n  return counters.none;\n}\nlet uncontrolledElementsSet = /*#__PURE__*/new WeakSet();\nlet markerMap = {};\nlet lockCount$1 = 0;\nconst supportsInert = () => typeof HTMLElement !== 'undefined' && 'inert' in HTMLElement.prototype;\nconst unwrapHost = node => node && (node.host || unwrapHost(node.parentNode));\nconst correctElements = (parent, targets) => targets.map(target => {\n  if (parent.contains(target)) {\n    return target;\n  }\n  const correctedTarget = unwrapHost(target);\n  if (parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  return null;\n}).filter(x => x != null);\nfunction applyAttributeToOthers(uncorrectedAvoidElements, body, ariaHidden, inert) {\n  const markerName = 'data-floating-ui-inert';\n  const controlAttribute = inert ? 'inert' : ariaHidden ? 'aria-hidden' : null;\n  const avoidElements = correctElements(body, uncorrectedAvoidElements);\n  const elementsToKeep = new Set();\n  const elementsToStop = new Set(avoidElements);\n  const hiddenElements = [];\n  if (!markerMap[markerName]) {\n    markerMap[markerName] = new WeakMap();\n  }\n  const markerCounter = markerMap[markerName];\n  avoidElements.forEach(keep);\n  deep(body);\n  elementsToKeep.clear();\n  function keep(el) {\n    if (!el || elementsToKeep.has(el)) {\n      return;\n    }\n    elementsToKeep.add(el);\n    el.parentNode && keep(el.parentNode);\n  }\n  function deep(parent) {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    [].forEach.call(parent.children, node => {\n      if (getNodeName(node) === 'script') return;\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        const attr = controlAttribute ? node.getAttribute(controlAttribute) : null;\n        const alreadyHidden = attr !== null && attr !== 'false';\n        const counterMap = getCounterMap(controlAttribute);\n        const counterValue = (counterMap.get(node) || 0) + 1;\n        const markerValue = (markerCounter.get(node) || 0) + 1;\n        counterMap.set(node, counterValue);\n        markerCounter.set(node, markerValue);\n        hiddenElements.push(node);\n        if (counterValue === 1 && alreadyHidden) {\n          uncontrolledElementsSet.add(node);\n        }\n        if (markerValue === 1) {\n          node.setAttribute(markerName, '');\n        }\n        if (!alreadyHidden && controlAttribute) {\n          node.setAttribute(controlAttribute, controlAttribute === 'inert' ? '' : 'true');\n        }\n      }\n    });\n  }\n  lockCount$1++;\n  return () => {\n    hiddenElements.forEach(element => {\n      const counterMap = getCounterMap(controlAttribute);\n      const currentCounterValue = counterMap.get(element) || 0;\n      const counterValue = currentCounterValue - 1;\n      const markerValue = (markerCounter.get(element) || 0) - 1;\n      counterMap.set(element, counterValue);\n      markerCounter.set(element, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledElementsSet.has(element) && controlAttribute) {\n          element.removeAttribute(controlAttribute);\n        }\n        uncontrolledElementsSet.delete(element);\n      }\n      if (!markerValue) {\n        element.removeAttribute(markerName);\n      }\n    });\n    lockCount$1--;\n    if (!lockCount$1) {\n      counters.inert = new WeakMap();\n      counters['aria-hidden'] = new WeakMap();\n      counters.none = new WeakMap();\n      uncontrolledElementsSet = new WeakSet();\n      markerMap = {};\n    }\n  };\n}\nfunction markOthers(avoidElements, ariaHidden, inert) {\n  if (ariaHidden === void 0) {\n    ariaHidden = false;\n  }\n  if (inert === void 0) {\n    inert = false;\n  }\n  const body = getDocument(avoidElements[0]).body;\n  return applyAttributeToOthers(avoidElements.concat(Array.from(body.querySelectorAll('[aria-live],[role=\"status\"],output'))), body, ariaHidden, inert);\n}\n\nconst HIDDEN_STYLES = {\n  border: 0,\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  padding: 0,\n  position: 'fixed',\n  whiteSpace: 'nowrap',\n  width: '1px',\n  top: 0,\n  left: 0\n};\nconst FocusGuard = /*#__PURE__*/React.forwardRef(function FocusGuard(props, ref) {\n  const [role, setRole] = React.useState();\n  useModernLayoutEffect(() => {\n    if (isSafari()) {\n      // Unlike other screen readers such as NVDA and JAWS, the virtual cursor\n      // on VoiceOver does trigger the onFocus event, so we can use the focus\n      // trap element. On Safari, only buttons trigger the onFocus event.\n      // NB: \"group\" role in the Sandbox no longer appears to work, must be a\n      // button role.\n      setRole('button');\n    }\n  }, []);\n  const restProps = {\n    ref,\n    tabIndex: 0,\n    // Role is only for VoiceOver\n    role,\n    'aria-hidden': role ? undefined : true,\n    [createAttribute('focus-guard')]: '',\n    style: HIDDEN_STYLES\n  };\n  return /*#__PURE__*/jsx(\"span\", {\n    ...props,\n    ...restProps\n  });\n});\n\nconst PortalContext = /*#__PURE__*/React.createContext(null);\nconst attr = /*#__PURE__*/createAttribute('portal');\n/**\n * @see https://floating-ui.com/docs/FloatingPortal#usefloatingportalnode\n */\nfunction useFloatingPortalNode(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    id,\n    root\n  } = props;\n  const uniqueId = useId();\n  const portalContext = usePortalContext();\n  const [portalNode, setPortalNode] = React.useState(null);\n  const portalNodeRef = React.useRef(null);\n  useModernLayoutEffect(() => {\n    return () => {\n      portalNode == null || portalNode.remove();\n      // Allow the subsequent layout effects to create a new node on updates.\n      // The portal node will still be cleaned up on unmount.\n      // https://github.com/floating-ui/floating-ui/issues/2454\n      queueMicrotask(() => {\n        portalNodeRef.current = null;\n      });\n    };\n  }, [portalNode]);\n  useModernLayoutEffect(() => {\n    // Wait for the uniqueId to be generated before creating the portal node in\n    // React <18 (using `useFloatingId` instead of the native `useId`).\n    // https://github.com/floating-ui/floating-ui/issues/2778\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    const existingIdRoot = id ? document.getElementById(id) : null;\n    if (!existingIdRoot) return;\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    existingIdRoot.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, uniqueId]);\n  useModernLayoutEffect(() => {\n    // Wait for the root to exist before creating the portal node. The root must\n    // be stored in state, not a ref, for this to work reactively.\n    if (root === null) return;\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    let container = root || (portalContext == null ? void 0 : portalContext.portalNode);\n    if (container && !isNode(container)) container = container.current;\n    container = container || document.body;\n    let idWrapper = null;\n    if (id) {\n      idWrapper = document.createElement('div');\n      idWrapper.id = id;\n      container.appendChild(idWrapper);\n    }\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    container = idWrapper || container;\n    container.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, root, uniqueId, portalContext]);\n  return portalNode;\n}\n/**\n * Portals the floating element into a given container element  by default,\n * outside of the app root and into the body.\n * This is necessary to ensure the floating element can appear outside any\n * potential parent containers that cause clipping (such as `overflow: hidden`),\n * while retaining its location in the React tree.\n * @see https://floating-ui.com/docs/FloatingPortal\n */\nfunction FloatingPortal(props) {\n  const {\n    children,\n    id,\n    root,\n    preserveTabOrder = true\n  } = props;\n  const portalNode = useFloatingPortalNode({\n    id,\n    root\n  });\n  const [focusManagerState, setFocusManagerState] = React.useState(null);\n  const beforeOutsideRef = React.useRef(null);\n  const afterOutsideRef = React.useRef(null);\n  const beforeInsideRef = React.useRef(null);\n  const afterInsideRef = React.useRef(null);\n  const modal = focusManagerState == null ? void 0 : focusManagerState.modal;\n  const open = focusManagerState == null ? void 0 : focusManagerState.open;\n  const shouldRenderGuards =\n  // The FocusManager and therefore floating element are currently open/\n  // rendered.\n  !!focusManagerState &&\n  // Guards are only for non-modal focus management.\n  !focusManagerState.modal &&\n  // Don't render if unmount is transitioning.\n  focusManagerState.open && preserveTabOrder && !!(root || portalNode);\n\n  // https://codesandbox.io/s/tabbable-portal-f4tng?file=/src/TabbablePortal.tsx\n  React.useEffect(() => {\n    if (!portalNode || !preserveTabOrder || modal) {\n      return;\n    }\n\n    // Make sure elements inside the portal element are tabbable only when the\n    // portal has already been focused, either by tabbing into a focus trap\n    // element outside or using the mouse.\n    function onFocus(event) {\n      if (portalNode && isOutsideEvent(event)) {\n        const focusing = event.type === 'focusin';\n        const manageFocus = focusing ? enableFocusInside : disableFocusInside;\n        manageFocus(portalNode);\n      }\n    }\n    // Listen to the event on the capture phase so they run before the focus\n    // trap elements onFocus prop is called.\n    portalNode.addEventListener('focusin', onFocus, true);\n    portalNode.addEventListener('focusout', onFocus, true);\n    return () => {\n      portalNode.removeEventListener('focusin', onFocus, true);\n      portalNode.removeEventListener('focusout', onFocus, true);\n    };\n  }, [portalNode, preserveTabOrder, modal]);\n  React.useEffect(() => {\n    if (!portalNode) return;\n    if (open) return;\n    enableFocusInside(portalNode);\n  }, [open, portalNode]);\n  return /*#__PURE__*/jsxs(PortalContext.Provider, {\n    value: React.useMemo(() => ({\n      preserveTabOrder,\n      beforeOutsideRef,\n      afterOutsideRef,\n      beforeInsideRef,\n      afterInsideRef,\n      portalNode,\n      setFocusManagerState\n    }), [preserveTabOrder, portalNode]),\n    children: [shouldRenderGuards && portalNode && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"outside\",\n      ref: beforeOutsideRef,\n      onFocus: event => {\n        if (isOutsideEvent(event, portalNode)) {\n          var _beforeInsideRef$curr;\n          (_beforeInsideRef$curr = beforeInsideRef.current) == null || _beforeInsideRef$curr.focus();\n        } else {\n          const domReference = focusManagerState ? focusManagerState.domReference : null;\n          const prevTabbable = getPreviousTabbable(domReference);\n          prevTabbable == null || prevTabbable.focus();\n        }\n      }\n    }), shouldRenderGuards && portalNode && /*#__PURE__*/jsx(\"span\", {\n      \"aria-owns\": portalNode.id,\n      style: HIDDEN_STYLES\n    }), portalNode && /*#__PURE__*/ReactDOM.createPortal(children, portalNode), shouldRenderGuards && portalNode && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"outside\",\n      ref: afterOutsideRef,\n      onFocus: event => {\n        if (isOutsideEvent(event, portalNode)) {\n          var _afterInsideRef$curre;\n          (_afterInsideRef$curre = afterInsideRef.current) == null || _afterInsideRef$curre.focus();\n        } else {\n          const domReference = focusManagerState ? focusManagerState.domReference : null;\n          const nextTabbable = getNextTabbable(domReference);\n          nextTabbable == null || nextTabbable.focus();\n          (focusManagerState == null ? void 0 : focusManagerState.closeOnFocusOut) && (focusManagerState == null ? void 0 : focusManagerState.onOpenChange(false, event.nativeEvent, 'focus-out'));\n        }\n      }\n    })]\n  });\n}\nconst usePortalContext = () => React.useContext(PortalContext);\n\nfunction useLiteMergeRefs(refs) {\n  return React.useMemo(() => {\n    return value => {\n      refs.forEach(ref => {\n        if (ref) {\n          ref.current = value;\n        }\n      });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}\n\nconst LIST_LIMIT = 20;\nlet previouslyFocusedElements = [];\nfunction clearDisconnectedPreviouslyFocusedElements() {\n  previouslyFocusedElements = previouslyFocusedElements.filter(el => el.isConnected);\n}\nfunction addPreviouslyFocusedElement(element) {\n  clearDisconnectedPreviouslyFocusedElements();\n  if (element && getNodeName(element) !== 'body') {\n    previouslyFocusedElements.push(element);\n    if (previouslyFocusedElements.length > LIST_LIMIT) {\n      previouslyFocusedElements = previouslyFocusedElements.slice(-20);\n    }\n  }\n}\nfunction getPreviouslyFocusedElement() {\n  clearDisconnectedPreviouslyFocusedElements();\n  return previouslyFocusedElements[previouslyFocusedElements.length - 1];\n}\nfunction getFirstTabbableElement(container) {\n  const tabbableOptions = getTabbableOptions();\n  if (isTabbable(container, tabbableOptions)) {\n    return container;\n  }\n  return tabbable(container, tabbableOptions)[0] || container;\n}\nfunction handleTabIndex(floatingFocusElement, orderRef) {\n  var _floatingFocusElement;\n  if (!orderRef.current.includes('floating') && !((_floatingFocusElement = floatingFocusElement.getAttribute('role')) != null && _floatingFocusElement.includes('dialog'))) {\n    return;\n  }\n  const options = getTabbableOptions();\n  const focusableElements = focusable(floatingFocusElement, options);\n  const tabbableContent = focusableElements.filter(element => {\n    const dataTabIndex = element.getAttribute('data-tabindex') || '';\n    return isTabbable(element, options) || element.hasAttribute('data-tabindex') && !dataTabIndex.startsWith('-');\n  });\n  const tabIndex = floatingFocusElement.getAttribute('tabindex');\n  if (orderRef.current.includes('floating') || tabbableContent.length === 0) {\n    if (tabIndex !== '0') {\n      floatingFocusElement.setAttribute('tabindex', '0');\n    }\n  } else if (tabIndex !== '-1' || floatingFocusElement.hasAttribute('data-tabindex') && floatingFocusElement.getAttribute('data-tabindex') !== '-1') {\n    floatingFocusElement.setAttribute('tabindex', '-1');\n    floatingFocusElement.setAttribute('data-tabindex', '-1');\n  }\n}\nconst VisuallyHiddenDismiss = /*#__PURE__*/React.forwardRef(function VisuallyHiddenDismiss(props, ref) {\n  return /*#__PURE__*/jsx(\"button\", {\n    ...props,\n    type: \"button\",\n    ref: ref,\n    tabIndex: -1,\n    style: HIDDEN_STYLES\n  });\n});\n/**\n * Provides focus management for the floating element.\n * @see https://floating-ui.com/docs/FloatingFocusManager\n */\nfunction FloatingFocusManager(props) {\n  const {\n    context,\n    children,\n    disabled = false,\n    order = ['content'],\n    guards: _guards = true,\n    initialFocus = 0,\n    returnFocus = true,\n    restoreFocus = false,\n    modal = true,\n    visuallyHiddenDismiss = false,\n    closeOnFocusOut = true,\n    outsideElementsInert = false,\n    getInsideElements: _getInsideElements = () => []\n  } = props;\n  const {\n    open,\n    onOpenChange,\n    events,\n    dataRef,\n    elements: {\n      domReference,\n      floating\n    }\n  } = context;\n  const getNodeId = useEffectEvent(() => {\n    var _dataRef$current$floa;\n    return (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n  });\n  const getInsideElements = useEffectEvent(_getInsideElements);\n  const ignoreInitialFocus = typeof initialFocus === 'number' && initialFocus < 0;\n  // If the reference is a combobox and is typeable (e.g. input/textarea),\n  // there are different focus semantics. The guards should not be rendered, but\n  // aria-hidden should be applied to all nodes still. Further, the visually\n  // hidden dismiss button should only appear at the end of the list, not the\n  // start.\n  const isUntrappedTypeableCombobox = isTypeableCombobox(domReference) && ignoreInitialFocus;\n\n  // Force the guards to be rendered if the `inert` attribute is not supported.\n  const inertSupported = supportsInert();\n  const guards = inertSupported ? _guards : true;\n  const useInert = !guards || inertSupported && outsideElementsInert;\n  const orderRef = useLatestRef(order);\n  const initialFocusRef = useLatestRef(initialFocus);\n  const returnFocusRef = useLatestRef(returnFocus);\n  const tree = useFloatingTree();\n  const portalContext = usePortalContext();\n  const startDismissButtonRef = React.useRef(null);\n  const endDismissButtonRef = React.useRef(null);\n  const preventReturnFocusRef = React.useRef(false);\n  const isPointerDownRef = React.useRef(false);\n  const tabbableIndexRef = React.useRef(-1);\n  const blurTimeoutRef = React.useRef(-1);\n  const isInsidePortal = portalContext != null;\n  const floatingFocusElement = getFloatingFocusElement(floating);\n  const getTabbableContent = useEffectEvent(function (container) {\n    if (container === void 0) {\n      container = floatingFocusElement;\n    }\n    return container ? tabbable(container, getTabbableOptions()) : [];\n  });\n  const getTabbableElements = useEffectEvent(container => {\n    const content = getTabbableContent(container);\n    return orderRef.current.map(type => {\n      if (domReference && type === 'reference') {\n        return domReference;\n      }\n      if (floatingFocusElement && type === 'floating') {\n        return floatingFocusElement;\n      }\n      return content;\n    }).filter(Boolean).flat();\n  });\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!modal) return;\n    function onKeyDown(event) {\n      if (event.key === 'Tab') {\n        // The focus guards have nothing to focus, so we need to stop the event.\n        if (contains$1(floatingFocusElement, activeElement(getDocument$1(floatingFocusElement))) && getTabbableContent().length === 0 && !isUntrappedTypeableCombobox) {\n          stopEvent(event);\n        }\n        const els = getTabbableElements();\n        const target = getTarget$1(event);\n        if (orderRef.current[0] === 'reference' && target === domReference) {\n          stopEvent(event);\n          if (event.shiftKey) {\n            enqueueFocus(els[els.length - 1]);\n          } else {\n            enqueueFocus(els[1]);\n          }\n        }\n        if (orderRef.current[1] === 'floating' && target === floatingFocusElement && event.shiftKey) {\n          stopEvent(event);\n          enqueueFocus(els[0]);\n        }\n      }\n    }\n    const doc = getDocument$1(floatingFocusElement);\n    doc.addEventListener('keydown', onKeyDown);\n    return () => {\n      doc.removeEventListener('keydown', onKeyDown);\n    };\n  }, [disabled, domReference, floatingFocusElement, modal, orderRef, isUntrappedTypeableCombobox, getTabbableContent, getTabbableElements]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!floating) return;\n    function handleFocusIn(event) {\n      const target = getTarget$1(event);\n      const tabbableContent = getTabbableContent();\n      const tabbableIndex = tabbableContent.indexOf(target);\n      if (tabbableIndex !== -1) {\n        tabbableIndexRef.current = tabbableIndex;\n      }\n    }\n    floating.addEventListener('focusin', handleFocusIn);\n    return () => {\n      floating.removeEventListener('focusin', handleFocusIn);\n    };\n  }, [disabled, floating, getTabbableContent]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!closeOnFocusOut) return;\n\n    // In Safari, buttons lose focus when pressing them.\n    function handlePointerDown() {\n      isPointerDownRef.current = true;\n      setTimeout(() => {\n        isPointerDownRef.current = false;\n      });\n    }\n    function handleFocusOutside(event) {\n      const relatedTarget = event.relatedTarget;\n      const currentTarget = event.currentTarget;\n      const target = getTarget$1(event);\n      queueMicrotask(() => {\n        const nodeId = getNodeId();\n        const movedToUnrelatedNode = !(contains$1(domReference, relatedTarget) || contains$1(floating, relatedTarget) || contains$1(relatedTarget, floating) || contains$1(portalContext == null ? void 0 : portalContext.portalNode, relatedTarget) || relatedTarget != null && relatedTarget.hasAttribute(createAttribute('focus-guard')) || tree && (getNodeChildren$1(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context, _node$context2;\n          return contains$1((_node$context = node.context) == null ? void 0 : _node$context.elements.floating, relatedTarget) || contains$1((_node$context2 = node.context) == null ? void 0 : _node$context2.elements.domReference, relatedTarget);\n        }) || getNodeAncestors(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context3, _node$context4, _node$context5;\n          return [(_node$context3 = node.context) == null ? void 0 : _node$context3.elements.floating, getFloatingFocusElement((_node$context4 = node.context) == null ? void 0 : _node$context4.elements.floating)].includes(relatedTarget) || ((_node$context5 = node.context) == null ? void 0 : _node$context5.elements.domReference) === relatedTarget;\n        })));\n        if (currentTarget === domReference && floatingFocusElement) {\n          handleTabIndex(floatingFocusElement, orderRef);\n        }\n\n        // Restore focus to the previous tabbable element index to prevent\n        // focus from being lost outside the floating tree.\n        if (restoreFocus && currentTarget !== domReference && !(target != null && target.isConnected) && activeElement(getDocument$1(floatingFocusElement)) === getDocument$1(floatingFocusElement).body) {\n          // Let `FloatingPortal` effect knows that focus is still inside the\n          // floating tree.\n          if (isHTMLElement(floatingFocusElement)) {\n            floatingFocusElement.focus();\n          }\n          const prevTabbableIndex = tabbableIndexRef.current;\n          const tabbableContent = getTabbableContent();\n          const nodeToFocus = tabbableContent[prevTabbableIndex] || tabbableContent[tabbableContent.length - 1] || floatingFocusElement;\n          if (isHTMLElement(nodeToFocus)) {\n            nodeToFocus.focus();\n          }\n        }\n\n        // https://github.com/floating-ui/floating-ui/issues/3060\n        if (dataRef.current.insideReactTree) {\n          dataRef.current.insideReactTree = false;\n          return;\n        }\n\n        // Focus did not move inside the floating tree, and there are no tabbable\n        // portal guards to handle closing.\n        if ((isUntrappedTypeableCombobox ? true : !modal) && relatedTarget && movedToUnrelatedNode && !isPointerDownRef.current &&\n        // Fix React 18 Strict Mode returnFocus due to double rendering.\n        relatedTarget !== getPreviouslyFocusedElement()) {\n          preventReturnFocusRef.current = true;\n          onOpenChange(false, event, 'focus-out');\n        }\n      });\n    }\n    const shouldHandleBlurCapture = Boolean(!tree && portalContext);\n    function markInsideReactTree() {\n      clearTimeoutIfSet(blurTimeoutRef);\n      dataRef.current.insideReactTree = true;\n      blurTimeoutRef.current = window.setTimeout(() => {\n        dataRef.current.insideReactTree = false;\n      });\n    }\n    if (floating && isHTMLElement(domReference)) {\n      domReference.addEventListener('focusout', handleFocusOutside);\n      domReference.addEventListener('pointerdown', handlePointerDown);\n      floating.addEventListener('focusout', handleFocusOutside);\n      if (shouldHandleBlurCapture) {\n        floating.addEventListener('focusout', markInsideReactTree, true);\n      }\n      return () => {\n        domReference.removeEventListener('focusout', handleFocusOutside);\n        domReference.removeEventListener('pointerdown', handlePointerDown);\n        floating.removeEventListener('focusout', handleFocusOutside);\n        if (shouldHandleBlurCapture) {\n          floating.removeEventListener('focusout', markInsideReactTree, true);\n        }\n      };\n    }\n  }, [disabled, domReference, floating, floatingFocusElement, modal, tree, portalContext, onOpenChange, closeOnFocusOut, restoreFocus, getTabbableContent, isUntrappedTypeableCombobox, getNodeId, orderRef, dataRef]);\n  const beforeGuardRef = React.useRef(null);\n  const afterGuardRef = React.useRef(null);\n  const mergedBeforeGuardRef = useLiteMergeRefs([beforeGuardRef, portalContext == null ? void 0 : portalContext.beforeInsideRef]);\n  const mergedAfterGuardRef = useLiteMergeRefs([afterGuardRef, portalContext == null ? void 0 : portalContext.afterInsideRef]);\n  React.useEffect(() => {\n    var _portalContext$portal, _ancestors$find;\n    if (disabled) return;\n    if (!floating) return;\n\n    // Don't hide portals nested within the parent portal.\n    const portalNodes = Array.from((portalContext == null || (_portalContext$portal = portalContext.portalNode) == null ? void 0 : _portalContext$portal.querySelectorAll(\"[\" + createAttribute('portal') + \"]\")) || []);\n    const ancestors = tree ? getNodeAncestors(tree.nodesRef.current, getNodeId()) : [];\n    const rootAncestorComboboxDomReference = (_ancestors$find = ancestors.find(node => {\n      var _node$context6;\n      return isTypeableCombobox(((_node$context6 = node.context) == null ? void 0 : _node$context6.elements.domReference) || null);\n    })) == null || (_ancestors$find = _ancestors$find.context) == null ? void 0 : _ancestors$find.elements.domReference;\n    const insideElements = [floating, rootAncestorComboboxDomReference, ...portalNodes, ...getInsideElements(), startDismissButtonRef.current, endDismissButtonRef.current, beforeGuardRef.current, afterGuardRef.current, portalContext == null ? void 0 : portalContext.beforeOutsideRef.current, portalContext == null ? void 0 : portalContext.afterOutsideRef.current, orderRef.current.includes('reference') || isUntrappedTypeableCombobox ? domReference : null].filter(x => x != null);\n    const cleanup = modal || isUntrappedTypeableCombobox ? markOthers(insideElements, !useInert, useInert) : markOthers(insideElements);\n    return () => {\n      cleanup();\n    };\n  }, [disabled, domReference, floating, modal, orderRef, portalContext, isUntrappedTypeableCombobox, guards, useInert, tree, getNodeId, getInsideElements]);\n  useModernLayoutEffect(() => {\n    if (disabled || !isHTMLElement(floatingFocusElement)) return;\n    const doc = getDocument$1(floatingFocusElement);\n    const previouslyFocusedElement = activeElement(doc);\n\n    // Wait for any layout effect state setters to execute to set `tabIndex`.\n    queueMicrotask(() => {\n      const focusableElements = getTabbableElements(floatingFocusElement);\n      const initialFocusValue = initialFocusRef.current;\n      const elToFocus = (typeof initialFocusValue === 'number' ? focusableElements[initialFocusValue] : initialFocusValue.current) || floatingFocusElement;\n      const focusAlreadyInsideFloatingEl = contains$1(floatingFocusElement, previouslyFocusedElement);\n      if (!ignoreInitialFocus && !focusAlreadyInsideFloatingEl && open) {\n        enqueueFocus(elToFocus, {\n          preventScroll: elToFocus === floatingFocusElement\n        });\n      }\n    });\n  }, [disabled, open, floatingFocusElement, ignoreInitialFocus, getTabbableElements, initialFocusRef]);\n  useModernLayoutEffect(() => {\n    if (disabled || !floatingFocusElement) return;\n    const doc = getDocument$1(floatingFocusElement);\n    const previouslyFocusedElement = activeElement(doc);\n    addPreviouslyFocusedElement(previouslyFocusedElement);\n\n    // Dismissing via outside press should always ignore `returnFocus` to\n    // prevent unwanted scrolling.\n    function onOpenChange(_ref) {\n      let {\n        reason,\n        event,\n        nested\n      } = _ref;\n      if (['hover', 'safe-polygon'].includes(reason) && event.type === 'mouseleave') {\n        preventReturnFocusRef.current = true;\n      }\n      if (reason !== 'outside-press') return;\n      if (nested) {\n        preventReturnFocusRef.current = false;\n      } else if (isVirtualClick(event) || isVirtualPointerEvent(event)) {\n        preventReturnFocusRef.current = false;\n      } else {\n        let isPreventScrollSupported = false;\n        document.createElement('div').focus({\n          get preventScroll() {\n            isPreventScrollSupported = true;\n            return false;\n          }\n        });\n        if (isPreventScrollSupported) {\n          preventReturnFocusRef.current = false;\n        } else {\n          preventReturnFocusRef.current = true;\n        }\n      }\n    }\n    events.on('openchange', onOpenChange);\n    const fallbackEl = doc.createElement('span');\n    fallbackEl.setAttribute('tabindex', '-1');\n    fallbackEl.setAttribute('aria-hidden', 'true');\n    Object.assign(fallbackEl.style, HIDDEN_STYLES);\n    if (isInsidePortal && domReference) {\n      domReference.insertAdjacentElement('afterend', fallbackEl);\n    }\n    function getReturnElement() {\n      if (typeof returnFocusRef.current === 'boolean') {\n        const el = domReference || getPreviouslyFocusedElement();\n        return el && el.isConnected ? el : fallbackEl;\n      }\n      return returnFocusRef.current.current || fallbackEl;\n    }\n    return () => {\n      events.off('openchange', onOpenChange);\n      const activeEl = activeElement(doc);\n      const isFocusInsideFloatingTree = contains$1(floating, activeEl) || tree && getNodeChildren$1(tree.nodesRef.current, getNodeId(), false).some(node => {\n        var _node$context7;\n        return contains$1((_node$context7 = node.context) == null ? void 0 : _node$context7.elements.floating, activeEl);\n      });\n      const returnElement = getReturnElement();\n      queueMicrotask(() => {\n        // This is `returnElement`, if it's tabbable, or its first tabbable child.\n        const tabbableReturnElement = getFirstTabbableElement(returnElement);\n        if (\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        returnFocusRef.current && !preventReturnFocusRef.current && isHTMLElement(tabbableReturnElement) && (\n        // If the focus moved somewhere else after mount, avoid returning focus\n        // since it likely entered a different element which should be\n        // respected: https://github.com/floating-ui/floating-ui/issues/2607\n        tabbableReturnElement !== activeEl && activeEl !== doc.body ? isFocusInsideFloatingTree : true)) {\n          tabbableReturnElement.focus({\n            preventScroll: true\n          });\n        }\n        fallbackEl.remove();\n      });\n    };\n  }, [disabled, floating, floatingFocusElement, returnFocusRef, dataRef, events, tree, isInsidePortal, domReference, getNodeId]);\n  React.useEffect(() => {\n    // The `returnFocus` cleanup behavior is inside a microtask; ensure we\n    // wait for it to complete before resetting the flag.\n    queueMicrotask(() => {\n      preventReturnFocusRef.current = false;\n    });\n    return () => {\n      queueMicrotask(clearDisconnectedPreviouslyFocusedElements);\n    };\n  }, [disabled]);\n\n  // Synchronize the `context` & `modal` value to the FloatingPortal context.\n  // It will decide whether or not it needs to render its own guards.\n  useModernLayoutEffect(() => {\n    if (disabled) return;\n    if (!portalContext) return;\n    portalContext.setFocusManagerState({\n      modal,\n      closeOnFocusOut,\n      open,\n      onOpenChange,\n      domReference\n    });\n    return () => {\n      portalContext.setFocusManagerState(null);\n    };\n  }, [disabled, portalContext, modal, open, onOpenChange, closeOnFocusOut, domReference]);\n  useModernLayoutEffect(() => {\n    if (disabled) return;\n    if (!floatingFocusElement) return;\n    handleTabIndex(floatingFocusElement, orderRef);\n  }, [disabled, floatingFocusElement, orderRef]);\n  function renderDismissButton(location) {\n    if (disabled || !visuallyHiddenDismiss || !modal) {\n      return null;\n    }\n    return /*#__PURE__*/jsx(VisuallyHiddenDismiss, {\n      ref: location === 'start' ? startDismissButtonRef : endDismissButtonRef,\n      onClick: event => onOpenChange(false, event.nativeEvent),\n      children: typeof visuallyHiddenDismiss === 'string' ? visuallyHiddenDismiss : 'Dismiss'\n    });\n  }\n  const shouldRenderGuards = !disabled && guards && (modal ? !isUntrappedTypeableCombobox : true) && (isInsidePortal || modal);\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [shouldRenderGuards && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"inside\",\n      ref: mergedBeforeGuardRef,\n      onFocus: event => {\n        if (modal) {\n          const els = getTabbableElements();\n          enqueueFocus(order[0] === 'reference' ? els[0] : els[els.length - 1]);\n        } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n          preventReturnFocusRef.current = false;\n          if (isOutsideEvent(event, portalContext.portalNode)) {\n            const nextTabbable = getNextTabbable(domReference);\n            nextTabbable == null || nextTabbable.focus();\n          } else {\n            var _portalContext$before;\n            (_portalContext$before = portalContext.beforeOutsideRef.current) == null || _portalContext$before.focus();\n          }\n        }\n      }\n    }), !isUntrappedTypeableCombobox && renderDismissButton('start'), children, renderDismissButton('end'), shouldRenderGuards && /*#__PURE__*/jsx(FocusGuard, {\n      \"data-type\": \"inside\",\n      ref: mergedAfterGuardRef,\n      onFocus: event => {\n        if (modal) {\n          enqueueFocus(getTabbableElements()[0]);\n        } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n          if (closeOnFocusOut) {\n            preventReturnFocusRef.current = true;\n          }\n          if (isOutsideEvent(event, portalContext.portalNode)) {\n            const prevTabbable = getPreviousTabbable(domReference);\n            prevTabbable == null || prevTabbable.focus();\n          } else {\n            var _portalContext$afterO;\n            (_portalContext$afterO = portalContext.afterOutsideRef.current) == null || _portalContext$afterO.focus();\n          }\n        }\n      }\n    })]\n  });\n}\n\nlet lockCount = 0;\nconst scrollbarProperty = '--floating-ui-scrollbar-width';\nfunction enableScrollLock() {\n  const platform = getPlatform();\n  const isIOS = /iP(hone|ad|od)|iOS/.test(platform) ||\n  // iPads can claim to be MacIntel\n  platform === 'MacIntel' && navigator.maxTouchPoints > 1;\n  const bodyStyle = document.body.style;\n  // RTL <body> scrollbar\n  const scrollbarX = Math.round(document.documentElement.getBoundingClientRect().left) + document.documentElement.scrollLeft;\n  const paddingProp = scrollbarX ? 'paddingLeft' : 'paddingRight';\n  const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n  const scrollX = bodyStyle.left ? parseFloat(bodyStyle.left) : window.scrollX;\n  const scrollY = bodyStyle.top ? parseFloat(bodyStyle.top) : window.scrollY;\n  bodyStyle.overflow = 'hidden';\n  bodyStyle.setProperty(scrollbarProperty, scrollbarWidth + \"px\");\n  if (scrollbarWidth) {\n    bodyStyle[paddingProp] = scrollbarWidth + \"px\";\n  }\n\n  // Only iOS doesn't respect `overflow: hidden` on document.body, and this\n  // technique has fewer side effects.\n  if (isIOS) {\n    var _window$visualViewpor, _window$visualViewpor2;\n    // iOS 12 does not support `visualViewport`.\n    const offsetLeft = ((_window$visualViewpor = window.visualViewport) == null ? void 0 : _window$visualViewpor.offsetLeft) || 0;\n    const offsetTop = ((_window$visualViewpor2 = window.visualViewport) == null ? void 0 : _window$visualViewpor2.offsetTop) || 0;\n    Object.assign(bodyStyle, {\n      position: 'fixed',\n      top: -(scrollY - Math.floor(offsetTop)) + \"px\",\n      left: -(scrollX - Math.floor(offsetLeft)) + \"px\",\n      right: '0'\n    });\n  }\n  return () => {\n    Object.assign(bodyStyle, {\n      overflow: '',\n      [paddingProp]: ''\n    });\n    bodyStyle.removeProperty(scrollbarProperty);\n    if (isIOS) {\n      Object.assign(bodyStyle, {\n        position: '',\n        top: '',\n        left: '',\n        right: ''\n      });\n      window.scrollTo(scrollX, scrollY);\n    }\n  };\n}\nlet cleanup = () => {};\n\n/**\n * Provides base styling for a fixed overlay element to dim content or block\n * pointer events behind a floating element.\n * It's a regular `<div>`, so it can be styled via any CSS solution you prefer.\n * @see https://floating-ui.com/docs/FloatingOverlay\n */\nconst FloatingOverlay = /*#__PURE__*/React.forwardRef(function FloatingOverlay(props, ref) {\n  const {\n    lockScroll = false,\n    ...rest\n  } = props;\n  useModernLayoutEffect(() => {\n    if (!lockScroll) return;\n    lockCount++;\n    if (lockCount === 1) {\n      cleanup = enableScrollLock();\n    }\n    return () => {\n      lockCount--;\n      if (lockCount === 0) {\n        cleanup();\n      }\n    };\n  }, [lockScroll]);\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: ref,\n    ...rest,\n    style: {\n      position: 'fixed',\n      overflow: 'auto',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      ...rest.style\n    }\n  });\n});\n\nfunction isButtonTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'BUTTON';\n}\nfunction isAnchorTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'A';\n}\nfunction isSpaceIgnored(element) {\n  return isTypeableElement(element);\n}\n/**\n * Opens or closes the floating element when clicking the reference element.\n * @see https://floating-ui.com/docs/useClick\n */\nfunction useClick(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    elements: {\n      domReference\n    }\n  } = context;\n  const {\n    enabled = true,\n    event: eventOption = 'click',\n    toggle = true,\n    ignoreMouse = false,\n    keyboardHandlers = true,\n    stickIfOpen = true\n  } = props;\n  const pointerTypeRef = React.useRef();\n  const didKeyDownRef = React.useRef(false);\n  const reference = React.useMemo(() => ({\n    onPointerDown(event) {\n      pointerTypeRef.current = event.pointerType;\n    },\n    onMouseDown(event) {\n      const pointerType = pointerTypeRef.current;\n\n      // Ignore all buttons except for the \"main\" button.\n      // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n      if (event.button !== 0) return;\n      if (eventOption === 'click') return;\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent && stickIfOpen ? dataRef.current.openEvent.type === 'mousedown' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        // Prevent stealing focus from the floating element\n        event.preventDefault();\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onClick(event) {\n      const pointerType = pointerTypeRef.current;\n      if (eventOption === 'mousedown' && pointerTypeRef.current) {\n        pointerTypeRef.current = undefined;\n        return;\n      }\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent && stickIfOpen ? dataRef.current.openEvent.type === 'click' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onKeyDown(event) {\n      pointerTypeRef.current = undefined;\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event)) {\n        return;\n      }\n      if (event.key === ' ' && !isSpaceIgnored(domReference)) {\n        // Prevent scrolling\n        event.preventDefault();\n        didKeyDownRef.current = true;\n      }\n      if (isAnchorTarget(event)) {\n        return;\n      }\n      if (event.key === 'Enter') {\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    },\n    onKeyUp(event) {\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event) || isSpaceIgnored(domReference)) {\n        return;\n      }\n      if (event.key === ' ' && didKeyDownRef.current) {\n        didKeyDownRef.current = false;\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    }\n  }), [dataRef, domReference, eventOption, ignoreMouse, keyboardHandlers, onOpenChange, open, stickIfOpen, toggle]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nfunction createVirtualElement(domElement, data) {\n  let offsetX = null;\n  let offsetY = null;\n  let isAutoUpdateEvent = false;\n  return {\n    contextElement: domElement || undefined,\n    getBoundingClientRect() {\n      var _data$dataRef$current;\n      const domRect = (domElement == null ? void 0 : domElement.getBoundingClientRect()) || {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      };\n      const isXAxis = data.axis === 'x' || data.axis === 'both';\n      const isYAxis = data.axis === 'y' || data.axis === 'both';\n      const canTrackCursorOnAutoUpdate = ['mouseenter', 'mousemove'].includes(((_data$dataRef$current = data.dataRef.current.openEvent) == null ? void 0 : _data$dataRef$current.type) || '') && data.pointerType !== 'touch';\n      let width = domRect.width;\n      let height = domRect.height;\n      let x = domRect.x;\n      let y = domRect.y;\n      if (offsetX == null && data.x && isXAxis) {\n        offsetX = domRect.x - data.x;\n      }\n      if (offsetY == null && data.y && isYAxis) {\n        offsetY = domRect.y - data.y;\n      }\n      x -= offsetX || 0;\n      y -= offsetY || 0;\n      width = 0;\n      height = 0;\n      if (!isAutoUpdateEvent || canTrackCursorOnAutoUpdate) {\n        width = data.axis === 'y' ? domRect.width : 0;\n        height = data.axis === 'x' ? domRect.height : 0;\n        x = isXAxis && data.x != null ? data.x : x;\n        y = isYAxis && data.y != null ? data.y : y;\n      } else if (isAutoUpdateEvent && !canTrackCursorOnAutoUpdate) {\n        height = data.axis === 'x' ? domRect.height : height;\n        width = data.axis === 'y' ? domRect.width : width;\n      }\n      isAutoUpdateEvent = true;\n      return {\n        width,\n        height,\n        x,\n        y,\n        top: y,\n        right: x + width,\n        bottom: y + height,\n        left: x\n      };\n    }\n  };\n}\nfunction isMouseBasedEvent(event) {\n  return event != null && event.clientX != null;\n}\n/**\n * Positions the floating element relative to a client point (in the viewport),\n * such as the mouse position. By default, it follows the mouse cursor.\n * @see https://floating-ui.com/docs/useClientPoint\n */\nfunction useClientPoint(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    dataRef,\n    elements: {\n      floating,\n      domReference\n    },\n    refs\n  } = context;\n  const {\n    enabled = true,\n    axis = 'both',\n    x = null,\n    y = null\n  } = props;\n  const initialRef = React.useRef(false);\n  const cleanupListenerRef = React.useRef(null);\n  const [pointerType, setPointerType] = React.useState();\n  const [reactive, setReactive] = React.useState([]);\n  const setReference = useEffectEvent((x, y) => {\n    if (initialRef.current) return;\n\n    // Prevent setting if the open event was not a mouse-like one\n    // (e.g. focus to open, then hover over the reference element).\n    // Only apply if the event exists.\n    if (dataRef.current.openEvent && !isMouseBasedEvent(dataRef.current.openEvent)) {\n      return;\n    }\n    refs.setPositionReference(createVirtualElement(domReference, {\n      x,\n      y,\n      axis,\n      dataRef,\n      pointerType\n    }));\n  });\n  const handleReferenceEnterOrMove = useEffectEvent(event => {\n    if (x != null || y != null) return;\n    if (!open) {\n      setReference(event.clientX, event.clientY);\n    } else if (!cleanupListenerRef.current) {\n      // If there's no cleanup, there's no listener, but we want to ensure\n      // we add the listener if the cursor landed on the floating element and\n      // then back on the reference (i.e. it's interactive).\n      setReactive([]);\n    }\n  });\n\n  // If the pointer is a mouse-like pointer, we want to continue following the\n  // mouse even if the floating element is transitioning out. On touch\n  // devices, this is undesirable because the floating element will move to\n  // the dismissal touch point.\n  const openCheck = isMouseLikePointerType(pointerType) ? floating : open;\n  const addListener = React.useCallback(() => {\n    // Explicitly specified `x`/`y` coordinates shouldn't add a listener.\n    if (!openCheck || !enabled || x != null || y != null) return;\n    const win = getWindow(floating);\n    function handleMouseMove(event) {\n      const target = getTarget$1(event);\n      if (!contains$1(floating, target)) {\n        setReference(event.clientX, event.clientY);\n      } else {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      }\n    }\n    if (!dataRef.current.openEvent || isMouseBasedEvent(dataRef.current.openEvent)) {\n      win.addEventListener('mousemove', handleMouseMove);\n      const cleanup = () => {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      };\n      cleanupListenerRef.current = cleanup;\n      return cleanup;\n    }\n    refs.setPositionReference(domReference);\n  }, [openCheck, enabled, x, y, floating, dataRef, refs, domReference, setReference]);\n  React.useEffect(() => {\n    return addListener();\n  }, [addListener, reactive]);\n  React.useEffect(() => {\n    if (enabled && !floating) {\n      initialRef.current = false;\n    }\n  }, [enabled, floating]);\n  React.useEffect(() => {\n    if (!enabled && open) {\n      initialRef.current = true;\n    }\n  }, [enabled, open]);\n  useModernLayoutEffect(() => {\n    if (enabled && (x != null || y != null)) {\n      initialRef.current = false;\n      setReference(x, y);\n    }\n  }, [enabled, x, y, setReference]);\n  const reference = React.useMemo(() => {\n    function setPointerTypeRef(_ref) {\n      let {\n        pointerType\n      } = _ref;\n      setPointerType(pointerType);\n    }\n    return {\n      onPointerDown: setPointerTypeRef,\n      onPointerEnter: setPointerTypeRef,\n      onMouseMove: handleReferenceEnterOrMove,\n      onMouseEnter: handleReferenceEnterOrMove\n    };\n  }, [handleReferenceEnterOrMove]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst bubbleHandlerKeys = {\n  pointerdown: 'onPointerDown',\n  mousedown: 'onMouseDown',\n  click: 'onClick'\n};\nconst captureHandlerKeys = {\n  pointerdown: 'onPointerDownCapture',\n  mousedown: 'onMouseDownCapture',\n  click: 'onClickCapture'\n};\nconst normalizeProp = normalizable => {\n  var _normalizable$escapeK, _normalizable$outside;\n  return {\n    escapeKey: typeof normalizable === 'boolean' ? normalizable : (_normalizable$escapeK = normalizable == null ? void 0 : normalizable.escapeKey) != null ? _normalizable$escapeK : false,\n    outsidePress: typeof normalizable === 'boolean' ? normalizable : (_normalizable$outside = normalizable == null ? void 0 : normalizable.outsidePress) != null ? _normalizable$outside : true\n  };\n};\n/**\n * Closes the floating element when a dismissal is requested  by default, when\n * the user presses the `escape` key or outside of the floating element.\n * @see https://floating-ui.com/docs/useDismiss\n */\nfunction useDismiss(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    elements,\n    dataRef\n  } = context;\n  const {\n    enabled = true,\n    escapeKey = true,\n    outsidePress: unstable_outsidePress = true,\n    outsidePressEvent = 'pointerdown',\n    referencePress = false,\n    referencePressEvent = 'pointerdown',\n    ancestorScroll = false,\n    bubbles,\n    capture\n  } = props;\n  const tree = useFloatingTree();\n  const outsidePressFn = useEffectEvent(typeof unstable_outsidePress === 'function' ? unstable_outsidePress : () => false);\n  const outsidePress = typeof unstable_outsidePress === 'function' ? outsidePressFn : unstable_outsidePress;\n  const endedOrStartedInsideRef = React.useRef(false);\n  const {\n    escapeKey: escapeKeyBubbles,\n    outsidePress: outsidePressBubbles\n  } = normalizeProp(bubbles);\n  const {\n    escapeKey: escapeKeyCapture,\n    outsidePress: outsidePressCapture\n  } = normalizeProp(capture);\n  const isComposingRef = React.useRef(false);\n  const closeOnEscapeKeyDown = useEffectEvent(event => {\n    var _dataRef$current$floa;\n    if (!open || !enabled || !escapeKey || event.key !== 'Escape') {\n      return;\n    }\n\n    // Wait until IME is settled. Pressing `Escape` while composing should\n    // close the compose menu, but not the floating element.\n    if (isComposingRef.current) {\n      return;\n    }\n    const nodeId = (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n    const children = tree ? getNodeChildren$1(tree.nodesRef.current, nodeId) : [];\n    if (!escapeKeyBubbles) {\n      event.stopPropagation();\n      if (children.length > 0) {\n        let shouldDismiss = true;\n        children.forEach(child => {\n          var _child$context;\n          if ((_child$context = child.context) != null && _child$context.open && !child.context.dataRef.current.__escapeKeyBubbles) {\n            shouldDismiss = false;\n            return;\n          }\n        });\n        if (!shouldDismiss) {\n          return;\n        }\n      }\n    }\n    onOpenChange(false, isReactEvent(event) ? event.nativeEvent : event, 'escape-key');\n  });\n  const closeOnEscapeKeyDownCapture = useEffectEvent(event => {\n    var _getTarget2;\n    const callback = () => {\n      var _getTarget;\n      closeOnEscapeKeyDown(event);\n      (_getTarget = getTarget$1(event)) == null || _getTarget.removeEventListener('keydown', callback);\n    };\n    (_getTarget2 = getTarget$1(event)) == null || _getTarget2.addEventListener('keydown', callback);\n  });\n  const closeOnPressOutside = useEffectEvent(event => {\n    var _dataRef$current$floa2;\n    // Given developers can stop the propagation of the synthetic event,\n    // we can only be confident with a positive value.\n    const insideReactTree = dataRef.current.insideReactTree;\n    dataRef.current.insideReactTree = false;\n\n    // When click outside is lazy (`click` event), handle dragging.\n    // Don't close if:\n    // - The click started inside the floating element.\n    // - The click ended inside the floating element.\n    const endedOrStartedInside = endedOrStartedInsideRef.current;\n    endedOrStartedInsideRef.current = false;\n    if (outsidePressEvent === 'click' && endedOrStartedInside) {\n      return;\n    }\n    if (insideReactTree) {\n      return;\n    }\n    if (typeof outsidePress === 'function' && !outsidePress(event)) {\n      return;\n    }\n    const target = getTarget$1(event);\n    const inertSelector = \"[\" + createAttribute('inert') + \"]\";\n    const markers = getDocument$1(elements.floating).querySelectorAll(inertSelector);\n    let targetRootAncestor = isElement(target) ? target : null;\n    while (targetRootAncestor && !isLastTraversableNode(targetRootAncestor)) {\n      const nextParent = getParentNode(targetRootAncestor);\n      if (isLastTraversableNode(nextParent) || !isElement(nextParent)) {\n        break;\n      }\n      targetRootAncestor = nextParent;\n    }\n\n    // Check if the click occurred on a third-party element injected after the\n    // floating element rendered.\n    if (markers.length && isElement(target) && !isRootElement(target) &&\n    // Clicked on a direct ancestor (e.g. FloatingOverlay).\n    !contains$1(target, elements.floating) &&\n    // If the target root element contains none of the markers, then the\n    // element was injected after the floating element rendered.\n    Array.from(markers).every(marker => !contains$1(targetRootAncestor, marker))) {\n      return;\n    }\n\n    // Check if the click occurred on the scrollbar\n    if (isHTMLElement(target) && floating) {\n      const lastTraversableNode = isLastTraversableNode(target);\n      const style = getComputedStyle(target);\n      const scrollRe = /auto|scroll/;\n      const isScrollableX = lastTraversableNode || scrollRe.test(style.overflowX);\n      const isScrollableY = lastTraversableNode || scrollRe.test(style.overflowY);\n      const canScrollX = isScrollableX && target.clientWidth > 0 && target.scrollWidth > target.clientWidth;\n      const canScrollY = isScrollableY && target.clientHeight > 0 && target.scrollHeight > target.clientHeight;\n      const isRTL = style.direction === 'rtl';\n\n      // Check click position relative to scrollbar.\n      // In some browsers it is possible to change the <body> (or window)\n      // scrollbar to the left side, but is very rare and is difficult to\n      // check for. Plus, for modal dialogs with backdrops, it is more\n      // important that the backdrop is checked but not so much the window.\n      const pressedVerticalScrollbar = canScrollY && (isRTL ? event.offsetX <= target.offsetWidth - target.clientWidth : event.offsetX > target.clientWidth);\n      const pressedHorizontalScrollbar = canScrollX && event.offsetY > target.clientHeight;\n      if (pressedVerticalScrollbar || pressedHorizontalScrollbar) {\n        return;\n      }\n    }\n    const nodeId = (_dataRef$current$floa2 = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa2.nodeId;\n    const targetIsInsideChildren = tree && getNodeChildren$1(tree.nodesRef.current, nodeId).some(node => {\n      var _node$context;\n      return isEventTargetWithin(event, (_node$context = node.context) == null ? void 0 : _node$context.elements.floating);\n    });\n    if (isEventTargetWithin(event, elements.floating) || isEventTargetWithin(event, elements.domReference) || targetIsInsideChildren) {\n      return;\n    }\n    const children = tree ? getNodeChildren$1(tree.nodesRef.current, nodeId) : [];\n    if (children.length > 0) {\n      let shouldDismiss = true;\n      children.forEach(child => {\n        var _child$context2;\n        if ((_child$context2 = child.context) != null && _child$context2.open && !child.context.dataRef.current.__outsidePressBubbles) {\n          shouldDismiss = false;\n          return;\n        }\n      });\n      if (!shouldDismiss) {\n        return;\n      }\n    }\n    onOpenChange(false, event, 'outside-press');\n  });\n  const closeOnPressOutsideCapture = useEffectEvent(event => {\n    var _getTarget4;\n    const callback = () => {\n      var _getTarget3;\n      closeOnPressOutside(event);\n      (_getTarget3 = getTarget$1(event)) == null || _getTarget3.removeEventListener(outsidePressEvent, callback);\n    };\n    (_getTarget4 = getTarget$1(event)) == null || _getTarget4.addEventListener(outsidePressEvent, callback);\n  });\n  React.useEffect(() => {\n    if (!open || !enabled) {\n      return;\n    }\n    dataRef.current.__escapeKeyBubbles = escapeKeyBubbles;\n    dataRef.current.__outsidePressBubbles = outsidePressBubbles;\n    let compositionTimeout = -1;\n    function onScroll(event) {\n      onOpenChange(false, event, 'ancestor-scroll');\n    }\n    function handleCompositionStart() {\n      window.clearTimeout(compositionTimeout);\n      isComposingRef.current = true;\n    }\n    function handleCompositionEnd() {\n      // Safari fires `compositionend` before `keydown`, so we need to wait\n      // until the next tick to set `isComposing` to `false`.\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      compositionTimeout = window.setTimeout(() => {\n        isComposingRef.current = false;\n      },\n      // 0ms or 1ms don't work in Safari. 5ms appears to consistently work.\n      // Only apply to WebKit for the test to remain 0ms.\n      isWebKit() ? 5 : 0);\n    }\n    const doc = getDocument$1(elements.floating);\n    if (escapeKey) {\n      doc.addEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n      doc.addEventListener('compositionstart', handleCompositionStart);\n      doc.addEventListener('compositionend', handleCompositionEnd);\n    }\n    outsidePress && doc.addEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n    let ancestors = [];\n    if (ancestorScroll) {\n      if (isElement(elements.domReference)) {\n        ancestors = getOverflowAncestors(elements.domReference);\n      }\n      if (isElement(elements.floating)) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.floating));\n      }\n      if (!isElement(elements.reference) && elements.reference && elements.reference.contextElement) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.reference.contextElement));\n      }\n    }\n\n    // Ignore the visual viewport for scrolling dismissal (allow pinch-zoom)\n    ancestors = ancestors.filter(ancestor => {\n      var _doc$defaultView;\n      return ancestor !== ((_doc$defaultView = doc.defaultView) == null ? void 0 : _doc$defaultView.visualViewport);\n    });\n    ancestors.forEach(ancestor => {\n      ancestor.addEventListener('scroll', onScroll, {\n        passive: true\n      });\n    });\n    return () => {\n      if (escapeKey) {\n        doc.removeEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n        doc.removeEventListener('compositionstart', handleCompositionStart);\n        doc.removeEventListener('compositionend', handleCompositionEnd);\n      }\n      outsidePress && doc.removeEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n      ancestors.forEach(ancestor => {\n        ancestor.removeEventListener('scroll', onScroll);\n      });\n      window.clearTimeout(compositionTimeout);\n    };\n  }, [dataRef, elements, escapeKey, outsidePress, outsidePressEvent, open, onOpenChange, ancestorScroll, enabled, escapeKeyBubbles, outsidePressBubbles, closeOnEscapeKeyDown, escapeKeyCapture, closeOnEscapeKeyDownCapture, closeOnPressOutside, outsidePressCapture, closeOnPressOutsideCapture]);\n  React.useEffect(() => {\n    dataRef.current.insideReactTree = false;\n  }, [dataRef, outsidePress, outsidePressEvent]);\n  const reference = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    ...(referencePress && {\n      [bubbleHandlerKeys[referencePressEvent]]: event => {\n        onOpenChange(false, event.nativeEvent, 'reference-press');\n      },\n      ...(referencePressEvent !== 'click' && {\n        onClick(event) {\n          onOpenChange(false, event.nativeEvent, 'reference-press');\n        }\n      })\n    })\n  }), [closeOnEscapeKeyDown, onOpenChange, referencePress, referencePressEvent]);\n  const floating = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    onMouseDown() {\n      endedOrStartedInsideRef.current = true;\n    },\n    onMouseUp() {\n      endedOrStartedInsideRef.current = true;\n    },\n    [captureHandlerKeys[outsidePressEvent]]: () => {\n      dataRef.current.insideReactTree = true;\n    }\n  }), [closeOnEscapeKeyDown, outsidePressEvent, dataRef]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction useFloatingRootContext(options) {\n  const {\n    open = false,\n    onOpenChange: onOpenChangeProp,\n    elements: elementsProp\n  } = options;\n  const floatingId = useId();\n  const dataRef = React.useRef({});\n  const [events] = React.useState(() => createEventEmitter());\n  const nested = useFloatingParentNodeId() != null;\n  if (process.env.NODE_ENV !== \"production\") {\n    const optionDomReference = elementsProp.reference;\n    if (optionDomReference && !isElement(optionDomReference)) {\n      error('Cannot pass a virtual element to the `elements.reference` option,', 'as it must be a real DOM element. Use `refs.setPositionReference()`', 'instead.');\n    }\n  }\n  const [positionReference, setPositionReference] = React.useState(elementsProp.reference);\n  const onOpenChange = useEffectEvent((open, event, reason) => {\n    dataRef.current.openEvent = open ? event : undefined;\n    events.emit('openchange', {\n      open,\n      event,\n      reason,\n      nested\n    });\n    onOpenChangeProp == null || onOpenChangeProp(open, event, reason);\n  });\n  const refs = React.useMemo(() => ({\n    setPositionReference\n  }), []);\n  const elements = React.useMemo(() => ({\n    reference: positionReference || elementsProp.reference || null,\n    floating: elementsProp.floating || null,\n    domReference: elementsProp.reference\n  }), [positionReference, elementsProp.reference, elementsProp.floating]);\n  return React.useMemo(() => ({\n    dataRef,\n    open,\n    onOpenChange,\n    elements,\n    events,\n    floatingId,\n    refs\n  }), [open, onOpenChange, elements, events, floatingId, refs]);\n}\n\n/**\n * Provides data to position a floating element and context to add interactions.\n * @see https://floating-ui.com/docs/useFloating\n */\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    nodeId\n  } = options;\n  const internalRootContext = useFloatingRootContext({\n    ...options,\n    elements: {\n      reference: null,\n      floating: null,\n      ...options.elements\n    }\n  });\n  const rootContext = options.rootContext || internalRootContext;\n  const computedElements = rootContext.elements;\n  const [_domReference, setDomReference] = React.useState(null);\n  const [positionReference, _setPositionReference] = React.useState(null);\n  const optionDomReference = computedElements == null ? void 0 : computedElements.domReference;\n  const domReference = optionDomReference || _domReference;\n  const domReferenceRef = React.useRef(null);\n  const tree = useFloatingTree();\n  useModernLayoutEffect(() => {\n    if (domReference) {\n      domReferenceRef.current = domReference;\n    }\n  }, [domReference]);\n  const position = useFloating$1({\n    ...options,\n    elements: {\n      ...computedElements,\n      ...(positionReference && {\n        reference: positionReference\n      })\n    }\n  });\n  const setPositionReference = React.useCallback(node => {\n    const computedPositionReference = isElement(node) ? {\n      getBoundingClientRect: () => node.getBoundingClientRect(),\n      getClientRects: () => node.getClientRects(),\n      contextElement: node\n    } : node;\n    // Store the positionReference in state if the DOM reference is specified externally via the\n    // `elements.reference` option. This ensures that it won't be overridden on future renders.\n    _setPositionReference(computedPositionReference);\n    position.refs.setReference(computedPositionReference);\n  }, [position.refs]);\n  const setReference = React.useCallback(node => {\n    if (isElement(node) || node === null) {\n      domReferenceRef.current = node;\n      setDomReference(node);\n    }\n\n    // Backwards-compatibility for passing a virtual element to `reference`\n    // after it has set the DOM reference.\n    if (isElement(position.refs.reference.current) || position.refs.reference.current === null ||\n    // Don't allow setting virtual elements using the old technique back to\n    // `null` to support `positionReference` + an unstable `reference`\n    // callback ref.\n    node !== null && !isElement(node)) {\n      position.refs.setReference(node);\n    }\n  }, [position.refs]);\n  const refs = React.useMemo(() => ({\n    ...position.refs,\n    setReference,\n    setPositionReference,\n    domReference: domReferenceRef\n  }), [position.refs, setReference, setPositionReference]);\n  const elements = React.useMemo(() => ({\n    ...position.elements,\n    domReference: domReference\n  }), [position.elements, domReference]);\n  const context = React.useMemo(() => ({\n    ...position,\n    ...rootContext,\n    refs,\n    elements,\n    nodeId\n  }), [position, refs, elements, nodeId, rootContext]);\n  useModernLayoutEffect(() => {\n    rootContext.dataRef.current.floatingContext = context;\n    const node = tree == null ? void 0 : tree.nodesRef.current.find(node => node.id === nodeId);\n    if (node) {\n      node.context = context;\n    }\n  });\n  return React.useMemo(() => ({\n    ...position,\n    context,\n    refs,\n    elements\n  }), [position, refs, elements, context]);\n}\n\nfunction isMacSafari() {\n  return isMac() && isSafari();\n}\n/**\n * Opens the floating element while the reference element has focus, like CSS\n * `:focus`.\n * @see https://floating-ui.com/docs/useFocus\n */\nfunction useFocus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    events,\n    dataRef,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    visibleOnly = true\n  } = props;\n  const blockFocusRef = React.useRef(false);\n  const timeoutRef = React.useRef(-1);\n  const keyboardModalityRef = React.useRef(true);\n  React.useEffect(() => {\n    if (!enabled) return;\n    const win = getWindow(elements.domReference);\n\n    // If the reference was focused and the user left the tab/window, and the\n    // floating element was not open, the focus should be blocked when they\n    // return to the tab/window.\n    function onBlur() {\n      if (!open && isHTMLElement(elements.domReference) && elements.domReference === activeElement(getDocument$1(elements.domReference))) {\n        blockFocusRef.current = true;\n      }\n    }\n    function onKeyDown() {\n      keyboardModalityRef.current = true;\n    }\n    function onPointerDown() {\n      keyboardModalityRef.current = false;\n    }\n    win.addEventListener('blur', onBlur);\n    if (isMacSafari()) {\n      win.addEventListener('keydown', onKeyDown, true);\n      win.addEventListener('pointerdown', onPointerDown, true);\n    }\n    return () => {\n      win.removeEventListener('blur', onBlur);\n      if (isMacSafari()) {\n        win.removeEventListener('keydown', onKeyDown, true);\n        win.removeEventListener('pointerdown', onPointerDown, true);\n      }\n    };\n  }, [elements.domReference, open, enabled]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        reason\n      } = _ref;\n      if (reason === 'reference-press' || reason === 'escape-key') {\n        blockFocusRef.current = true;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [events, enabled]);\n  React.useEffect(() => {\n    return () => {\n      clearTimeoutIfSet(timeoutRef);\n    };\n  }, []);\n  const reference = React.useMemo(() => ({\n    onMouseLeave() {\n      blockFocusRef.current = false;\n    },\n    onFocus(event) {\n      if (blockFocusRef.current) return;\n      const target = getTarget$1(event.nativeEvent);\n      if (visibleOnly && isElement(target)) {\n        // Safari fails to match `:focus-visible` if focus was initially\n        // outside the document.\n        if (isMacSafari() && !event.relatedTarget) {\n          if (!keyboardModalityRef.current && !isTypeableElement(target)) {\n            return;\n          }\n        } else if (!matchesFocusVisible(target)) {\n          return;\n        }\n      }\n      onOpenChange(true, event.nativeEvent, 'focus');\n    },\n    onBlur(event) {\n      blockFocusRef.current = false;\n      const relatedTarget = event.relatedTarget;\n      const nativeEvent = event.nativeEvent;\n\n      // Hit the non-modal focus management portal guard. Focus will be\n      // moved into the floating element immediately after.\n      const movedToFocusGuard = isElement(relatedTarget) && relatedTarget.hasAttribute(createAttribute('focus-guard')) && relatedTarget.getAttribute('data-type') === 'outside';\n\n      // Wait for the window blur listener to fire.\n      timeoutRef.current = window.setTimeout(() => {\n        var _dataRef$current$floa;\n        const activeEl = activeElement(elements.domReference ? elements.domReference.ownerDocument : document);\n\n        // Focus left the page, keep it open.\n        if (!relatedTarget && activeEl === elements.domReference) return;\n\n        // When focusing the reference element (e.g. regular click), then\n        // clicking into the floating element, prevent it from hiding.\n        // Note: it must be focusable, e.g. `tabindex=\"-1\"`.\n        // We can not rely on relatedTarget to point to the correct element\n        // as it will only point to the shadow host of the newly focused element\n        // and not the element that actually has received focus if it is located\n        // inside a shadow root.\n        if (contains$1((_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.refs.floating.current, activeEl) || contains$1(elements.domReference, activeEl) || movedToFocusGuard) {\n          return;\n        }\n        onOpenChange(false, nativeEvent, 'focus');\n      });\n    }\n  }), [dataRef, elements.domReference, onOpenChange, visibleOnly]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nfunction mergeProps(userProps, propsList, elementKey) {\n  const map = new Map();\n  const isItem = elementKey === 'item';\n  let domUserProps = userProps;\n  if (isItem && userProps) {\n    const {\n      [ACTIVE_KEY]: _,\n      [SELECTED_KEY]: __,\n      ...validProps\n    } = userProps;\n    domUserProps = validProps;\n  }\n  return {\n    ...(elementKey === 'floating' && {\n      tabIndex: -1,\n      [FOCUSABLE_ATTRIBUTE]: ''\n    }),\n    ...domUserProps,\n    ...propsList.map(value => {\n      const propsOrGetProps = value ? value[elementKey] : null;\n      if (typeof propsOrGetProps === 'function') {\n        return userProps ? propsOrGetProps(userProps) : null;\n      }\n      return propsOrGetProps;\n    }).concat(userProps).reduce((acc, props) => {\n      if (!props) {\n        return acc;\n      }\n      Object.entries(props).forEach(_ref => {\n        let [key, value] = _ref;\n        if (isItem && [ACTIVE_KEY, SELECTED_KEY].includes(key)) {\n          return;\n        }\n        if (key.indexOf('on') === 0) {\n          if (!map.has(key)) {\n            map.set(key, []);\n          }\n          if (typeof value === 'function') {\n            var _map$get;\n            (_map$get = map.get(key)) == null || _map$get.push(value);\n            acc[key] = function () {\n              var _map$get2;\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n              return (_map$get2 = map.get(key)) == null ? void 0 : _map$get2.map(fn => fn(...args)).find(val => val !== undefined);\n            };\n          }\n        } else {\n          acc[key] = value;\n        }\n      });\n      return acc;\n    }, {})\n  };\n}\n/**\n * Merges an array of interaction hooks' props into prop getters, allowing\n * event handler functions to be composed together without overwriting one\n * another.\n * @see https://floating-ui.com/docs/useInteractions\n */\nfunction useInteractions(propsList) {\n  if (propsList === void 0) {\n    propsList = [];\n  }\n  const referenceDeps = propsList.map(key => key == null ? void 0 : key.reference);\n  const floatingDeps = propsList.map(key => key == null ? void 0 : key.floating);\n  const itemDeps = propsList.map(key => key == null ? void 0 : key.item);\n  const getReferenceProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'reference'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  referenceDeps);\n  const getFloatingProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'floating'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  floatingDeps);\n  const getItemProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'item'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  itemDeps);\n  return React.useMemo(() => ({\n    getReferenceProps,\n    getFloatingProps,\n    getItemProps\n  }), [getReferenceProps, getFloatingProps, getItemProps]);\n}\n\nconst ESCAPE = 'Escape';\nfunction doSwitch(orientation, vertical, horizontal) {\n  switch (orientation) {\n    case 'vertical':\n      return vertical;\n    case 'horizontal':\n      return horizontal;\n    default:\n      return vertical || horizontal;\n  }\n}\nfunction isMainOrientationKey(key, orientation) {\n  const vertical = key === ARROW_UP || key === ARROW_DOWN;\n  const horizontal = key === ARROW_LEFT || key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isMainOrientationToEndKey(key, orientation, rtl) {\n  const vertical = key === ARROW_DOWN;\n  const horizontal = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal) || key === 'Enter' || key === ' ' || key === '';\n}\nfunction isCrossOrientationOpenKey(key, orientation, rtl) {\n  const vertical = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  const horizontal = key === ARROW_DOWN;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isCrossOrientationCloseKey(key, orientation, rtl, cols) {\n  const vertical = rtl ? key === ARROW_RIGHT : key === ARROW_LEFT;\n  const horizontal = key === ARROW_UP;\n  if (orientation === 'both' || orientation === 'horizontal' && cols && cols > 1) {\n    return key === ESCAPE;\n  }\n  return doSwitch(orientation, vertical, horizontal);\n}\n/**\n * Adds arrow key-based navigation of a list of items, either using real DOM\n * focus or virtual focus.\n * @see https://floating-ui.com/docs/useListNavigation\n */\nfunction useListNavigation(context, props) {\n  const {\n    open,\n    onOpenChange,\n    elements,\n    floatingId\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onNavigate: unstable_onNavigate = () => {},\n    enabled = true,\n    selectedIndex = null,\n    allowEscape = false,\n    loop = false,\n    nested = false,\n    rtl = false,\n    virtual = false,\n    focusItemOnOpen = 'auto',\n    focusItemOnHover = true,\n    openOnArrowKeyDown = true,\n    disabledIndices = undefined,\n    orientation = 'vertical',\n    parentOrientation,\n    cols = 1,\n    scrollItemIntoView = true,\n    virtualItemRef,\n    itemSizes,\n    dense = false\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (allowEscape) {\n      if (!loop) {\n        warn('`useListNavigation` looping must be enabled to allow escaping.');\n      }\n      if (!virtual) {\n        warn('`useListNavigation` must be virtual to allow escaping.');\n      }\n    }\n    if (orientation === 'vertical' && cols > 1) {\n      warn('In grid list navigation mode (`cols` > 1), the `orientation` should', 'be either \"horizontal\" or \"both\".');\n    }\n  }\n  const floatingFocusElement = getFloatingFocusElement(elements.floating);\n  const floatingFocusElementRef = useLatestRef(floatingFocusElement);\n  const parentId = useFloatingParentNodeId();\n  const tree = useFloatingTree();\n  useModernLayoutEffect(() => {\n    context.dataRef.current.orientation = orientation;\n  }, [context, orientation]);\n  const onNavigate = useEffectEvent(() => {\n    unstable_onNavigate(indexRef.current === -1 ? null : indexRef.current);\n  });\n  const typeableComboboxReference = isTypeableCombobox(elements.domReference);\n  const focusItemOnOpenRef = React.useRef(focusItemOnOpen);\n  const indexRef = React.useRef(selectedIndex != null ? selectedIndex : -1);\n  const keyRef = React.useRef(null);\n  const isPointerModalityRef = React.useRef(true);\n  const previousOnNavigateRef = React.useRef(onNavigate);\n  const previousMountedRef = React.useRef(!!elements.floating);\n  const previousOpenRef = React.useRef(open);\n  const forceSyncFocusRef = React.useRef(false);\n  const forceScrollIntoViewRef = React.useRef(false);\n  const disabledIndicesRef = useLatestRef(disabledIndices);\n  const latestOpenRef = useLatestRef(open);\n  const scrollItemIntoViewRef = useLatestRef(scrollItemIntoView);\n  const selectedIndexRef = useLatestRef(selectedIndex);\n  const [activeId, setActiveId] = React.useState();\n  const [virtualId, setVirtualId] = React.useState();\n  const focusItem = useEffectEvent(() => {\n    function runFocus(item) {\n      if (virtual) {\n        var _item$id;\n        if ((_item$id = item.id) != null && _item$id.endsWith('-fui-option')) {\n          item.id = floatingId + \"-\" + Math.random().toString(16).slice(2, 10);\n        }\n        setActiveId(item.id);\n        tree == null || tree.events.emit('virtualfocus', item);\n        if (virtualItemRef) {\n          virtualItemRef.current = item;\n        }\n      } else {\n        enqueueFocus(item, {\n          sync: forceSyncFocusRef.current,\n          preventScroll: true\n        });\n      }\n    }\n    const initialItem = listRef.current[indexRef.current];\n    const forceScrollIntoView = forceScrollIntoViewRef.current;\n    if (initialItem) {\n      runFocus(initialItem);\n    }\n    const scheduler = forceSyncFocusRef.current ? v => v() : requestAnimationFrame;\n    scheduler(() => {\n      const waitedItem = listRef.current[indexRef.current] || initialItem;\n      if (!waitedItem) return;\n      if (!initialItem) {\n        runFocus(waitedItem);\n      }\n      const scrollIntoViewOptions = scrollItemIntoViewRef.current;\n      const shouldScrollIntoView = scrollIntoViewOptions && item && (forceScrollIntoView || !isPointerModalityRef.current);\n      if (shouldScrollIntoView) {\n        // JSDOM doesn't support `.scrollIntoView()` but it's widely supported\n        // by all browsers.\n        waitedItem.scrollIntoView == null || waitedItem.scrollIntoView(typeof scrollIntoViewOptions === 'boolean' ? {\n          block: 'nearest',\n          inline: 'nearest'\n        } : scrollIntoViewOptions);\n      }\n    });\n  });\n\n  // Sync `selectedIndex` to be the `activeIndex` upon opening the floating\n  // element. Also, reset `activeIndex` upon closing the floating element.\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (open && elements.floating) {\n      if (focusItemOnOpenRef.current && selectedIndex != null) {\n        // Regardless of the pointer modality, we want to ensure the selected\n        // item comes into view when the floating element is opened.\n        forceScrollIntoViewRef.current = true;\n        indexRef.current = selectedIndex;\n        onNavigate();\n      }\n    } else if (previousMountedRef.current) {\n      // Since the user can specify `onNavigate` conditionally\n      // (onNavigate: open ? setActiveIndex : setSelectedIndex),\n      // we store and call the previous function.\n      indexRef.current = -1;\n      previousOnNavigateRef.current();\n    }\n  }, [enabled, open, elements.floating, selectedIndex, onNavigate]);\n\n  // Sync `activeIndex` to be the focused item while the floating element is\n  // open.\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!open) return;\n    if (!elements.floating) return;\n    if (activeIndex == null) {\n      forceSyncFocusRef.current = false;\n      if (selectedIndexRef.current != null) {\n        return;\n      }\n\n      // Reset while the floating element was open (e.g. the list changed).\n      if (previousMountedRef.current) {\n        indexRef.current = -1;\n        focusItem();\n      }\n\n      // Initial sync.\n      if ((!previousOpenRef.current || !previousMountedRef.current) && focusItemOnOpenRef.current && (keyRef.current != null || focusItemOnOpenRef.current === true && keyRef.current == null)) {\n        let runs = 0;\n        const waitForListPopulated = () => {\n          if (listRef.current[0] == null) {\n            // Avoid letting the browser paint if possible on the first try,\n            // otherwise use rAF. Don't try more than twice, since something\n            // is wrong otherwise.\n            if (runs < 2) {\n              const scheduler = runs ? requestAnimationFrame : queueMicrotask;\n              scheduler(waitForListPopulated);\n            }\n            runs++;\n          } else {\n            indexRef.current = keyRef.current == null || isMainOrientationToEndKey(keyRef.current, orientation, rtl) || nested ? getMinListIndex(listRef, disabledIndicesRef.current) : getMaxListIndex(listRef, disabledIndicesRef.current);\n            keyRef.current = null;\n            onNavigate();\n          }\n        };\n        waitForListPopulated();\n      }\n    } else if (!isIndexOutOfListBounds(listRef, activeIndex)) {\n      indexRef.current = activeIndex;\n      focusItem();\n      forceScrollIntoViewRef.current = false;\n    }\n  }, [enabled, open, elements.floating, activeIndex, selectedIndexRef, nested, listRef, orientation, rtl, onNavigate, focusItem, disabledIndicesRef]);\n\n  // Ensure the parent floating element has focus when a nested child closes\n  // to allow arrow key navigation to work after the pointer leaves the child.\n  useModernLayoutEffect(() => {\n    var _nodes$find;\n    if (!enabled || elements.floating || !tree || virtual || !previousMountedRef.current) {\n      return;\n    }\n    const nodes = tree.nodesRef.current;\n    const parent = (_nodes$find = nodes.find(node => node.id === parentId)) == null || (_nodes$find = _nodes$find.context) == null ? void 0 : _nodes$find.elements.floating;\n    const activeEl = activeElement(getDocument$1(elements.floating));\n    const treeContainsActiveEl = nodes.some(node => node.context && contains$1(node.context.elements.floating, activeEl));\n    if (parent && !treeContainsActiveEl && isPointerModalityRef.current) {\n      parent.focus({\n        preventScroll: true\n      });\n    }\n  }, [enabled, elements.floating, tree, parentId, virtual]);\n  useModernLayoutEffect(() => {\n    if (!enabled) return;\n    if (!tree) return;\n    if (!virtual) return;\n    if (parentId) return;\n    function handleVirtualFocus(item) {\n      setVirtualId(item.id);\n      if (virtualItemRef) {\n        virtualItemRef.current = item;\n      }\n    }\n    tree.events.on('virtualfocus', handleVirtualFocus);\n    return () => {\n      tree.events.off('virtualfocus', handleVirtualFocus);\n    };\n  }, [enabled, tree, virtual, parentId, virtualItemRef]);\n  useModernLayoutEffect(() => {\n    previousOnNavigateRef.current = onNavigate;\n    previousOpenRef.current = open;\n    previousMountedRef.current = !!elements.floating;\n  });\n  useModernLayoutEffect(() => {\n    if (!open) {\n      keyRef.current = null;\n      focusItemOnOpenRef.current = focusItemOnOpen;\n    }\n  }, [open, focusItemOnOpen]);\n  const hasActiveIndex = activeIndex != null;\n  const item = React.useMemo(() => {\n    function syncCurrentTarget(currentTarget) {\n      if (!latestOpenRef.current) return;\n      const index = listRef.current.indexOf(currentTarget);\n      if (index !== -1 && indexRef.current !== index) {\n        indexRef.current = index;\n        onNavigate();\n      }\n    }\n    const props = {\n      onFocus(_ref) {\n        let {\n          currentTarget\n        } = _ref;\n        forceSyncFocusRef.current = true;\n        syncCurrentTarget(currentTarget);\n      },\n      onClick: _ref2 => {\n        let {\n          currentTarget\n        } = _ref2;\n        return currentTarget.focus({\n          preventScroll: true\n        });\n      },\n      // Safari\n      onMouseMove(_ref3) {\n        let {\n          currentTarget\n        } = _ref3;\n        forceSyncFocusRef.current = true;\n        forceScrollIntoViewRef.current = false;\n        if (focusItemOnHover) {\n          syncCurrentTarget(currentTarget);\n        }\n      },\n      onPointerLeave(_ref4) {\n        let {\n          pointerType\n        } = _ref4;\n        if (!isPointerModalityRef.current || pointerType === 'touch') {\n          return;\n        }\n        forceSyncFocusRef.current = true;\n        if (!focusItemOnHover) {\n          return;\n        }\n        indexRef.current = -1;\n        onNavigate();\n        if (!virtual) {\n          var _floatingFocusElement;\n          (_floatingFocusElement = floatingFocusElementRef.current) == null || _floatingFocusElement.focus({\n            preventScroll: true\n          });\n        }\n      }\n    };\n    return props;\n  }, [latestOpenRef, floatingFocusElementRef, focusItemOnHover, listRef, onNavigate, virtual]);\n  const getParentOrientation = React.useCallback(() => {\n    var _tree$nodesRef$curren;\n    return parentOrientation != null ? parentOrientation : tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.dataRef) == null ? void 0 : _tree$nodesRef$curren.current.orientation;\n  }, [parentId, tree, parentOrientation]);\n  const commonOnKeyDown = useEffectEvent(event => {\n    isPointerModalityRef.current = false;\n    forceSyncFocusRef.current = true;\n\n    // When composing a character, Chrome fires ArrowDown twice. Firefox/Safari\n    // don't appear to suffer from this. `event.isComposing` is avoided due to\n    // Safari not supporting it properly (although it's not needed in the first\n    // place for Safari, just avoiding any possible issues).\n    if (event.which === 229) {\n      return;\n    }\n\n    // If the floating element is animating out, ignore navigation. Otherwise,\n    // the `activeIndex` gets set to 0 despite not being open so the next time\n    // the user ArrowDowns, the first item won't be focused.\n    if (!latestOpenRef.current && event.currentTarget === floatingFocusElementRef.current) {\n      return;\n    }\n    if (nested && isCrossOrientationCloseKey(event.key, orientation, rtl, cols)) {\n      // If the nested list's close key is also the parent navigation key,\n      // let the parent navigate. Otherwise, stop propagating the event.\n      if (!isMainOrientationKey(event.key, getParentOrientation())) {\n        stopEvent(event);\n      }\n      onOpenChange(false, event.nativeEvent, 'list-navigation');\n      if (isHTMLElement(elements.domReference)) {\n        if (virtual) {\n          tree == null || tree.events.emit('virtualfocus', elements.domReference);\n        } else {\n          elements.domReference.focus();\n        }\n      }\n      return;\n    }\n    const currentIndex = indexRef.current;\n    const minIndex = getMinListIndex(listRef, disabledIndices);\n    const maxIndex = getMaxListIndex(listRef, disabledIndices);\n    if (!typeableComboboxReference) {\n      if (event.key === 'Home') {\n        stopEvent(event);\n        indexRef.current = minIndex;\n        onNavigate();\n      }\n      if (event.key === 'End') {\n        stopEvent(event);\n        indexRef.current = maxIndex;\n        onNavigate();\n      }\n    }\n\n    // Grid navigation.\n    if (cols > 1) {\n      const sizes = itemSizes || Array.from({\n        length: listRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = createGridCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isListIndexDisabled(listRef, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isListIndexDisabled(listRef, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      const index = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex != null ? listRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        rtl,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getGridCellIndices([...((typeof disabledIndices !== 'function' ? disabledIndices : null) || listRef.current.map((_, index) => isListIndexDisabled(listRef, index, disabledIndices) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getGridCellIndexOfCorner(indexRef.current > maxIndex ? minIndex : indexRef.current, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction\n        // we're moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === (rtl ? ARROW_LEFT : ARROW_RIGHT) ? 'tr' : 'tl'),\n        stopEvent: true\n      })];\n      if (index != null) {\n        indexRef.current = index;\n        onNavigate();\n      }\n      if (orientation === 'both') {\n        return;\n      }\n    }\n    if (isMainOrientationKey(event.key, orientation)) {\n      stopEvent(event);\n\n      // Reset the index if no item is focused.\n      if (open && !virtual && activeElement(event.currentTarget.ownerDocument) === event.currentTarget) {\n        indexRef.current = isMainOrientationToEndKey(event.key, orientation, rtl) ? minIndex : maxIndex;\n        onNavigate();\n        return;\n      }\n      if (isMainOrientationToEndKey(event.key, orientation, rtl)) {\n        if (loop) {\n          indexRef.current = currentIndex >= maxIndex ? allowEscape && currentIndex !== listRef.current.length ? -1 : minIndex : findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.min(maxIndex, findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          }));\n        }\n      } else {\n        if (loop) {\n          indexRef.current = currentIndex <= minIndex ? allowEscape && currentIndex !== -1 ? listRef.current.length : maxIndex : findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.max(minIndex, findNonDisabledListIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          }));\n        }\n      }\n      if (isIndexOutOfListBounds(listRef, indexRef.current)) {\n        indexRef.current = -1;\n      }\n      onNavigate();\n    }\n  });\n  const ariaActiveDescendantProp = React.useMemo(() => {\n    return virtual && open && hasActiveIndex && {\n      'aria-activedescendant': virtualId || activeId\n    };\n  }, [virtual, open, hasActiveIndex, virtualId, activeId]);\n  const floating = React.useMemo(() => {\n    return {\n      'aria-orientation': orientation === 'both' ? undefined : orientation,\n      ...(!typeableComboboxReference ? ariaActiveDescendantProp : {}),\n      onKeyDown: commonOnKeyDown,\n      onPointerMove() {\n        isPointerModalityRef.current = true;\n      }\n    };\n  }, [ariaActiveDescendantProp, commonOnKeyDown, orientation, typeableComboboxReference]);\n  const reference = React.useMemo(() => {\n    function checkVirtualMouse(event) {\n      if (focusItemOnOpen === 'auto' && isVirtualClick(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    function checkVirtualPointer(event) {\n      // `pointerdown` fires first, reset the state then perform the checks.\n      focusItemOnOpenRef.current = focusItemOnOpen;\n      if (focusItemOnOpen === 'auto' && isVirtualPointerEvent(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    return {\n      ...ariaActiveDescendantProp,\n      onKeyDown(event) {\n        isPointerModalityRef.current = false;\n        const isArrowKey = event.key.startsWith('Arrow');\n        const isHomeOrEndKey = ['Home', 'End'].includes(event.key);\n        const isMoveKey = isArrowKey || isHomeOrEndKey;\n        const isCrossOpenKey = isCrossOrientationOpenKey(event.key, orientation, rtl);\n        const isCrossCloseKey = isCrossOrientationCloseKey(event.key, orientation, rtl, cols);\n        const isParentCrossOpenKey = isCrossOrientationOpenKey(event.key, getParentOrientation(), rtl);\n        const isMainKey = isMainOrientationKey(event.key, orientation);\n        const isNavigationKey = (nested ? isParentCrossOpenKey : isMainKey) || event.key === 'Enter' || event.key.trim() === '';\n        if (virtual && open) {\n          const rootNode = tree == null ? void 0 : tree.nodesRef.current.find(node => node.parentId == null);\n          const deepestNode = tree && rootNode ? getDeepestNode(tree.nodesRef.current, rootNode.id) : null;\n          if (isMoveKey && deepestNode && virtualItemRef) {\n            const eventObject = new KeyboardEvent('keydown', {\n              key: event.key,\n              bubbles: true\n            });\n            if (isCrossOpenKey || isCrossCloseKey) {\n              var _deepestNode$context, _deepestNode$context2;\n              const isCurrentTarget = ((_deepestNode$context = deepestNode.context) == null ? void 0 : _deepestNode$context.elements.domReference) === event.currentTarget;\n              const dispatchItem = isCrossCloseKey && !isCurrentTarget ? (_deepestNode$context2 = deepestNode.context) == null ? void 0 : _deepestNode$context2.elements.domReference : isCrossOpenKey ? listRef.current.find(item => (item == null ? void 0 : item.id) === activeId) : null;\n              if (dispatchItem) {\n                stopEvent(event);\n                dispatchItem.dispatchEvent(eventObject);\n                setVirtualId(undefined);\n              }\n            }\n            if ((isMainKey || isHomeOrEndKey) && deepestNode.context) {\n              if (deepestNode.context.open && deepestNode.parentId && event.currentTarget !== deepestNode.context.elements.domReference) {\n                var _deepestNode$context$;\n                stopEvent(event);\n                (_deepestNode$context$ = deepestNode.context.elements.domReference) == null || _deepestNode$context$.dispatchEvent(eventObject);\n                return;\n              }\n            }\n          }\n          return commonOnKeyDown(event);\n        }\n        // If a floating element should not open on arrow key down, avoid\n        // setting `activeIndex` while it's closed.\n        if (!open && !openOnArrowKeyDown && isArrowKey) {\n          return;\n        }\n        if (isNavigationKey) {\n          const isParentMainKey = isMainOrientationKey(event.key, getParentOrientation());\n          keyRef.current = nested && isParentMainKey ? null : event.key;\n        }\n        if (nested) {\n          if (isParentCrossOpenKey) {\n            stopEvent(event);\n            if (open) {\n              indexRef.current = getMinListIndex(listRef, disabledIndicesRef.current);\n              onNavigate();\n            } else {\n              onOpenChange(true, event.nativeEvent, 'list-navigation');\n            }\n          }\n          return;\n        }\n        if (isMainKey) {\n          if (selectedIndex != null) {\n            indexRef.current = selectedIndex;\n          }\n          stopEvent(event);\n          if (!open && openOnArrowKeyDown) {\n            onOpenChange(true, event.nativeEvent, 'list-navigation');\n          } else {\n            commonOnKeyDown(event);\n          }\n          if (open) {\n            onNavigate();\n          }\n        }\n      },\n      onFocus() {\n        if (open && !virtual) {\n          indexRef.current = -1;\n          onNavigate();\n        }\n      },\n      onPointerDown: checkVirtualPointer,\n      onPointerEnter: checkVirtualPointer,\n      onMouseDown: checkVirtualMouse,\n      onClick: checkVirtualMouse\n    };\n  }, [activeId, ariaActiveDescendantProp, cols, commonOnKeyDown, disabledIndicesRef, focusItemOnOpen, listRef, nested, onNavigate, onOpenChange, open, openOnArrowKeyDown, orientation, getParentOrientation, rtl, selectedIndex, tree, virtual, virtualItemRef]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\nconst componentRoleToAriaRoleMap = /*#__PURE__*/new Map([['select', 'listbox'], ['combobox', 'listbox'], ['label', false]]);\n\n/**\n * Adds base screen reader props to the reference and floating elements for a\n * given floating element `role`.\n * @see https://floating-ui.com/docs/useRole\n */\nfunction useRole(context, props) {\n  var _elements$domReferenc, _componentRoleToAriaR;\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    elements,\n    floatingId: defaultFloatingId\n  } = context;\n  const {\n    enabled = true,\n    role = 'dialog'\n  } = props;\n  const defaultReferenceId = useId();\n  const referenceId = ((_elements$domReferenc = elements.domReference) == null ? void 0 : _elements$domReferenc.id) || defaultReferenceId;\n  const floatingId = React.useMemo(() => {\n    var _getFloatingFocusElem;\n    return ((_getFloatingFocusElem = getFloatingFocusElement(elements.floating)) == null ? void 0 : _getFloatingFocusElem.id) || defaultFloatingId;\n  }, [elements.floating, defaultFloatingId]);\n  const ariaRole = (_componentRoleToAriaR = componentRoleToAriaRoleMap.get(role)) != null ? _componentRoleToAriaR : role;\n  const parentId = useFloatingParentNodeId();\n  const isNested = parentId != null;\n  const reference = React.useMemo(() => {\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return {\n        [\"aria-\" + (role === 'label' ? 'labelledby' : 'describedby')]: open ? floatingId : undefined\n      };\n    }\n    return {\n      'aria-expanded': open ? 'true' : 'false',\n      'aria-haspopup': ariaRole === 'alertdialog' ? 'dialog' : ariaRole,\n      'aria-controls': open ? floatingId : undefined,\n      ...(ariaRole === 'listbox' && {\n        role: 'combobox'\n      }),\n      ...(ariaRole === 'menu' && {\n        id: referenceId\n      }),\n      ...(ariaRole === 'menu' && isNested && {\n        role: 'menuitem'\n      }),\n      ...(role === 'select' && {\n        'aria-autocomplete': 'none'\n      }),\n      ...(role === 'combobox' && {\n        'aria-autocomplete': 'list'\n      })\n    };\n  }, [ariaRole, floatingId, isNested, open, referenceId, role]);\n  const floating = React.useMemo(() => {\n    const floatingProps = {\n      id: floatingId,\n      ...(ariaRole && {\n        role: ariaRole\n      })\n    };\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return floatingProps;\n    }\n    return {\n      ...floatingProps,\n      ...(ariaRole === 'menu' && {\n        'aria-labelledby': referenceId\n      })\n    };\n  }, [ariaRole, floatingId, referenceId, role]);\n  const item = React.useCallback(_ref => {\n    let {\n      active,\n      selected\n    } = _ref;\n    const commonProps = {\n      role: 'option',\n      ...(active && {\n        id: floatingId + \"-fui-option\"\n      })\n    };\n\n    // For `menu`, we are unable to tell if the item is a `menuitemradio`\n    // or `menuitemcheckbox`. For backwards-compatibility reasons, also\n    // avoid defaulting to `menuitem` as it may overwrite custom role props.\n    switch (role) {\n      case 'select':\n      case 'combobox':\n        return {\n          ...commonProps,\n          'aria-selected': selected\n        };\n    }\n    return {};\n  }, [floatingId, role]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\n// Converts a JS style key like `backgroundColor` to a CSS transition-property\n// like `background-color`.\nconst camelCaseToKebabCase = str => str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $.toLowerCase());\nfunction execWithArgsOrReturn(valueOrFn, args) {\n  return typeof valueOrFn === 'function' ? valueOrFn(args) : valueOrFn;\n}\nfunction useDelayUnmount(open, durationMs) {\n  const [isMounted, setIsMounted] = React.useState(open);\n  if (open && !isMounted) {\n    setIsMounted(true);\n  }\n  React.useEffect(() => {\n    if (!open && isMounted) {\n      const timeout = setTimeout(() => setIsMounted(false), durationMs);\n      return () => clearTimeout(timeout);\n    }\n  }, [open, isMounted, durationMs]);\n  return isMounted;\n}\n/**\n * Provides a status string to apply CSS transitions to a floating element,\n * correctly handling placement-aware transitions.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstatus\n */\nfunction useTransitionStatus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    elements: {\n      floating\n    }\n  } = context;\n  const {\n    duration = 250\n  } = props;\n  const isNumberDuration = typeof duration === 'number';\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [status, setStatus] = React.useState('unmounted');\n  const isMounted = useDelayUnmount(open, closeDuration);\n  if (!isMounted && status === 'close') {\n    setStatus('unmounted');\n  }\n  useModernLayoutEffect(() => {\n    if (!floating) return;\n    if (open) {\n      setStatus('initial');\n      const frame = requestAnimationFrame(() => {\n        // Ensure it opens before paint. With `FloatingDelayGroup`,\n        // this avoids a flicker when moving between floating elements\n        // to ensure one is always open with no missing frames.\n        ReactDOM.flushSync(() => {\n          setStatus('open');\n        });\n      });\n      return () => {\n        cancelAnimationFrame(frame);\n      };\n    }\n    setStatus('close');\n  }, [open, floating]);\n  return {\n    isMounted,\n    status\n  };\n}\n/**\n * Provides styles to apply CSS transitions to a floating element, correctly\n * handling placement-aware transitions. Wrapper around `useTransitionStatus`.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstyles\n */\nfunction useTransitionStyles(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    initial: unstable_initial = {\n      opacity: 0\n    },\n    open: unstable_open,\n    close: unstable_close,\n    common: unstable_common,\n    duration = 250\n  } = props;\n  const placement = context.placement;\n  const side = placement.split('-')[0];\n  const fnArgs = React.useMemo(() => ({\n    side,\n    placement\n  }), [side, placement]);\n  const isNumberDuration = typeof duration === 'number';\n  const openDuration = (isNumberDuration ? duration : duration.open) || 0;\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [styles, setStyles] = React.useState(() => ({\n    ...execWithArgsOrReturn(unstable_common, fnArgs),\n    ...execWithArgsOrReturn(unstable_initial, fnArgs)\n  }));\n  const {\n    isMounted,\n    status\n  } = useTransitionStatus(context, {\n    duration\n  });\n  const initialRef = useLatestRef(unstable_initial);\n  const openRef = useLatestRef(unstable_open);\n  const closeRef = useLatestRef(unstable_close);\n  const commonRef = useLatestRef(unstable_common);\n  useModernLayoutEffect(() => {\n    const initialStyles = execWithArgsOrReturn(initialRef.current, fnArgs);\n    const closeStyles = execWithArgsOrReturn(closeRef.current, fnArgs);\n    const commonStyles = execWithArgsOrReturn(commonRef.current, fnArgs);\n    const openStyles = execWithArgsOrReturn(openRef.current, fnArgs) || Object.keys(initialStyles).reduce((acc, key) => {\n      acc[key] = '';\n      return acc;\n    }, {});\n    if (status === 'initial') {\n      setStyles(styles => ({\n        transitionProperty: styles.transitionProperty,\n        ...commonStyles,\n        ...initialStyles\n      }));\n    }\n    if (status === 'open') {\n      setStyles({\n        transitionProperty: Object.keys(openStyles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: openDuration + \"ms\",\n        ...commonStyles,\n        ...openStyles\n      });\n    }\n    if (status === 'close') {\n      const styles = closeStyles || initialStyles;\n      setStyles({\n        transitionProperty: Object.keys(styles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: closeDuration + \"ms\",\n        ...commonStyles,\n        ...styles\n      });\n    }\n  }, [closeDuration, closeRef, initialRef, openRef, commonRef, openDuration, status, fnArgs]);\n  return {\n    isMounted,\n    styles\n  };\n}\n\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\nfunction useTypeahead(context, props) {\n  var _ref;\n  const {\n    open,\n    dataRef\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onMatch: unstable_onMatch,\n    onTypingChange: unstable_onTypingChange,\n    enabled = true,\n    findMatch = null,\n    resetMs = 750,\n    ignoreKeys = [],\n    selectedIndex = null\n  } = props;\n  const timeoutIdRef = React.useRef(-1);\n  const stringRef = React.useRef('');\n  const prevIndexRef = React.useRef((_ref = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref : -1);\n  const matchIndexRef = React.useRef(null);\n  const onMatch = useEffectEvent(unstable_onMatch);\n  const onTypingChange = useEffectEvent(unstable_onTypingChange);\n  const findMatchRef = useLatestRef(findMatch);\n  const ignoreKeysRef = useLatestRef(ignoreKeys);\n  useModernLayoutEffect(() => {\n    if (open) {\n      clearTimeoutIfSet(timeoutIdRef);\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open]);\n  useModernLayoutEffect(() => {\n    // Sync arrow key navigation but not typeahead navigation.\n    if (open && stringRef.current === '') {\n      var _ref2;\n      prevIndexRef.current = (_ref2 = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref2 : -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n  const setTypingChange = useEffectEvent(value => {\n    if (value) {\n      if (!dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    } else {\n      if (dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    }\n  });\n  const onKeyDown = useEffectEvent(event => {\n    function getMatchingIndex(list, orderedList, string) {\n      const str = findMatchRef.current ? findMatchRef.current(orderedList, string) : orderedList.find(text => (text == null ? void 0 : text.toLocaleLowerCase().indexOf(string.toLocaleLowerCase())) === 0);\n      return str ? list.indexOf(str) : -1;\n    }\n    const listContent = listRef.current;\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      if (getMatchingIndex(listContent, listContent, stringRef.current) === -1) {\n        setTypingChange(false);\n      } else if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n    if (listContent == null || ignoreKeysRef.current.includes(event.key) ||\n    // Character key.\n    event.key.length !== 1 ||\n    // Modifier key.\n    event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    if (open && event.key !== ' ') {\n      stopEvent(event);\n      setTypingChange(true);\n    }\n\n    // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n    const allowRapidSuccessionOfFirstLetter = listContent.every(text => {\n      var _text$, _text$2;\n      return text ? ((_text$ = text[0]) == null ? void 0 : _text$.toLocaleLowerCase()) !== ((_text$2 = text[1]) == null ? void 0 : _text$2.toLocaleLowerCase()) : true;\n    });\n\n    // Allows the user to cycle through items that start with the same letter\n    // in rapid succession.\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n    stringRef.current += event.key;\n    clearTimeoutIfSet(timeoutIdRef);\n    timeoutIdRef.current = window.setTimeout(() => {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      setTypingChange(false);\n    }, resetMs);\n    const prevIndex = prevIndexRef.current;\n    const index = getMatchingIndex(listContent, [...listContent.slice((prevIndex || 0) + 1), ...listContent.slice(0, (prevIndex || 0) + 1)], stringRef.current);\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    } else if (event.key !== ' ') {\n      stringRef.current = '';\n      setTypingChange(false);\n    }\n  });\n  const reference = React.useMemo(() => ({\n    onKeyDown\n  }), [onKeyDown]);\n  const floating = React.useMemo(() => {\n    return {\n      onKeyDown,\n      onKeyUp(event) {\n        if (event.key === ' ') {\n          setTypingChange(false);\n        }\n      }\n    };\n  }, [onKeyDown, setTypingChange]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction getArgsWithCustomFloatingHeight(state, height) {\n  return {\n    ...state,\n    rects: {\n      ...state.rects,\n      floating: {\n        ...state.rects.floating,\n        height\n      }\n    }\n  };\n}\n/**\n * Positions the floating element such that an inner element inside of it is\n * anchored to the reference element.\n * @see https://floating-ui.com/docs/inner\n * @deprecated\n */\nconst inner = props => ({\n  name: 'inner',\n  options: props,\n  async fn(state) {\n    const {\n      listRef,\n      overflowRef,\n      onFallbackChange,\n      offset: innerOffset = 0,\n      index = 0,\n      minItemsVisible = 4,\n      referenceOverflowThreshold = 0,\n      scrollRef,\n      ...detectOverflowOptions\n    } = evaluate(props, state);\n    const {\n      rects,\n      elements: {\n        floating\n      }\n    } = state;\n    const item = listRef.current[index];\n    const scrollEl = (scrollRef == null ? void 0 : scrollRef.current) || floating;\n\n    // Valid combinations:\n    // 1. Floating element is the scrollRef and has a border (default)\n    // 2. Floating element is not the scrollRef, floating element has a border\n    // 3. Floating element is not the scrollRef, scrollRef has a border\n    // Floating > {...getFloatingProps()} wrapper > scrollRef > items is not\n    // allowed as VoiceOver doesn't work.\n    const clientTop = floating.clientTop || scrollEl.clientTop;\n    const floatingIsBordered = floating.clientTop !== 0;\n    const scrollElIsBordered = scrollEl.clientTop !== 0;\n    const floatingIsScrollEl = floating === scrollEl;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!state.placement.startsWith('bottom')) {\n        warn('`placement` side must be \"bottom\" when using the `inner`', 'middleware.');\n      }\n    }\n    if (!item) {\n      return {};\n    }\n    const nextArgs = {\n      ...state,\n      ...(await offset(-item.offsetTop - floating.clientTop - rects.reference.height / 2 - item.offsetHeight / 2 - innerOffset).fn(state))\n    };\n    const overflow = await detectOverflow(getArgsWithCustomFloatingHeight(nextArgs, scrollEl.scrollHeight + clientTop + floating.clientTop), detectOverflowOptions);\n    const refOverflow = await detectOverflow(nextArgs, {\n      ...detectOverflowOptions,\n      elementContext: 'reference'\n    });\n    const diffY = max(0, overflow.top);\n    const nextY = nextArgs.y + diffY;\n    const isScrollable = scrollEl.scrollHeight > scrollEl.clientHeight;\n    const rounder = isScrollable ? v => v : round;\n    const maxHeight = rounder(max(0, scrollEl.scrollHeight + (floatingIsBordered && floatingIsScrollEl || scrollElIsBordered ? clientTop * 2 : 0) - diffY - max(0, overflow.bottom)));\n    scrollEl.style.maxHeight = maxHeight + \"px\";\n    scrollEl.scrollTop = diffY;\n\n    // There is not enough space, fallback to standard anchored positioning\n    if (onFallbackChange) {\n      const shouldFallback = scrollEl.offsetHeight < item.offsetHeight * min(minItemsVisible, listRef.current.length) - 1 || refOverflow.top >= -referenceOverflowThreshold || refOverflow.bottom >= -referenceOverflowThreshold;\n      ReactDOM.flushSync(() => onFallbackChange(shouldFallback));\n    }\n    if (overflowRef) {\n      overflowRef.current = await detectOverflow(getArgsWithCustomFloatingHeight({\n        ...nextArgs,\n        y: nextY\n      }, scrollEl.offsetHeight + clientTop + floating.clientTop), detectOverflowOptions);\n    }\n    return {\n      y: nextY\n    };\n  }\n});\n/**\n * Changes the `inner` middleware's `offset` upon a `wheel` event to\n * expand the floating element's height, revealing more list items.\n * @see https://floating-ui.com/docs/inner\n * @deprecated\n */\nfunction useInnerOffset(context, props) {\n  const {\n    open,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    overflowRef,\n    scrollRef,\n    onChange: unstable_onChange\n  } = props;\n  const onChange = useEffectEvent(unstable_onChange);\n  const controlledScrollingRef = React.useRef(false);\n  const prevScrollTopRef = React.useRef(null);\n  const initialOverflowRef = React.useRef(null);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onWheel(e) {\n      if (e.ctrlKey || !el || overflowRef.current == null) {\n        return;\n      }\n      const dY = e.deltaY;\n      const isAtTop = overflowRef.current.top >= -0.5;\n      const isAtBottom = overflowRef.current.bottom >= -0.5;\n      const remainingScroll = el.scrollHeight - el.clientHeight;\n      const sign = dY < 0 ? -1 : 1;\n      const method = dY < 0 ? 'max' : 'min';\n      if (el.scrollHeight <= el.clientHeight) {\n        return;\n      }\n      if (!isAtTop && dY > 0 || !isAtBottom && dY < 0) {\n        e.preventDefault();\n        ReactDOM.flushSync(() => {\n          onChange(d => d + Math[method](dY, remainingScroll * sign));\n        });\n      } else if (/firefox/i.test(getUserAgent())) {\n        // Needed to propagate scrolling during momentum scrolling phase once\n        // it gets limited by the boundary. UX improvement, not critical.\n        el.scrollTop += dY;\n      }\n    }\n    const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n    if (open && el) {\n      el.addEventListener('wheel', onWheel);\n\n      // Wait for the position to be ready.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n        if (overflowRef.current != null) {\n          initialOverflowRef.current = {\n            ...overflowRef.current\n          };\n        }\n      });\n      return () => {\n        prevScrollTopRef.current = null;\n        initialOverflowRef.current = null;\n        el.removeEventListener('wheel', onWheel);\n      };\n    }\n  }, [enabled, open, elements.floating, overflowRef, scrollRef, onChange]);\n  const floating = React.useMemo(() => ({\n    onKeyDown() {\n      controlledScrollingRef.current = true;\n    },\n    onWheel() {\n      controlledScrollingRef.current = false;\n    },\n    onPointerMove() {\n      controlledScrollingRef.current = false;\n    },\n    onScroll() {\n      const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n      if (!overflowRef.current || !el || !controlledScrollingRef.current) {\n        return;\n      }\n      if (prevScrollTopRef.current !== null) {\n        const scrollDiff = el.scrollTop - prevScrollTopRef.current;\n        if (overflowRef.current.bottom < -0.5 && scrollDiff < -1 || overflowRef.current.top < -0.5 && scrollDiff > 1) {\n          ReactDOM.flushSync(() => onChange(d => d + scrollDiff));\n        }\n      }\n\n      // [Firefox] Wait for the height change to have been applied.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n      });\n    }\n  }), [elements.floating, onChange, overflowRef, scrollRef]);\n  return React.useMemo(() => enabled ? {\n    floating\n  } : {}, [enabled, floating]);\n}\n\nfunction getNodeChildren(nodes, id, onlyOpenChildren) {\n  if (onlyOpenChildren === void 0) {\n    onlyOpenChildren = true;\n  }\n  const directChildren = nodes.filter(node => {\n    var _node$context;\n    return node.parentId === id && (!onlyOpenChildren || ((_node$context = node.context) == null ? void 0 : _node$context.open));\n  });\n  return directChildren.flatMap(child => [child, ...getNodeChildren(nodes, child.id, onlyOpenChildren)]);\n}\n\nfunction isPointInPolygon(point, polygon) {\n  const [x, y] = point;\n  let isInside = false;\n  const length = polygon.length;\n  for (let i = 0, j = length - 1; i < length; j = i++) {\n    const [xi, yi] = polygon[i] || [0, 0];\n    const [xj, yj] = polygon[j] || [0, 0];\n    const intersect = yi >= y !== yj >= y && x <= (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) {\n      isInside = !isInside;\n    }\n  }\n  return isInside;\n}\nfunction isInside(point, rect) {\n  return point[0] >= rect.x && point[0] <= rect.x + rect.width && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n}\n/**\n * Generates a safe polygon area that the user can traverse without closing the\n * floating element once leaving the reference element.\n * @see https://floating-ui.com/docs/useHover#safepolygon\n */\nfunction safePolygon(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    buffer = 0.5,\n    blockPointerEvents = false,\n    requireIntent = true\n  } = options;\n  const timeoutRef = {\n    current: -1\n  };\n  let hasLanded = false;\n  let lastX = null;\n  let lastY = null;\n  let lastCursorTime = typeof performance !== 'undefined' ? performance.now() : 0;\n  function getCursorSpeed(x, y) {\n    const currentTime = performance.now();\n    const elapsedTime = currentTime - lastCursorTime;\n    if (lastX === null || lastY === null || elapsedTime === 0) {\n      lastX = x;\n      lastY = y;\n      lastCursorTime = currentTime;\n      return null;\n    }\n    const deltaX = x - lastX;\n    const deltaY = y - lastY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    const speed = distance / elapsedTime; // px / ms\n\n    lastX = x;\n    lastY = y;\n    lastCursorTime = currentTime;\n    return speed;\n  }\n  const fn = _ref => {\n    let {\n      x,\n      y,\n      placement,\n      elements,\n      onClose,\n      nodeId,\n      tree\n    } = _ref;\n    return function onMouseMove(event) {\n      function close() {\n        clearTimeoutIfSet(timeoutRef);\n        onClose();\n      }\n      clearTimeoutIfSet(timeoutRef);\n      if (!elements.domReference || !elements.floating || placement == null || x == null || y == null) {\n        return;\n      }\n      const {\n        clientX,\n        clientY\n      } = event;\n      const clientPoint = [clientX, clientY];\n      const target = getTarget(event);\n      const isLeave = event.type === 'mouseleave';\n      const isOverFloatingEl = contains(elements.floating, target);\n      const isOverReferenceEl = contains(elements.domReference, target);\n      const refRect = elements.domReference.getBoundingClientRect();\n      const rect = elements.floating.getBoundingClientRect();\n      const side = placement.split('-')[0];\n      const cursorLeaveFromRight = x > rect.right - rect.width / 2;\n      const cursorLeaveFromBottom = y > rect.bottom - rect.height / 2;\n      const isOverReferenceRect = isInside(clientPoint, refRect);\n      const isFloatingWider = rect.width > refRect.width;\n      const isFloatingTaller = rect.height > refRect.height;\n      const left = (isFloatingWider ? refRect : rect).left;\n      const right = (isFloatingWider ? refRect : rect).right;\n      const top = (isFloatingTaller ? refRect : rect).top;\n      const bottom = (isFloatingTaller ? refRect : rect).bottom;\n      if (isOverFloatingEl) {\n        hasLanded = true;\n        if (!isLeave) {\n          return;\n        }\n      }\n      if (isOverReferenceEl) {\n        hasLanded = false;\n      }\n      if (isOverReferenceEl && !isLeave) {\n        hasLanded = true;\n        return;\n      }\n\n      // Prevent overlapping floating element from being stuck in an open-close\n      // loop: https://github.com/floating-ui/floating-ui/issues/1910\n      if (isLeave && isElement(event.relatedTarget) && contains(elements.floating, event.relatedTarget)) {\n        return;\n      }\n\n      // If any nested child is open, abort.\n      if (tree && getNodeChildren(tree.nodesRef.current, nodeId).length) {\n        return;\n      }\n\n      // If the pointer is leaving from the opposite side, the \"buffer\" logic\n      // creates a point where the floating element remains open, but should be\n      // ignored.\n      // A constant of 1 handles floating point rounding errors.\n      if (side === 'top' && y >= refRect.bottom - 1 || side === 'bottom' && y <= refRect.top + 1 || side === 'left' && x >= refRect.right - 1 || side === 'right' && x <= refRect.left + 1) {\n        return close();\n      }\n\n      // Ignore when the cursor is within the rectangular trough between the\n      // two elements. Since the triangle is created from the cursor point,\n      // which can start beyond the ref element's edge, traversing back and\n      // forth from the ref to the floating element can cause it to close. This\n      // ensures it always remains open in that case.\n      let rectPoly = [];\n      switch (side) {\n        case 'top':\n          rectPoly = [[left, refRect.top + 1], [left, rect.bottom - 1], [right, rect.bottom - 1], [right, refRect.top + 1]];\n          break;\n        case 'bottom':\n          rectPoly = [[left, rect.top + 1], [left, refRect.bottom - 1], [right, refRect.bottom - 1], [right, rect.top + 1]];\n          break;\n        case 'left':\n          rectPoly = [[rect.right - 1, bottom], [rect.right - 1, top], [refRect.left + 1, top], [refRect.left + 1, bottom]];\n          break;\n        case 'right':\n          rectPoly = [[refRect.right - 1, bottom], [refRect.right - 1, top], [rect.left + 1, top], [rect.left + 1, bottom]];\n          break;\n      }\n      function getPolygon(_ref2) {\n        let [x, y] = _ref2;\n        switch (side) {\n          case 'top':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.bottom - buffer : isFloatingWider ? rect.bottom - buffer : rect.top], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.bottom - buffer : rect.top : rect.bottom - buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'bottom':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.top + buffer : isFloatingWider ? rect.top + buffer : rect.bottom], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.top + buffer : rect.bottom : rect.top + buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'left':\n            {\n              const cursorPointOne = [x + buffer + 1, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x + buffer + 1, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.right - buffer : isFloatingTaller ? rect.right - buffer : rect.left, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.right - buffer : rect.left : rect.right - buffer, rect.bottom]];\n              return [...commonPoints, cursorPointOne, cursorPointTwo];\n            }\n          case 'right':\n            {\n              const cursorPointOne = [x - buffer, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x - buffer, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.left + buffer : isFloatingTaller ? rect.left + buffer : rect.right, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.left + buffer : rect.right : rect.left + buffer, rect.bottom]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n        }\n      }\n      if (isPointInPolygon([clientX, clientY], rectPoly)) {\n        return;\n      }\n      if (hasLanded && !isOverReferenceRect) {\n        return close();\n      }\n      if (!isLeave && requireIntent) {\n        const cursorSpeed = getCursorSpeed(event.clientX, event.clientY);\n        const cursorSpeedThreshold = 0.1;\n        if (cursorSpeed !== null && cursorSpeed < cursorSpeedThreshold) {\n          return close();\n        }\n      }\n      if (!isPointInPolygon([clientX, clientY], getPolygon([x, y]))) {\n        close();\n      } else if (!hasLanded && requireIntent) {\n        timeoutRef.current = window.setTimeout(close, 40);\n      }\n    };\n  };\n  fn.__options = {\n    blockPointerEvents\n  };\n  return fn;\n}\n\nexport { Composite, CompositeItem, FloatingArrow, FloatingDelayGroup, FloatingFocusManager, FloatingList, FloatingNode, FloatingOverlay, FloatingPortal, FloatingTree, NextFloatingDelayGroup, inner, safePolygon, useClick, useClientPoint, useDelayGroup, useDelayGroupContext, useDismiss, useFloating, useFloatingNodeId, useFloatingParentNodeId, useFloatingPortalNode, useFloatingRootContext, useFloatingTree, useFocus, useHover, useId, useInnerOffset, useInteractions, useListItem, useListNavigation, useMergeRefs, useNextDelayGroup, useRole, useTransitionStatus, useTransitionStyles, useTypeahead };\n","import React, { Children, cloneElement, isValidElement, useCallback, useEffect, useRef, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/react\";\nimport { useResizeDetector } from \"react-resize-detector\";\nimport { Row } from \"@components\";\nimport { Icon } from \"@iconify/react\";\nimport { useHass } from \"@hakit/core\";\nimport { useFloating, FloatingArrow, shift, limitShift, arrow, offset, autoUpdate, type Placement } from \"@floating-ui/react\";\n\ntype Extendable = Omit<React.ComponentPropsWithoutRef<\"a\">, \"event\" | \"definition\">;\n\ninterface Item extends Extendable {\n  label: string;\n  icon?: string;\n  active?: boolean;\n  onClick?: () => void;\n}\n\nconst StyledIcon = styled(Icon)`\n  font-size: 1rem;\n  color: var(--ha-S400-contrast);\n  margin-right: 0.5rem;\n`;\n\nexport interface MenuProps extends React.ComponentPropsWithoutRef<\"div\"> {\n  /** the children should simply be the item to activate, it's used as a wrapped and binds the action automatically */\n  children?: React.ReactNode;\n  /** the placement of the popup @default 'bottom' */\n  placement?: Placement;\n  /** the items for the menu to render */\n  items: Item[];\n  /** if the menu/button should be disabled */\n  disabled?: boolean;\n}\n\nconst MenuPopup = styled.div<{\n  triggerWidth: number;\n}>`\n  z-index: 50;\n  display: flex;\n  min-width: 180px;\n  flex-direction: column;\n  overscroll-behavior: contain;\n  border-radius: 0.5rem;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--ha-S500);\n  background-color: var(--ha-S400);\n  padding: 0.5rem;\n  color: var(--ha-S400-contrast);\n  box-shadow:\n    0 10px 15px -3px rgb(0 0 0 / 0.1),\n    0 4px 6px -4px rgb(0 0 0 / 0.1);\n  outline: none !important;\n  max-height: max-content;\n  max-height: 300px;\n  overflow-y: scroll;\n`;\n\nconst Parent = styled.div`\n  position: relative;\n`;\n\nconst MenuItem = styled.a`\n  display: flex;\n  scroll-margin: 0.5rem;\n  align-items: center;\n  gap: 0.5rem;\n  border-radius: 0.25rem;\n  padding: 0.8rem 0.5rem;\n  outline: none !important;\n  background-color: transparent;\n  cursor: pointer;\n  transition: background-color var(--ha-transition-duration) var(--ha-easing);\n  &:active,\n  &:focus,\n  &:hover {\n    background-color: var(--ha-S600);\n  }\n  &.active {\n    background-color: var(--ha-S700);\n  }\n`;\n\nexport function Menu({ children, placement = \"bottom\", items = [], disabled = false, cssStyles, ...props }: MenuProps) {\n  const [open, setOpen] = useState(false);\n  const globalComponentStyle = useHass((state) => state.globalComponentStyles);\n  const arrowRef = useRef(null);\n  const { refs, floatingStyles, context } = useFloating({\n    whileElementsMounted: autoUpdate,\n    placement,\n    middleware: [\n      shift({\n        limiter: limitShift({\n          // Start limiting 5px earlier\n          offset: 10,\n        }),\n      }),\n      offset(20),\n      arrow({\n        element: arrowRef,\n      }),\n    ],\n  });\n\n  const { width, ref } = useResizeDetector({\n    refreshMode: \"debounce\",\n    handleHeight: false,\n    refreshRate: 500,\n  });\n  // Reference to the menu popup\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Function to check if the clicked area is outside the menu\n  const handleClickOutside = useCallback(\n    (event: MouseEvent) => {\n      const isMenu = menuRef.current && menuRef.current.contains(event.target as Node);\n      const isParent = ref.current && ref.current.contains(event.target as Node);\n      if (!isMenu && !isParent) {\n        setOpen(false);\n      }\n    },\n    [ref],\n  );\n\n  // Effect to add/remove document event listener\n  useEffect(() => {\n    if (open) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    } else {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    }\n\n    // Cleanup event listener\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [handleClickOutside, open]); // Only re-run if 'open' state changes\n\n  return (\n    <Parent\n      {...props}\n      ref={ref}\n      aria-disabled={disabled}\n      aria-controls=\"listbox\"\n      aria-expanded={open}\n      role=\"combobox\"\n      css={css`\n        ${globalComponentStyle.menu ?? \"\"}\n        ${cssStyles ?? \"\"}\n      `}\n    >\n      {Children.map(children, (child) => {\n        if (\n          isValidElement<\n            HTMLDivElement & {\n              onClick: () => void;\n              ref: (node: HTMLDivElement | null) => void;\n            }\n          >(child)\n        ) {\n          return cloneElement(child, {\n            ...child.props,\n            role: \"option\",\n            ref: refs.setReference,\n            onClick: () => {\n              if (disabled) return;\n              setOpen(!open);\n              child.props.onClick?.();\n            },\n          });\n        }\n        return child;\n      })}\n      {open && (\n        <div ref={refs.setFloating} style={floatingStyles} role=\"listbox\">\n          <FloatingArrow\n            ref={arrowRef}\n            context={context}\n            style={{\n              fill: \"var(--ha-S400)\",\n            }}\n          />\n          <MenuPopup triggerWidth={width ?? 0} className=\"menu\">\n            {items.map(({ onClick, active, label, icon, ...rest }, index) => {\n              return (\n                <MenuItem\n                  {...rest}\n                  key={index}\n                  aria-disabled={disabled}\n                  role=\"option\"\n                  onClick={() => {\n                    onClick?.();\n                    setOpen(false);\n                  }}\n                  className={`menu-item ${active ? \"active\" : \"\"}`}\n                >\n                  <Row fullWidth justifyContent=\"flex-start\">\n                    {icon && <StyledIcon icon={icon} />}\n                    {label}\n                  </Row>\n                </MenuItem>\n              );\n            })}\n          </MenuPopup>\n        </div>\n      )}\n    </Parent>\n  );\n}\n","import { useRef, useCallback, useEffect } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/react\";\nimport {\n  temperature2rgb,\n  rgb2hex,\n  rgb2hs,\n  useEntity,\n  useLightTemperature,\n  ON,\n  lightSupportsColorMode,\n  LIGHT_COLOR_MODES,\n} from \"@hakit/core\";\nimport type { EntityName, FilterByDomain } from \"@hakit/core\";\nimport { useGesture } from \"@use-gesture/react\";\nimport { fallback, mq } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst RENDER_SIZE = 400;\nconst canvasSize = RENDER_SIZE * (typeof window === \"undefined\" ? 1 : window.devicePixelRatio);\n\ntype HueSaturation = [number, number];\ntype Rgb = [number, number, number];\n\nexport interface ColorPickerOutputColors {\n  hex: string;\n  rgb: Rgb;\n  hs: HueSaturation;\n}\n\nexport interface ColorTempPickerProps extends Omit<React.ComponentProps<\"div\">, \"onChange\"> {\n  /** if the picker should be disabled @default false */\n  disabled?: boolean;\n  /** the light entity to use with the ColorTempPicker */\n  entity: FilterByDomain<EntityName, \"light\">;\n  /** will provide the value when the user has finished interacting */\n  onChangeApplied?: (kelvin: number, colors: ColorPickerOutputColors) => void;\n  /** will provide the value as it's changing but not actually finished updating */\n  onChange?: (kelvin: number, colors: ColorPickerOutputColors) => void;\n}\n\nconst Picker = styled.div`\n  ${() => {\n    return `\n    display: block;\n    outline: none;\n    height: 45vh;\n    max-height: 320px;\n    min-height: 200px;\n    ${mq(\n      [\"xxs\"],\n      `\n      min-height: 0;\n      height: 35vh;\n      max-height: 100%;\n    `,\n    )}\n    touch-action: none;\n    .container {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: flex;\n    }\n    canvas {\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n      border-radius: 50%;\n      transition: box-shadow 180ms ease-in-out;\n      cursor: pointer;\n    }\n    :host(:focus-visible) canvas {\n      box-shadow: 0 0 0 2px rgb(255, 160, 0);\n    }\n    svg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n    }\n    circle {\n      fill: black;\n      stroke: white;\n      stroke-width: 2;\n      filter: url(#marker-shadow);\n    }\n    &[pressed=\"touch\"] {\n      circle {\n        transform: translate(0px, -${RENDER_SIZE / 16}px) scale(2.5),\n      }\n    }\n    .cursor {\n      --cx: ((var(--value-x, 0) + 1) * ${RENDER_SIZE}) / 2;\n      --cy: ((var(--value-y, 0) + 1) * ${RENDER_SIZE}) / 2;\n      transform: translate(calc(var(--cx) * 1px), calc(var(--cy) * 1px));\n    }\n    &[pressed] {\n      circle {\n        transform: translate(0px, 0px) scale(1.5);\n      }\n    }\n    &:not([pressed]) circle {\n      transition: transform 100ms ease-in-out, fill 100ms ease-in-out;\n    }\n    &:not([pressed]) {\n      .cursor {\n        transition: transform 200ms ease-in-out, opacity 200ms ease-in-out;\n      }\n    }\n    .container.disabled {\n      .cursor {\n        opacity: 0;\n      }\n      cursor: not-allowed;\n      > * {\n        cursor: not-allowed;\n      }\n    }\n    `;\n  }}\n`;\n\nconst SAFE_ZONE_FACTOR = 0.9;\n\nfunction xy2polar(x: number, y: number) {\n  const r = Math.sqrt(x * x + y * y);\n  const phi = Math.atan2(y, x);\n  return [r, phi];\n}\n\nfunction polar2xy(r: number, phi: number) {\n  const x = Math.cos(phi) * r;\n  const y = Math.sin(phi) * r;\n  return [x, y];\n}\n\nfunction drawColorWheel(ctx: CanvasRenderingContext2D, minTemp: number, maxTemp: number) {\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  const radius = ctx.canvas.width / 2;\n\n  const min = Math.max(minTemp, 2000);\n  const max = Math.min(maxTemp, 40000);\n\n  for (let y = -radius; y < radius; y += 1) {\n    const x = radius * Math.sqrt(1 - (y / radius) ** 2);\n\n    const fraction = (y / (radius * SAFE_ZONE_FACTOR) + 1) / 2;\n\n    const temperature = Math.max(Math.min(min + fraction * (max - min), max), min);\n\n    const color = rgb2hex(temperature2rgb(temperature));\n\n    ctx.fillStyle = color;\n    ctx.fillRect(radius - x, radius + y - 0.5, 2 * x, 2);\n    ctx.fill();\n  }\n}\n\nfunction InternalColorTempPicker({\n  disabled = false,\n  entity: _entity,\n  onChangeApplied,\n  onChange,\n  className,\n  cssStyles,\n  ...rest\n}: ColorTempPickerProps) {\n  const entity = useEntity(_entity);\n  const value = useLightTemperature(entity);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const parentRef = useRef<HTMLDivElement>(null);\n  const gRef = useRef<SVGGElement>(null);\n  const circleRef = useRef<SVGCircleElement>(null);\n  const timerRef = useRef<NodeJS.Timeout | undefined>(undefined);\n  const _cursorPosition = useRef<[number, number]>([0, 0]);\n  const min = entity.attributes.min_color_temp_kelvin || 2000;\n  const max = entity.attributes.max_color_temp_kelvin || 10000;\n  const isOn = entity.state === ON;\n  const supportsColorTemp = lightSupportsColorMode(entity, LIGHT_COLOR_MODES.COLOR_TEMP);\n  const getColoursFromTemperature = useCallback(\n    (temperature: number) => {\n      const rgb = temperature2rgb(temperature ?? Math.round((max + min) / 2));\n      const hex = rgb2hex(rgb);\n      const hs = rgb2hs(rgb);\n      return {\n        rgb,\n        hex,\n        hs,\n      };\n    },\n    [max, min],\n  );\n\n  const updateColours = useCallback(\n    (value: number) => {\n      const { hex } = getColoursFromTemperature(value);\n      if (gRef.current) {\n        gRef.current.style.fill = hex;\n      }\n      if (circleRef.current) {\n        circleRef.current.style.fill = hex;\n        circleRef.current.style.visibility = _cursorPosition.current ? \"\" : \"hidden\";\n      }\n    },\n    [getColoursFromTemperature],\n  );\n\n  const _generateColorWheel = useCallback(() => {\n    if (!canvasRef.current) return;\n    const ctx = canvasRef.current.getContext(\"2d\")!;\n    drawColorWheel(ctx, min, max);\n  }, [min, max]);\n\n  const setPressed = function (pressed: string) {\n    if (!parentRef.current) return;\n    if (pressed !== \"\") {\n      parentRef.current.setAttribute(\"pressed\", pressed);\n    } else {\n      parentRef.current.removeAttribute(\"pressed\");\n    }\n  };\n\n  const _getValueFromCoord = useCallback(\n    ([, y]: number[]): number => {\n      const fraction = (y / SAFE_ZONE_FACTOR + 1) / 2;\n      const temperature = Math.max(Math.min(min + fraction * (max - min), max), min);\n      return Math.round(temperature);\n    },\n    [min, max],\n  );\n\n  const setValue = useCallback(\n    (updatedValue?: [number, number]) => {\n      if (!parentRef.current || !updatedValue) return;\n      _cursorPosition.current = updatedValue;\n      parentRef.current.style.setProperty(\"--value-x\", disabled ? \"0\" : `${updatedValue[0]}`);\n      parentRef.current.style.setProperty(\"--value-y\", disabled ? \"0\" : `${updatedValue[1]}`);\n      _localValue.current = _getValueFromCoord(_cursorPosition.current);\n      updateColours(_localValue.current);\n      return () => {\n        if (!parentRef.current) return;\n        parentRef.current.style.removeProperty(\"--value-x\");\n        parentRef.current.style.removeProperty(\"--value-y\");\n      };\n    },\n    [disabled, updateColours, _getValueFromCoord],\n  );\n\n  const _getCoordsFromValue = useCallback(\n    (temperature?: number): [number, number] => {\n      if (value === min) {\n        return [0, -1];\n      }\n      if (value === max) {\n        return [0, 1];\n      }\n      const fraction = ((temperature || 0) - min) / (max - min);\n      const y = (2 * fraction - 1) * SAFE_ZONE_FACTOR;\n      return [0, y];\n    },\n    [value, min, max],\n  );\n\n  const _localValue = useRef<number>(_getValueFromCoord(_getCoordsFromValue(value)));\n\n  useEffect(() => {\n    updateColours(_localValue.current);\n  }, [updateColours]);\n\n  useEffect(() => {\n    const previousX = _cursorPosition.current[0];\n    _cursorPosition.current = [previousX, _getCoordsFromValue(value)[1]];\n    setValue(_cursorPosition.current);\n  }, [setValue, value, _getCoordsFromValue]);\n\n  const _getPositionFromEvent = useCallback((xy: [number, number], target: HTMLElement): [number, number] => {\n    const [x, y] = xy;\n    const boundingRect = target.getBoundingClientRect();\n    const offsetX = boundingRect.left;\n    const offsetY = boundingRect.top;\n    const maxX = target.clientWidth;\n    const maxY = target.clientHeight;\n\n    const _x = (2 * (x - offsetX)) / maxX - 1;\n    const _y = (2 * (y - offsetY)) / maxY - 1;\n\n    const [r, phi] = xy2polar(_x, _y);\n    const [__x, __y] = polar2xy(Math.min(1, r), phi);\n    return [__x, __y];\n  }, []);\n\n  const triggerOnChange = useCallback(\n    (updatedValue: number) => {\n      if (timerRef.current) clearTimeout(timerRef.current);\n      if (updatedValue === value) return;\n      timerRef.current = setTimeout(() => {\n        if (typeof onChangeApplied === \"function\") {\n          const colors = getColoursFromTemperature(updatedValue);\n          onChangeApplied(updatedValue, colors);\n        }\n        entity.service.turnOn({\n          serviceData: {\n            color_temp_kelvin: updatedValue,\n          },\n        });\n      }, 100);\n    },\n    [onChangeApplied, entity, value, getColoursFromTemperature],\n  );\n\n  useEffect(() => {\n    if (!supportsColorTemp) return;\n    _generateColorWheel();\n  }, [_generateColorWheel, supportsColorTemp]);\n\n  function renderSVGFilter() {\n    return (\n      <filter id=\"marker-shadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" filterUnits=\"objectBoundingBox\">\n        <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"2\" floodOpacity=\"0.3\" floodColor=\"rgba(0, 0, 0, 1)\" />\n        <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"3\" floodOpacity=\"0.15\" floodColor=\"rgba(0, 0, 0, 1)\" />\n      </filter>\n    );\n  }\n\n  const bind = useGesture(\n    {\n      onDrag: (state) => {\n        if (disabled) return;\n        setValue(_getPositionFromEvent(state.xy, state.target as HTMLElement));\n        if (typeof onChange === \"function\") {\n          const colors = getColoursFromTemperature(_localValue.current);\n          onChange(_localValue.current, colors);\n        }\n      },\n      onDragStart: (state) => {\n        if (disabled) return;\n        setPressed(state.type);\n        setValue(_cursorPosition.current);\n      },\n      onDragEnd: (state) => {\n        if (disabled) return;\n        setPressed(\"\");\n        setValue(_getPositionFromEvent(state.xy, state.target as HTMLElement));\n        triggerOnChange(_localValue.current);\n      },\n      onClick: (state) => {\n        const x = state.event.clientX;\n        const y = state.event.clientY;\n        setValue(_getPositionFromEvent([x, y], state.event.target as HTMLElement));\n        triggerOnChange(_localValue.current);\n      },\n    },\n    {\n      drag: {\n        filterTaps: true,\n      },\n    },\n  );\n\n  return supportsColorTemp ? (\n    <Picker\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n      className={`${className ?? \"\"} color-temp-picker`}\n      ref={parentRef}\n      {...bind()}\n      {...rest}\n    >\n      <div className={`container ${disabled ? \"disabled\" : \"\"}`}>\n        <canvas ref={canvasRef} width={canvasSize} height={canvasSize}></canvas>\n        <svg id=\"interaction\" viewBox={`0 0 ${RENDER_SIZE} ${RENDER_SIZE}`} overflow=\"visible\" aria-hidden=\"true\">\n          <defs>{renderSVGFilter()}</defs>\n          <g\n            ref={gRef}\n            className=\"cursor\"\n            style={{\n              visibility: typeof value === \"undefined\" || !isOn ? \"hidden\" : \"visible\",\n            }}\n          >\n            <circle ref={circleRef} cx=\"0\" cy=\"0\" r=\"16\"></circle>\n          </g>\n        </svg>\n      </div>\n    </Picker>\n  ) : null;\n}\n\n/** This color picker was designed to easily retrieve a value from a colour wheel based on values provided from a light entity, you can click or drag on the picker to pick a value */\nexport function ColorTempPicker(props: ColorTempPickerProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ColorTempPicker\" })}>\n      <InternalColorTempPicker {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useRef, useCallback, useEffect, useMemo } from \"react\";\nimport { css } from \"@emotion/react\";\nimport { useGesture } from \"@use-gesture/react\";\nimport styled from \"@emotion/styled\";\nimport {\n  rgbw2rgb,\n  rgbww2rgb,\n  hsv2rgb,\n  hs2rgb,\n  rgb2hex,\n  hex2rgb,\n  lightSupportsColorMode,\n  useEntity,\n  useLightColor,\n  lightSupportsColor,\n  LIGHT_COLOR_MODES,\n  ON,\n} from \"@hakit/core\";\nimport type { LightColor, EntityName, FilterByDomain } from \"@hakit/core\";\nimport { fallback, mq } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nconst RENDER_SIZE = 400;\n\nfunction xy2polar(x: number, y: number) {\n  const r = Math.sqrt(x * x + y * y);\n  const phi = Math.atan2(y, x);\n  return [r, phi];\n}\n\nfunction polar2xy(r: number, phi: number) {\n  const x = Math.cos(phi) * r;\n  const y = Math.sin(phi) * r;\n  return [x, y];\n}\n\nfunction rad2deg(rad: number) {\n  return (rad / (2 * Math.PI)) * 360;\n}\n\nfunction deg2rad(deg: number) {\n  return (deg / 360) * 2 * Math.PI;\n}\n\nfunction adjustRgb(rgb: [number, number, number], wv?: number, cw?: number, ww?: number, minKelvin?: number, maxKelvin?: number) {\n  if (wv != null) {\n    return rgbw2rgb([...rgb, wv] as [number, number, number, number]);\n  }\n  if (cw != null && ww !== null) {\n    return rgbww2rgb([...rgb, cw, ww] as [number, number, number, number, number], minKelvin, maxKelvin);\n  }\n  return rgb;\n}\n\nfunction drawColorWheel(\n  ctx: CanvasRenderingContext2D,\n  colorBrightness = 255,\n  wv?: number,\n  cw?: number,\n  ww?: number,\n  minKelvin?: number,\n  maxKelvin?: number,\n) {\n  const radius = ctx.canvas.width / 2;\n\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.beginPath();\n\n  const cX = ctx.canvas.width / 2;\n  const cY = ctx.canvas.width / 2;\n  for (let angle = 0; angle < 360; angle += 1) {\n    const startAngle = deg2rad(angle - 0.5);\n    const endAngle = deg2rad(angle + 1.5);\n\n    ctx.beginPath();\n    ctx.moveTo(cX, cY);\n    ctx.arc(cX, cY, radius, startAngle, endAngle);\n    ctx.closePath();\n\n    const gradient = ctx.createRadialGradient(cX, cY, 0, cX, cY, radius);\n    const start = rgb2hex(adjustRgb(hsv2rgb([angle, 0, colorBrightness]), wv, cw, ww, minKelvin, maxKelvin));\n    const end = rgb2hex(adjustRgb(hsv2rgb([angle, 1, colorBrightness]), wv, cw, ww, minKelvin, maxKelvin));\n    gradient.addColorStop(0, start);\n    gradient.addColorStop(1, end);\n    ctx.fillStyle = gradient;\n    ctx.fill();\n  }\n}\nconst ColorPickerWrapper = styled.div`\n  ${() => {\n    const markerPosition = `calc((var(--value-x, 0) + 1) * (${RENDER_SIZE} / 2) * 1px), calc((var(--value-y, 0) + 1) * (${RENDER_SIZE} / 2) * 1px)`;\n\n    return `\n    touch-action: none;\n    display: block;\n    outline: none;\n    height: 45vh;\n    max-height: 320px;\n    min-height: 200px;\n    ${mq(\n      [\"xxs\"],\n      `\n      min-height: 0;\n      height: 35vh;\n      max-height: 100%;\n    `,\n    )}\n    .container {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      display: flex;\n    }\n    canvas {\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n      border-radius: 50%;\n      cursor: pointer;\n    }\n    svg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n    }\n    .cursor {\n      will-change: transform;\n      transform: translate(${markerPosition});\n    }\n    circle {\n      fill: black;\n      stroke: white;\n      stroke-width: 2;\n      filter: url(#marker-shadow);\n    }\n    &:not([pressed]) circle {\n      transition:\n        transform 100ms ease-in-out,\n        fill 100ms ease-in-out;\n      translate(0px, 0px) scale(1);\n    }\n    &:not([pressed]) .cursor {\n      transition: opacity 200ms ease-in-out, transform 200ms ease-in-out;\n    }\n    &[pressed=\"pointerdown\"] circle {\n      translate(0px, -${RENDER_SIZE / 16}px) scale(1.5);\n    }\n    .container.disabled {\n      .cursor {\n        opacity: 0;\n      }\n      cursor: not-allowed;\n      > * {\n        cursor: not-allowed;\n      }\n    }\n  `;\n  }}\n`;\n\ntype HueSaturation = [number, number];\ntype Rgb = [number, number, number];\n\nexport interface ColorPickerOutputColors {\n  hex: string;\n  rgb: Rgb;\n  hs?: HueSaturation;\n}\n\nexport interface ColorPickerProps extends Omit<React.ComponentPropsWithoutRef<\"div\">, \"onChange\"> {\n  disabled?: boolean;\n  /** the name of the light entity to control */\n  entity: FilterByDomain<EntityName, \"light\">;\n  /** will provide the color output options when the user has finished interacting */\n  onChangeApplied?: (colors: ColorPickerOutputColors) => void;\n  /** will provide the color output as it's changing but not actually finished updating, the value may also trigger initially once the color calculations have been applied */\n  onChange?: (colors: ColorPickerOutputColors) => void;\n}\nfunction InternalColorPicker({ disabled = false, entity: _entity, onChange, onChangeApplied, className, cssStyles }: ColorPickerProps) {\n  const entity = useEntity(_entity);\n  const lightColors = useLightColor(entity);\n  const parentRef = useRef<HTMLDivElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const gRef = useRef<SVGGElement>(null);\n  const hex = useRef<string>(undefined);\n  const circleRef = useRef<SVGCircleElement>(null);\n  const _pressed = useRef<string>(undefined);\n  const _cursorPosition = useRef<[number, number]>(undefined);\n  const _localValue = useRef<[number, number]>(undefined);\n  const canvasSize = useMemo(() => {\n    if (typeof window === \"undefined\") {\n      return RENDER_SIZE;\n    }\n    return RENDER_SIZE * window.devicePixelRatio;\n  }, []);\n  const minKelvin = entity.attributes.min_color_temp_kelvin;\n  const maxKelvin = entity.attributes.max_color_temp_kelvin;\n  const isOn = entity.state === ON;\n  const supportsColor = lightSupportsColor(entity);\n  const _generateColorWheel = useCallback(() => {\n    if (!canvasRef.current) return;\n    const ctx = canvasRef.current.getContext(\"2d\")!;\n    drawColorWheel(ctx, lightColors.colorBrightness, lightColors.white, lightColors.coolWhite, lightColors.warmWhite, minKelvin, maxKelvin);\n  }, [lightColors.colorBrightness, lightColors.white, lightColors.coolWhite, lightColors.warmWhite, minKelvin, maxKelvin]);\n\n  useEffect(() => {\n    if (!supportsColor) return;\n    _generateColorWheel();\n  }, [_generateColorWheel, supportsColor]);\n\n  const _getCoordsFromValue = useCallback((value: [number, number]): [number, number] => {\n    const phi = deg2rad(value[0]);\n    const r = Math.min(value[1], 1);\n    const [x, y] = polar2xy(r, phi);\n    return [x, y];\n  }, []);\n\n  const _getValueFromCoord = useCallback((x: number, y: number): [number, number] => {\n    const [r, phi] = xy2polar(x, y);\n    const deg = Math.round(rad2deg(phi)) % 360;\n    const hue = (deg + 360) % 360;\n    const saturation = Math.round(Math.min(r, 1) * 100) / 100;\n    return [hue, saturation];\n  }, []);\n\n  const _getPositionFromEvent = useCallback((xy: [number, number], target: HTMLElement): [number, number] => {\n    const [x, y] = xy;\n    const boundingRect = target.getBoundingClientRect();\n    const offsetX = boundingRect.left;\n    const offsetY = boundingRect.top;\n    const maxX = target.clientWidth;\n    const maxY = target.clientHeight;\n\n    const _x = (2 * (x - offsetX)) / maxX - 1;\n    const _y = (2 * (y - offsetY)) / maxY - 1;\n    const [r, phi] = xy2polar(_x, _y);\n    const [__x, __y] = polar2xy(Math.min(1, r), phi);\n    return [__x, __y];\n  }, []);\n\n  const _resetPosition = useCallback(() => {\n    if (lightColors.hs === undefined) {\n      _cursorPosition.current = undefined;\n      _localValue.current = undefined;\n      return;\n    }\n    _cursorPosition.current = _getCoordsFromValue(lightColors.hs);\n    _localValue.current = lightColors.hs;\n  }, [_getCoordsFromValue, lightColors.hs]);\n\n  useEffect(() => {\n    if (!supportsColor) return;\n    _resetPosition();\n  }, [lightColors.hs, _resetPosition, supportsColor]);\n\n  const setPressed = function (pressed: boolean, type?: string) {\n    _pressed.current = type;\n    if (!parentRef.current) return;\n    if (pressed) {\n      parentRef.current.setAttribute(\"pressed\", \"\");\n    } else {\n      parentRef.current.removeAttribute(\"pressed\");\n    }\n  };\n  const updateColours = useCallback(() => {\n    const rgb =\n      _localValue.current !== undefined\n        ? adjustRgb(\n            hsv2rgb([_localValue.current[0], _localValue.current[1], lightColors.colorBrightness ?? 255]),\n            lightColors.white,\n            lightColors.coolWhite,\n            lightColors.warmWhite,\n          )\n        : ([255, 255, 255] as [number, number, number]);\n    hex.current = rgb2hex(rgb);\n    if (circleRef.current) {\n      circleRef.current.style.fill = hex.current;\n      circleRef.current.style.visibility = _cursorPosition.current ? \"\" : \"hidden\";\n    }\n    if (gRef.current) {\n      gRef.current.style.fill = hex.current;\n    }\n  }, [lightColors.colorBrightness, lightColors.white, lightColors.coolWhite, lightColors.warmWhite]);\n\n  const setValue = useCallback(\n    (updatedValue?: [number, number]) => {\n      if (!parentRef.current || !updatedValue) return;\n      _cursorPosition.current = updatedValue;\n      parentRef.current.style.setProperty(\"--value-x\", disabled ? \"0\" : `${updatedValue[0]}`);\n      parentRef.current.style.setProperty(\"--value-y\", disabled ? \"0\" : `${updatedValue[1]}`);\n      _localValue.current = _getValueFromCoord(..._cursorPosition.current);\n      updateColours();\n      if (typeof onChange === \"function\")\n        onChange({\n          hex: hex.current as string,\n          rgb: hex2rgb(hex.current as string),\n          hs: _localValue.current,\n        });\n    },\n    [disabled, _getValueFromCoord, onChange, updateColours],\n  );\n\n  useEffect(() => {\n    const ref = parentRef.current;\n    return () => {\n      if (!ref) return;\n      ref.style.removeProperty(\"--value-x\");\n      ref.style.removeProperty(\"--value-y\");\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!supportsColor || lightColors.hs === undefined) return;\n    _cursorPosition.current = _getCoordsFromValue(lightColors.hs);\n    setValue(_cursorPosition.current);\n  }, [lightColors.hs, supportsColor, setValue, _getCoordsFromValue]);\n\n  const _applyColor = useCallback(\n    (\n      color: LightColor,\n      params?: {\n        brightness_pct: number;\n      },\n    ) => {\n      entity.service.turnOn({\n        serviceData: {\n          ...color,\n          ...params,\n        },\n      });\n    },\n    [entity],\n  );\n\n  const _setRgbWColor = useCallback(\n    (rgbColor: [number, number, number]) => {\n      if (lightSupportsColorMode(entity, LIGHT_COLOR_MODES.RGBWW)) {\n        const rgbwwColor: [number, number, number, number, number] = entity.attributes.rgbww_color\n          ? [...entity.attributes.rgbww_color]\n          : [0, 0, 0, 0, 0];\n        const rgbww_color = rgbColor.concat(rgbwwColor.slice(3)) as [number, number, number, number, number];\n        _applyColor({ rgbww_color });\n      } else if (lightSupportsColorMode(entity, LIGHT_COLOR_MODES.RGBW)) {\n        const rgbwColor: [number, number, number, number] = entity.attributes.rgbw_color ? [...entity.attributes.rgbw_color] : [0, 0, 0, 0];\n        const rgbw_color = rgbColor.concat(rgbwColor.slice(3)) as [number, number, number, number];\n        _applyColor({ rgbw_color });\n      }\n    },\n    [entity, _applyColor],\n  );\n\n  const _adjustColorBrightness = useCallback((rgbColor: [number, number, number], value?: number, invert = false) => {\n    const isBlack = rgbColor.every((c) => c === 0);\n    if (isBlack) {\n      rgbColor[0] = 255;\n      rgbColor[1] = 255;\n      rgbColor[2] = 255;\n    }\n    if (value !== undefined && value !== 255) {\n      let ratio = value / 255;\n      if (invert) {\n        ratio = 1 / ratio;\n      }\n      rgbColor[0] = Math.min(255, Math.round(rgbColor[0] * ratio));\n      rgbColor[1] = Math.min(255, Math.round(rgbColor[1] * ratio));\n      rgbColor[2] = Math.min(255, Math.round(rgbColor[2] * ratio));\n    }\n    return rgbColor;\n  }, []);\n\n  const _updateColor = useCallback(\n    (value?: [number, number]) => {\n      if (!value) return;\n      const hs_color = [value![0], value![1] * 100] as [number, number];\n      const rgb_color = hs2rgb(value!);\n\n      if (lightSupportsColorMode(entity, LIGHT_COLOR_MODES.RGBWW) || lightSupportsColorMode(entity, LIGHT_COLOR_MODES.RGBW)) {\n        _setRgbWColor(\n          lightColors.colorBrightness ? _adjustColorBrightness(rgb_color, (lightColors.colorBrightness * 255) / 100) : rgb_color,\n        );\n      } else if (lightSupportsColorMode(entity, LIGHT_COLOR_MODES.RGB)) {\n        if (lightColors.brightnessAdjusted) {\n          const brightnessAdjust = (lightColors.brightnessAdjusted / 255) * 100;\n          const brightnessPercentage = Math.round(((entity.attributes.brightness || 0) * brightnessAdjust) / 255);\n          const ajustedRgbColor = _adjustColorBrightness(rgb_color, lightColors.brightnessAdjusted, true);\n          _applyColor({ rgb_color: ajustedRgbColor }, { brightness_pct: brightnessPercentage });\n        } else {\n          _applyColor({ rgb_color });\n        }\n      } else {\n        _applyColor({ hs_color });\n      }\n    },\n    [entity, _setRgbWColor, lightColors.colorBrightness, lightColors.brightnessAdjusted, _adjustColorBrightness, _applyColor],\n  );\n\n  const bind = useGesture(\n    {\n      onDrag: (state) => {\n        if (disabled) return;\n        _cursorPosition.current = _getPositionFromEvent(state.values, state.target as HTMLElement);\n        setValue(_cursorPosition.current);\n      },\n      onDragStart: (state) => {\n        if (disabled) return;\n        setPressed(true, state.type);\n        setValue(_cursorPosition.current);\n      },\n      onDragEnd: (state) => {\n        if (disabled) return;\n        setPressed(false, state.type);\n        _cursorPosition.current = _getPositionFromEvent(state.values, state.target as HTMLElement);\n        setValue(_cursorPosition.current);\n        if (typeof onChangeApplied === \"function\")\n          onChangeApplied({\n            hex: hex.current as string,\n            rgb: hex2rgb(hex.current as string),\n            hs: _localValue.current,\n          });\n        _updateColor(_localValue.current);\n      },\n      onClick: (state) => {\n        if (disabled) return;\n        setPressed(false, undefined);\n        const x = state.event.clientX;\n        const y = state.event.clientY;\n        _cursorPosition.current = _getPositionFromEvent([x, y], state.event.target as HTMLElement);\n        setValue(_cursorPosition.current);\n        if (typeof onChangeApplied === \"function\")\n          onChangeApplied({\n            hex: hex.current as string,\n            rgb: hex2rgb(hex.current as string),\n            hs: _localValue.current,\n          });\n        _updateColor(_localValue.current);\n      },\n    },\n    {\n      drag: {\n        filterTaps: true,\n      },\n    },\n  );\n\n  return supportsColor ? (\n    <ColorPickerWrapper\n      css={css`\n        ${cssStyles ?? \"\"}\n      `}\n      className={`${className ?? \"\"} color-picker`}\n      ref={parentRef}\n      {...bind()}\n    >\n      <div className={`container ${disabled ? \"disabled\" : \"\"}`}>\n        <canvas ref={canvasRef} width={canvasSize} height={canvasSize}></canvas>\n        <svg id=\"interaction\" viewBox={`0 0 ${RENDER_SIZE} ${RENDER_SIZE}`} overflow=\"visible\">\n          <defs>\n            <filter id=\"marker-shadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" filterUnits=\"objectBoundingBox\">\n              <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"2\" floodOpacity=\"0.3\" floodColor=\"rgba(0, 0, 0, 1)\" />\n              <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"3\" floodOpacity=\"0.15\" floodColor=\"rgba(0, 0, 0, 1)\" />\n            </filter>\n          </defs>\n          <g\n            ref={gRef}\n            className=\"cursor\"\n            style={{\n              visibility: !isOn ? \"hidden\" : \"visible\",\n            }}\n          >\n            <circle ref={circleRef} cx=\"0\" cy=\"0\" r=\"16\"></circle>\n          </g>\n        </svg>\n      </div>\n    </ColorPickerWrapper>\n  ) : null;\n}\n\n/** This color picker was designed to easily retrieve a value from a color wheel based on values provided from a light entity, you can click or drag on the picker to pick a value, once applied the color wheel will automatically update your light entity, if the light entity provided does not support color it will not render at all */\nexport function ColorPicker(props: ColorPickerProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ColorPicker\" })}>\n      <InternalColorPicker {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { localize, useEntity, type EntityName } from \"@hakit/core\";\nimport { fallback, Group, type GroupProps } from \"@components\";\nimport styled from \"@emotion/styled\";\nimport { useMemo } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\nexport interface EntityAttributesProps extends Partial<GroupProps> {\n  /** the entity name to show the attributes for */\n  entity: EntityName;\n}\n\nconst Key = styled.div`\n  flex-grow: 1;\n`;\nconst Value = styled.div`\n  max-width: 60%;\n  overflow-wrap: break-word;\n  text-align: right;\n`;\nconst Entry = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--ha-S400);\n`;\n\nfunction InternalEntityAttributes({ entity, title, ...rest }: EntityAttributesProps) {\n  const _entity = useEntity(entity);\n  const memoizedAttributes = useMemo(() => [...Object.entries(_entity.attributes), [\"state\", _entity.state]], [_entity]);\n\n  return (\n    <Group\n      collapsed\n      cssStyles={`\n    background-color: var(--ha-S300);\n    color: var(--ha-S300-contrast);\n    margin: 1rem 0;\n  `}\n      layout=\"column\"\n      alignItems=\"flex-start\"\n      title={title ?? localize(\"show_attributes\")}\n      {...rest}\n    >\n      {memoizedAttributes.map(([key, value]) => (\n        <Entry key={key}>\n          <Key>{key}</Key>\n          <Value>\n            {Array.isArray(value)\n              ? value.join(\", \")\n              : typeof value === \"object\" || typeof value === \"boolean\"\n                ? JSON.stringify(value)\n                : value}\n          </Value>\n        </Entry>\n      ))}\n    </Group>\n  );\n}\n\n/** A component that will render entity attributes in a simple table like display, This is useful for debugging or simply just wanting to visualize all the available properties and values.\n *\n * This is currently used in the Popup for all cards that support popups.\n */\nexport function EntityAttributes(props: EntityAttributesProps) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"EntityAttributes\" })}>\n      <InternalEntityAttributes {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useEffect, memo } from \"react\";\nimport { css, Global } from \"@emotion/react\";\nimport { CSSInterpolation } from \"@emotion/serialize\";\nimport { isEqual, merge } from \"lodash\";\nimport { theme as defaultTheme } from \"./theme\";\nimport type { ThemeParams } from \"./theme\";\nimport { convertToCssVars } from \"./helpers\";\nimport { useBreakpoint, fallback, type BreakPoints, type BreakPointsWithXlg } from \"@components\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { LIGHT, DARK, ACCENT, DEFAULT_START_LIGHT, DEFAULT_START_DARK, DIFF, DEFAULT_THEME_OPTIONS } from \"./constants\";\nimport { useHass, type SupportedComponentOverrides } from \"@hakit/core\";\nimport { generateColumnBreakpoints } from \"./breakpoints\";\nimport createCache, { type Options } from \"@emotion/cache\";\nimport { CacheProvider } from \"@emotion/react\";\nimport weakMemoize from \"@emotion/weak-memoize\";\nimport { useThemeStore, type ThemeStore } from \"./store\";\n\ntype DeepPartial<T> = {\n  [K in keyof T]?: T[K] extends object ? DeepPartial<T[K]> : T[K];\n};\n\n// https://github.com/emotion-js/emotion/issues/760#issuecomment-404353706\nconst memoizedCreateCacheWithContainer = weakMemoize((options: Options) => {\n  return createCache(options);\n});\n\nfunction EmotionProvider({ children, options }: { children: React.ReactNode; options: Options }) {\n  return <CacheProvider value={memoizedCreateCacheWithContainer(options)}>{children}</CacheProvider>;\n}\n\nexport type ThemeProviderProps<T extends object> = ThemeStore[\"theme\"] & {\n  /** the theme properties */\n  theme?: DeepPartial<ThemeParams> & T;\n  /** Simple object to define some colors for for success, warning, info and error states, must be provided in [r,g,b] format [number, number, number] */\n  infoColors?: Partial<ThemeProviderInfoColors>;\n  /** any global style overrides */\n  globalStyles?: CSSInterpolation;\n  /** options to pass to the emotion cache provider, if an emotion cache is provided, or a different window context via HassConnect, you'll need to wrap your dashboard in the ThemeProvider\n   * otherwise the styles will not be applied correctly to child components.\n   * @example\n   * ```tsx\n   * <ThemeProvider emotionCache={{ key: \"my-key\", container: myContainer }}>\n   *  <App />\n   * </ThemeProvider>\n   */\n  emotionCache?: Options;\n  /** default breakpoint media query overrides @default {\n   * xxs: 600,\n   * xs: 900,\n   * sm: 1200,\n   * md: 1536,\n   * lg: 1700,\n   */\n  breakpoints?: BreakPoints;\n  /** styles to provide for a specific component type to override every instance */\n  globalComponentStyles?: Partial<Record<SupportedComponentOverrides, CSSInterpolation>>;\n  /** children to render within the ThemeProvider */\n  children?: React.ReactNode;\n};\n\nexport interface ThemeProviderInfoColors {\n  errorColor: [number, number, number];\n  warningColor: [number, number, number];\n  successColor: [number, number, number];\n  infoColor: [number, number, number];\n}\n\nconst INFO_COLORS: ThemeProviderInfoColors = {\n  errorColor: [219, 68, 55],\n  warningColor: [255, 166, 0],\n  successColor: [67, 160, 71],\n  infoColor: [3, 155, 229],\n};\n\nconst alphas = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];\n\nconst getLuminance = (rgb: number[], alpha: number): number => {\n  const [r, g, b] = rgb.map((value) => {\n    const channel = (value / 255) * alpha;\n    return channel <= 0.03928 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\n  });\n  return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n};\n\nconst getContrastColor = (rgb: number[], alpha: number): string => {\n  const luminance = getLuminance(rgb, alpha); // Scale luminance to 0-255 range\n  return luminance > 0.3 ? \"rgba(0, 0, 0, 1)\" : \"rgba(255, 255, 255, 1)\";\n};\n\nconst generateInfoColors = (infoColors = INFO_COLORS): string => {\n  return Object.entries(infoColors)\n    .map(([name, rgb]) =>\n      alphas\n        .map((alpha) => {\n          const suffix = alpha < 1 ? `-a${alpha * 10}` : \"\";\n          const varName = `--ha-${name\n            .replace(/([A-Z])/g, \"-$1\")\n            .toLowerCase()\n            .replace(\"-color\", \"\")}-color${suffix}`;\n          const contrastVarName = `${varName}-contrast`;\n          const rgba = `rgba(${rgb.join(\", \")}, ${alpha})`;\n          const contrastColor = getContrastColor([...rgb], alpha);\n          return `${varName}: ${rgba};\\n${contrastVarName}: ${contrastColor};`;\n        })\n        .join(\"\\n\"),\n    )\n    .join(\"\\n\");\n};\n\n// Function to generate light and dark variants\nconst generateVariantVars = (variants: string[], type: \"Light\" | \"Dark\", tint: number, darkMode: boolean): string => {\n  return variants\n    .map((variant, i) => {\n      const isLight = type === \"Light\";\n      const saturation = isLight\n        ? `calc(((var(--ha-s) - var(--mtc-light-s)) * var(--mtc-s-${variant}) + var(--mtc-light-s)) * 1%)`\n        : `calc(((1 - var(--mtc-s-${variant})) * 100 + var(--mtc-s-${variant}) * var(--ha-s)) * 1%)`;\n      const lightness = isLight\n        ? `calc(((var(--ha-l) - var(--mtc-light-l)) * var(--mtc-l-${variant}) + var(--mtc-light-l)) * 1%)`\n        : `calc(((1 - var(--mtc-l-${variant})) * var(--ha-l) * var(--ha-l) / 100 + var(--mtc-l-${variant}) * var(--ha-l)) * 1%)`;\n      const contrast = (alpha: number) =>\n        isLight\n          ? `hsla(0, 0%, calc(((((1 - var(--mtc-l-${variant})) * 100 + var(--mtc-l-${variant}) * var(--ha-l)) * 1%) - var(--ha-contrast-threshold, 50%)) * (-100)), ${alpha})`\n          : `hsla(0, 0%, calc(((((1 - var(--mtc-l-${variant})) * var(--ha-l) * var(--ha-l) / 100 + var(--mtc-l-${variant}) * var(--ha-l)) * 1%) - var(--ha-contrast-threshold, 50%)) * (-100)), ${alpha})`;\n\n      const baseLightness = darkMode ? DEFAULT_START_LIGHT : DEFAULT_START_DARK;\n      const indexOffset = !isLight ? LIGHT.length + 1 : 0;\n      const offsetBackground = darkMode ? baseLightness + DIFF * (i + indexOffset) : baseLightness - DIFF * (i + indexOffset);\n\n      const baseVars = `\n      --ha-${variant}-h: var(--ha-h);\n      --ha-${variant}-s: ${saturation};\n      --ha-${variant}-l: ${lightness};\n      `;\n      const varStyles = alphas\n        .map((alpha) => {\n          const suffix = alpha < 1 ? `-a${alpha * 10}` : \"\";\n          return `\n        --ha-${variant}${suffix}: hsla(var(--ha-${variant}-h), var(--ha-${variant}-s), var(--ha-${variant}-l), ${alpha});\n        --ha-${variant}${suffix}-contrast: ${contrast(alpha)};\n        --ha-S${variant}${suffix}: hsla(var(--ha-h), calc(var(--ha-${variant}-s) * ${tint}), ${offsetBackground}%, ${alpha});\n        --ha-S${variant}${suffix}-contrast: hsla(var(--ha-h), calc(var(--ha-${variant}-s) * ${tint}), calc(((100% - ${offsetBackground}%) + ${indexOffset} * 10%)), ${alpha});`;\n        })\n        .join(\"\");\n\n      return `\n        ${baseVars}\n        ${varStyles}\n        `;\n    })\n    .join(\"\");\n};\n\n// Function to generate accent variants\nconst generateAccentVars = (variants: string[], tint: number, darkMode: boolean): string => {\n  return variants\n    .map((variant, i) => {\n      const indexOffset = LIGHT.length + 1 + DARK.length;\n      const baseLightness = darkMode ? DEFAULT_START_LIGHT : DEFAULT_START_DARK;\n      const offsetBackground = darkMode ? baseLightness + DIFF * (indexOffset + i) : baseLightness - DIFF * (indexOffset + i);\n\n      const baseVars = `\n        --ha-${variant}-h: calc(var(--ha-h) * var(--mtc-h-${variant}));\n        --ha-${variant}-s: calc(var(--mtc-s-${variant}) * 100%);\n        --ha-${variant}-l: calc(var(--mtc-l-${variant}) * 100%);\n      `;\n      const varStyles = alphas\n        .map((alpha) => {\n          const suffix = alpha < 1 ? `-a${alpha * 10}` : \"\";\n          return `\n          --ha-${variant}${suffix}: hsla(var(--ha-${variant}-h), var(--ha-${variant}-s), var(--ha-${variant}-l), ${alpha});\n          --ha-S${variant}${suffix}: hsla(var(--ha-h), calc(var(--ha-${variant}-s) * ${tint}), ${offsetBackground}%, ${alpha});\n          --ha-S${variant}${suffix}-contrast: hsla(var(--ha-${variant}-s), calc(var(--ha-${variant}-s) * ${tint}), calc(((100% - ${offsetBackground}%))), ${alpha});`;\n        })\n        .join(\"\");\n\n      return `\n        ${baseVars}\n        ${varStyles}\n        `;\n    })\n    .join(\"\");\n};\n\n// Main function to generate all variables\nconst generateAllVars = (tint: number, infoColors: typeof INFO_COLORS, darkMode: boolean): string => {\n  const lightVars = generateVariantVars(LIGHT, \"Light\", tint, darkMode);\n  const darkVars = generateVariantVars(DARK, \"Dark\", tint, darkMode);\n  const accentVars = generateAccentVars(ACCENT, tint, darkMode);\n  const baseLightness = darkMode ? DEFAULT_START_LIGHT : DEFAULT_START_DARK;\n  const offsetBackground = darkMode ? baseLightness + DIFF * 5 : baseLightness - DIFF * 5;\n\n  const varStyles = alphas\n    .map((alpha) => {\n      const suffix = alpha < 1 ? `-a${alpha * 10}` : \"\";\n      return `\n      --ha-500${suffix}-contrast: hsla(0, 0%, calc(((var(--ha-l) * 1%) - var(--ha-contrast-threshold, 50%)) * (-100)), ${alpha});\n      --ha-S500${suffix}: hsla(var(--ha-h), calc(var(--ha-500-s) * ${tint}), ${offsetBackground}%, ${alpha});\n      --ha-S500${suffix}-contrast: hsla(var(--ha-h), calc(var(--ha-500-s) * ${tint}), calc(((100% - ${offsetBackground}%))), ${alpha});\n    `;\n    })\n    .join(\"\");\n\n  return `\n    ${generateInfoColors(infoColors)}\n    ${lightVars}\n    --ha-500-h: var(--ha-h);\n    --ha-500-s: calc(var(--ha-s) * 1%);\n    --ha-500-l: calc(var(--ha-l) * 1%);\n    --ha-500: var(--ha);\n    ${varStyles}\n    ${darkVars}\n    ${accentVars}\n  `;\n};\n\nfunction omitXlg(breakpoints: BreakPointsWithXlg): BreakPoints {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { xlg, ...rest } = breakpoints;\n  return rest;\n}\n\nconst InternalThemeProvider = memo(function InternalThemeProvider<T extends object>({\n  theme,\n  darkMode,\n  tint: t,\n  hue: h,\n  saturation: s,\n  lightness: l,\n  contrastThreshold: c,\n  breakpoints,\n  globalStyles,\n  globalComponentStyles,\n  emotionCache,\n  infoColors = INFO_COLORS,\n  children,\n}: ThemeProviderProps<T>): React.ReactNode {\n  const themeStore = useThemeStore((store) => store.theme);\n  const setTheme = useThemeStore((store) => store.setTheme);\n  const setBreakpoints = useThemeStore((store) => store.setBreakpoints);\n  const setGlobalComponentStyles = useHass((store) => store.setGlobalComponentStyles);\n  const _breakpoints = useThemeStore((store) => store.breakpoints);\n  const device = useBreakpoint();\n  const windowContext = useHass((store) => store.windowContext);\n  const win = windowContext ?? window;\n\n  useEffect(() => {\n    if (globalComponentStyles) {\n      setGlobalComponentStyles(globalComponentStyles);\n    }\n  }, [setGlobalComponentStyles, globalComponentStyles]);\n\n  useEffect(() => {\n    const theme = {\n      hue: h,\n      lightness: l,\n      tint: t,\n      saturation: s,\n      darkMode: darkMode,\n      contrastThreshold: c,\n    } satisfies ThemeStore[\"theme\"];\n    setTheme(theme);\n  }, [c, darkMode, h, l, s, t, setTheme]);\n\n  const colorScheme = themeStore.darkMode ? \"dark\" : \"light\";\n\n  useEffect(() => {\n    if (typeof breakpoints !== \"undefined\") {\n      if (!isEqual(breakpoints, omitXlg(_breakpoints))) {\n        setBreakpoints(breakpoints);\n      }\n    }\n  }, [setBreakpoints, breakpoints, _breakpoints]);\n\n  useEffect(() => {\n    Object.entries(device).forEach(([breakpointKey, active]) => {\n      const className = `bp-${breakpointKey}`;\n      const container = emotionCache?.container ?? null;\n      let body = container ? (container.ownerDocument?.body ?? null) : win.document.body;\n      if (!body) {\n        console.error(\n          \"No valid <body> element found. Falling back to document.body. Ensure that emotionCache.container is a node within a document.\",\n        );\n        body = win.document.body;\n      }\n      if (active) {\n        body.classList.add(className);\n      } else {\n        body.classList.remove(className);\n      }\n    });\n  }, [device, win, emotionCache]);\n\n  return (\n    <EmotionProvider\n      options={\n        emotionCache ?? {\n          key: \"hakit\",\n          container: win.document.head,\n        }\n      }\n    >\n      <Global\n        styles={css`\n          :root {\n            ${convertToCssVars(merge(defaultTheme, theme))}\n            --is-dark-theme: ${themeStore.darkMode ? \"1\" : \"0\"};\n            color-scheme: ${colorScheme};\n            --ha-easing: cubic-bezier(0.25, 0.46, 0.45, 0.94);\n            --ha-transition-duration: 0.25s;\n            --ha-area-card-expanded-offset: 0;\n            --ha-background-opaque: ${themeStore.darkMode\n              ? `hsla(var(--ha-h), calc(var(--ha-s) * 1%), 10%, 0.9)`\n              : `hsla(var(--ha-h), calc(var(--ha-s) * 1%), 20%, 0.7)`};\n          }\n\n          :root {\n            --ha-h: ${themeStore.hue};\n            --ha-s: ${themeStore.saturation};\n            --ha-l: ${themeStore.lightness};\n            --ha-contrast-threshold: ${themeStore.contrastThreshold}%;\n            --ha-so: calc(var(--ha-s) * 1%);\n            --ha: hsla(var(--ha-h), calc(var(--ha-s) * 1%), calc(var(--ha-l) * 1%), 100%);\n            --mtc-h-A100: 1;\n            --mtc-h-A200: 1;\n            --mtc-h-A400: 1;\n            --mtc-h-A700: 1.01;\n            --mtc-s-50: 0.91;\n            --mtc-s-100: 0.98;\n            --mtc-s-200: 0.96;\n            --mtc-s-300: 0.95;\n            --mtc-s-400: 0.96;\n            --mtc-s-600: 1;\n            --mtc-s-700: 0.99;\n            --mtc-s-800: 0.89;\n            --mtc-s-900: 0.86;\n            --mtc-s-A100: 0.89;\n            --mtc-s-A200: 0.98;\n            --mtc-s-A400: 0.97;\n            --mtc-s-A700: 0.95;\n            --mtc-l-50: 0.12;\n            --mtc-l-100: 0.3;\n            --mtc-l-200: 0.5;\n            --mtc-l-300: 0.7;\n            --mtc-l-400: 0.86;\n            --mtc-l-600: 0.87;\n            --mtc-l-700: 0.66;\n            --mtc-l-800: 0.45;\n            --mtc-l-900: 0.16;\n            --mtc-l-A100: 0.76;\n            --mtc-l-A200: 0.64;\n            --mtc-l-A400: 0.49;\n            --mtc-l-A700: 0.44;\n            --mtc-light-h: 0;\n            --mtc-light-s: 0;\n            --mtc-light-l: 100;\n\n            ${generateAllVars(\n              themeStore.tint ?? DEFAULT_THEME_OPTIONS.tint,\n              {\n                ...INFO_COLORS,\n                ...infoColors,\n              },\n              themeStore.darkMode ?? DEFAULT_THEME_OPTIONS.darkMode,\n            )}\n          }\n\n          * {\n            box-sizing: border-box;\n            scrollbar-width: thin;\n            scrollbar-color: var(--ha-S500) var(--ha-S200);\n            font-family: var(--ha-font-family);\n            ::-webkit-scrollbar-corner {\n              background: rgba(0, 0, 0, 0.5);\n            }\n\n            /* Works on Chrome, Edge, and Safari */\n            &::-webkit-scrollbar {\n              width: 12px;\n              height: 12px;\n            }\n\n            &::-webkit-scrollbar-track {\n              background: var(--ha-S200); // track background color\n            }\n\n            &::-webkit-scrollbar-thumb {\n              background-color: var(--ha-S500);\n              border-radius: 20px;\n              border: 3px solid var(--ha-S200);\n            }\n          }\n\n          html,\n          body {\n            height: 100%;\n            width: 100%;\n            margin: 0;\n            padding: 0;\n          }\n          body {\n            -webkit-font-smoothing: antialiased;\n            -webkit-tap-highlight-color: transparent;\n            -webkit-overflow-scrolling: touch;\n            -moz-osx-font-smoothing: grayscale;\n            scroll-behavior: smooth;\n            background-color: var(--ha-S100);\n            font-family: var(--ha-font-family);\n            font-size: var(--ha-font-size);\n            color: var(--ha-S100-contrast);\n            overflow-x: hidden;\n            overflow-y: var(--ha-hide-body-overflow-y, inherit);\n          }\n          ${generateColumnBreakpoints(_breakpoints)}\n          ${globalStyles ?? \"\"}\n        `}\n      />\n      {children && children}\n    </EmotionProvider>\n  );\n});\n/**\n * A simple way of creating global styles and providing re-usable css variables to re-use across your application\n *\n * There's very little css shipped with this ThemeProvider, the main purpose of this provider is to create the css variables used for all components across @hakit/components, however it does ship with some base css to the body, html and scrollbars.\n * */\nexport function ThemeProvider<T extends object>(props: ThemeProviderProps<T>) {\n  return (\n    <ErrorBoundary {...fallback({ prefix: \"ThemeProvider\" })}>\n      <InternalThemeProvider {...props} />\n    </ErrorBoundary>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { Column, RangeSlider, Row, FabCard, Tooltip, Alert } from \"@components\";\nimport styled from \"@emotion/styled\";\nimport { LIGHT, DARK, ACCENT } from \"./constants\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { capitalize } from \"lodash\";\nimport { useThemeStore, type ThemeStore } from \"./store\";\n\nconst Title = styled.span`\n  font-size: 0.9rem;\n  color: var(--ha-S100-contrast);\n`;\n\nconst Pallette = styled(Row)`\n  font-size: 0.8rem;\n  width: 3.5rem;\n  height: 3.5rem;\n`;\n\nconst RangeSliderBox = styled.div`\n  padding: 0.5rem;\n  width: 100%;\n  background-color: var(--ha-S100);\n  border-radius: 0.5rem;\n`;\n\nexport function ThemeControls() {\n  const theme = useThemeStore((state) => state.theme);\n  const setTheme = useThemeStore((state) => state.setTheme);\n  const { hue, saturation, lightness, tint, contrastThreshold, darkMode } = theme;\n  const [h, setHue] = useState(hue);\n  const [l, setLight] = useState(lightness);\n  const [t, setTint] = useState(tint);\n  const [s, setSat] = useState(saturation);\n  const [dark, setDark] = useState(darkMode);\n  const [c, setContrastThreshold] = useState(contrastThreshold);\n\n  const debouncedOnChange = useDebouncedCallback(\n    (_theme: ThemeStore[\"theme\"]) => {\n      setTheme(_theme);\n    },\n    50,\n    {\n      trailing: true,\n      leading: true,\n    },\n  );\n\n  useEffect(() => {\n    debouncedOnChange({\n      hue: h,\n      saturation: s,\n      lightness: l,\n      tint: t,\n      contrastThreshold: c,\n      darkMode: dark,\n    });\n  }, [c, contrastThreshold, dark, darkMode, h, hue, l, lightness, debouncedOnChange, s, saturation, t, tint]);\n\n  return (\n    <Column\n      fullWidth\n      gap=\"1rem\"\n      wrap=\"nowrap\"\n      style={{\n        padding: \"1rem 0\",\n      }}\n    >\n      <Row fullWidth gap=\"1rem\" wrap=\"nowrap\">\n        <RangeSliderBox>\n          <RangeSlider\n            label=\"Shade Tint\"\n            description=\"Will change the hue tint for the shade colors\"\n            min={0}\n            max={1}\n            step={0.05}\n            value={t}\n            onChangeComplete={(value) => {\n              setTint(value);\n            }}\n          />\n        </RangeSliderBox>\n        <RangeSliderBox>\n          <RangeSlider\n            label=\"Contrast Threshold\"\n            description=\"Changes output calculation for text color\"\n            min={0}\n            max={100}\n            step={1}\n            value={c}\n            onChangeComplete={(value) => {\n              setContrastThreshold(value);\n            }}\n          />\n        </RangeSliderBox>\n      </Row>\n      <Row fullWidth gap=\"1rem\" wrap=\"nowrap\">\n        <RangeSliderBox>\n          <RangeSlider\n            label=\"Saturation\"\n            description=\"Control the saturation of the color\"\n            min={0}\n            max={100}\n            value={s}\n            onChangeComplete={(value) => {\n              setSat(value);\n            }}\n          />\n        </RangeSliderBox>\n        <RangeSliderBox>\n          <RangeSlider\n            label=\"Lightness\"\n            description=\"Control how bright the primary colors are\"\n            min={0}\n            max={100}\n            value={l}\n            onChangeComplete={(value) => {\n              setLight(value);\n            }}\n          />\n        </RangeSliderBox>\n      </Row>\n      <RangeSliderBox>\n        <RangeSlider\n          label=\"Hue\"\n          description=\"Change the overall hue of the colors\"\n          min={0}\n          max={360}\n          value={h}\n          onChangeComplete={(value) => {\n            setHue(value);\n          }}\n        />\n      </RangeSliderBox>\n\n      <Row justifyContent=\"flex-start\" fullWidth gap=\"1rem\">\n        <Title>Dark / Light mode</Title>\n        <FabCard\n          tooltipPlacement=\"right\"\n          title={dark ? \"Change to light mode\" : \"Change to dark mode\"}\n          icon={!dark ? \"ph:sun\" : \"ph:moon\"}\n          onClick={() => {\n            setDark(!dark);\n          }}\n        />\n      </Row>\n      <Row justifyContent=\"flex-start\" fullWidth>\n        <Alert>Hover over the pallette&apos;s below to see the respective css variables.</Alert>\n      </Row>\n      <Row wrap=\"nowrap\" fullWidth justifyContent=\"flex-start\">\n        {LIGHT.map((color, index) => {\n          return (\n            <Column gap=\"1rem\" key={color}>\n              <Title>{index === 0 ? \"Primary\" : <>&nbsp;</>}</Title>\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <Column alignItems=\"flex-start\">\n                    <span>background-color: var(--ha-{color});</span>\n                    <span>color: var(--ha-{color}-contrast);</span>\n                  </Column>\n                }\n              >\n                <Pallette\n                  style={{\n                    color: `var(--ha-${color}-contrast)`,\n                    backgroundColor: `var(--ha-${color})`,\n                  }}\n                >\n                  {color}\n                </Pallette>\n              </Tooltip>\n              <Title>{index === 0 ? \"Shade\" : <>&nbsp;</>}</Title>\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <Column alignItems=\"flex-start\">\n                    <span>background-color: var(--ha-S{color});</span>\n                    <span>color: var(--ha-S{color}-contrast);</span>\n                  </Column>\n                }\n              >\n                <Pallette\n                  style={{\n                    color: `var(--ha-S${color}-contrast)`,\n                    backgroundColor: `var(--ha-S${color})`,\n                  }}\n                >\n                  S{color}\n                </Pallette>\n              </Tooltip>\n            </Column>\n          );\n        })}\n        <Column gap=\"1rem\">\n          <Title>{<>&nbsp;</>}</Title>\n          <Tooltip\n            placement=\"top\"\n            title={\n              <Column alignItems=\"flex-start\">\n                <span>background-color: var(--ha-500);</span>\n                <span>color: var(--ha-500-contrast);</span>\n              </Column>\n            }\n          >\n            <Pallette\n              style={{\n                transform: \"scale(1.1)\",\n                transformOrigin: \"bottom\",\n                color: `var(--ha-500-contrast)`,\n                backgroundColor: `var(--ha-500)`,\n              }}\n            >\n              500\n            </Pallette>\n          </Tooltip>\n          <Title>{<>&nbsp;</>}</Title>\n          <Tooltip\n            placement=\"top\"\n            title={\n              <Column alignItems=\"flex-start\">\n                <span>background-color: var(--ha-S500);</span>\n                <span>color: var(--ha-S500-contrast);</span>\n              </Column>\n            }\n          >\n            <Pallette\n              style={{\n                transform: \"scale(1.1)\",\n                transformOrigin: \"top\",\n                color: `var(--ha-S500-contrast)`,\n                backgroundColor: `var(--ha-S500)`,\n              }}\n            >\n              S500\n            </Pallette>\n          </Tooltip>\n        </Column>\n        {DARK.map((color) => {\n          return (\n            <Column key={color} gap=\"1rem\">\n              <Title>{<>&nbsp;</>}</Title>\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <Column alignItems=\"flex-start\">\n                    <span>background-color: var(--ha-{color});</span>\n                    <span>color: var(--ha-{color}-contrast);</span>\n                  </Column>\n                }\n              >\n                <Pallette\n                  style={{\n                    color: `var(--ha-${color}-contrast)`,\n                    backgroundColor: `var(--ha-${color})`,\n                  }}\n                >\n                  {color}\n                </Pallette>\n              </Tooltip>\n              <Title>{<>&nbsp;</>}</Title>\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <Column alignItems=\"flex-start\">\n                    <span>background-color: var(--ha-S{color});</span>\n                    <span>color: var(--ha-S{color}-contrast);</span>\n                  </Column>\n                }\n              >\n                <Pallette\n                  style={{\n                    color: `var(--ha-S${color}-contrast)`,\n                    backgroundColor: `var(--ha-S${color})`,\n                  }}\n                >\n                  S{color}\n                </Pallette>\n              </Tooltip>\n            </Column>\n          );\n        })}\n      </Row>\n      <Row fullWidth justifyContent=\"flex-start\">\n        {ACCENT.map((color, index) => {\n          return (\n            <Column key={color} gap=\"1rem\">\n              <Title>{index === 0 ? \"Accent\" : <>&nbsp;</>}</Title>\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <Column alignItems=\"flex-start\">\n                    <span>background-color: var(--ha-{color});</span>\n                    <span>color: var(--ha-{color}-contrast);</span>\n                  </Column>\n                }\n              >\n                <Pallette\n                  style={{\n                    color: `var(--ha-${color}-contrast)`,\n                    backgroundColor: `var(--ha-${color})`,\n                  }}\n                >\n                  {color}\n                </Pallette>\n              </Tooltip>\n              <Title>{index === 0 ? \"Shade\" : <>&nbsp;</>}</Title>\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <Column alignItems=\"flex-start\">\n                    <span>background-color: var(--ha-S{color});</span>\n                    <span>color: var(--ha-S{color}-contrast);</span>\n                  </Column>\n                }\n              >\n                <Pallette\n                  style={{\n                    color: `var(--ha-S${color}-contrast)`,\n                    backgroundColor: `var(--ha-S${color})`,\n                  }}\n                >\n                  S{color}\n                </Pallette>\n              </Tooltip>\n            </Column>\n          );\n        })}\n      </Row>\n\n      {[\"info\", \"success\", \"error\", \"warning\"].map((color, _index) => {\n        return (\n          <Row fullWidth justifyContent=\"flex-start\" key={_index}>\n            {[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1].map((shade, index) => {\n              const suffix = shade === 1 ? \"\" : `-a${index + 1}`;\n              return (\n                <Column gap=\"1rem\" key={`${shade}-${color}-${_index}`}>\n                  <Title>{index === 0 ? capitalize(color) : <>&nbsp;</>}</Title>\n                  <Tooltip\n                    placement=\"top\"\n                    title={\n                      <Column alignItems=\"flex-start\">\n                        <span>\n                          background-color: var(--ha-{color}-color{suffix});\n                        </span>\n                        <span>\n                          color: var(--ha-{color}-color{suffix}-contrast);\n                        </span>\n                      </Column>\n                    }\n                  >\n                    <Pallette\n                      style={{\n                        color: `var(--ha-${color}-color${suffix}-contrast)`,\n                        backgroundColor: `var(--ha-${color}-color${suffix})`,\n                      }}\n                    >\n                      {suffix}\n                      {shade === 1 ? shade : \"\"}\n                    </Pallette>\n                  </Tooltip>\n                </Column>\n              );\n            })}\n          </Row>\n        );\n      })}\n    </Column>\n  );\n}\n","import { useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { FabCard, Modal } from \"@components\";\nimport { ThemeControls } from \"./ThemeControls\";\nimport { localize } from \"@hakit/core\";\n\nconst ThemeControlsBox = styled.div`\n  position: fixed;\n  top: 1rem;\n  right: 1rem;\n  z-index: 1;\n`;\n\nexport function ThemeControlsModal() {\n  const [open, setOpen] = useState(false);\n  return (\n    <>\n      <ThemeControlsBox>\n        <FabCard onClick={() => setOpen(true)} tooltipPlacement=\"left\" title={localize(\"theme\")} icon=\"mdi:color\" />\n      </ThemeControlsBox>\n      <Modal\n        description=\"This interface showcases how the colors will behave and provides easy to access css variables\"\n        open={open}\n        title={localize(\"theme\")}\n        onClose={() => {\n          setOpen(false);\n        }}\n      >\n        <ThemeControls />\n      </Modal>\n    </>\n  );\n}\n"],"names":["useBreakpoint","breakpoints","useThemeStore","store","win","useHass","windowContext","window","queries","useMemo","getBreakpoints","matches","setMatches","useState","Object","fromEntries","allBreakpoints","map","bp","useEffect","context","mqlMap","Map","updateMatches","newMatches","get","query","mql","matchMedia","set","addEventListener","values","removeEventListener","weakMemoize","func","cache","arg","ret","getBaseElement","as","onlyFunctionality","_styled","process","env","NODE_ENV","target","label","shouldForwardProp","prop","isValidProp","props","disableActiveState","StyledRipples","jsx","Ripples","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","Trigger","DEFAULT_SIZES","xxs","xs","sm","md","lg","xlg","CardBaseInternal","entity","_entity","title","_title","active","service","serviceData","children","disabled","longPressCallback","onClick","disableModal","modalProps","disableRipples","disableScale","id","className","cssStyles","style","borderRadius","rippleProps","disableColumns","refCallback","key","relatedEntities","features","featureBarProps","graph","resizeDetectorProps","triggerClass","rest","_id","useId","globalComponentStyle","state","globalComponentStyles","openModal","setOpenModal","domain","computeDomain","useEntity","returnNullIfNotFound","internalRef","useRef","width","useResizeDetector","refreshMode","refreshRate","handleHeight","skipOnMount","targetRef","graphEntity","historyOptions","disable","isUnavailable","isUnavailableState","_borderRadius","StyledElement","bind","useLongPress","e","current","classList","remove","threshold","cancelOnMovement","cancelOutsideElement","filterEvents","button","onClickHandler","useCallback","event","caller","attributes","friendly_name","startCase","lowerCase","columnClassNames","mergedGrids","entries","reduce","acc","value","inputValue","join","filteredRelatedEntities","Children","toArray","filter","child","isValidElement","filteredFeaturedEntities","featuredElements","index","cloneElement","hasFeatures","length","featureBar","ButtonBar","calculateSvgHeight","parentWidth","aspectRatio","SVG_WIDTH","SVG_HEIGHT","adjustGraphSpaceBy","svgHeight","_classes","x","handlePointerDown","add","handlePointerUp","jsxs","Fragment","ref","css","cardBase","history","loading","Alert","localize","coordinates","SvgGraph","createElement","ModalByEntityDomain","onClose","open","CardBase","memo","ErrorBoundary","fallback","prefix","RelatedEntityEl","margin","padding","position","InternalRelatedEntity","icon","_icon","iconProps","render","iconElement","useIcon","domainIcon","useIconByDomain","entityIcon","useIconByEntity","RelatedEntity","_FeatureEntity","ButtonBarButton","preventPropagation","FeatureEntity","TooltipSpan","placement","InternalTooltip","tooltipRef","childRef","portalRoot","show","setShow","calculatePosition","el","childRect","getBoundingClientRect","top","left","height","right","bottom","setTimeout","opacity","visibility","handleMouseEnter","handleHide","tooltipEl","setAttribute","_unknown","document","createPortal","body","Tooltip","fallbackRender","error","resetErrorBoundary","message","StyledButtonCard","Contents","ToggleState","Toggle","Fab","brightness","LayoutBetween","Footer","Title","Description","InternalButtonCard","fabProps","description","layoutType","hideIcon","hideState","hideLastUpdated","hideDetails","hideToggle","customRenderState","formatter","iconNode","isDefaultLayout","undefined","isSlimLayout","on","entity_id","renderState","ON","OFF","attributeValue","stateValue","stateNode","separatorNode","descriptionSeparator","buildDescriptionContent","main","buttonCard","custom","backgroundColor","rgbaColor","color","rgbColor","Column","relativeTime","ButtonCard","defaultColumns","RangeSliderParent","StyledRange","mq","handleSize","size","Label","InternalRangeSlider","_value","onChange","formatTooltipValue","hideTooltip","tooltipSize","min","_min","max","_max","step","_step","debounceThrottleValue","debounceType","onChangeComplete","setValue","setActive","rangeRef","parentRangeRef","parseFloat","roundedValue","valueAsNumber","toFixed","Math","abs","log10","percentage","tooltipValue","debouncedOnChange","useDebouncedCallback","useThrottledCallback","leading","trailing","RangeSlider","boxStyle","display","overflow","StyledRipple","ParentRipple","_Ripples","duration","rippleRef","timeoutId","clearTimeout","stopPropagation","pageX","pageY","currentTarget","rect","xMultiplier","scrollX","yMultiplier","scrollY","newStyles","isNaN","transform","transition","assign","displayName","StyledTriggerCard","ToggleMessage","hideArrow","Gap","InternalTriggerCard","_disabled","sliderIconProps","sliderIcon","_sliderIcon","sliderTextActive","sliderTextInactive","activeStateDuration","timeRef","powerIcon","arrowIcon","fontSize","useApiHandler","triggerCard","search","replace","computeDomainTitle","device_class","TriggerCard","StyledGroup","collapsed","collapsible","Header","InternalGroup","gap","justifyContent","alignItems","layout","_collapsed","setCollapsed","cssProps","onCollapseComplete","onHeaderClick","AutoHeight","Row","Group","Card","SubTitle","StyledIcon","Icon","LocationIcon","splitForecastsIntoRows","arr","rowCount","maxItemsPerRow","maxItems","limitedArray","slice","result","start","i","groupSize","ceil","push","Forecast","ForecastIcon","Day","Time","Temperature","TemperatureLow","FORECAST_ITEM_PROJECTED_WIDTH","InternalWeatherCard","temperatureSuffix","includeTitle","includeForecast","includeCurrent","includeTime","includeDay","details","apparentTemperatureAttribute","forecastType","forecastRows","allowForecastToggle","config","setWidth","itemsToRender","floor","timeZone","setTimeZone","s","shouldAmPm","helpers","dateTime","shouldUseAmPm","type","setType","weather","useWeather","getIconByEntity","temperature","temperature_unit","time_zone","supportedForecasts","getSupportedForecastTypes","weatherDetails","humidity","wind_speed","wind_speed_unit","additional","getAdditionalWeatherInformation","apparent_temperature","feelsLikeBase","feelsLike","forcastRowArrs","forecast","genForecastRows","forecastForRow","rowIdx","dateObj","Date","datetime","dayDisplay","formatDateWeekdayShort","hourNumeric","formatHour","suffix","formatAmPmSuffix","hourDisplay","condition","templow","onResize","_width","weatherCard","WeatherCardDetail","round","WeatherCard","DetailsRow","State","InternalWeatherCardDetail","unit_of_measurement","SvgGarbageBin","React","ASPECT_RATIO","Bin","textColor","iconColor","BinBox","VerticalText","text","newWidth","newHeight","textRef","setFontSize","resizeText","textLength","getComputedTextLength","oldFontSize","InternalGarbageCollectionCard","schedules","svg","dateSensor","defaultSVGProperties","today","getDay","currentWeek","getDate","dayNames","renderBin","bin","GarbageBin","formatTimeDisplay","days","findNextNonNullWeek","weeks","startWeek","collections","flatMap","schedule","daysUntilCollection","toLowerCase","indexOf","day","futureDate","setDate","bins","nextWeekIndex","frequency","nextBins","timeUntilCollection","hideNextCollection","nextFutureDate","incrementDays","daysUntilNextCollection","nextCollectionTime","garbageCollectionCard","marginTop","collection","GarbageCollectionCard","DEFAULT_TIME_FORMAT","DEFAULT_DATE_FORMAT","customFormatter","createDateFormatter","InternalTimeCard","timeEntity","dateEntity","timeFormat","dateFormat","throttleTime","hideDate","hideTime","center","currentTime","setCurrentTime","locale","language","formatDateWeekday","formatDateMonth","formatDateYear","formatTime","previousTimeRef","now","requestRef","timeSensor","dateIcon","formatted","amOrPm","raw","h","m","split","Number","entityDate","setHours","timeStr","match","hasOnClick","haFormatter","date","format","opts","timezone","timeValue","AmOrPm","console","dateValue","parts","d","daySuffix","updateClock","elapsed","requestAnimationFrame","needTicker","cancelAnimationFrame","timeCard","_","TimeCard","StyledAreaCard","PictureCardFooter","NavBar","FullScreen","ChildContainer","_ref","InternalAreaCard","hash","image","preloadProps","idRef","addRoute","getRoute","getState","dynamicHash","isPressed","useKeyPress","setOpen","route","location","Global","FabCard","areaCard","PreloadImage","AreaCard","StyledVacuumCard","StyledVacuumImage","VacuumImage","InternalVacuumCard","shortcuts","hideCurrentBatteryLevel","hideUpdated","hideToolbar","customImage","locatingNode","flash","setFlash","titleValue","status","locateFlash","getToolbarActions","onLocate","stateTitle","vacuumCard","feature","VacuumCard","StyledPictureCard","Inner","_PictureCard","PictureCard","StyledFabCard","hasChildren","InternalFabCard","tooltipPlacement","noIcon","_active","fabCard","FamilyBaseCard","FamilyCardContent","getColumnSizeCSS","InternalFamilyCard","len","count","childrenWithKeys","some","familyCard","FamilyCard","PersonBaseCard","PersonCardContent","UserAvatarDiv","withBorder","UserAvatarStateIcon","NameAndState","UserAvatar","iconSize","avatarSize","stateIcon","person","joinHassUrl","userImage","url","entity_picture","startsWith","userIcon","renderedStateIcon","InternalPersonCard","personStateMap","_personStateMap","home","not_home","stateText","personCard","PersonCard","StyledTimeCard","StyledSidebarCard","Menu","Divider","HamburgerMenu","Filler","StyledWeatherCard","WeatherCardCustom","InternalSidebarCard","weatherCardProps","timeCardProps","startOpen","menuItems","autoIncludeRoutes","includeTimeCard","sortSidebarMenuItems","routes","devices","concatenatedMenuItems","mappedRoutes","items","sort","maxWidth","flexDirection","item","SidebarCard","SLIDER_MODES","auto","cool","dry","fan_only","heat","heat_cool","off","Wrapper","ClimateControlSlider","targetTempStep","showCurrent","_targetTemperature","setTargetTemperature","_selectTargetTemperature","setSelectTargetTemperature","min_temp","max_temp","target_temp_step","hvac_modes","unit_system","UNIT_F","low","target_temp_low","high","target_temp_high","supportsTargetTemperature","supportsFeatureFromAttributes","ClimateEntityFeature","TARGET_TEMPERATURE","supportsTargetTemperatureRange","TARGET_TEMPERATURE_RANGE","_callService","setTemperature","_debouncedCallService","_handleButton","defaultValue","temp","clamp","_handleSelectTemp","_renderLabel","UNAVAILABLE","action","hvac_action","actionLabel","toReadableString","_valueChanged","_valueChanging","_renderTemperatureButtons","colored","lowColor","colors","highColor","stateActive","borderColor","_renderTargetTemperature","digits","formatOptions","maximumFractionDigits","minimumFractionDigits","BigNumber","_renderCurrentTemperature","isOffState","current_temperature","mode","stateColor","actionColor","CLIMATE_HVAC_ACTION_TO_MODE","heatCoolModes","includes","sliderMode","ControlSliderCircular","ClimateHumiditySlider","_targetHumidity","setTargetHumidity","min_humidity","max_humidity","targetHumidity","setHumidity","_renderButtons","_renderTarget","_renderCurrentHumidity","current_humidity","supportsTargetHumidity","TARGET_HUMIDITY","currentHumidity","InternalClimateControls","hvacModes","hvacModeLabels","hideCurrentTemperature","hideHvacModes","hideSwingModes","hideFanModes","hidePresetModes","entityStateChanged","mainControl","_mainControl","setMainControl","isOff","preset_mode","fan_mode","fan_modes","preset_modes","swing_modes","modes","supportTargetHumidity","supportFanMode","FAN_MODE","supportPresetMode","PRESET_MODE","supportSwingMode","SWING_MODE","_handleFanModeChanged","setFanMode","_handleOperationModeChanged","setHvacMode","hvac_mode","_handleSwingmodeChanged","setSwingMode","swing_mode","_handlePresetmodeChanged","setPresetMode","concat","compareClimateHvacModes","computeHvacModeIcon","computePresetModeIcon","computeFanModeIcon","computeSwingModeIcon","ClimateControls","colorWheel","SWATCH_SIZE","Separator","FabCardColor","FabCardTemp","InternalLightControls","onStateChange","showFavoriteColors","favoriteColors","control","setControl","brightnessValue","useLightBrightness","device","DOMAIN_ATTRIBUTES_UNITS","light","supportsColorTemp","lightSupportsColorMode","LIGHT_COLOR_MODES","COLOR_TEMP","supportsColor","lightSupportsColor","supportsBrightness","lightSupportsBrightness","supportsWhite","WHITE","hasEffects","effect_list","supportsFavorites","lightSupportsFavoriteColors","computedFavorites","computeDefaultFavoriteColors","currentRgb","getLightCurrentModeRgbColor","currentKelvin","color_temp_kelvin","isFavoriteActive","fav","rgb_color","every","v","handleFavoriteClick","hs_color","rgbw_color","rgbww_color","turnOn","_handleEffectChange","effect","ControlToggle","toggle","ControlSlider","brightness_pct","ColorPicker","ColorTempPicker","kelvin","white","FavoritesWrapper","idx","r","g","b","getRgbColor","bg","contrastColor","luminosity","rgbToHex","vals","padStart","FavoriteFabCard","LightControls","entityAttributes","hs2rgb","temperature2rgb","rgbw2rgb","rgbww2rgb","min_color_temp_kelvin","max_color_temp_kelvin","BUTTONS","BUTTON_ROWS","_val","FORMAT_NUMBER","pulse","keyframes","ControlPanelSize","buttonGap","buttonSize","InternalAlarmControls","states","_states","defaultCode","hideCodeInput","hideKeypad","customActionColor","labelMap","slots","wrapperRef","inputVal","setInputVal","filterSupportedAlarmStates","DEFAULT_STATES","_handlePadClick","val","_handleActionClick","snakeCase","code","setProperty","_getActionColor","localizeState","isLoading","showKeypad","code_format","unpackSlot","find","slot","alarmCard","ButtonGroup","stateAction","ButtonGroupButton","ALARM_MODE_STATE_MAP","ALARM_MODES","marginBottom","_getActionLabel","TextField","buttons","j","zIndex","cursor","AlarmControls","computeTitleDisplay","statePosition","current_position","current_tilt_position","currentPosition","InternalCoverControls","orientation","reverse","supports","supportsPosition","CoverEntityFeature","supportsTiltPosition","supportsOpenClose","supportsTilt","_mode","setMode","setCoverPosition","setCoverTiltPosition","tilt_position","minHeight","maxHeight","minWidth","flexWrap","CoverControls","StyledMediaPlayerCard","StyledColumn","GroupLine","MediaPlayerControls","groupedEntities","allEntityIds","primaryEntity","supportsGrouping","mediaPlayersOrderedByGroup","flatten","groupBy","group_members","mediaPlayerService","useService","lastPlayedMedia","setLastPlayedMedia","media_content_id","media_content_type","handleMediaPlayerActionClick","entityId","playingSpeakers","playMedia","media","enqueue","mediaPlay","mediaPause","unjoin","getIcon","hasSomePlayingSpeakers","mediaPlayer","MediaPlayerCard","isPlaying","isLastOfGroup","friendlyName","supportsTurnOn","supportsTurnOff","capitalize","turnOff","VolumeControls","StyledMapContainer","MapContainer","MapMarker","marker","container","tagName","element","L","DomUtil","create","divIcon","DivIcon","html","portal","eventHandlers","Marker","InternalPersonControls","mapHeight","LatLng","latitude","longitude","TileLayer","PersonControls","StyledClimateCard","InternalClimateCard","showHvacModeLabels","showTemperatureControls","currentMode","icons","havacModesToUse","climateCard","activeColors","customLabel","ClimateCard","StyledEntitiesCard","InternalEntitiesCard","includeLastUpdated","entitiesCard","EntitiesCard","IconWrapper","Name","EntityRowInner","LAZY_LOAD_STATE_TYPES","climate","sensor","DOMAIN_TO_ELEMENT_TYPE","water_heater","alert","automation","fan","input_boolean","remote","siren","switch","vacuum","InternalEntitiesCardRow","_name","hexColor","lazyKey","LazyComponent","lazy","Suspense","EntitiesCardRow","VolumeSlider","StyledRangeSlider","volumeLayout","hideMute","volume_level","is_volume_muted","volume","_setVolume","mp","timerRef","supportsVolumeSet","supportsVolumeMute","setVolume","volumeSet","DEFAULT_FAB_SIZE","volumeMute","volumeDown","volumeUp","preventDefault","PlaybackControls","playing","supportsPreviousTrack","supportsNextTrack","supportsPlay","mediaPreviousTrack","mediaNextTrack","SmallText","AlternateControls","onSpeakerGroupClick","hideGrouping","groups","BackgroundImage","backgroundImage","MediaPlayerWrapper","Base","Empty","StyledMarquee","Marquee","InternalMediaPlayerCard","groupMembers","thumbnailSize","hideThumbnail","showArtworkBackground","hideAppName","hideEntityName","marqueeProps","interval","progressRef","playerRef","clockRef","entitiesById","entities","media_artist","media_title","media_playlist","app_name","media_duration","media_position","media_position_updated_at","deviceNames","friendlyNames","appName","artworkUrl","isIdle","isStandby","buffering","seekDisabled","isGroupingModalOpen","setIsGroupingModalOpen","currentTimeInSeconds","minutes","seconds","minutesStr","String","secondsStr","calculatePercentageViewed","progress","setInterval","lastUpdated","timeDifferenceInSeconds","getTime","newMediaPosition","clearInterval","seekTrack","mediaSeek","seek_position","debounceUpdateClock","bindProgress","useGesture","onMove","clientX","Error","mediaPlayerCard","paddingBottom","Thumbnail","ProgressBar","Clock","isIterable","obj","hasIterableEntries","compareEntries","valueA","valueB","mapA","mapB","compareIterables","iteratorA","iteratorB","nextA","nextB","shallow","useShallow","selector","prev","next","StyledCalendarCard","EventBody","StyledAlert","getCalendarDate","formatDate","dateString","optionsDate","month","year","optionsTime","hour","minute","formattedDate","Intl","DateTimeFormat","formattedStartTime","eventEndTime","formattedEndTime","defaultFullCalendarConfig","headerToolbar","plugins","dayGridPlugin","listPlugin","interactionPlugin","initialView","dayMaxEventRows","views","listWeek","eventTimeFormat","hour12","InternalCalendarCard","view","disableAutoView","disableNarrow","includeHeader","callApi","calRef","initialRequest","setError","setTitle","setLoading","narrow","setNarrow","widthRef","currentEvent","setCurrentEvent","calEntities","activeView","setActiveView","calendars","fetchEvents","info","successCallback","params","encodeURI","toISOString","end","calEvents","errors","apiCalls","method","then","data","responses","Promise","all","forEach","getColorByIndex","ev","eventStart","eventEnd","eventData","uid","summary","dtstart","dtend","recurrence_id","rrule","calendar","changeView","fn","calendarApi","getApi","batchRendering","removeAllEventSources","addEventSource","measureCard","requestResize","api","setOption","_handleNext","_handlePrev","_handleToday","_handleView","newView","eventDisplay","_handleEventClick","entityStateObj","extendedProps","_handleDateClick","gotoDate","defaultView","calendarCard","toUpperCase","FullCalendar","Modal","textTransform","__html","Autolinker","link","newWindow","stripPrefix","CalendarCard","ButtonBarParent","fullWidth","FitContent","ButtonBarInner","wrap","fullHeight","InternalButtonBar","DEFAULT_ICON_SIZE","hideActiveBorder","ButtonGroupParent","thickness","InternalButtonGroup","maintainAspectRatio","Button","activeColor","InternalButtonGroupButton","showTitle","disableScaleEffect","HlsPlayer","posterUrl","controls","muted","autoPlay","playsInline","_videoEl","fatalError","setFatalError","retryableError","setRetryableError","_hlsPolyfillInstance","started","_renderHLSPolyfill","videoEl","Hls","hls","backBufferLength","fragLoadingTimeOut","manifestLoadingTimeOut","levelLoadingTimeOut","maxLiveSyncPlaybackRate","lowLatencyMode","_isLLHLSSupported","attachMedia","Events","MEDIA_ATTACHED","loadSource","FRAG_LOADED","ERROR","_event","fatal","ErrorTypes","NETWORK_ERROR","ErrorDetails","MANIFEST_LOAD_ERROR","response","MANIFEST_LOAD_TIMEOUT","startLoad","MEDIA_ERROR","recoverMediaError","_startHls","masterPlaylistPromise","fetch","default","hlsSupported","isSupported","canPlayType","masterPlaylist","playlistRegexp","exec","matchTwice","playlist_url","URL","href","_renderHLSNative","performance","getEntriesByType","perfEntry","nextHopProtocol","src","play","VideoPlayer","WebRTCPlayer","connection","_peerConnection","_remoteStream","_sessionId","_candidatesList","_unsub","fetchWebRtcSettings","sendMessagePromise","cleanUp","getTracks","track","stop","removeAttribute","load","peerConnection","close","onnegotiationneeded","onicecandidate","oniceconnectionstatechange","onicegatheringstatechange","ontrack","onsignalingstatechange","unsub_call","addTrack","srcObject","_startWebRtc","configuration","RTCPeerConnection","dataChannel","createDataChannel","addWebRtcCandidate","candidateSession","candidate","sendMessage","session_id","startNegotiation","offerOptions","offerToReceiveAudio","offerToReceiveVideo","offer","createOffer","setLocalDescription","candidates","getCandidatesUpfront","resolve","iceGatheringState","pop","handleAnswer","signalingState","remoteDesc","RTCSessionDescription","sdp","answer","setRemoteDescription","err","handleOfferEvent","toJSON","sdpMid","sdpMLineIndex","RTCIceCandidate","addIceCandidate","offer_sdp","subscribeMessage","handleIceCandidate","iceConnectionStateChanged","iceConnectionState","restartIce","log","MediaStream","addTransceiver","direction","localVideo","CameraStream","camera","useCamera","stream","poster","mjpeg","shouldRenderMJPEG","frontend_stream_types","STREAM_TYPE_WEB_RTC","STREAM_TYPE_HLS","StateFabCard","CameraName","DEFAULT_ICON_BUTTON_SIZE","InternalCameraCard","posterUpdateInterval","hideName","headerSensors","hideFooter","hideViewControls","cameraUpdater","loadingIconRef","stateValueRef","_view","setView","supportsLiveStream","_stopUpdateCameraInterval","_startUpdateCameraInterval","refresh","onImageLoad","onImageLoading","onVideoStateChange","innerText","viewButtons","cameraName","cameraCard","CameraCard","triggerDomains","hasContext","context_event_type","context_state","context_message","stripEntityId","InternalLogBookRenderer","hideIndicator","hideHeader","options","logs","useLogs","services","useDevice","_entityClicked","device_id","showMoreLogs","_renderEntity","entityName","hasState","formatTimeWithSecondsMem","second","hourCycle","_formatMessageWithPossibleEntity","seenEntities","possibleEntity","messageParts","messageEnd","splice","shift","possibleEntityName","endsWith","substring","formatDateMem","dateObject","_renderIndicator","_renderUnseenContextSourceEntity","seenEntityIds","context_entity_id","context_entity_id_name","_renderContextMessage","historicStateObj","createHistoricState","localizeStateMessage","context_domain","context_service","triggerMsg","context_source","contextTriggerSource","localizeTriggerSource","context_name","_renderMessage","itemHasContext","source","_renderLogbookItem","previous","currentStateObj","when","timeAgo","toDateString","LogBookRenderer","ModalContainer","ModalInner","ModalOverflow","ModalHeader","ModalBackdrop","InternalModal","backdropProps","headerActions","autocloseSeconds","animationDuration","autocloseRef","containerRef","backdropRef","doClose","removeCurrent","modal","flexShrink","transformOrigin","Updated","getLazyModal","cover","alarm_control_panel","media_player","hideAttributes","headerActionsPosition","hideLogbook","hideDefaultLayout","showLogbook","setShowLogbook","openDevice","childProps","stateRef","LazyModalComponent","defaultChildren","EntityAttributes","VacuumSize","ModeColumn","Push","spin","FanMode","speed","trim","silent","standard","medium","turbo","VacuumToolbar","buttonGroupProps","actions","VacuumControls","isDocked","battery_level","fan_speed","fan_speed_list","internalFanSpeed","setInternalFanSpeed","useDebounce","setFanSpeed","fanSpeedList","shouldShowFanControls","shouldShowBatteryLevel","currentIndex","findIndex","fanSpeed","batteryIconByLevel","Slider","defaultColor","sliderColor","showHandle","SliderHolder","SliderTrackBackground","SliderTrackBar","InternalControlSlider","vertical","onChangeApplied","clampValueToBaseline","trackBarRef","sliderRef","parentRef","inlineValue","boundedValue","valueToPercentage","baseline","percentageToValue","steppedValue","triggerOnChange","updatedValue","_getPercentageFromEvent","xy","y","offset","total","clientHeight","clientWidth","setPressed","pressed","onDrag","dragging","onDragStart","onDragEnd","clientY","drag","filterTaps","Switch","Background","InternalControlToggle","reversed","checked","propChecked","onIcon","_onIcon","offIcon","_offIcon","setChecked","switchRef","_toggle","hasAttribute","MAX_ANGLE","ROTATE_ANGLE","RADIUS","xy2polar","sqrt","phi","atan2","rad2deg","rad","PI","InternalControlSliderCircular","inactive","readonly","dual","_sliderRef","_svgRef","_activeSlider","_lastSlider","localValue","setLocalValue","localLow","setLocalLow","localHigh","setLocalHigh","trackPath","svgArc","lowValue","highValue","isNumber","_setActiveValue","_valueToPercentage","_percentageToValue","_steppedValue","_strokeDashArc","from","to","arc","arcOffset","strokeDasharray","strokeDashOffset","_strokeCircleDashArc","currentStroke","_boundedValue","renderArc","path","limit","_current","showActive","showTarget","activeArc","coloredArc","targetCircle","currentCircle","bound","angle","_findActiveSlider","lowDistance","highDistance","triggerOnChangeApplied","first","last","bounded","stepped","focus","onPointerDown","onPointerUp","hasWindow","getNodeName","node","isNode","getWindow","_node$ownerDocument","getDocumentElement","isElement","isHTMLElement","isShadowRoot","invalidOverflowDisplayValues","isOverflowElement","overflowX","overflowY","getComputedStyle","tableElements","isTableElement","topLayerSelectors","isTopLayer","transformProperties","willChangeValues","containValues","isContainingBlock","elementOrCss","webkit","isWebKit","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","lastTraversableNodeNames","getNodeScroll","getNearestOverflowAncestor","parentNode","getOverflowAncestors","list","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","frameElement","getFrameElement","createCoords","evaluate","param","getSide","getAlignment","getOppositeAxis","axis","getAxisLength","yAxisSides","getSideAxis","getAlignmentAxis","expandPaddingObject","getPaddingObject","rectToClientRect","isClient","noop","useLayoutEffect","SafeReact","useInsertionEffect","useSafeInsertionEffect","useEffectEvent","callback","_len","args","_key","computeCoordsFromPlacement","rtl","reference","floating","sideAxis","alignmentAxis","alignLength","side","isVertical","commonX","commonY","commonAlign","coords","computePosition","strategy","middleware","platform","validMiddleware","rects","statefulPlacement","middlewareData","resetCount","nextX","nextY","reset","detectOverflow","_await$platform$isEle","elements","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","offsetParent","offsetScale","elementClientRect","arrow","arrowDimensions","isYAxis","minProp","maxProp","clientProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","largestPossiblePadding","minPadding","maxPadding","min$1","shouldAddOffset","alignmentOffset","originSides","convertValueToCoords","alignment","mainAxisMulti","crossAxisMulti","rawValue","mainAxis","crossAxis","_middlewareData$offse","_middlewareData$arrow","diffCoords","checkMainAxis","checkCrossAxis","limiter","detectOverflowOptions","mainAxisCoord","crossAxisCoord","minSide","maxSide","limitedCoords","limitShift","rawOffset","computedOffset","limitMin","limitMax","_middlewareData$offse2","isOriginSide","getCssDimensions","getComputedStyle$1","hasOffset","offsetWidth","offsetHeight","shouldFallback","unwrapElement","getScale","domElement","$","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","includeScale","isFixedStrategy","clientRect","scale","visualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","getWindowScrollBarX","leftScroll","getHTMLOffset","documentElement","scroll","htmlRect","convertOffsetParentRelativeRectToViewportRelativeRect","topLayer","offsets","isOffsetParentAnElement","offsetRect","htmlOffset","getClientRects","getDocumentRect","SCROLLBAR_MAX","getViewportRect","visualViewport","visualViewportBased","windowScrollbarX","doc","bodyStyles","bodyMarginInline","clippingStableScrollbarWidth","absoluteOrFixed","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cachedResult","currentContainingBlockComputedStyle","elementIsFixed","computedStyle","currentNodeIsContaining","ancestor","getClippingRect","clippingAncestors","firstClippingAncestor","clippingRect","accRect","getDimensions","getRectRelativeToOffsetParent","setLeftRTLScrollbarOffset","isStaticPositioned","getTrueOffsetParent","polyfill","rawOffsetParent","getOffsetParent","svgOffsetParent","getElementRects","getOffsetParentFn","getDimensionsFn","floatingDimensions","isRTL","rectsAreEqual","a","observeMove","io","root","cleanup","_io","skip","elementRectForRootMargin","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","ratio","autoUpdate","update","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","resizeObserver","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","offset$1","shift$1","arrow$1","limitShift$1","mergedOptions","platformWithCache","computePosition$1","deepEqual","keys","getDPR","roundByDPR","dpr","useLatestRef","useFloating","externalReference","externalFloating","whileElementsMounted","setData","latestMiddleware","setLatestMiddleware","_reference","_setReference","_floating","_setFloating","setReference","referenceRef","setFloating","floatingRef","floatingEl","dataRef","hasWhileElementsMounted","whileElementsMountedRef","platformRef","openRef","fullData","isMountedRef","ReactDOM","refs","floatingStyles","initialStyles","isRef","arrow$2","deps","serverHandoffComplete","genId","useFloatingId","setId","useModernLayoutEffect","useReactId","devMessageSet","warn","_devMessageSet","messages","_devMessageSet2","_devMessageSet3","_len2","_key2","_devMessageSet4","FloatingArrow","tipRadius","strokeWidth","staticOffset","stroke","restStyle","clipPathId","setIsRTL","isVerticalSide","computedStaticOffset","computedStrokeWidth","halfStrokeWidth","svgX","svgY","isCustomShape","yOffsetProp","xOffsetProp","arrowX","arrowY","dValue","rotation","t","createEventEmitter","_map$get","listener","_map$get2","FloatingNodeContext","FloatingTreeContext","useFloatingParentNodeId","_React$useContext","useFloatingTree","useFloatingRootContext","onOpenChangeProp","elementsProp","floatingId","events","nested","optionDomReference","positionReference","setPositionReference","onOpenChange","reason","nodeId","internalRootContext","rootContext","computedElements","_domReference","setDomReference","_setPositionReference","domReference","domReferenceRef","tree","useFloating$1","computedPositionReference","MenuPopup","Parent","MenuItem","arrowRef","menuRef","handleClickOutside","isMenu","contains","isParent","menu","role","fill","RENDER_SIZE","canvasSize","devicePixelRatio","Picker","SAFE_ZONE_FACTOR","polar2xy","cos","sin","drawColorWheel","ctx","minTemp","maxTemp","clearRect","canvas","radius","fraction","rgb2hex","fillStyle","fillRect","InternalColorTempPicker","useLightTemperature","canvasRef","gRef","circleRef","_cursorPosition","isOn","getColoursFromTemperature","rgb","hex","hs","rgb2hs","updateColours","_generateColorWheel","getContext","_getValueFromCoord","_localValue","removeProperty","_getCoordsFromValue","previousX","_getPositionFromEvent","boundingRect","offsetX","offsetY","maxX","maxY","_x","_y","__x","__y","renderSVGFilter","deg2rad","deg","adjustRgb","wv","cw","ww","minKelvin","maxKelvin","colorBrightness","beginPath","cX","cY","startAngle","endAngle","moveTo","closePath","gradient","createRadialGradient","hsv2rgb","addColorStop","ColorPickerWrapper","markerPosition","InternalColorPicker","lightColors","useLightColor","_pressed","coolWhite","warmWhite","hue","saturation","_resetPosition","hex2rgb","_applyColor","_setRgbWColor","RGBWW","rgbwwColor","RGBW","rgbwColor","_adjustColorBrightness","invert","c","_updateColor","RGB","brightnessAdjusted","brightnessAdjust","brightnessPercentage","ajustedRgbColor","Key","Value","Entry","InternalEntityAttributes","memoizedAttributes","Array","isArray","JSON","stringify","memoizedCreateCacheWithContainer","createCache","EmotionProvider","CacheProvider","INFO_COLORS","errorColor","warningColor","successColor","infoColor","alphas","getLuminance","alpha","channel","pow","getContrastColor","generateInfoColors","infoColors","varName","contrastVarName","rgba","generateVariantVars","variants","tint","darkMode","variant","isLight","lightness","contrast","baseLightness","DEFAULT_START_LIGHT","DEFAULT_START_DARK","indexOffset","LIGHT","offsetBackground","DIFF","baseVars","varStyles","generateAccentVars","DARK","generateAllVars","lightVars","darkVars","accentVars","ACCENT","omitXlg","InternalThemeProvider","theme","l","contrastThreshold","globalStyles","emotionCache","themeStore","setTheme","setBreakpoints","setGlobalComponentStyles","_breakpoints","colorScheme","isEqual","breakpointKey","ownerDocument","head","convertToCssVars","merge","defaultTheme","DEFAULT_THEME_OPTIONS","generateColumnBreakpoints","ThemeProvider","Pallette","RangeSliderBox","ThemeControls","setHue","setLight","setTint","setSat","dark","setDark","setContrastThreshold","_theme","_index","shade","ThemeControlsBox","ThemeControlsModal"],"mappings":"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","x_google_ignoreList":[1,41,42,60,61,62,63,64,65,66]}