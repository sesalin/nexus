{"version":3,"file":"climate.js","sources":["../../../../../src/Cards/EntitiesCard/action-types/climate.tsx"],"sourcesContent":["import styled from \"@emotion/styled\";\nimport { localize, isUnavailableState, OFF, useHass } from \"@hakit/core\";\nimport { CLIMATE_PRESET_NONE } from \"../../../Shared/Entity/Climate/ClimateControls/data\";\nimport { StateProps } from \"./types\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  white-space: nowrap;\n\n  .target,\n  .current {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    gap: 0.25rem;\n    justify-content: flex-end;\n  }\n\n  .target {\n    color: var(--ha-S50-contrast);\n  }\n\n  .current {\n    color: var(--ha-S500-contrast);\n  }\n\n  .state-label {\n    font-weight: bold;\n  }\n\n  .unit {\n  }\n`;\n\nexport default function ClimateState({ entity, className, ...rest }: StateProps) {\n  const isUnavailable = isUnavailableState(entity.state);\n  const formatter = useHass((store) => store.formatter);\n  const _computeCurrentStatus = (): string | undefined => {\n    if (entity.attributes.current_temperature != null && entity.attributes.current_humidity != null) {\n      return `${formatter.attributeValue(entity, \"current_temperature\")}/\n      ${formatter.attributeValue(entity, \"current_humidity\")}`;\n    }\n\n    if (entity.attributes.current_temperature != null) {\n      return formatter.attributeValue(entity, \"current_temperature\");\n    }\n\n    if (entity.attributes.current_humidity != null) {\n      return formatter.attributeValue(entity, \"current_humidity\");\n    }\n\n    return undefined;\n  };\n\n  const _localizeState = (): string => {\n    if (isUnavailable) {\n      return localize(\"unavailable\");\n    }\n\n    const stateString = formatter.stateValue(entity);\n\n    if (entity.attributes.hvac_action && entity.state !== OFF) {\n      const actionString = formatter.attributeValue(entity, \"hvac_action\");\n      return `${actionString} (${stateString})`;\n    }\n\n    return stateString;\n  };\n\n  const _computeTarget = (): string => {\n    if (entity.attributes.target_temp_low != null && entity.attributes.target_temp_high != null) {\n      return `${formatter.attributeValue(entity, \"target_temp_low\")}-${formatter.attributeValue(entity, \"target_temp_high\")}`;\n    }\n\n    if (entity.attributes.temperature != null) {\n      return formatter.attributeValue(entity, \"temperature\");\n    }\n    if (entity.attributes.target_humidity_low != null && entity.attributes.target_humidity_high != null) {\n      return `${formatter.attributeValue(entity, \"target_humidity_low\")}-${formatter.attributeValue(entity, \"target_humidity_high\")}`;\n    }\n\n    if (entity.attributes.humidity != null) {\n      return formatter.attributeValue(entity, \"humidity\");\n    }\n\n    return \"\";\n  };\n\n  const currentStatus = _computeCurrentStatus();\n\n  return (\n    <Wrapper className={`action-type-climate ${className}`} {...rest}>\n      <div className=\"target\">\n        {!isUnavailable ? (\n          <>\n            <span className=\"state-label\">\n              {_localizeState()}\n              {entity.attributes.preset_mode && entity.attributes.preset_mode !== CLIMATE_PRESET_NONE ? (\n                <>- {formatter.attributeValue(entity, \"preset_mode\")}</>\n              ) : null}\n            </span>\n            <div className=\"unit\">{_computeTarget()}</div>\n          </>\n        ) : (\n          _localizeState()\n        )}\n      </div>\n      {currentStatus && !isUnavailable ? (\n        <div className=\"current\">\n          {localize(\"currently\")}:<div className=\"unit\">{currentStatus}</div>\n        </div>\n      ) : null}\n    </Wrapper>\n  );\n}\n"],"names":["Wrapper","_styled","process","env","NODE_ENV","target","label","name","styles","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","ClimateState","entity","className","rest","isUnavailable","isUnavailableState","state","formatter","useHass","store","_computeCurrentStatus","attributes","current_temperature","current_humidity","attributeValue","_localizeState","localize","stateString","stateValue","hvac_action","OFF","_computeTarget","target_temp_low","target_temp_high","temperature","target_humidity_low","target_humidity_high","humidity","currentStatus","jsx","jsxs","Fragment","preset_mode","CLIMATE_PRESET_NONE"],"mappings":"slBAKA,MAAMA,EAAOC,EAAAA,aAAA,MAAAC,QAAAC,IAAAC,WAAA,aAAA,CAAAC,OAAA,WAAA,EAAA,CAAAA,OAAA,YAAAC,MAAA,SAAA,CAAA,EAAAJ,QAAAC,IAAAC,WAAA,aAAA,CAAAG,KAAA,SAAAC,OAAA,2SAAA,EAAA,CAAAD,KAAA,SAAAC,OAAA,4SAAAC,SAAAC,CAAA,CAAA,EA+Bb,SAAwBC,EAAa,CAAEC,OAAAA,EAAQC,UAAAA,EAAW,GAAGC,CAAiB,EAAG,CAC/E,MAAMC,EAAgBC,EAAAA,mBAAmBJ,EAAOK,KAAK,EAC/CC,EAAYC,EAAAA,QAASC,GAAUA,EAAMF,SAAS,EAC9CG,EAAwBA,IAA0B,CACtD,GAAIT,EAAOU,WAAWC,qBAAuB,MAAQX,EAAOU,WAAWE,kBAAoB,KACzF,MAAO,GAAGN,EAAUO,eAAeb,EAAQ,qBAAqB,CAAC;AAAA,QAC/DM,EAAUO,eAAeb,EAAQ,kBAAkB,CAAC,GAGxD,GAAIA,EAAOU,WAAWC,qBAAuB,KAC3C,OAAOL,EAAUO,eAAeb,EAAQ,qBAAqB,EAG/D,GAAIA,EAAOU,WAAWE,kBAAoB,KACxC,OAAON,EAAUO,eAAeb,EAAQ,kBAAkB,CAI9D,EAEMc,EAAiBA,IAAc,CACnC,GAAIX,EACF,OAAOY,EAAAA,SAAS,aAAa,EAG/B,MAAMC,EAAcV,EAAUW,WAAWjB,CAAM,EAE/C,OAAIA,EAAOU,WAAWQ,aAAelB,EAAOK,QAAUc,EAAAA,IAE7C,GADcb,EAAUO,eAAeb,EAAQ,aAAa,CAC7C,KAAKgB,CAAW,IAGjCA,CACT,EAEMI,EAAiBA,IACjBpB,EAAOU,WAAWW,iBAAmB,MAAQrB,EAAOU,WAAWY,kBAAoB,KAC9E,GAAGhB,EAAUO,eAAeb,EAAQ,iBAAiB,CAAC,IAAIM,EAAUO,eAAeb,EAAQ,kBAAkB,CAAC,GAGnHA,EAAOU,WAAWa,aAAe,KAC5BjB,EAAUO,eAAeb,EAAQ,aAAa,EAEnDA,EAAOU,WAAWc,qBAAuB,MAAQxB,EAAOU,WAAWe,sBAAwB,KACtF,GAAGnB,EAAUO,eAAeb,EAAQ,qBAAqB,CAAC,IAAIM,EAAUO,eAAeb,EAAQ,sBAAsB,CAAC,GAG3HA,EAAOU,WAAWgB,UAAY,KACzBpB,EAAUO,eAAeb,EAAQ,UAAU,EAG7C,GAGH2B,EAAgBlB,EAAAA,EAEtB,cACGrB,EAAA,CAAQ,UAAW,uBAAuBa,CAAS,GAAI,GAAIC,EAC1D,SAAA,CAAA0B,EAAAA,IAAC,MAAA,CAAI,UAAU,SACZ,SAACzB,EAWAW,IAVAe,EAAAA,KAAAC,WAAA,CACE,SAAA,CAAAD,EAAAA,KAAC,OAAA,CAAK,UAAU,cACbf,SAAAA,CAAAA,EAAAA,EACAd,EAAOU,WAAWqB,aAAe/B,EAAOU,WAAWqB,cAAgBC,EAAAA,oBAClEH,EAAAA,KAAAC,WAAA,CAAE,SAAA,CAAA,KAAGxB,EAAUO,eAAeb,EAAQ,aAAa,CAAA,CAAA,CAAE,EACnD,IAAA,EACN,EACA4B,EAAAA,IAAC,MAAA,CAAI,UAAU,OAAQR,YAAe,CAAE,CAAA,EAC1C,EAIJ,EACCO,GAAiB,CAACxB,EACjB0B,EAAAA,KAAC,MAAA,CAAI,UAAU,UACZd,SAAAA,CAAAA,EAAAA,SAAS,WAAW,EAAE,IAACa,EAAAA,IAAC,MAAA,CAAI,UAAU,OAAQD,SAAAA,CAAAA,CAAc,CAAA,CAAA,CAC/D,EACE,IAAA,EACN,CAEJ"}