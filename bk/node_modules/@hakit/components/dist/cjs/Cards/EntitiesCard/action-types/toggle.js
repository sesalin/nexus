"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("../../../../emotion-react-jsx-runtime.browser.esm-D6BfYa4f.cjs"),f=require("../../../../emotion-styled-base.browser.esm-BenTvX6I.cjs"),c=require("@hakit/core"),l=require("react"),b=require("react-switch");function h(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}const N=f.createStyled("div",process.env.NODE_ENV==="production"?{target:"e1hc5dsg1"}:{target:"e1hc5dsg1",label:"Wrapper"})(process.env.NODE_ENV==="production"?{name:"1e2z4ty",styles:"display:flex;flex-direction:column;justify-content:center;white-space:nowrap"}:{name:"1e2z4ty",styles:"display:flex;flex-direction:column;justify-content:center;white-space:nowrap",toString:h}),w=f.createStyled(b,process.env.NODE_ENV==="production"?{target:"e1hc5dsg0"}:{target:"e1hc5dsg0",label:"StyledSwitch"})(process.env.NODE_ENV==="production"?{name:"88invf",styles:"color:var(--ha-100);.react-switch-bg{background:var(--ha-S100)!important;}&.checked{.react-switch-bg{background:var(--ha-A400)!important;}}"}:{name:"88invf",styles:"color:var(--ha-100);.react-switch-bg{background:var(--ha-S100)!important;}&.checked{.react-switch-bg{background:var(--ha-A400)!important;}}",toString:h});function k({entity:e,className:p,...v}){const t=l.useRef(null),g=c.useHass(r=>r.formatter),u=c.isUnavailableState(e.state),m=e.state===c.ON||e.state===c.OFF||u,[o,a]=l.useState(e.state===c.ON),_=async r=>{const n=c.computeDomain(e.entity_id);let s;n==="lock"?s=r?"unlock":"lock":n==="cover"?s=r?"open_cover":"close_cover":n==="valve"?s=r?"open_valve":"close_valve":s=r?"turn_on":"turn_off";const d=o;a(r),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{a(d)},2e3);try{await e.service[s](),t.current&&clearTimeout(t.current),t.current=null}catch(S){console.error("Error calling service",S),t.current&&clearTimeout(t.current),t.current=null,a(d)}};return l.useEffect(()=>{t.current||o===(e.state===c.ON)||a(e.state===c.ON)},[e.state,o]),i.jsx(N,{className:`action-type-toggle ${p}`,...v,children:m?i.jsx(w,{disabled:u,checked:o,className:`${o?"checked":""}`,onColor:"#fff",offColor:"#fff",checkedIcon:!1,uncheckedIcon:!1,height:20,width:37,onChange:()=>_(!o)}):i.jsx("div",{className:"text-content",children:g.stateValue(e)})})}exports.default=k;
//# sourceMappingURL=toggle.js.map
