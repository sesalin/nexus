{"version":3,"file":"index.js","sources":["../../../../src/hooks/useLightColor/index.ts"],"sourcesContent":["import { useMemo } from \"react\";\nimport { HassEntityWithService, ON, lightSupportsColorMode, getLightCurrentModeRgbColor, rgb2hs, LIGHT_COLOR_MODES } from \"@core\";\n\nexport type UseLightColorReturn = {\n  /** The adjusted brightness color, adjusted to a percentage scale, this will change based on the entity state/attribute values */\n  brightnessAdjusted: number | undefined;\n  /** The white color component of the light. */\n  white: number | undefined;\n  /** The cool white color component of the light. */\n  coolWhite: number | undefined;\n  /** The warm white color component of the light. */\n  warmWhite: number | undefined;\n  /** The brightness of the light's color component. */\n  colorBrightness: number | undefined;\n  /** The hue and saturation values of the light's color component. */\n  hs: [number, number] | undefined;\n};\n\nexport const useLightColor = (entity: HassEntityWithService<\"light\">): UseLightColorReturn => {\n  const brightnessAdjusted = useMemo<number | undefined>(() => {\n    if (entity.state === ON) {\n      if (\n        entity.attributes.color_mode === LIGHT_COLOR_MODES.RGB &&\n        entity.attributes.rgb_color &&\n        !lightSupportsColorMode(entity, LIGHT_COLOR_MODES.RGBWW) &&\n        !lightSupportsColorMode(entity, LIGHT_COLOR_MODES.RGBW)\n      ) {\n        const maxVal = Math.max(...entity.attributes.rgb_color);\n\n        if (maxVal < 255) {\n          return maxVal;\n        }\n      }\n      return undefined;\n    }\n    return undefined;\n  }, [entity]);\n\n  const white = useMemo(() => {\n    const value =\n      entity.state !== ON\n        ? undefined\n        : entity.attributes.color_mode === LIGHT_COLOR_MODES.RGBW && entity.attributes.rgbw_color\n          ? Math.round((entity.attributes.rgbw_color[3] * 100) / 255)\n          : undefined;\n    return value != null ? (value * 255) / 100 : undefined;\n  }, [entity]);\n  const coolWhite = useMemo(() => {\n    const value =\n      entity.state !== ON\n        ? undefined\n        : entity.attributes.color_mode === LIGHT_COLOR_MODES.RGBWW && entity.attributes.rgbww_color\n          ? Math.round((entity.attributes.rgbww_color[3] * 100) / 255)\n          : undefined;\n    return value != null ? (value * 255) / 100 : undefined;\n  }, [entity]);\n  const warmWhite = useMemo(() => {\n    const value =\n      entity.state !== ON\n        ? undefined\n        : entity.attributes.color_mode === LIGHT_COLOR_MODES.RGBWW && entity.attributes.rgbww_color\n          ? Math.round((entity.attributes.rgbww_color[4] * 100) / 255)\n          : undefined;\n    return value != null ? (value * 255) / 100 : undefined;\n  }, [entity]);\n  const currentRgbColor = getLightCurrentModeRgbColor(entity);\n  const colorBrightness = useMemo(() => {\n    const value =\n      entity.state !== ON ? undefined : currentRgbColor ? Math.round((Math.max(...currentRgbColor.slice(0, 3)) * 100) / 255) : undefined;\n    return value != null ? (value * 255) / 100 : undefined;\n  }, [entity, currentRgbColor]);\n  const hs = useMemo(() => {\n    return entity.state !== ON ? undefined : currentRgbColor ? rgb2hs(currentRgbColor.slice(0, 3) as [number, number, number]) : undefined;\n  }, [entity, currentRgbColor]);\n\n  return {\n    brightnessAdjusted,\n    white,\n    coolWhite,\n    warmWhite,\n    colorBrightness,\n    hs,\n  };\n};\n"],"names":["useLightColor","entity","brightnessAdjusted","useMemo","ON","LIGHT_COLOR_MODES","lightSupportsColorMode","maxVal","white","value","coolWhite","warmWhite","currentRgbColor","getLightCurrentModeRgbColor","colorBrightness","hs","rgb2hs"],"mappings":"8dAkBaA,EAAiBC,GAAgE,CAC5F,MAAMC,EAAqBC,EAAAA,QAA4B,IAAM,CAC3D,GAAIF,EAAO,QAAUG,KAAI,CACvB,GACEH,EAAO,WAAW,aAAeI,EAAAA,kBAAkB,KACnDJ,EAAO,WAAW,WAClB,CAACK,EAAAA,uBAAuBL,EAAQI,EAAAA,kBAAkB,KAAK,GACvD,CAACC,EAAAA,uBAAuBL,EAAQI,EAAAA,kBAAkB,IAAI,EACtD,CACA,MAAME,EAAS,KAAK,IAAI,GAAGN,EAAO,WAAW,SAAS,EAEtD,GAAIM,EAAS,IACX,OAAOA,CAEX,CACA,MACF,CAEF,EAAG,CAACN,CAAM,CAAC,EAELO,EAAQL,EAAAA,QAAQ,IAAM,CAC1B,MAAMM,EACJR,EAAO,QAAUG,KACb,OACAH,EAAO,WAAW,aAAeI,EAAAA,kBAAkB,MAAQJ,EAAO,WAAW,WAC3E,KAAK,MAAOA,EAAO,WAAW,WAAW,CAAC,EAAI,IAAO,GAAG,EACxD,OACR,OAAOQ,GAAS,KAAQA,EAAQ,IAAO,IAAM,MAC/C,EAAG,CAACR,CAAM,CAAC,EACLS,EAAYP,EAAAA,QAAQ,IAAM,CAC9B,MAAMM,EACJR,EAAO,QAAUG,KACb,OACAH,EAAO,WAAW,aAAeI,EAAAA,kBAAkB,OAASJ,EAAO,WAAW,YAC5E,KAAK,MAAOA,EAAO,WAAW,YAAY,CAAC,EAAI,IAAO,GAAG,EACzD,OACR,OAAOQ,GAAS,KAAQA,EAAQ,IAAO,IAAM,MAC/C,EAAG,CAACR,CAAM,CAAC,EACLU,EAAYR,EAAAA,QAAQ,IAAM,CAC9B,MAAMM,EACJR,EAAO,QAAUG,KACb,OACAH,EAAO,WAAW,aAAeI,EAAAA,kBAAkB,OAASJ,EAAO,WAAW,YAC5E,KAAK,MAAOA,EAAO,WAAW,YAAY,CAAC,EAAI,IAAO,GAAG,EACzD,OACR,OAAOQ,GAAS,KAAQA,EAAQ,IAAO,IAAM,MAC/C,EAAG,CAACR,CAAM,CAAC,EACLW,EAAkBC,EAAAA,4BAA4BZ,CAAM,EACpDa,EAAkBX,EAAAA,QAAQ,IAAM,CACpC,MAAMM,EACJR,EAAO,QAAUG,EAAAA,GAAK,OAAYQ,EAAkB,KAAK,MAAO,KAAK,IAAI,GAAGA,EAAgB,MAAM,EAAG,CAAC,CAAC,EAAI,IAAO,GAAG,EAAI,OAC3H,OAAOH,GAAS,KAAQA,EAAQ,IAAO,IAAM,MAC/C,EAAG,CAACR,EAAQW,CAAe,CAAC,EACtBG,EAAKZ,EAAAA,QAAQ,IACVF,EAAO,QAAUG,EAAAA,GAAK,OAAYQ,EAAkBI,SAAOJ,EAAgB,MAAM,EAAG,CAAC,CAA6B,EAAI,OAC5H,CAACX,EAAQW,CAAe,CAAC,EAE5B,MAAO,CACL,mBAAAV,EACA,MAAAM,EACA,UAAAE,EACA,UAAAC,EACA,gBAAAG,EACA,GAAAC,CAAA,CAEJ"}