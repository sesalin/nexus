{"version":3,"file":"index.js","sources":["../../../../src/hooks/useLowDevices/index.ts"],"sourcesContent":["import { useMemo } from \"react\";\nimport { useHass } from \"@core\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { useShallow } from \"zustand/shallow\";\n\nexport interface LowDevicesOptions {\n  /** The minimum battery percentage to retrieve @default 0 */\n  min?: number;\n  /** The maximum battery percentage to retrieve @default 20 */\n  max?: number;\n  /** If there's entities returning in the results, that you want to exclude, you can provide a partial entity_id match to exclude it @default [] */\n  blacklist?: string[];\n  /** If there's entities returning in the results, but you only want certain entities, provide a partial entity_id match to include them @default [] */\n  whitelist?: string[];\n}\n\nconst isBattery = (e: HassEntity) => e.attributes.unit_of_measurement === \"%\" && e.attributes.device_class === \"battery\";\n\nexport const useLowDevices = ({ blacklist = [], whitelist = [], min = 0, max = 20 }: LowDevicesOptions = {}): HassEntity[] => {\n  const batteries = useHass(\n    useShallow((state) => {\n      return Object.values(state.entities).filter(isBattery);\n    }),\n  );\n  return useMemo(\n    () =>\n      batteries.filter((entity) => {\n        const meetsThresholds = Number(entity.state) <= max && Number(entity.state) >= min;\n        const isBlacklisted = blacklist.some((blackItem) => entity.entity_id.includes(blackItem));\n        const isWhitelisted = whitelist.length === 0 || whitelist.some((whiteItem) => entity.entity_id.includes(whiteItem));\n        return meetsThresholds && isWhitelisted && !isBlacklisted;\n      }),\n    [blacklist, batteries, max, min, whitelist],\n  );\n};\n"],"names":["isBattery","e","useLowDevices","blacklist","whitelist","min","max","batteries","useHass","useShallow","state","useMemo","entity","meetsThresholds","isBlacklisted","blackItem","isWhitelisted","whiteItem"],"mappings":"2UAgBA,MAAMA,EAAaC,GAAkBA,EAAE,WAAW,sBAAwB,KAAOA,EAAE,WAAW,eAAiB,UAElGC,EAAgB,CAAC,CAAE,UAAAC,EAAY,CAAA,EAAI,UAAAC,EAAY,CAAA,EAAI,IAAAC,EAAM,EAAG,IAAAC,EAAM,EAAA,EAA0B,CAAA,IAAqB,CAC5H,MAAMC,EAAYC,EAAAA,QAChBC,EAAAA,WAAYC,GACH,OAAO,OAAOA,EAAM,QAAQ,EAAE,OAAOV,CAAS,CACtD,CAAA,EAEH,OAAOW,EAAAA,QACL,IACEJ,EAAU,OAAQK,GAAW,CAC3B,MAAMC,EAAkB,OAAOD,EAAO,KAAK,GAAKN,GAAO,OAAOM,EAAO,KAAK,GAAKP,EACzES,EAAgBX,EAAU,KAAMY,GAAcH,EAAO,UAAU,SAASG,CAAS,CAAC,EAClFC,EAAgBZ,EAAU,SAAW,GAAKA,EAAU,KAAMa,GAAcL,EAAO,UAAU,SAASK,CAAS,CAAC,EAClH,OAAOJ,GAAmBG,GAAiB,CAACF,CAC9C,CAAC,EACH,CAACX,EAAWI,EAAWD,EAAKD,EAAKD,CAAS,CAAA,CAE9C"}