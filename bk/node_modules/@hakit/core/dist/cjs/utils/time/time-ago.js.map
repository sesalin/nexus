{"version":3,"file":"time-ago.js","sources":["../../../../src/utils/time/time-ago.ts"],"sourcesContent":["/**\n * Converts an ISO formatted timestamp\n * into a relative time string\n */\nexport function timeAgo(date: Date, languageCode?: string): string {\n  const dateTime = date.getTime();\n\n  if (isNaN(dateTime)) {\n    console.error(\"Invalid timestamp\");\n    return \"unknown\";\n  }\n\n  const formatter = new Intl.RelativeTimeFormat(languageCode, { numeric: \"auto\" });\n\n  let index;\n\n  const units: Array<[Intl.RelativeTimeFormatUnit, number]> = [\n    [\"second\", 60],\n    [\"minute\", 60],\n    [\"hour\", 24],\n    [\"day\", 30],\n    [\"month\", 12],\n    [\"year\", Infinity],\n  ];\n\n  const now = new Date();\n  const diff = (dateTime - now.getTime()) / 1000;\n\n  let diffUnit = Math.abs(diff);\n  for (index = 0; index < units.length; index++) {\n    if (diffUnit < units[index][1]) break;\n    diffUnit /= units[index][1];\n  }\n\n  const output = formatter.format(Math.round(diffUnit) * (diff < 0 ? -1 : 1), units[index][0]);\n  if (output === \"now\") {\n    return \"just now\";\n  }\n  return output;\n}\n"],"names":["timeAgo","date","languageCode","dateTime","formatter","index","units","diff","diffUnit","output"],"mappings":"gFAIO,SAASA,EAAQC,EAAYC,EAA+B,CACjE,MAAMC,EAAWF,EAAK,QAAA,EAEtB,GAAI,MAAME,CAAQ,EAChB,eAAQ,MAAM,mBAAmB,EAC1B,UAGT,MAAMC,EAAY,IAAI,KAAK,mBAAmBF,EAAc,CAAE,QAAS,OAAQ,EAE/E,IAAIG,EAEJ,MAAMC,EAAsD,CAC1D,CAAC,SAAU,EAAE,EACb,CAAC,SAAU,EAAE,EACb,CAAC,OAAQ,EAAE,EACX,CAAC,MAAO,EAAE,EACV,CAAC,QAAS,EAAE,EACZ,CAAC,OAAQ,GAAQ,CAAA,EAIbC,GAAQJ,MADE,KAAA,EACa,QAAA,GAAa,IAE1C,IAAIK,EAAW,KAAK,IAAID,CAAI,EAC5B,IAAKF,EAAQ,EAAGA,EAAQC,EAAM,QACxB,EAAAE,EAAWF,EAAMD,CAAK,EAAE,CAAC,GADOA,IAEpCG,GAAYF,EAAMD,CAAK,EAAE,CAAC,EAG5B,MAAMI,EAASL,EAAU,OAAO,KAAK,MAAMI,CAAQ,GAAKD,EAAO,EAAI,GAAK,GAAID,EAAMD,CAAK,EAAE,CAAC,CAAC,EAC3F,OAAII,IAAW,MACN,WAEFA,CACT"}