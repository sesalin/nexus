{"version":3,"file":"time-ago.js","sources":["../../../../src/utils/time/time-ago.ts"],"sourcesContent":["/**\n * Converts an ISO formatted timestamp\n * into a relative time string\n */\nexport function timeAgo(date: Date, languageCode?: string): string {\n  const dateTime = date.getTime();\n\n  if (isNaN(dateTime)) {\n    console.error(\"Invalid timestamp\");\n    return \"unknown\";\n  }\n\n  const formatter = new Intl.RelativeTimeFormat(languageCode, { numeric: \"auto\" });\n\n  let index;\n\n  const units: Array<[Intl.RelativeTimeFormatUnit, number]> = [\n    [\"second\", 60],\n    [\"minute\", 60],\n    [\"hour\", 24],\n    [\"day\", 30],\n    [\"month\", 12],\n    [\"year\", Infinity],\n  ];\n\n  const now = new Date();\n  const diff = (dateTime - now.getTime()) / 1000;\n\n  let diffUnit = Math.abs(diff);\n  for (index = 0; index < units.length; index++) {\n    if (diffUnit < units[index][1]) break;\n    diffUnit /= units[index][1];\n  }\n\n  const output = formatter.format(Math.round(diffUnit) * (diff < 0 ? -1 : 1), units[index][0]);\n  if (output === \"now\") {\n    return \"just now\";\n  }\n  return output;\n}\n"],"names":["timeAgo","date","languageCode","dateTime","formatter","index","units","diff","diffUnit","output"],"mappings":"AAIO,SAASA,EAAQC,GAAYC,GAA+B;AACjE,QAAMC,IAAWF,EAAK,QAAA;AAEtB,MAAI,MAAME,CAAQ;AAChB,mBAAQ,MAAM,mBAAmB,GAC1B;AAGT,QAAMC,IAAY,IAAI,KAAK,mBAAmBF,GAAc,EAAE,SAAS,QAAQ;AAE/E,MAAIG;AAEJ,QAAMC,IAAsD;AAAA,IAC1D,CAAC,UAAU,EAAE;AAAA,IACb,CAAC,UAAU,EAAE;AAAA,IACb,CAAC,QAAQ,EAAE;AAAA,IACX,CAAC,OAAO,EAAE;AAAA,IACV,CAAC,SAAS,EAAE;AAAA,IACZ,CAAC,QAAQ,KAAQ;AAAA,EAAA,GAIbC,KAAQJ,yBADE,KAAA,GACa,QAAA,KAAa;AAE1C,MAAIK,IAAW,KAAK,IAAID,CAAI;AAC5B,OAAKF,IAAQ,GAAGA,IAAQC,EAAM,UACxB,EAAAE,IAAWF,EAAMD,CAAK,EAAE,CAAC,IADOA;AAEpC,IAAAG,KAAYF,EAAMD,CAAK,EAAE,CAAC;AAG5B,QAAMI,IAASL,EAAU,OAAO,KAAK,MAAMI,CAAQ,KAAKD,IAAO,IAAI,KAAK,IAAID,EAAMD,CAAK,EAAE,CAAC,CAAC;AAC3F,SAAII,MAAW,QACN,aAEFA;AACT;"}