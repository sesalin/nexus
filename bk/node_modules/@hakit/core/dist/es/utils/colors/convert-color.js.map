{"version":3,"file":"convert-color.js","sources":["../../../../src/utils/colors/convert-color.ts"],"sourcesContent":["import { expandHex } from \"./hex\";\n\nconst rgb_hex = (component: number): string => {\n  const hex = Math.round(Math.min(Math.max(component, 0), 255)).toString(16);\n  return hex.length === 1 ? `0${hex}` : hex;\n};\n\n// Conversion between HEX and RGB\n\nexport const hex2rgb = (hex: string): [number, number, number] => {\n  hex = expandHex(hex);\n\n  return [parseInt(hex.substring(0, 2), 16), parseInt(hex.substring(2, 4), 16), parseInt(hex.substring(4, 6), 16)];\n};\n\nexport const rgb2hex = (rgb: [number, number, number]): string => `#${rgb_hex(rgb[0])}${rgb_hex(rgb[1])}${rgb_hex(rgb[2])}`;\n\n// Conversion between LAB, XYZ and RGB from https://github.com/gka/chroma.js\n// Copyright (c) 2011-2019, Gregor Aisch\n\n// Constants for XYZ and LAB conversion\nconst Xn = 0.95047;\nconst Yn = 1;\nconst Zn = 1.08883;\n\nconst t0 = 0.137931034; // 4 / 29\nconst t1 = 0.206896552; // 6 / 29\nconst t2 = 0.12841855; // 3 * t1 * t1\nconst t3 = 0.008856452; // t1 * t1 * t1\n\nconst rgb_xyz = (r: number) => {\n  r /= 255;\n  if (r <= 0.04045) {\n    return r / 12.92;\n  }\n  return ((r + 0.055) / 1.055) ** 2.4;\n};\n\nconst xyz_lab = (t: number) => {\n  if (t > t3) {\n    return t ** (1 / 3);\n  }\n  return t / t2 + t0;\n};\n\nconst xyz_rgb = (r: number) => 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * r ** (1 / 2.4) - 0.055);\n\nconst lab_xyz = (t: number) => (t > t1 ? t * t * t : t2 * (t - t0));\n\n// Conversions between RGB and LAB\n\nconst rgb2xyz = (rgb: [number, number, number]): [number, number, number] => {\n  let [r, g, b] = rgb;\n  r = rgb_xyz(r);\n  g = rgb_xyz(g);\n  b = rgb_xyz(b);\n  const x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / Xn);\n  const y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.072175 * b) / Yn);\n  const z = xyz_lab((0.0193339 * r + 0.119192 * g + 0.9503041 * b) / Zn);\n  return [x, y, z];\n};\n\nexport const rgb2lab = (rgb: [number, number, number]): [number, number, number] => {\n  const [x, y, z] = rgb2xyz(rgb);\n  const l = 116 * y - 16;\n  return [l < 0 ? 0 : l, 500 * (x - y), 200 * (y - z)];\n};\n\nexport const lab2rgb = (lab: [number, number, number]): [number, number, number] => {\n  const [l, a, b] = lab;\n\n  let y = (l + 16) / 116;\n  let x = isNaN(a) ? y : y + a / 500;\n  let z = isNaN(b) ? y : y - b / 200;\n\n  y = Yn * lab_xyz(y);\n  x = Xn * lab_xyz(x);\n  z = Zn * lab_xyz(z);\n\n  const r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z); // D65 -> sRGB\n  const g = xyz_rgb(-0.969266 * x + 1.8760108 * y + 0.041556 * z);\n  const b_ = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n\n  return [r, g, b_];\n};\n\nexport const lab2hex = (lab: [number, number, number]): string => {\n  const rgb = lab2rgb(lab);\n  return rgb2hex(rgb);\n};\n\nexport const rgb2hsv = (rgb: [number, number, number]): [number, number, number] => {\n  const [r, g, b] = rgb;\n  const v = Math.max(r, g, b);\n  const c = v - Math.min(r, g, b);\n  const h = c && (v === r ? (g - b) / c : v === g ? 2 + (b - r) / c : 4 + (r - g) / c);\n  return [60 * (h < 0 ? h + 6 : h), v && c / v, v];\n};\n\nexport const hsv2rgb = (hsv: [number, number, number]): [number, number, number] => {\n  const [h, s, v] = hsv;\n  const f = (n: number) => {\n    const k = (n + h / 60) % 6;\n    return v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  };\n  return [f(5), f(3), f(1)];\n};\n\nexport const rgb2hs = (rgb: [number, number, number]): [number, number] => rgb2hsv(rgb).slice(0, 2) as [number, number];\n\nexport const hs2rgb = (hs: [number, number]): [number, number, number] => hsv2rgb([hs[0], hs[1], 255]);\n"],"names":["rgb_hex","component","hex","hex2rgb","expandHex","rgb2hex","rgb","Xn","Yn","Zn","t0","t1","t2","t3","rgb_xyz","r","xyz_lab","xyz_rgb","lab_xyz","rgb2xyz","g","b","x","y","z","rgb2lab","l","lab2rgb","lab","a","b_","lab2hex","rgb2hsv","v","h","hsv2rgb","hsv","s","f","n","k","rgb2hs","hs2rgb","hs"],"mappings":"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"}