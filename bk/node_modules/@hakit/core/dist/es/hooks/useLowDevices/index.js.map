{"version":3,"file":"index.js","sources":["../../../../src/hooks/useLowDevices/index.ts"],"sourcesContent":["import { useMemo } from \"react\";\nimport { useHass } from \"@core\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { useShallow } from \"zustand/shallow\";\n\nexport interface LowDevicesOptions {\n  /** The minimum battery percentage to retrieve @default 0 */\n  min?: number;\n  /** The maximum battery percentage to retrieve @default 20 */\n  max?: number;\n  /** If there's entities returning in the results, that you want to exclude, you can provide a partial entity_id match to exclude it @default [] */\n  blacklist?: string[];\n  /** If there's entities returning in the results, but you only want certain entities, provide a partial entity_id match to include them @default [] */\n  whitelist?: string[];\n}\n\nconst isBattery = (e: HassEntity) => e.attributes.unit_of_measurement === \"%\" && e.attributes.device_class === \"battery\";\n\nexport const useLowDevices = ({ blacklist = [], whitelist = [], min = 0, max = 20 }: LowDevicesOptions = {}): HassEntity[] => {\n  const batteries = useHass(\n    useShallow((state) => {\n      return Object.values(state.entities).filter(isBattery);\n    }),\n  );\n  return useMemo(\n    () =>\n      batteries.filter((entity) => {\n        const meetsThresholds = Number(entity.state) <= max && Number(entity.state) >= min;\n        const isBlacklisted = blacklist.some((blackItem) => entity.entity_id.includes(blackItem));\n        const isWhitelisted = whitelist.length === 0 || whitelist.some((whiteItem) => entity.entity_id.includes(whiteItem));\n        return meetsThresholds && isWhitelisted && !isBlacklisted;\n      }),\n    [blacklist, batteries, max, min, whitelist],\n  );\n};\n"],"names":["isBattery","e","useLowDevices","blacklist","whitelist","min","max","batteries","useHass","useShallow","state","useMemo","entity","meetsThresholds","isBlacklisted","blackItem","isWhitelisted","whiteItem"],"mappings":";;;;;;;;AAgBA,MAAMA,IAAY,CAACC,MAAkBA,EAAE,WAAW,wBAAwB,OAAOA,EAAE,WAAW,iBAAiB,WAElGC,IAAgB,CAAC,EAAE,WAAAC,IAAY,CAAA,GAAI,WAAAC,IAAY,CAAA,GAAI,KAAAC,IAAM,GAAG,KAAAC,IAAM,GAAA,IAA0B,CAAA,MAAqB;AAC5H,QAAMC,IAAYC;AAAA,IAChBC,EAAW,CAACC,MACH,OAAO,OAAOA,EAAM,QAAQ,EAAE,OAAOV,CAAS,CACtD;AAAA,EAAA;AAEH,SAAOW;AAAA,IACL,MACEJ,EAAU,OAAO,CAACK,MAAW;AAC3B,YAAMC,IAAkB,OAAOD,EAAO,KAAK,KAAKN,KAAO,OAAOM,EAAO,KAAK,KAAKP,GACzES,IAAgBX,EAAU,KAAK,CAACY,MAAcH,EAAO,UAAU,SAASG,CAAS,CAAC,GAClFC,IAAgBZ,EAAU,WAAW,KAAKA,EAAU,KAAK,CAACa,MAAcL,EAAO,UAAU,SAASK,CAAS,CAAC;AAClH,aAAOJ,KAAmBG,KAAiB,CAACF;AAAA,IAC9C,CAAC;AAAA,IACH,CAACX,GAAWI,GAAWD,GAAKD,GAAKD,CAAS;AAAA,EAAA;AAE9C;"}