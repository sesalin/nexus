import { useState as f, useRef as b, useMemo as d, useEffect as h } from "react";
import "lodash";
import { W as E } from "../../../index-1tDtVGr2.js";
import "../useLocale/locales/index.js";
import "home-assistant-js-websocket";
import "@iconify/react";
import "use-debounce";
import "../../utils/date.js";
const z = (s) => {
  const n = E((o) => o.connection), [i, e] = f(null), t = b(null), c = d(() => s, [s]);
  return h(() => {
    const o = () => {
      if (t.current)
        try {
          t.current();
        } catch {
        } finally {
          t.current = null;
        }
    }, { enabled: u = !0, ...m } = c;
    if (!u || !n) {
      o(), u || e(null);
      return;
    }
    const a = (r) => {
      if ("error" in r) {
        console.error("Error processing template:", r.error), e(r.error);
        return;
      }
      e((l) => l === r.result ? l : r.result);
    }, p = (r) => {
      console.error("Error processing template:", r), e(r?.error || "Could not process template request.");
    };
    return n.subscribeMessage(a, {
      type: "render_template",
      ...m
    }).then((r) => {
      t.current = r;
    }).catch((r) => {
      console.error("Error subscribing to template:", r), p(r);
    }), o;
  }, [n, c]), i;
};
export {
  z as useTemplate
};
//# sourceMappingURL=index.js.map
